/**
* This file was auto-generated by SAP Web IDE build and includes all
* the source files required by SAPUI5 runtime for performance optimization.
* PLEASE DO NOT EDIT THIS FILE!! Changes will be overwritten the next time the build is run.
*/
jQuery.sap.registerPreloadedModules({
	"version": "2.0",
	"name": "com/goap/cfms/works/as/Component-preload",
	"modules": {
		"com/goap/cfms/works/as/Component-dbg.js": "sap.ui.define([\r\n\t\"sap/ui/core/UIComponent\",\r\n\t\"com/goap/cfms/works/reuselib/componentInit\",\r\n\t\"com/goap/cfms/works/reuselib/WorksDraft\",\r\n\t\"sap/ui/model/json/JSONModel\",\r\n\t\"com/goap/cfms/works/reuselib/HashSync\",\r\n\t\"com/goap/cfms/works/as/model/AppModel\",\r\n\t\"sap/m/MessagePopover\",\r\n\t\"sap/m/MessagePopoverItem\"\r\n], function (UIComponent,\r\n\tcomponentInit,\r\n\tWorksDraft,\r\n\tJSONModel,\r\n\tHashSync,\r\n\tAppModel,\r\n\tMessagePopover,\r\n\tMessagePopoverItem) {\r\n\t\t\"use strict\";\r\n\r\n\t\treturn UIComponent.extend(\"com.goap.cfms.works.as.Component\", {\r\n\r\n\t\t\tmetadata: {\r\n\t\t\t\tmanifest: \"json\",\r\n\t\t\t\t\"config\": {\r\n\t\t\t\t\t\"fullWidth\": true\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * The component is initialized by UI5 automatically during the startup of the app and calls the init method once.\r\n\t\t\t * In this function, the FLP and device models are set and the router is initialized.\r\n\t\t\t * @public\r\n\t\t\t * @override\r\n\t\t\t */\r\n\t\t\tinit: function () {\r\n\t\t\t\t// call the base component's init function\r\n\t\t\t\tUIComponent.prototype.init.apply(this, arguments);\r\n\t\t\t\t\r\n\t\t\t\tjQuery.sap.includeStyleSheet(jQuery.sap.getModulePath(\"com.goap.cfms.works.reuselib.css\") + \"/style.css\");\r\n\t\t\t\t//Initialize MessageManager\r\n\t\t\t\t//this.messageManager = sap.ui.getCore().getMessageManager();\r\n\r\n\t\t\t\t\t//Implement Message Manager\r\n\t\t\t\tsap.ui.getCore().getMessageManager().registerObject(this, true);\r\n\t\t\t\tvar oMessageTemplate = new MessagePopoverItem({\r\n\t\t\t\t\ttype: \"{type}\",\r\n\t\t\t\t\ttitle: \"{message}\",\r\n\t\t\t\t\tdescription: \"{additionalText} {description} {code} {target}\",\r\n\t\t\t\t\tsubtitle: \"{code}\"\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.oMessagePopover = new MessagePopover({\r\n\t\t\t\t\tshowHeader: false,\r\n\t\t\t\t\titems: {\r\n\t\t\t\t\t\tpath: \"/\",\r\n\t\t\t\t\t\ttemplate: oMessageTemplate\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tthis.contentDensity = \"sapUiSizeCompact\";\r\n\t\t\t\t\r\n\t\t\t\tthis.oMessagePopover.setModel(sap.ui.getCore().getMessageManager().getMessageModel());\r\n\t\t\t\t\r\n\t\t\t\tthis.getModel().attachBatchRequestCompleted(function() {\r\n\t\t\t\t\tsap.ui.getCore().getMessageManager().getMessageModel().fireMessageChange();\r\n\t\t\t\t});\r\n\t\t\t\t//initialize reused component\r\n\t\t\t\tcomponentInit.init(this);\r\n\r\n\t\t\t\t// set the app model\r\n\t\t\t\tif (sap.ushell) {\r\n\t\t\t\t\tvar oAppModel = new AppModel(this.getComponentData().startupParameters);\r\n\t\t\t\t\tthis.setModel(oAppModel, \"appProperties\");\r\n\t\t\t\t}\r\n\t\t\t\t//attach Draft Object\r\n\t\t\t\tthis.oDraft = new WorksDraft({\r\n\t\t\t\t\tcomponent: this\r\n\t\t\t\t});\r\n\t\t\t\t//Initialize App State\r\n\t\t\t\tthis._initializeAppState();\r\n\t\t\t\t// synch the hash BEFORE initializing the router\r\n\t\t\t\tvar oHashSync = new HashSync({\r\n\t\t\t\t\tcomponent: this,\r\n\t\t\t\t\tmessage: this.message\r\n\t\t\t\t});\r\n\t\t\t\toHashSync.synch();\r\n\r\n\t\t\t\t\r\n\t\t\t\t// create the views based on the url/hash\r\n\t\t\t\tthis.getRouter().initialize();\r\n\t\t\t\t\r\n\t\t\t/*\tif(sap.ui.getCore().getModel(\"ZWRKGlobalModel\") !== undefined){\r\n                \tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bUserCanEdit\", false);\r\n                \tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bUserCreateAS\", false);\r\n                \tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/EST/bAddNewEST\", false);\r\n\t\t\t\t}else{\r\n                \twindow.location.hash = \"#ZWorks-AdminstrativeSanction\";\r\n                \tthis.worksGlobalModel();\r\n                }*/\r\n                \r\n            \t\r\n                if (sap.ui.getCore().getModel(\"ZWRKGlobalModel\").getProperty(\"/AS/bBrowserRefresh\")) {\r\n                \tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/SessionGuid\", \"00000000-0000-0000-0000-000000000000\");\r\n                \tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bBrowserRefresh\", false);\r\n                \tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/EST/bBrowserRefresh\", false);\r\n                \tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bUserCanEdit\", false);\r\n\t            \tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bUserCreateAS\", false);\r\n\t            \tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/EST/bAddNewEST\", false);\r\n\t            \tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bNavtoAsfromDocFlow\", false);\r\n\t            \r\n\t            \tif (this.getComponentData().startupParameters) {\r\n\t            \t\tif (!this.getComponentData().startupParameters.Mode) {\r\n\t            \t\t\twindow.location.hash = \"#ZWorks-AdminstrativeSanction\";\r\n\t            \t\t}\r\n\t            \t}\r\n                }\r\n                \r\n               /* if(sap.ui.getCore().getModel(\"ZWRKGlobalModel\").getProperty(\"/AS/bBrowserRefresh\")){\r\n                \tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").getProperty(\"/AS/bBrowserRefresh\", false);\r\n                \twindow.location.hash = \"#ZWorks-AdminstrativeSanction\";\r\n                }else{\r\n                \tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bUserCanEdit\", false);\r\n\t            \tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bUserCreateAS\", false);\r\n\t            \tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/EST/bAddNewEST\", false);\r\n                }*/\r\n\t\t\t},\r\n\r\n\t\t\t_initializeAppState : function(){\r\n\t\t\t\tthis.oAppStateModel = new sap.ui.model.json.JSONModel({\r\n\t\t\t\t\tappState : \"\"\r\n\t\t\t\t});\r\n\t\t\t\tthis.setModel(this.oAppStateModel, \"appState\");\r\n\t\r\n\t\t\t\tsap.ushell.Container.getService(\"CrossApplicationNavigation\").getStartupAppState(this).done(function (oStartupAppStateContainer) {\r\n\t\t\t\t\tvar data = oStartupAppStateContainer.getData();\r\n\t\t\t\t\tif (data) {\r\n\t\t\t\t\t\tthis.oAppStateModel.setProperty(\"/appState\", data || \"\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}.bind(this));\r\n\t\t\t},\r\n\r\n\t\t\tdestroy: function () {\r\n\t\t\t\tcomponentInit.destroy(this);\r\n\t\t\t\t// call the base component's destroy function\r\n\t\t\t\tUIComponent.prototype.destroy.apply(this, arguments);\r\n\t\t\t},\r\n\r\n\t\t\tgetContentDensityClass : function() {\r\n\t\t\t\tif (!this.contentDensity) {\r\n\t\t\t\t\t\tthis.contentDensity = \"sapUiSizeCompact\";\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.contentDensity = \"sapUiSizeCozy\";\r\n\t\t\t\t\t}\r\n\t\t\t\treturn this.contentDensity;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tworksGlobalModel: function(){\r\n\t\t\t\tvar oData = {\r\n\t\t\t\t\tAS: {},\r\n\t\t\t\t\tTS: {},\r\n\t\t\t\t\tAGR: {},\r\n\t\t\t\t\tEST: {},\r\n\t\t\t\t\tMB: {},\r\n\t\t\t\t\tLF: {},\r\n\t\t\t\t\tCommon: {}\r\n\t\t\t\t};\r\n\t\t\t\tvar oGlobalModel = new sap.ui.model.json.JSONModel(oData);\r\n\t\t\t\t//this.setModel(oGlobalModel, \"zWorksGlobalMModel\");\r\n\t\t\t\tsap.ui.getCore().setModel(oGlobalModel, \"ZWRKGlobalModel\");\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t});",
		"com/goap/cfms/works/as/model/formatter-dbg.js": "sap.ui.define([\r\n    \"com/goap/cfms/works/reuselib/formatter\",\r\n    \"sap/ui/core/format/NumberFormat\",\r\n    \"sap/m/Token\"\r\n], function (\r\n    Formatter,\r\n    NumberFormat,\r\n    Token\r\n) {\r\n    \"use strict\";\r\n\r\n    return  {\r\n    \tgoAmountInput: function(value){\r\n    \t\tif (value == '0.000' || value == '0.00') {\r\n    \t\t\treturn '';\r\n    \t\t} else {\r\n    \t\t\treturn value;\r\n    \t\t}\r\n    \t},\r\n    \tgoAmountInputEditable: function(value){\r\n    \t\tif (value == '0.000' || value == '0.00') {\r\n    \t\t\treturn true;\r\n    \t\t} else {\r\n    \t\t\treturn false;\r\n    \t\t}\r\n    \t},\r\n    \tsancNoInput  : function(value){\r\n    \t\tif (value == '0000') {\r\n    \t\t\treturn '';\r\n    \t\t} else {\r\n    \t\t\treturn value;\r\n    \t\t}\r\n    \t},\r\n    \tsancNoInputEditable: function(value){\r\n    \t\t\r\n    \t},\r\n        formatAmount: function(amount){\r\n            var oNumberFormatInstance = NumberFormat.getFloatInstance({\r\n                minIntegerDigits: 1,\r\n                maxIntegerDigits: 10,\r\n                minFractionDigits: 2,\r\n                maxFractionDigits: 2,\r\n                decimals : 2,\r\n                groupingEnabled: true,\r\n                shortLimit: 3,\r\n                style : \"standard\",\r\n                pattern : \"#,##,##,##,###.00\"\r\n            }, sap.ui.getCore().getConfiguration().getLocale());\r\n            // if(amount/10000000 >= 1){ \r\n            //     return oNumberFormatInstance.format(amount/10000000) + \" Cr\";\r\n            // } else \r\n            // if(amount/100000 >= 1) {\r\n            //     return oNumberFormatInstance.format(amount/100000) + \" Lakhs\";\r\n            // } else if(amount/1000 >= 1) {\r\n            //     return oNumberFormatInstance.format(amount/1000) + \" K\";\r\n            // } else {\r\n            //     return oNumberFormatInstance.format(amount);\r\n            // }\r\n            return oNumberFormatInstance.format( amount / 100000 ) + \" Lakhs\";\r\n        },\r\n        getSerialNo: function(sCheckId){\r\n            var serialNo;\r\n            if (!serialNo) {\r\n                serialNo = 0;\r\n            } else {\r\n                serialNo++;\r\n            }\r\n            return serialNo;\r\n        },\r\n        formatDistrict: function(sLocation, sValue){\r\n           var aFirstIteration = [],\r\n                aNewTokens = [],\r\n                oControl = this.getView().byId(\"idSelectDistrict\");\r\n                if (sLocation && sValue === \"D\") {\r\n                    aFirstIteration = sLocation.split(\"$\");\r\n                        for (var i = 0; i < aFirstIteration.length; i ++) {\r\n                            var skey, aLocDesc = aFirstIteration[i].split(\"^\");\r\n                            if (aLocDesc[0].indexOf(\"#\") !== -1) {\r\n                                skey =  aLocDesc[0].split(\"#\")[1];\r\n                            } else {\r\n                                skey = aLocDesc[0];\r\n                            }\r\n                            if (aLocDesc[1]) {\r\n                                aNewTokens.push(new Token({text: aLocDesc[1], key: skey}));\r\n                            }\r\n                    }\r\n                }\r\n                oControl.setTokens(aNewTokens); \r\n            if (aNewTokens.length > 0) {\r\n              //  this.getModel('location').setProperty(\"/bRDistrict\", true);\r\n                this.getModel(\"location\").setProperty(\"/vDistrict\", true);\r\n            }\r\n            return \"\";    \r\n        },\r\n        formatMandal: function(sLocation, sValue){\r\n            var aFirstIteration = [],\r\n            aNewTokens = [],\r\n            oControl = this.getView().byId(\"idSelectMandal\");\r\n            if (sLocation && sValue === \"M\") {\r\n                aFirstIteration = sLocation.split(\"$\");\r\n                for (var i = 0; i < aFirstIteration.length; i ++) {\r\n                        var skey, aLocDesc = aFirstIteration[i].split(\"^\");\r\n                        if (aLocDesc[0].indexOf(\"#\") !== -1) {\r\n                            skey =  aLocDesc[0].split(\"#\")[1];\r\n                        } else {\r\n                            skey = aLocDesc[0];\r\n                        }\r\n                        if (aLocDesc[1]) {\r\n                            aNewTokens.push(new Token({text: aLocDesc[1], key: skey}));\r\n                        }\r\n                }\r\n            }\r\n            oControl.setTokens(aNewTokens); \r\n            if (aNewTokens.length > 0) {\r\n                this.getModel(\"location\").setProperty(\"/vMandal\", true);\r\n            }\r\n            return \"\"; \r\n        },\r\n        formatVillage: function(sLocation, sValue){\r\n            var aFirstIteration = [],\r\n            aNewTokens = [],\r\n            oControl = this.getView().byId(\"idSelectVillage\");\r\n            if (sLocation && sValue === \"V\") {\r\n                aFirstIteration = sLocation.split(\"$\");\r\n                    for (var i = 0; i < aFirstIteration.length; i ++) {\r\n                        var skey, aLocDesc = aFirstIteration[i].split(\"^\");\r\n                            if (aLocDesc[0].indexOf(\"#\") !== -1) {\r\n                                skey =  aLocDesc[0].split(\"#\")[1];\r\n                            } else {\r\n                                skey = aLocDesc[0];\r\n                            }\r\n                        if (aLocDesc[1]) {\r\n                            aNewTokens.push(new Token({text: aLocDesc[1], key: skey}));\r\n                        }    \r\n                    }\r\n            }\r\n            oControl.setTokens(aNewTokens); \r\n            if (aNewTokens.length > 0) {\r\n                this.getModel(\"location\").setProperty(\"/vVillage\", true);\r\n            }\r\n            return \"\"; \r\n        },\r\n        formatLoksabha: function(sConstituency){\r\n            var aFirstIteration = [],\r\n            aNewTokens = [],\r\n            oControl = this.getView().byId(\"idMultiInputLoksabha\");\r\n            if (sConstituency) {\r\n                aFirstIteration = sConstituency.split(\"$\");\r\n                    for (var i = 0; i < aFirstIteration.length; i ++) {\r\n                        var skey, aLocDesc = aFirstIteration[i].split(\"^\");\r\n                            if (aLocDesc[0].indexOf(\"#\") !== -1) {\r\n                                skey =  aLocDesc[0].split(\"#\")[1];\r\n                            } else {\r\n                                skey = aLocDesc[0];\r\n                            }\r\n                            if (aLocDesc[1]) {\r\n                                aNewTokens.push(new Token({text: aLocDesc[1], key: skey}));\r\n                            }\r\n                   }\r\n            }\r\n            oControl.setTokens(aNewTokens); \r\n            if (aNewTokens.length > 0) {\r\n                this.getModel(\"location\").setProperty(\"/vLoksabha\", true);\r\n            }\r\n            return \"\";  \r\n        },\r\n        formatAssembly: function(sConstituency){\r\n            var aFirstIteration = [],\r\n            aNewTokens = [],\r\n            oControl = this.getView().byId(\"idMultiInputAssembly\");\r\n            if (sConstituency) {\r\n                aFirstIteration = sConstituency.split(\"$\");\r\n                \r\n                    for (var i = 0; i < aFirstIteration.length; i ++) {\r\n                        var skey, aLocDesc = aFirstIteration[i].split(\"^\");\r\n                        if (aLocDesc[0].indexOf(\"#\") !== -1) {\r\n                            skey =  aLocDesc[0].split(\"#\")[1];\r\n                        } else {\r\n                            skey = aLocDesc[0];\r\n                        }\r\n                        if (aLocDesc[1]) {\r\n                            aNewTokens.push(new Token({text: aLocDesc[1], key: skey}));\r\n                        }\r\n\r\n                    }\r\n            }\r\n            oControl.setTokens(aNewTokens); \r\n            if (aNewTokens.length > 0) {\r\n                this.getModel(\"location\").setProperty(\"/vAssembly\", true);\r\n            }\r\n            return \"\"; \r\n        },\r\n        _getSaveVisibility: function(sDraftState, sViewState, sRole){\r\n            var bSaveVisible = false;\r\n                if (sDraftState !== \"X\" && sViewState !== \"D\" && sRole === \"M\") {\r\n                    bSaveVisible = true;\r\n                }\r\n            return bSaveVisible;\r\n        },\r\n        _getSubmitVisibility: function(sDraftState, sViewState, sSubmitBtnVisibility){\r\n            var bSaveVisible = false;\r\n            if (sDraftState === \"X\" && sViewState !== \"D\" && sSubmitBtnVisibility === \"X\") {\r\n                bSaveVisible = true;\r\n            }\r\n            return bSaveVisible;\r\n        },\r\n        _getNextLevelVisibility: function(sViewState, sRole) {\r\n            var bSaveVisible = false;\r\n            if (sViewState === \"E\" && (sRole === \"C\" || sRole === \"QC\")) {\r\n                bSaveVisible = true;\r\n            }\r\n            return bSaveVisible;\r\n        },\r\n        _getApproverVisibility: function(sViewState, sRole) {\r\n            var bSaveVisible = false;\r\n            if (sViewState === \"E\" && sRole === \"A\") {\r\n                bSaveVisible = true;\r\n            }\r\n            return bSaveVisible;\r\n        },\r\n        _getReturnVisibility: function(sViewState, sRole) {\r\n            var bSaveVisible = false;\r\n            if (sViewState === \"E\" && (sRole === \"A\" || sRole === \"C\" || sRole === \"QC\")) {\r\n                bSaveVisible = true;\r\n            }\r\n            return bSaveVisible;\r\n        },\r\n        _getCancelVisibility: function(sViewState, sRole) {\r\n            var bSaveVisible = false;\r\n            if (sViewState !== \"D\" && sRole === \"M\") {\r\n                bSaveVisible = true;\r\n            }\r\n            return bSaveVisible;\r\n        },\r\n\r\n        _statusformat: function(sStatus){\r\n            var sHtmlText = \"\";\r\n                if (sStatus === \"Draft\") {\r\n                    sHtmlText = \"<p style=\\\"color:orange;font-size:22px;margin-top: 4px;\\\">\" + sStatus + \"</p>\";\r\n                } else if ( sStatus === \"In Process\") {\r\n                    sHtmlText = \"<p style=\\\"color:orange;font-size:22px;margin-top: 4px;\\\">\" + sStatus + \"</p>\";\r\n                } else if (sStatus === \"Returned\") {\r\n                    sHtmlText = \"<p style=\\\"color:red;font-size:22px;margin-top: 4px;\\\">\" + sStatus + \"</p>\";\r\n                } else if (sStatus === \"Approved\") {\r\n                    sHtmlText = \"<p style=\\\"color:green;font-size:22px;margin-top: 4px;\\\">\" + sStatus + \"</p>\";\r\n                } else {\r\n                    sHtmlText = \"<p style=\\\"font-size:22px;margin-top: 4px;\\\">\" + sStatus + \"</p>\";\r\n                }\r\n            return sHtmlText;\r\n        },\r\n\r\n        _roleIconformat: function(sRole){\r\n            var sIconName;\r\n            if (sRole === \"M\") {\r\n                sIconName = \"sap-icon://write-new\";\r\n            } else if (sRole === \"C\") {\r\n                sIconName = \"sap-icon://detail-view\";\r\n            } else if (sRole === \"A\") {\r\n                sIconName = \"sap-icon://approvals\";\r\n            }\r\n            return sIconName;\r\n        },\r\n\r\n        _laneStateFormat: function(sStatus){\r\n            var sState = [{\r\n\t\t\t\t\"state\": \"\",\r\n\t\t\t\t\"value\": 100\r\n            }];\r\n            \r\n            if (sStatus === \"COMPLETED\") {\r\n                sState[0].state = \"Positive\";\r\n            } else if (sStatus === \"READY\") {\r\n                sState[0].state = \"Critical\";\r\n            } else {\r\n                sState[0].state = \"Neutral\";\r\n            }\r\n            return sState;\r\n        },\r\n        \r\n        getEstimationLink: function(sEstGuid){\r\n            var oCrossAppNavigator = sap.ushell.Container.getService(\"CrossApplicationNavigation\");\r\n\t\t\t// var hash = (oCrossAppNavigator && oCrossAppNavigator.hrefForExternal({\r\n\t\t\t// \ttarget:{\r\n\t\t\t// \t\tsemanticObject: \"ZWorks\",\r\n\t\t\t// \t\taction: \"estimation\"\r\n\t\t\t// \t}\r\n            // })) || \"\";\r\n            var sLink = oCrossAppNavigator.hrefForExternal({\r\n            //    target : { shellHash : \"ZWorks-estimation&/Detail/\" + sEstGuid + \"/\" +sRefGuid + \"/D/ZDE/xapp\" }\r\n            target : { shellHash : \"ZWorks-estimation&/Detail/\" + sEstGuid + \"/D/ZDE/xapp\" }\r\n              });\r\n\t\t\t//var sLink = oCrossAppNavigator.hrefForAppSpecificHash(\"Detail/\" + sEstId + \"/D/ZDE\");\r\n            return sLink;\r\n        },\r\n\r\n        _removeZeroes: function(sValue){\r\n            var sRetVal;\r\n            if (sValue) {\r\n                sRetVal = sValue.replace(/^0+/, \"\");\r\n            }\r\n            return sRetVal;\r\n        },\r\n        _addVersion: function(sVersion){\r\n            if (sVersion) {\r\n                var sVersionText = this.getModel(\"i18n\").getResourceBundle().getText(\"master.list.item.version\");\r\n                return sVersionText + \": \" + sVersion;\r\n            } else {\r\n                return \"\";\r\n            }\r\n        },\r\n        getProcessIndState: function(state){\r\n            var sState = \"\";\r\n            if (state <= 50) {\r\n                sState = \"Success\";\r\n            } else if (state > 50 && state <= 75) {\r\n                sState = \"Warning\";\r\n            } else {\r\n                sState = \"Error\";\r\n            }\r\n            return sState;\r\n        },\r\n        getPercentage: function(percentage){\r\n            return parseFloat(percentage);\r\n        },\r\n        digitialFilePath : function(v) {\r\n            var path = \"\";\r\n            if (v){\r\n            \tpath = jQuery.sap.getModulePath(\"com.goap.cfms.works.as\", \"/Image/info.png\");\r\n            } else {\r\n            \t path = jQuery.sap.getModulePath(\"com.goap.cfms.works.as\", \"/Image/check.png\");\r\n            }\r\n        return path;\r\n     }\r\n        /**\r\n         * Formatter function to make the URL for External navigation\r\n         */\r\n        // _setURLForNav: function(semObj, sAction, sGuid){\r\n        //     var sUrl = \"#\" + semObj + \"-\" + sAction;\r\n        //     return sUrl;\r\n        // }\r\n    };\r\n});",
		"com/goap/cfms/works/as/model/AppModel-dbg.js": "sap.ui.define([\r\n    \"sap/ui/model/json/JSONModel\"\r\n], function (\r\n    JSONModel\r\n) {\r\n    \"use strict\";\r\n\r\n    return JSONModel.extend(\"com.goap.cfms.works.as.AppModel\", {\r\n\r\n        constructor : function (startupParams) {\r\n\r\n            // create data\r\n            var oData = {\r\n                viewTypeEdit: false\r\n            };\r\n\r\n            // call super constructor\r\n            JSONModel.call(this, oData);\r\n        }\r\n\r\n    });\r\n});",
		"com/goap/cfms/works/as/model/AppModel.js": "sap.ui.define([\r\n    \"sap/ui/model/json/JSONModel\"\r\n], function (\r\n    JSONModel\r\n) {\r\n    \"use strict\";\r\n\r\n    return JSONModel.extend(\"com.goap.cfms.works.as.AppModel\", {\r\n\r\n        constructor : function (startupParams) {\r\n\r\n            // create data\r\n            var oData = {\r\n                viewTypeEdit: false\r\n            };\r\n\r\n            // call super constructor\r\n            JSONModel.call(this, oData);\r\n        }\r\n\r\n    });\r\n});",
		"com/goap/cfms/works/as/model/formatter.js": "sap.ui.define([\r\n    \"com/goap/cfms/works/reuselib/formatter\",\r\n    \"sap/ui/core/format/NumberFormat\",\r\n    \"sap/m/Token\"\r\n], function (\r\n    Formatter,\r\n    NumberFormat,\r\n    Token\r\n) {\r\n    \"use strict\";\r\n\r\n    return  {\r\n    \tgoAmountInput: function(value){\r\n    \t\tif (value == '0.000' || value == '0.00') {\r\n    \t\t\treturn '';\r\n    \t\t} else {\r\n    \t\t\treturn value;\r\n    \t\t}\r\n    \t},\r\n    \tgoAmountInputEditable: function(value){\r\n    \t\tif (value == '0.000' || value == '0.00') {\r\n    \t\t\treturn true;\r\n    \t\t} else {\r\n    \t\t\treturn false;\r\n    \t\t}\r\n    \t},\r\n    \tsancNoInput  : function(value){\r\n    \t\tif (value == '0000') {\r\n    \t\t\treturn '';\r\n    \t\t} else {\r\n    \t\t\treturn value;\r\n    \t\t}\r\n    \t},\r\n    \tsancNoInputEditable: function(value){\r\n    \t\t\r\n    \t},\r\n        formatAmount: function(amount){\r\n            var oNumberFormatInstance = NumberFormat.getFloatInstance({\r\n                minIntegerDigits: 1,\r\n                maxIntegerDigits: 10,\r\n                minFractionDigits: 2,\r\n                maxFractionDigits: 2,\r\n                decimals : 2,\r\n                groupingEnabled: true,\r\n                shortLimit: 3,\r\n                style : \"standard\",\r\n                pattern : \"#,##,##,##,###.00\"\r\n            }, sap.ui.getCore().getConfiguration().getLocale());\r\n            // if(amount/10000000 >= 1){ \r\n            //     return oNumberFormatInstance.format(amount/10000000) + \" Cr\";\r\n            // } else \r\n            // if(amount/100000 >= 1) {\r\n            //     return oNumberFormatInstance.format(amount/100000) + \" Lakhs\";\r\n            // } else if(amount/1000 >= 1) {\r\n            //     return oNumberFormatInstance.format(amount/1000) + \" K\";\r\n            // } else {\r\n            //     return oNumberFormatInstance.format(amount);\r\n            // }\r\n            return oNumberFormatInstance.format( amount / 100000 ) + \" Lakhs\";\r\n        },\r\n        getSerialNo: function(sCheckId){\r\n            var serialNo;\r\n            if (!serialNo) {\r\n                serialNo = 0;\r\n            } else {\r\n                serialNo++;\r\n            }\r\n            return serialNo;\r\n        },\r\n        formatDistrict: function(sLocation, sValue){\r\n           var aFirstIteration = [],\r\n                aNewTokens = [],\r\n                oControl = this.getView().byId(\"idSelectDistrict\");\r\n                if (sLocation && sValue === \"D\") {\r\n                    aFirstIteration = sLocation.split(\"$\");\r\n                        for (var i = 0; i < aFirstIteration.length; i ++) {\r\n                            var skey, aLocDesc = aFirstIteration[i].split(\"^\");\r\n                            if (aLocDesc[0].indexOf(\"#\") !== -1) {\r\n                                skey =  aLocDesc[0].split(\"#\")[1];\r\n                            } else {\r\n                                skey = aLocDesc[0];\r\n                            }\r\n                            if (aLocDesc[1]) {\r\n                                aNewTokens.push(new Token({text: aLocDesc[1], key: skey}));\r\n                            }\r\n                    }\r\n                }\r\n                oControl.setTokens(aNewTokens); \r\n            if (aNewTokens.length > 0) {\r\n              //  this.getModel('location').setProperty(\"/bRDistrict\", true);\r\n                this.getModel(\"location\").setProperty(\"/vDistrict\", true);\r\n            }\r\n            return \"\";    \r\n        },\r\n        formatMandal: function(sLocation, sValue){\r\n            var aFirstIteration = [],\r\n            aNewTokens = [],\r\n            oControl = this.getView().byId(\"idSelectMandal\");\r\n            if (sLocation && sValue === \"M\") {\r\n                aFirstIteration = sLocation.split(\"$\");\r\n                for (var i = 0; i < aFirstIteration.length; i ++) {\r\n                        var skey, aLocDesc = aFirstIteration[i].split(\"^\");\r\n                        if (aLocDesc[0].indexOf(\"#\") !== -1) {\r\n                            skey =  aLocDesc[0].split(\"#\")[1];\r\n                        } else {\r\n                            skey = aLocDesc[0];\r\n                        }\r\n                        if (aLocDesc[1]) {\r\n                            aNewTokens.push(new Token({text: aLocDesc[1], key: skey}));\r\n                        }\r\n                }\r\n            }\r\n            oControl.setTokens(aNewTokens); \r\n            if (aNewTokens.length > 0) {\r\n                this.getModel(\"location\").setProperty(\"/vMandal\", true);\r\n            }\r\n            return \"\"; \r\n        },\r\n        formatVillage: function(sLocation, sValue){\r\n            var aFirstIteration = [],\r\n            aNewTokens = [],\r\n            oControl = this.getView().byId(\"idSelectVillage\");\r\n            if (sLocation && sValue === \"V\") {\r\n                aFirstIteration = sLocation.split(\"$\");\r\n                    for (var i = 0; i < aFirstIteration.length; i ++) {\r\n                        var skey, aLocDesc = aFirstIteration[i].split(\"^\");\r\n                            if (aLocDesc[0].indexOf(\"#\") !== -1) {\r\n                                skey =  aLocDesc[0].split(\"#\")[1];\r\n                            } else {\r\n                                skey = aLocDesc[0];\r\n                            }\r\n                        if (aLocDesc[1]) {\r\n                            aNewTokens.push(new Token({text: aLocDesc[1], key: skey}));\r\n                        }    \r\n                    }\r\n            }\r\n            oControl.setTokens(aNewTokens); \r\n            if (aNewTokens.length > 0) {\r\n                this.getModel(\"location\").setProperty(\"/vVillage\", true);\r\n            }\r\n            return \"\"; \r\n        },\r\n        formatLoksabha: function(sConstituency){\r\n            var aFirstIteration = [],\r\n            aNewTokens = [],\r\n            oControl = this.getView().byId(\"idMultiInputLoksabha\");\r\n            if (sConstituency) {\r\n                aFirstIteration = sConstituency.split(\"$\");\r\n                    for (var i = 0; i < aFirstIteration.length; i ++) {\r\n                        var skey, aLocDesc = aFirstIteration[i].split(\"^\");\r\n                            if (aLocDesc[0].indexOf(\"#\") !== -1) {\r\n                                skey =  aLocDesc[0].split(\"#\")[1];\r\n                            } else {\r\n                                skey = aLocDesc[0];\r\n                            }\r\n                            if (aLocDesc[1]) {\r\n                                aNewTokens.push(new Token({text: aLocDesc[1], key: skey}));\r\n                            }\r\n                   }\r\n            }\r\n            oControl.setTokens(aNewTokens); \r\n            if (aNewTokens.length > 0) {\r\n                this.getModel(\"location\").setProperty(\"/vLoksabha\", true);\r\n            }\r\n            return \"\";  \r\n        },\r\n        formatAssembly: function(sConstituency){\r\n            var aFirstIteration = [],\r\n            aNewTokens = [],\r\n            oControl = this.getView().byId(\"idMultiInputAssembly\");\r\n            if (sConstituency) {\r\n                aFirstIteration = sConstituency.split(\"$\");\r\n                \r\n                    for (var i = 0; i < aFirstIteration.length; i ++) {\r\n                        var skey, aLocDesc = aFirstIteration[i].split(\"^\");\r\n                        if (aLocDesc[0].indexOf(\"#\") !== -1) {\r\n                            skey =  aLocDesc[0].split(\"#\")[1];\r\n                        } else {\r\n                            skey = aLocDesc[0];\r\n                        }\r\n                        if (aLocDesc[1]) {\r\n                            aNewTokens.push(new Token({text: aLocDesc[1], key: skey}));\r\n                        }\r\n\r\n                    }\r\n            }\r\n            oControl.setTokens(aNewTokens); \r\n            if (aNewTokens.length > 0) {\r\n                this.getModel(\"location\").setProperty(\"/vAssembly\", true);\r\n            }\r\n            return \"\"; \r\n        },\r\n        _getSaveVisibility: function(sDraftState, sViewState, sRole){\r\n            var bSaveVisible = false;\r\n                if (sDraftState !== \"X\" && sViewState !== \"D\" && sRole === \"M\") {\r\n                    bSaveVisible = true;\r\n                }\r\n            return bSaveVisible;\r\n        },\r\n        _getSubmitVisibility: function(sDraftState, sViewState, sSubmitBtnVisibility){\r\n            var bSaveVisible = false;\r\n            if (sDraftState === \"X\" && sViewState !== \"D\" && sSubmitBtnVisibility === \"X\") {\r\n                bSaveVisible = true;\r\n            }\r\n            return bSaveVisible;\r\n        },\r\n        _getNextLevelVisibility: function(sViewState, sRole) {\r\n            var bSaveVisible = false;\r\n            if (sViewState === \"E\" && (sRole === \"C\" || sRole === \"QC\")) {\r\n                bSaveVisible = true;\r\n            }\r\n            return bSaveVisible;\r\n        },\r\n        _getApproverVisibility: function(sViewState, sRole) {\r\n            var bSaveVisible = false;\r\n            if (sViewState === \"E\" && sRole === \"A\") {\r\n                bSaveVisible = true;\r\n            }\r\n            return bSaveVisible;\r\n        },\r\n        _getReturnVisibility: function(sViewState, sRole) {\r\n            var bSaveVisible = false;\r\n            if (sViewState === \"E\" && (sRole === \"A\" || sRole === \"C\" || sRole === \"QC\")) {\r\n                bSaveVisible = true;\r\n            }\r\n            return bSaveVisible;\r\n        },\r\n        _getCancelVisibility: function(sViewState, sRole) {\r\n            var bSaveVisible = false;\r\n            if (sViewState !== \"D\" && sRole === \"M\") {\r\n                bSaveVisible = true;\r\n            }\r\n            return bSaveVisible;\r\n        },\r\n\r\n        _statusformat: function(sStatus){\r\n            var sHtmlText = \"\";\r\n                if (sStatus === \"Draft\") {\r\n                    sHtmlText = \"<p style=\\\"color:orange;font-size:22px;margin-top: 4px;\\\">\" + sStatus + \"</p>\";\r\n                } else if ( sStatus === \"In Process\") {\r\n                    sHtmlText = \"<p style=\\\"color:orange;font-size:22px;margin-top: 4px;\\\">\" + sStatus + \"</p>\";\r\n                } else if (sStatus === \"Returned\") {\r\n                    sHtmlText = \"<p style=\\\"color:red;font-size:22px;margin-top: 4px;\\\">\" + sStatus + \"</p>\";\r\n                } else if (sStatus === \"Approved\") {\r\n                    sHtmlText = \"<p style=\\\"color:green;font-size:22px;margin-top: 4px;\\\">\" + sStatus + \"</p>\";\r\n                } else {\r\n                    sHtmlText = \"<p style=\\\"font-size:22px;margin-top: 4px;\\\">\" + sStatus + \"</p>\";\r\n                }\r\n            return sHtmlText;\r\n        },\r\n\r\n        _roleIconformat: function(sRole){\r\n            var sIconName;\r\n            if (sRole === \"M\") {\r\n                sIconName = \"sap-icon://write-new\";\r\n            } else if (sRole === \"C\") {\r\n                sIconName = \"sap-icon://detail-view\";\r\n            } else if (sRole === \"A\") {\r\n                sIconName = \"sap-icon://approvals\";\r\n            }\r\n            return sIconName;\r\n        },\r\n\r\n        _laneStateFormat: function(sStatus){\r\n            var sState = [{\r\n\t\t\t\t\"state\": \"\",\r\n\t\t\t\t\"value\": 100\r\n            }];\r\n            \r\n            if (sStatus === \"COMPLETED\") {\r\n                sState[0].state = \"Positive\";\r\n            } else if (sStatus === \"READY\") {\r\n                sState[0].state = \"Critical\";\r\n            } else {\r\n                sState[0].state = \"Neutral\";\r\n            }\r\n            return sState;\r\n        },\r\n        \r\n        getEstimationLink: function(sEstGuid){\r\n            var oCrossAppNavigator = sap.ushell.Container.getService(\"CrossApplicationNavigation\");\r\n\t\t\t// var hash = (oCrossAppNavigator && oCrossAppNavigator.hrefForExternal({\r\n\t\t\t// \ttarget:{\r\n\t\t\t// \t\tsemanticObject: \"ZWorks\",\r\n\t\t\t// \t\taction: \"estimation\"\r\n\t\t\t// \t}\r\n            // })) || \"\";\r\n            var sLink = oCrossAppNavigator.hrefForExternal({\r\n            //    target : { shellHash : \"ZWorks-estimation&/Detail/\" + sEstGuid + \"/\" +sRefGuid + \"/D/ZDE/xapp\" }\r\n            target : { shellHash : \"ZWorks-estimation&/Detail/\" + sEstGuid + \"/D/ZDE/xapp\" }\r\n              });\r\n\t\t\t//var sLink = oCrossAppNavigator.hrefForAppSpecificHash(\"Detail/\" + sEstId + \"/D/ZDE\");\r\n            return sLink;\r\n        },\r\n\r\n        _removeZeroes: function(sValue){\r\n            var sRetVal;\r\n            if (sValue) {\r\n                sRetVal = sValue.replace(/^0+/, \"\");\r\n            }\r\n            return sRetVal;\r\n        },\r\n        _addVersion: function(sVersion){\r\n            if (sVersion) {\r\n                var sVersionText = this.getModel(\"i18n\").getResourceBundle().getText(\"master.list.item.version\");\r\n                return sVersionText + \": \" + sVersion;\r\n            } else {\r\n                return \"\";\r\n            }\r\n        },\r\n        getProcessIndState: function(state){\r\n            var sState = \"\";\r\n            if (state <= 50) {\r\n                sState = \"Success\";\r\n            } else if (state > 50 && state <= 75) {\r\n                sState = \"Warning\";\r\n            } else {\r\n                sState = \"Error\";\r\n            }\r\n            return sState;\r\n        },\r\n        getPercentage: function(percentage){\r\n            return parseFloat(percentage);\r\n        },\r\n        digitialFilePath : function(v) {\r\n            var path = \"\";\r\n            if (v){\r\n            \tpath = jQuery.sap.getModulePath(\"com.goap.cfms.works.as\", \"/Image/info.png\");\r\n            } else {\r\n            \t path = jQuery.sap.getModulePath(\"com.goap.cfms.works.as\", \"/Image/check.png\");\r\n            }\r\n        return path;\r\n     }\r\n        /**\r\n         * Formatter function to make the URL for External navigation\r\n         */\r\n        // _setURLForNav: function(semObj, sAction, sGuid){\r\n        //     var sUrl = \"#\" + semObj + \"-\" + sAction;\r\n        //     return sUrl;\r\n        // }\r\n    };\r\n});",
		"com/goap/cfms/works/as/controller/Master-dbg.controller.js": "sap.ui.define([\r\n\t\"com/goap/cfms/works/reuselib/WorksBaseController\",\r\n\t\"sap/ui/model/json/JSONModel\",\r\n\t\"sap/ui/core/routing/History\",\r\n\t\"sap/ui/model/Filter\",\r\n\t\"sap/ui/model/Sorter\",\r\n\t\"sap/ui/model/FilterOperator\",\r\n\t\"sap/m/GroupHeaderListItem\",\r\n\t\"sap/ui/Device\",\r\n\t\"com/goap/cfms/works/as/model/formatter\",\r\n\t\"com/goap/cfms/works/reuselib/VHDialog.controller\",\r\n\t\"com/goap/cfms/works/as/util/Constants\",\r\n\t\"sap/m/MessageBox\",\r\n\t\"com/goap/cfms/works/reuselib/DynamicBusyIndicator\"\r\n\t//\"as/sap/DemoApp/model/formatter\"\r\n], function(BaseController, JSONModel, History, Filter, Sorter, FilterOperator, GroupHeaderListItem, Device, Formatter, VHDialog,\r\n\tConstants, MessageBox, DynamicBusyIndicator) {\r\n\t\"use strict\";\r\n\r\n\treturn BaseController.extend(\"com.goap.cfms.works.as.controller.Master\", {\r\n\r\n\t\tformatter: Formatter,\r\n\r\n\t\t/* =========================================================== */\r\n\t\t/* lifecycle methods                                           */\r\n\t\t/* =========================================================== */\r\n\r\n\t\t/**\r\n\t\t * Called when the master list controller is instantiated. It sets up the event handling for the master/detail communication and other lifecycle tasks.\r\n\t\t * @public\r\n\t\t */\r\n\t\tonInit: function() {\r\n\t\t\t// Control state model\r\n\t\t\tvar oList = this.byId(\"ItemsST\"),\r\n\t\t\t\toViewModel = this._createViewModel();\r\n\t\t\t// Put down master list's original value for busy indicator delay,\r\n\t\t\t// so it can be restored later on. Busy handling on the master list is\r\n\t\t\t// taken care of by the master list itself.\r\n\t\t\tvar iOriginalBusyDelay = oList.getBusyIndicatorDelay();\r\n\t\t\tthis._oList = oList;\r\n\t\t\t// keeps the filter and search state\r\n\t\t\tthis._oListFilterState = {\r\n\t\t\t\taFilter: [],\r\n\t\t\t\taSearch: []\r\n\t\t\t};\r\n\t\t\tthis.setModel(oViewModel, \"masterView\");\r\n\r\n\t\t\tthis.setModel(new JSONModel({\r\n\t\t\t\tamendEditable: false,\r\n\t\t\t\tcopyEditable: false\r\n\t\t\t}), \"createNewASModel\");\r\n\r\n\t\t\t// Make sure, busy indication is showing immediately so there is no\r\n\t\t\t// break after the busy indication for loading the view's meta data is\r\n\t\t\t// ended (see promise 'oWhenMetadataIsLoaded' in AppController)\r\n\t\t\toList.attachEventOnce(\"updateFinished\", function() {\r\n\t\t\t\t// Restore original busy indicator delay for the list\r\n\t\t\t\toViewModel.setProperty(\"/delay\", iOriginalBusyDelay);\r\n\t\t\t});\r\n\r\n\t\t\tvar sCreatedBy = sap.ushell.Container.getService(\"UserInfo\").getId();\r\n\r\n\t\t\tif (!jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\")) {\r\n\t\t\t\tvar oParamsBrowserStorage = {\r\n\t\t\t\t\tUserId: sCreatedBy,\r\n\t\t\t\t\tPositionId: \"00000000\",\r\n\t\t\t\t\tRole: \"\",\r\n\t\t\t\t\tSessionGuid: \"00000000-0000-0000-0000-000000000000\"\r\n\t\t\t\t};\r\n\t\t\t\tjQuery.sap.storage(jQuery.sap.storage.Type.session).put(\"zworksBrowserStorage\", oParamsBrowserStorage);\r\n\t\t\t} else {\r\n\t\t\t\tvar sStorageUser = jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\").UserId;\r\n\t\t\t\tif (sStorageUser !== sCreatedBy) {\r\n\t\t\t\t\tvar oParamsBrowserStorage = {\r\n\t\t\t\t\t\tUserId: sCreatedBy,\r\n\t\t\t\t\t\tPositionId: \"00000000\",\r\n\t\t\t\t\t\tRole: \"\",\r\n\t\t\t\t\t\tSessionGuid: \"00000000-0000-0000-0000-000000000000\"\r\n\t\t\t\t\t};\r\n\t\t\t\t\tjQuery.sap.storage(jQuery.sap.storage.Type.session).put(\"zworksBrowserStorage\", oParamsBrowserStorage);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar sStorePosition = jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\").PositionId;\r\n\t\t\tvar oViewAppModel = this.getOwnerComponent().getModel(\"appView\");\r\n\t\t\toViewAppModel.setProperty(\"/position\", sStorePosition);\r\n\t\t\toViewAppModel.setProperty(\"/role\", jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\").Role);\r\n\t\t\t//\t\t\toViewAppModel.setProperty(\"/bPositionChangeLoadFC\", true);\r\n\t\t\tif (!sStorePosition) {\r\n\t\t\t\tsStorePosition = \"00000000\";\r\n\t\t\t}\r\n\t\t\tthis._getUserRole(sStorePosition);\r\n\r\n\t\t\tthis.getRouter().getRoute(\"default\").attachPatternMatched(this._onMasterMatched, this);\r\n\t\t\tthis.getRouter().getRoute(\"Detail\").attachPatternMatched(this._onDetailRouteMatch, this);\r\n\t\t\tthis.getRouter().attachRouteMatched(function(oEvent) {\r\n\r\n\t\t\t\tvar sRouteName;\r\n\t\t\t\tsRouteName = oEvent.getParameter(\"name\");\r\n\t\t\t\tif (sRouteName === \"default\") {\r\n\t\t\t\t\t//Select first item from list\r\n\t\t\t\t\t/*eslint-disable */\r\n\t\t\t\t\t//eslint-disable-invalid-this\r\n\t\t\t\t\tthis._oListLoaded = new Promise(function(resolve, reject) {\r\n\t\t\t\t\t\tthis.onListLoaded = resolve;\r\n\t\t\t\t\t}.bind(this));\r\n\t\t\t\t\tthis._oListLoaded.then(function() {\r\n\t\t\t\t\t\tthis._selectMasterListItem();\r\n\t\t\t\t\t}.bind(this));\r\n\t\t\t\t\t/*eslint-enable */\r\n\t\t\t\t}\r\n\t\t\t}, this);\r\n\t\t\tthis.getRouter().attachBypassed(this.onBypassed, this);\r\n\t\t\tvar oSmartFilterBar = this.byId(\"smartFilterBar\");\r\n\t\t\tthis.oMicBtn = this.byId(\"idMicBtn\");\r\n\t\t\tif (!this.SpeechRecognition && this.oMicBtn) {\r\n\t\t\t\t/*eslint-disable */\r\n\t\t\t\t//eslint-disable-no-undef\r\n\t\t\t\tthis.SpeechRecognition = new SpeechRecognizer(this);\r\n\t\t\t\t/*eslint-enable */\r\n\t\t\t}\r\n\t\t\tif (this.SpeechRecognition) {\r\n\t\t\t\tthis.SpeechRecognition.registerTriggerButton(this.oMicBtn, function(sText) {\r\n\t\t\t\t\tvar innerSearchBar = oSmartFilterBar.getBasicSearchControl();\r\n\t\t\t\t\tif (sText.length !== 0) {\r\n\t\t\t\t\t\tinnerSearchBar.setValue(sText);\r\n\t\t\t\t\t\tinnerSearchBar.fireSearch();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t//Migrated Code\r\n\t\t\tvar model = new sap.ui.model.json.JSONModel();\r\n\t\t\tmodel.setData([]);\r\n\t\t\tvar data = {\r\n\t\t\t\tdate: \"\",\r\n\t\t\t\tauthority: \"\",\r\n\t\t\t\tdept: \"\",\r\n\t\t\t\tbeschr: \"\",\r\n\t\t\t\tnumber: \"\",\r\n\t\t\t\treNumber: \"\",\r\n\t\t\t\ttype: \"\",\r\n\t\t\t\tgoAmount: \"\",\r\n\t\t\t\tsancAmount: \"\",\r\n\t\t\t\tddo: \"\",\r\n\t\t\t\thoa: \"\",\r\n\t\t\t\tdesc: \"\",\r\n\t\t\t\toldasnumber: \"\",\r\n\t\t\t\tasnumber: \"\",\r\n\t\t\t\tguid: \"\"\r\n\t\t\t};\r\n\t\t\tmodel.setData([]);\r\n\t\t\tmodel.setData(data);\r\n\t\t\tthis.getOwnerComponent().setModel(model, \"migratedModel\");\r\n\t\t\tthis.getOwnerComponent().getModel(\"migratedModel\").updateBindings();\r\n\t\t},\r\n\r\n\t\t/* =========================================================== */\r\n\t\t/* event handlers                                              */\r\n\t\t/* =========================================================== */\r\n\t\t/**\r\n\t\t * Event handler function \r\n\t\t * Hide the master view on Mode display\r\n\t\t * @param {*} oEvent \r\n\t\t */\r\n\t\tonBeforeRendering: function(oEvent) {\r\n\t\t\tvar oParam = this.getOwnerComponent().getComponentData().startupParameters.Mode;\r\n\t\t\t//var oParam = undefined;\r\n\t\t\tif (oParam) {\r\n\t\t\t\tvar param = {\r\n\t\t\t\t\ttarget: \"detail\",\r\n\t\t\t\t\tmasterPage: \"MasterPage\",\r\n\t\t\t\t\tdetailPage: \"DetailPage\"\r\n\t\t\t\t};\r\n\t\t\t\tthis._setScreenSize(param);\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * After list data is available, this handler method updates the\r\n\t\t * master list counter\r\n\t\t * @param {sap.ui.base.Event} oEvent the update finished event\r\n\t\t * @public\r\n\t\t */\r\n\t\tonUpdateFinished: function(oEvent) {\r\n\t\t\t// update the master list object counter after new data is loaded\r\n\t\t\tthis._updateListItemCount(oEvent.getParameter(\"total\"));\r\n\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for the value help to select Position\r\n\t\t * @param {sap.ui.base.Event} oEvent is the event raised by the control\r\n\t\t */\r\n\t\tonChangePosition: function(oEvent) {\r\n\t\t\t//var sCreatedBy = \"14482503\";\r\n\t\t\tvar sCreatedBy = sap.ushell.Container.getService(\"UserInfo\").getId();\r\n\t\t\tif (!this._opositionVHDialog) {\r\n\t\t\t\tthis._opositionVHDialog = this._createFragment(this.createId(\"idPositionVH\"), \"com.goap.cfms.works.as.fragment.positionVH\");\r\n\t\t\t\tthis.getView().addDependent(this._opositionVHDialog);\r\n\t\t\t}\r\n\t\t\tif (!this.oTemplate) {\r\n\t\t\t\tvar sId = \"idPositionTemp\";\r\n\t\t\t\tthis.oTemplate = new sap.m.StandardListItem(this.createId(sId), {\r\n\t\t\t\t\ttitle: \"{position}\",\r\n\t\t\t\t\tdescription: \"{STEXT}\",\r\n\t\t\t\t\ttype: \"Active\"\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tvar filter = new Filter(\"SUBPROCESS_AREA\", FilterOperator.EQ, \"AS\");\r\n\t\t\tthis._opositionVHDialog.bindAggregation(\"items\", {\r\n\t\t\t\tpath: \"/ZWRK_C_USER_POSITIONS(p_user='\" + sCreatedBy + \"')/Set\",\r\n\t\t\t\tfilters: [filter],\r\n\t\t\t\ttemplate: this.oTemplate\r\n\t\t\t});\r\n\t\t\tthis._opositionVHDialog.open();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Event handler for HoA Ddo search in value help\r\n\t\t * @param {sap.ui.model.Event} oEvent is the event for Search\r\n\t\t */\r\n\t\thandlePositionSearch: function(oEvent) {\r\n\t\t\tvar oFilter,\r\n\t\t\t\taFilters = [],\r\n\t\t\t\tsValue = oEvent.getParameter(\"value\");\r\n\t\t\taFilters.push(new Filter(\"position\", sap.ui.model.FilterOperator.Contains, sValue));\r\n\t\t\toFilter = new Filter({\r\n\t\t\t\tfilters: aFilters,\r\n\t\t\t\tbAnd: false\r\n\t\t\t});\r\n\t\t\toEvent.getSource().getBinding(\"items\").filter(oFilter);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler function for Position selection\r\n\t\t * \r\n\t\t */\r\n\t\tOnPositionSelect: function(oEvent) {\r\n\t\t\tvar oSelectedItem = oEvent.getParameter(\"selectedItem\"),\r\n\t\t\t\tsPosition = oSelectedItem.getTitle(),\r\n\t\t\t\tsDescription = oSelectedItem.getDescription();\r\n\t\t\tif (sPosition) {\r\n\t\t\t\tthis.getModel(\"appView\").setProperty(\"/position\", sPosition);\r\n\t\t\t\tthis.getModel(\"appView\").setProperty(\"/positionText\", sDescription);\r\n\t\t\t\tthis.getModel(\"appView\").setProperty(\"/bPositionChangeLoadFC\", true);\r\n\t\t\t\tthis.getModel(\"masterView\").setProperty(\"/bPositionSelected\", true);\r\n\t\t\t\tthis._getUserRole(sPosition);\r\n\t\t\t\tthis.byId(\"ItemsST\").rebindList();\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Event handler for clicking Cancel on the Fragment to create AS\r\n\t\t * @param {Event} oEvent of the cancel\r\n\t\t */\r\n\t\tonCancelAS: function(oEvent) {\r\n\t\t\t//Migrated Code Starts\r\n\t\t\tthis._createASFrag.close();\r\n\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bUserCreateAS\", false);\r\n\t\t\tvar oCreateNewASModel = this.getModel(\"createNewASModel\");\r\n\t\t\tthis._getCreateFragControlById(\"idNewRadioBtn\").setSelected(true);\r\n\t\t\toCreateNewASModel.setProperty(\"/amendEditable\", false);\r\n\t\t\toCreateNewASModel.setProperty(\"/copyEditable\", false);\r\n\t\t\toCreateNewASModel.setProperty(\"/migratedASRadioButtons\", false);\r\n\t\t\tthis._getCreateFragControlById(\"idMigratedASCode\").resetProperty(\"value\");\r\n\t\t\tthis._getCreateFragControlById(\"idMigratedRadioBtnNonCfms\").resetProperty(\"value\");\r\n\t\t\tthis._getCreateFragControlById(\"idMigratedASCode\").resetProperty(\"valueState\");\r\n\t\t\tthis._getCreateFragControlById(\"idMigratedRadioBtnNonCfms\").resetProperty(\"valueState\");\r\n\r\n\t\t\tthis._getCreateFragControlById(\"idCopyFromASCode\").resetProperty(\"value\");\r\n\t\t\tthis._getCreateFragControlById(\"idAmendASCode\").resetProperty(\"value\");\r\n\t\t\tthis._getCreateFragControlById(\"idCopyFromASCode\").resetProperty(\"valueState\");\r\n\t\t\tthis._getCreateFragControlById(\"idAmendASCode\").resetProperty(\"valueState\");\r\n\t\t\tthis.getModel(\"masterView\").setProperty(\"bCreateBtnEnable\", true);\r\n\t\t\tif (this.getModel(\"oBundleCodeModel\")) {\r\n\t\t\t\tthis.getModel(\"oBundleCodeModel\").setData(null);\r\n\t\t\t}\r\n\t\t\tthis.oSelectedObject = null;\r\n\t\t\t//Migrated Code Ends\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * function to create migrated as.\r\n\t\t * @public\r\n\t\t */\r\n\t\t_CreatePayLoadDupli: function() {\r\n\t\t\tvar that = this;\r\n\t\t\tvar sPosition = this.getModel(\"appView\").getProperty(\"/position\"),\r\n\t\t\t\toPayload1 = {\r\n\t\t\t\t\tAction: \"AMEND\",\r\n\t\t\t\t\tGuid: $.sap.GUID,\r\n\t\t\t\t\tLockTimestamp: \"\\/Date(\" + (new Date()).getTime() + \")\\/\",\r\n\t\t\t\t\tFnam: \"\",\r\n\t\t\t\t\tFval: \"\",\r\n\t\t\t\t\tCode: $.sap.ASNUMBER,\r\n\t\t\t\t\tPosition: sPosition,\r\n\t\t\t\t\tInitiatinDept: \"\",\r\n\t\t\t\t\tDepartDesc: \"\"\r\n\t\t\t\t};\r\n\r\n\t\t\t//Migrated Code Starts\r\n\t\t\t// if (that._getCreateFragControlById(\"idMigratedRadioBtnPhaseOne\").getSelected()) {\r\n\t\t\t// \toPayload1.Action = \"AMEND\";\r\n\t\t\t// \toPayload1.Guid = that.oSelectedObject.guid;\r\n\t\t\t// \toPayload1.Code = that._getCreateFragControlById(\"idMigratedASCode\").getValue();\r\n\t\t\t// }\r\n\t\t\treturn oPayload1;\r\n\t\t\t//Migrated Code Ends\r\n\t\t},\r\n\t\t_SaveAmendActionDupli: function() {\r\n\t\t\tvar that = this;\r\n\t\t\tvar oCreateASDupli = new Promise(function(resolve, reject) {\r\n\t\t\t\tthat.getOwnerComponent().oDraft.whenHdrCreate({\r\n\t\t\t\t\tpath: \"/WrkASDetailsDraftSet\",\r\n\t\t\t\t\tdata: that._CreatePayLoadDupli(),\r\n\t\t\t\t\tbusyControl: that._createASFrag\r\n\t\t\t\t}, resolve, reject);\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\toCreateASDupli.then(function(oResult) {\r\n\t\t\t\tthat._createASFrag.close();\r\n\t\t\t\tif (oResult.data.Action === \"NEW\") {\r\n\t\t\t\t\tthat.getModel(\"appView\").setProperty(\"/DepartDesc\", oResult.data.DepartDesc);\r\n\t\t\t\t\tthat.getModel(\"appView\").setProperty(\"/InitiatinDept\", oResult.data.InitiatinDept);\r\n\t\t\t\t} else if (oResult.data.Action === \"COPY\") {\r\n\t\t\t\t\tthat._getCreateFragControlById(\"idCopyFromASCode\").resetProperty(\"value\");\r\n\t\t\t\t\tthat.oSelectedObject = null;\r\n\t\t\t\t\tvar oCreateNewASModel = that.getModel(\"createNewASModel\");\r\n\t\t\t\t\toCreateNewASModel.setProperty(\"/amendEditable\", false);\r\n\t\t\t\t\toCreateNewASModel.setProperty(\"/copyEditable\", false);\r\n\t\t\t\t} else if (oResult.data.Action === \"AMEND\") {\r\n\t\t\t\t\tthat._getCreateFragControlById(\"idAmendASCode\").resetProperty(\"value\");\r\n\t\t\t\t\tthat.oSelectedObject = null;\r\n\t\t\t\t\tvar oCreateNewASModel = that.getModel(\"createNewASModel\");\r\n\t\t\t\t\toCreateNewASModel.setProperty(\"/amendEditable\", false);\r\n\t\t\t\t\toCreateNewASModel.setProperty(\"/copyEditable\", false);\r\n\t\t\t\t}\r\n\t\t\t\tthat.getRouter().navTo(\"Detail\", {\r\n\t\t\t\t\tobjectId: oResult.data.Guid,\r\n\t\t\t\t\tstateId: \"C\"\r\n\t\t\t\t}, true);\r\n\t\t\t}.bind(this));\r\n\t\t},\r\n\t\t//Migrated Code Starts\r\n\t\tonCreateMigratedAS: function(oEvent) {\r\n\t\t\tvar that = this;\r\n\r\n\t\t\tvar sanAMount = \"0\";\r\n\t\t\tif (this._getMigratedCreateFragControlById(\"goCategory\").getSelected() === true) {\r\n\t\t\t\tif (this._getMigratedCreateFragControlById(\"sancNo\").getValue() === \"\") {\r\n\t\t\t\t\tsap.m.MessageBox.error(\"Please Enter the Sanction Number First!\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (this._getMigratedCreateFragControlById(\"idMigratedASType\").getSelectedItem() === null) {\r\n\t\t\t\t\tsap.m.MessageBox.error(\"Please Select Sanction Type First!\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this._getMigratedCreateFragControlById(\"goCategory\").getSelected() === false) {\r\n\t\t\t\tif (this._getMigratedCreateFragControlById(\"sancNo1\").getValue() === \"\") {\r\n\t\t\t\t\tsap.m.MessageBox.error(\"Please Enter the Sanction Number First!\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this._getMigratedCreateFragControlById(\"sancDate\").getValue() === \"\") {\r\n\t\t\t\tsap.m.MessageBox.error(\"Please Select Sanction Date First!\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this._getMigratedCreateFragControlById(\"sancDept\").getSelectedItem() === null) {\r\n\t\t\t\tsap.m.MessageBox.error(\"Please Select Sanction Department First!\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this._getMigratedCreateFragControlById(\"sanAuthority\").getValue() === \"\") {\r\n\t\t\t\tsap.m.MessageBox.error(\"Please Select Sanction Authority First!\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (that.getModel(\"createNewASModel\").getData().migratedPhaseOneEditable === false) {\r\n\t\t\t\tif (this._getMigratedCreateFragControlById(\"sancAmount\").getValue() === \"\") {\r\n\t\t\t\t\tsap.m.MessageBox.error(\"Please Select Sanction Amount First!\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this._getMigratedCreateFragControlById(\"goAmount\").getValue() === \"\") {\r\n\t\t\t\tsap.m.MessageBox.error(\"Please Select Go Amount First!\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (that.getModel(\"createNewASModel\").getData().migratedPhaseOneEditable === true) {\r\n\t\t\t\tfor (var i = 0; i < this.getView().getModel(\"modelName\").getData().results.length; i++) {\r\n\t\t\t\t\tvar sanAMount = Number(sanAMount) + Number(this.getView().getModel(\"modelName\").getData().results[i].SancAmunt);\r\n\t\t\t\t\tvar RowTable = i + 1;\r\n\t\t\t\t\tif (this.getView().getModel(\"modelName\").getData().results[i].MigASNumber === \"\") {\r\n\t\t\t\t\t\tsap.m.MessageBox.error(\"Please Enter the Old AS Number in Row '\" + RowTable + \"'. \");\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else if (this.getView().getModel(\"modelName\").getData().results[i].SancAmunt === \"\") {\r\n\t\t\t\t\t\tsap.m.MessageBox.error(\"Please Enter the Old AS Number in Row '\" + RowTable + \"'. \");\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tsanAMount = that._getMigratedCreateFragControlById(\"sancAmount\").getValue();\r\n\t\t\t\tif (parseInt(this._getMigratedCreateFragControlById(\"goAmount\").getValue()) < sanAMount) {\r\n\t\t\t\t\tsap.m.MessageBox.error(\"GO Amount sholud be greater than Sanction Amount!\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar category, sancno;\r\n\t\t\tif (this._getMigratedCreateFragControlById(\"goCategory\").getSelected()) {\r\n\t\t\t\tcategory = 'GO';\r\n\t\t\t\tsancno = that._getMigratedCreateFragControlById(\"sancNo\").getValue();\r\n\t\t\t} else {\r\n\t\t\t\tcategory = 'DEP';\r\n\t\t\t\tsancno = that._getMigratedCreateFragControlById(\"sancNo1\").getValue();\r\n\t\t\t}\r\n\t\t\tvar Arry = [];\r\n\t\t\tvar Obj = {};\r\n\t\t\tfor (var i = 0; i < this.getView().getModel(\"modelName\").getData().results.length; i++) {\r\n\t\t\t\tObj.ApplicationName = \"ZWAS\";\r\n\t\t\t\tObj.OldAsNumber = this.getView().getModel(\"modelName\").getData().results[i].MigASNumber;\r\n\t\t\t\tif (this.getView().getModel(\"modelName\").getData().results[i].SancAmunt === \"\") {\r\n\t\t\t\t\tObj.SanAmount = \"0.00\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tObj.SanAmount = this.getView().getModel(\"modelName\").getData().results[i].SancAmunt;\r\n\t\t\t\t}\r\n\t\t\t\tObj.SanRefNo = this.getView().getModel(\"modelName\").getData().results[i].SanctionRefe;\r\n\t\t\t\tObj.PrjDesc = this.getView().getModel(\"modelName\").getData().results[i].ASDescription;\r\n\t\t\t\tArry.push(Obj);\r\n\t\t\t\tObj = {};\r\n\t\t\t}\r\n\t\t\tvar dt = this._DateCoversion(that.getOwnerComponent().getModel(\"migratedModel\").getData().date);\r\n\t\t\tif (that.getModel(\"createNewASModel\").getData().migratedPhaseOneEditable === true) {\r\n\t\t\t\tvar migratedPayloadData = {\r\n\t\t\t\t\tAction: 'MIGDUPLI',\r\n\t\t\t\t\tGuid: \"00000000-0000-0000-0000-000000000000\",\r\n\t\t\t\t\tSessionguid: \"00000000-0000-0000-0000-000000000000\",\r\n\t\t\t\t\t// OldAsNumber: that.oldASNumber,\r\n\t\t\t\t\tSanDate: dt,\r\n\t\t\t\t\tSanType: that.getOwnerComponent().getModel(\"migratedModel\").getData().type,\r\n\t\t\t\t\tSanNumber: sancno,\r\n\t\t\t\t\tSanAmount: \"0.00\",\r\n\t\t\t\t\tGoAmount: that._getMigratedCreateFragControlById(\"goAmount\").getValue(),\r\n\t\t\t\t\tSanAuthority: this._getMigratedCreateFragControlById(\"sanAuthority\").getValue().split(\" \")[0],\r\n\t\t\t\t\tSanCategory: category,\r\n\t\t\t\t\tSanDes: \"\",\r\n\t\t\t\t\tSanDepartment: that.getOwnerComponent().getModel(\"migratedModel\").getData().beschr,\r\n\t\t\t\t\tBeschr: \"\",\r\n\t\t\t\t\tAsNumber: \"\",\r\n\t\t\t\t\tNonCfmsInd: that.getModel(\"createNewASModel\").getProperty(\"/nonCfms\"),\r\n\t\t\t\t\tPosition: that.getModel(\"appView\").getProperty(\"/position\"),\r\n\t\t\t\t\tWrkOldAs_Nav: Arry\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tvar migratedPayloadData = {\r\n\t\t\t\t\tAction: 'MIGDUPLI',\r\n\t\t\t\t\tGuid: \"00000000-0000-0000-0000-000000000000\",\r\n\t\t\t\t\tSessionguid: \"00000000-0000-0000-0000-000000000000\",\r\n\t\t\t\t\t// OldAsNumber: that.oldASNumber,\r\n\t\t\t\t\tSanDate: dt,\r\n\t\t\t\t\tSanType: that.getOwnerComponent().getModel(\"migratedModel\").getData().type,\r\n\t\t\t\t\tSanNumber: sancno,\r\n\t\t\t\t\tSanAmount: that._getMigratedCreateFragControlById(\"sancAmount\").getValue(),\r\n\t\t\t\t\tGoAmount: that._getMigratedCreateFragControlById(\"goAmount\").getValue(),\r\n\t\t\t\t\tSanAuthority: this._getMigratedCreateFragControlById(\"sanAuthority\").getValue().split(\" \")[0],\r\n\t\t\t\t\tSanCategory: category,\r\n\t\t\t\t\tSanDes: \"\",\r\n\t\t\t\t\tSanDepartment: that.getOwnerComponent().getModel(\"migratedModel\").getData().beschr,\r\n\t\t\t\t\tBeschr: \"\",\r\n\t\t\t\t\tAsNumber: \"\",\r\n\t\t\t\t\tNonCfmsInd: that.getModel(\"createNewASModel\").getProperty(\"/nonCfms\"),\r\n\t\t\t\t\tPosition: that.getModel(\"appView\").getProperty(\"/position\"),\r\n\t\t\t\t\tWrkOldAs_Nav: Arry,\r\n\t\t\t\t\tTsFlag: false\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tthis.getOwnerComponent().getModel().create(\"/WrkMigCmmSet\", migratedPayloadData, {\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tsuccess: function(oData, oResponse) {\r\n\t\t\t\t\t$.sap.GUID = oData.Guid;\r\n\t\t\t\t\t$.sap.ASNUMBER = oData.AsNumber;\r\n\t\t\t\t\t// var this.AmendGuid = oData.Guid;\r\n\t\t\t\t\t// var this.AmendAsNumber = oData.AsNumber;\r\n\t\t\t\t\tthat.getModel(\"appView\").setProperty(\"/DepartDesc\", oData.Beschr);\r\n\t\t\t\t\tthat.getModel(\"appView\").setProperty(\"/InitiatinDept\", oData.SanDepartment);\r\n\t\t\t\t\tif (that.getOwnerComponent().getModel(\"uploadedItem\") != undefined) {\r\n\t\t\t\t\t\tthat.getOwnerComponent().getModel(\"uploadedItem\").setData([]);\r\n\t\t\t\t\t\tthat.getOwnerComponent().getModel(\"uploadedItem\").refresh();\r\n\t\t\t\t\t\tthat.getOwnerComponent().getModel(\"uploadedItem\").updateBindings();\r\n\t\t\t\t\t\tsap.ui.getCore().byId(\"fileUpload\").setValue(\"\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (oData.MessageType == 'W') {\r\n\t\t\t\t\t\tsap.m.MessageBox.warning(oData.Message, {\r\n\t\t\t\t\t\t\tactions: ['OK', 'Cancel'],\r\n\t\t\t\t\t\t\tonClose: function(sAction) {\r\n\r\n\t\t\t\t\t\t\t\tif (sAction == 'OK') {\r\n\t\t\t\t\t\t\t\t\tthat._saveMigratedASData(migratedPayloadData);\r\n\t\t\t\t\t\t\t\t\t// that._SaveAmendActionDupli();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat._saveMigratedASData(migratedPayloadData);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terror: function(error) {\r\n\t\t\t\t\t// debugger;\r\n\t\t\t\t\t// sap.m.MessageBox.error(\"\" + JSON.parse(error.responseText).error.message.value + \"\", {\r\n\t\t\t\t\t// \tactions: [sap.m.MessageBox.Action.OK],\r\n\t\t\t\t\t// \tonClose: function (sAction) {\r\n\t\t\t\t\t// \t\tif (sAction === \"OK\" || sAction === null) {}\r\n\t\t\t\t\t// \t}\r\n\t\t\t\t\t// });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// dateFormatForMasterList: function (sValue) {\r\n\t\t// \tvar dDate = new Date();\r\n\t\t// \tif (sValue) {\r\n\t\t// \t\tdDate = new Date(sValue);\r\n\t\t// \t\tvar oDateFormat = sap.ui.core.format.DateFormat.getDateInstance({\r\n\t\t// \t\t\tstyle: \"medium\",\r\n\t\t// \t\t\tstrictParsing: \"true\",\r\n\t\t// \t\t\tUTC: \"true\"\r\n\t\t// \t\t});\r\n\t\t// \t\treturn oDateFormat.format(dDate);\r\n\t\t// \t}\r\n\t\t// },\r\n\r\n\t\t_DateCoversion: function(value) {\r\n\t\t\t// var d = value.split(\".\")[0];\r\n\t\t\t// var m = value.split(\".\")[1];\r\n\t\t\t// var y = value.split(\".\")[2];\r\n\t\t\t// var FullDate = m + \".\" + d + \".\" + y;\r\n\t\t\t// return FullDate;\r\n\t\t\tvar dt2 = value.split(\".\");\r\n\t\t\tif (dt2[1] === \"01\" && dt2[0] === \"31\" || dt2[1] === \"03\" && dt2[0] === \"31\" || dt2[1] === \"05\" && dt2[0] === \"31\" || dt2[1] ===\r\n\t\t\t\t\"07\" && dt2[0] === \"31\" || dt2[1] === \"08\" && dt2[0] === \"31\" || dt2[1] === \"10\" && dt2[0] === \"31\" || dt2[1] ===\r\n\t\t\t\t\"12\" && dt2[0] === \"31\") {\r\n\t\t\t\tdt2[0] = \"01\";\r\n\t\t\t\tif (dt2[1] === \"12\") {\r\n\t\t\t\t\tdt2[1] = \"01\";\r\n\t\t\t\t\tdt2[2] = parseInt(dt2[2]) + 1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdt2[1] = parseInt(dt2[1]) + 1;\r\n\t\t\t\t}\r\n\t\t\t} else if (dt2[1] === \"04\" && dt2[0] === \"30\" || dt2[1] === \"06\" && dt2[0] === \"30\" || dt2[1] === \"09\" && dt2[0] === \"30\" || dt2[1] ===\r\n\t\t\t\t\"11\" && dt2[0] === \"30\") {\r\n\t\t\t\t/* old code -start*/\r\n\t\t\t\t// dt2[1] = \"01\";\r\n\t\t\t\t// dt2[2] = parseInt(dt2[2]) + 1;\r\n\t\t\t\t/* old code -end*/\r\n\t\t\t\t/*code changed on - cfms_ctm_npv -(27_01_23) -start*/\r\n\t\t\t\t/* old code -end*/\r\n\t\t\t\tdt2[0] = \"01\";\r\n\t\t\t\tdt2[1] = parseInt(dt2[1]) + 1;\r\n\t\t\t\t/*code changed on - cfms_ctm_npv -(27_01_23) -end*/\r\n\t\t\t} else if (dt2[1] === \"02\" && dt2[0] === \"28\" || dt2[1] === \"02\" && dt2[0] === \"29\") {\r\n\t\t\t\t/* old code -start*/\r\n\t\t\t\t// dt2[0] = \"01\";\r\n\t\t\t\t// dt2[1] = parseInt(dt2[1]) + 1;\r\n\t\t\t\t/* old code -end*/\r\n\t\t\t\t/*code changed on - cfms_ctm_npv -(27_01_23) -start*/\r\n\t\t\t\t/* old code -end*/\r\n\t\t\t\tdt2[0] = \"01\";\r\n\t\t\t\tdt2[1] = parseInt(dt2[1]) + 1;\r\n\t\t\t\t/*code changed on - cfms_ctm_npv -(27_01_23) -end*/\r\n\t\t\t} else if (dt2[1] === \"01\" && dt2[0] !== \"31\" || dt2[1] === \"03\" && dt2[0] !== \"31\" || dt2[1] === \"05\" && dt2[0] !== \"31\" || dt2[1] ===\r\n\t\t\t\t\"07\" && dt2[0] !== \"31\" || dt2[1] === \"08\" && dt2[0] !== \"31\" || dt2[1] === \"10\" && dt2[0] !== \"31\" || dt2[1] ===\r\n\t\t\t\t\"12\" && dt2[0] !== \"31\") {\r\n\t\t\t\tdt2[0] = parseInt(dt2[0]) + 1;\r\n\t\t\t} else if (dt2[1] === \"04\" && dt2[0] !== \"30\" || dt2[1] === \"06\" && dt2[0] !== \"30\" || dt2[1] === \"09\" && dt2[0] !== \"30\" || dt2[1] ===\r\n\t\t\t\t\"11\" && dt2[0] !== \"30\") {\r\n\t\t\t\tdt2[0] = parseInt(dt2[0]) + 1;\r\n\t\t\t} else if (dt2[1] === \"02\" && dt2[0] !== \"28\" || dt2[1] === \"02\" && dt2[0] !== \"29\") {\r\n\t\t\t\tdt2[0] = parseInt(dt2[0]) + 1;\r\n\t\t\t}\r\n\r\n\t\t\tfunction addZero(i) {\r\n\t\t\t\tif (i < 10) {\r\n\t\t\t\t\ti = \"0\" + i;\r\n\t\t\t\t}\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t\tif (dt2[1].toString().length === 1) {\r\n\t\t\t\tdt2[1] = addZero(dt2[1]);\r\n\t\t\t}\r\n\t\t\tif (dt2[0].toString().length === 1) {\r\n\t\t\t\tdt2[0] = addZero(dt2[0]);\r\n\t\t\t}\r\n\t\t\t/*eslint-disable */\r\n\t\t\t//eslint-disable-no-implicit-coercion\r\n\t\t\tvar dt = \"\" + dt2[2] + \"\" + dt2[1] + \"\" + dt2[0] + \"\";\r\n\t\t\tvar dt1 = \"\" + dt.toString().slice(4, 6) + \".\" + dt.toString().slice(6, 8) + \".\" + dt.toString().slice(0, 4) + \"\";\r\n\t\t\tvar Fulldate = \"\\/Date(\" + new Date(dt1).getTime() + \")\\/\";\r\n\t\t\treturn Fulldate;\r\n\t\t\t/*eslint-enable */\r\n\t\t},\r\n\r\n\t\t_handleOk: function(oSource) {\r\n\t\t\tvar oControl = oSource.getCustomData()[0].getValue(),\r\n\t\t\t\toTable = this._getFragControlById(\"idSmartTable\", \"idVHDialog\"),\r\n\t\t\t\toSelectedObject = oTable.getTable().getSelectedContexts(),\r\n\t\t\t\toModel = this.getModel();\r\n\t\t\tvar aArray = [];\r\n\t\t\tvar Obj = {};\r\n\t\t\tvar LstRsultRow = this.getView().getModel(\"modelName\").getData().results.length - 1;\r\n\t\t\tif (this.getView().getModel(\"modelName\").getData().results.length > 0) {\r\n\t\t\t\tif (this.getView().getModel(\"modelName\").getData().results.length > 0 && this.getView().getModel(\"modelName\").getData().results[\r\n\t\t\t\t\t\tLstRsultRow].MigASNumber === \"\") {\r\n\t\t\t\t\tthis.getView().getModel(\"modelName\").getData().results.splice(LstRsultRow, 1);\r\n\t\t\t\t\tthis.getView().getModel(\"modelName\").refresh();\r\n\t\t\t\t}\r\n\t\t\t\tfor (var k = 0; k < this.getView().getModel(\"modelName\").getData().results.length; k++) {\r\n\t\t\t\t\tObj.MigASNumber = this.getView().getModel(\"modelName\").getData().results[k].MigASNumber;\r\n\t\t\t\t\tObj.SancAmunt = this.getView().getModel(\"modelName\").getData().results[k].SancAmunt;\r\n\t\t\t\t\tObj.ASDescription = this.getView().getModel(\"modelName\").getData().results[k].ASDescription;\r\n\t\t\t\t\tObj.SanctionRefe = this.getView().getModel(\"modelName\").getData().results[k].SanctionRefe;\r\n\t\t\t\t\taArray.push(Obj);\r\n\t\t\t\t\tObj = {};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (var i = 0; i < oSelectedObject.length; i++) {\r\n\t\t\t\tObj.MigASNumber = oSelectedObject[i].getObject().project_id;\r\n\t\t\t\tObj.SancAmunt = oSelectedObject[i].getObject().san_amt;\r\n\t\t\t\tObj.ASDescription = oSelectedObject[i].getObject().prj_desc;\r\n\t\t\t\tObj.SanctionRefe = oSelectedObject[i].getObject().san_ref_no;\r\n\t\t\t\taArray.push(Obj);\r\n\t\t\t\tObj = {};\r\n\t\t\t}\r\n\t\t\taArray = {\r\n\t\t\t\t\"results\": aArray\r\n\t\t\t};\r\n\t\t\tvar oModel = new sap.ui.model.json.JSONModel();\r\n\t\t\toModel.setData(aArray);\r\n\r\n\t\t\tthis.getView().setModel(oModel, \"modelName\");\r\n\t\t\tthis.getView().getModel(\"modelName\").refresh();\r\n\t\t\tthis._handleExit();\r\n\t\t},\r\n\t\t//Migrated Code Ends\r\n\r\n\t\t/**\r\n\t\t * function to close Migrated AS frag\r\n\t\t * @public\r\n\t\t */\r\n\r\n\t\t//Migrated Code Starts\r\n\t\tonCancelMigratedAS: function(oEvent) {\r\n\t\t\tvar that = this;\r\n\t\t\t// var url = \"/WrkAsMigSet(Guid=guid'\" + this.getOwnerComponent().getModel(\"migratedModel\").getData().guid + \"',OldAsNumber='\" + this.getOwnerComponent()\r\n\t\t\t// \t.getModel(\"migratedModel\").getData().oldasnumber + \"')\";\r\n\r\n\t\t\t// this.getOwnerComponent().getModel().remove(url, {\r\n\t\t\t// \tmethod: 'DELETE',\r\n\t\t\t// \tasync: true,\r\n\t\t\t// \tsuccess: function (oData, oResponse) {\r\n\t\t\t// \t\tdebugger;\r\n\t\t\tthat._createMigratedASFrag.close();\r\n\t\t\tvar oCreateNewASModel = that.getModel(\"createNewASModel\");\r\n\t\t\toCreateNewASModel.setProperty(\"/refVisible\", false);\r\n\t\t\toCreateNewASModel.setProperty(\"/typeVisible\", true);\r\n\t\t\toCreateNewASModel.updateBindings();\r\n\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bUserCreateAS\", false);\r\n\t\t\t// \t},\r\n\t\t\t// \terror: function (e) {\r\n\r\n\t\t\t// \t}\r\n\t\t\t// });\r\n\r\n\t\t},\r\n\t\t//Migrated Code Ends\r\n\r\n\t\t/**\r\n\t\t * Event handler for Radio button selection\r\n\t\t * @param {sap.ui.base.Event} oEvent Event for selecting radio button on Create Fragment\r\n\t\t */\r\n\r\n\t\t//Migrated Code Starts\r\n\t\tonSelectRadioButton: function(oEvent) {\r\n\t\t\tvar sControlId = oEvent.getSource().getId(),\r\n\t\t\t\toCreateNewASModel = this.getModel(\"createNewASModel\");\r\n\t\t\tif (sControlId === this._getCreateFragControlById(\"idMigratedRadioBtnPhaseOne\").getId()) {\r\n\t\t\t\toCreateNewASModel.setProperty(\"/nonCfms\", \"\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idCopyFromASCode\").setValue(\"\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idCopyFromASCode\").resetProperty(\"valueState\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idAmendASCode\").setValue(\"\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idAmendASCode\").resetProperty(\"valueState\");\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedPhaseOneEditable\", true);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedRadioBtnPhaseOneSelected\", true);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedRadioBtnNonCfmsSelected\", false);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedNonCfmsEditable\", false);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedSanctionVisible\", false);\r\n\t\t\t\t// oCreateNewASModel.setProperty(\"/migratedPhaseOneTabelVisible\", false);\r\n\t\t\t} else {\r\n\t\t\t\toCreateNewASModel.setProperty(\"/nonCfms\", \"X\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idCopyFromASCode\").setValue(\"\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idCopyFromASCode\").resetProperty(\"valueState\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idAmendASCode\").setValue(\"\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idAmendASCode\").resetProperty(\"valueState\");\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedPhaseOneEditable\", false);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedNonCfmsEditable\", true);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedRadioBtnPhaseOneSelected\", false);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedRadioBtnNonCfmsSelected\", true);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedSanctionVisible\", true);\r\n\t\t\t\t// oCreateNewASModel.setProperty(\"/migratedPhaseOneTabelVisible\", true);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tOnPressAddNewMigNumber: function(oEvent) {\r\n\t\t\tvar oCreateNewASModel = this.getModel(\"createNewASModel\");\r\n\t\t\tvar Obj = {\r\n\t\t\t\tMigASNumber: \"\",\r\n\t\t\t\tSancAmunt: \"\",\r\n\t\t\t\tASDescription: \"\",\r\n\t\t\t\tSanctionRefe: \"\"\r\n\t\t\t};\r\n\t\t\tvar data = this.getView().getModel(\"modelName\").getData().results;\r\n\t\t\tdata.push(Obj);\r\n\t\t\tthis.getView().getModel(\"modelName\").refresh();\r\n\t\t},\r\n\r\n\t\tonPressDeleteRowForSanction: function(oEvent) {\r\n\t\t\tvar RowId = oEvent.getSource().getId().split(\"-\")[6];\r\n\t\t\tthis.getView().getModel(\"modelName\").getData().results.splice(RowId, 1);\r\n\t\t\tthis.getView().getModel(\"modelName\").refresh();\r\n\t\t},\r\n\r\n\t\tonMigratedDialogDateChange: function(oEvent) {\r\n\t\t\tvar Sandate = oEvent.getSource().getValue();\r\n\t\t\tthis.getOwnerComponent().getModel(\"migratedModel\").getData().date = Sandate;\r\n\t\t\tthis.getOwnerComponent().getModel(\"migratedModel\").refresh();\r\n\t\t},\r\n\t\t//Migrated Code Ends\r\n\r\n\t\t//Migrated Code Starts\r\n\t\t_createMigAS: function(Code) {\r\n\t\t\tvar Obj = {\r\n\t\t\t\tMigASNumber: \"\",\r\n\t\t\t\tSancAmunt: \"\",\r\n\t\t\t\tASDescription: \"\",\r\n\t\t\t\tSanctionRefe: \"\"\r\n\t\t\t};\r\n\t\t\tvar oModel = new sap.ui.model.json.JSONModel({\r\n\t\t\t\tresults: []\r\n\t\t\t});\r\n\t\t\toModel.getData().results.push(Obj);\r\n\r\n\t\t\tthis.getView().setModel(oModel, \"modelName\");\r\n\t\t\tthis.getView().getModel(\"modelName\").refresh();\r\n\t\t\t$.sap.CreateNewASModel = this.getModel(\"createNewASModel\");\r\n\t\t\tvar oCreateNewASModel = this.getModel(\"createNewASModel\");\r\n\t\t\tvar model = new sap.ui.model.json.JSONModel();\r\n\t\t\tmodel.setData([]);\r\n\t\t\tvar data = {\r\n\t\t\t\tEditableField: true\r\n\t\t\t};\r\n\t\t\tmodel.setData([]);\r\n\t\t\tmodel.setData(data);\r\n\t\t\tthis.getOwnerComponent().setModel(model, \"migratedModel\");\r\n\t\t\tthis.getOwnerComponent().getModel(\"migratedModel\").updateBindings();\r\n\t\t\tif (oCreateNewASModel.getProperty(\"/migratedRadioBtnPhaseOneSelected\") === true) {\r\n\t\t\t\toCreateNewASModel.setProperty(\"/nonCfms\", \"\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idCopyFromASCode\").setValue(\"\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idCopyFromASCode\").resetProperty(\"valueState\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idAmendASCode\").setValue(\"\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idAmendASCode\").resetProperty(\"valueState\");\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedPhaseOneEditable\", true);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedRadioBtnPhaseOneSelected\", true);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedRadioBtnNonCfmsSelected\", false);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedNonCfmsEditable\", false);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedSanctionVisible\", false);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedPhaseOneTabelVisible\", true);\r\n\t\t\t} else {\r\n\t\t\t\toCreateNewASModel.setProperty(\"/nonCfms\", \"X\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idCopyFromASCode\").setValue(\"\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idCopyFromASCode\").resetProperty(\"valueState\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idAmendASCode\").setValue(\"\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idAmendASCode\").resetProperty(\"valueState\");\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedPhaseOneEditable\", false);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedNonCfmsEditable\", true);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedRadioBtnPhaseOneSelected\", false);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedRadioBtnNonCfmsSelected\", true);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedSanctionVisible\", true);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedPhaseOneTabelVisible\", false);\r\n\t\t\t}\r\n\t\t\tthis._createASFrag.close();\r\n\t\t\t// this._getCreateFragControlById(\"idMigratedASCode\").resetProperty(\"value\");\r\n\t\t\tthis.oSelectedObject = null;\r\n\t\t\toCreateNewASModel.setProperty(\"/amendEditable\", false);\r\n\t\t\toCreateNewASModel.setProperty(\"/copyEditable\", false);\r\n\t\t\toCreateNewASModel.setProperty(\"/refVisible\", false);\r\n\t\t\toCreateNewASModel.setProperty(\"/typeVisible\", true);\r\n\t\t\t// oCreateNewASModel.setProperty(\"/creatBtnVisible\", false);\r\n\t\t\toCreateNewASModel.setProperty(\"/backBtnVisible\", false);\r\n\t\t\toCreateNewASModel.setProperty(\"/nextBtnVisible\", true);\r\n\t\t\toCreateNewASModel.setProperty(\"/sancno1\", true);\r\n\t\t\toCreateNewASModel.setProperty(\"/sancno2\", false);\r\n\t\t\tif (!this._createMigratedASFrag) {\r\n\t\t\t\tvar fragId = this.createId(\"createMigratedASDialog\");\r\n\t\t\t\tthis._createMigratedASFrag = sap.ui.xmlfragment(fragId, \"com.goap.cfms.works.as.fragment.createMigratedASDialog\", this);\r\n\t\t\t\tthis.getView().addDependent(this._createMigratedASFrag);\r\n\t\t\t\tjQuery.sap.syncStyleClass(\"sapUiSizeCompact\", this.getView(), this._createMigratedASFrag);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\t\t/*\tdate picker only select (no need enter date) - in fragment - -start cfms_ctm_npv(27_01_23)*/\r\n\t\t\t// var dateArray = [\"sancDate\"];\r\n\t\t\t// dateArray.forEach(date => {\r\n\t\t\t\t\t// var oDatePicker = this._getMigratedCreateFragControlById(\"sancDate\").getId();\r\n\t\t\t\t\tvar oDatePicker = this._getMigratedCreateFragControlById(\"sancDate\");\r\n\t\t\t\t// var oDatePicker = sap.ui.getCore().byId(date);\r\n\t\t\t\t// var oDatePicker = this.getView().byId(date);\r\n\t\t\t\toDatePicker.addEventDelegate({\r\n\t\t\t\t\tonAfterRendering: function() {\r\n\t\t\t\t\t\tvar oDateInner = this.$().find('.sapMInputBaseInner');\r\n\t\t\t\t\t\t\t// var oDateInner = this._getMigratedCreateFragControlById(\"sancDate\").$().find('.sapMInputBaseInner');\r\n\t\t\t\t\t\tvar oID = oDateInner[0].id;\r\n\t\t\t\t\t\t$('#' + oID).attr(\"disabled\", \"disabled\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}, oDatePicker);\r\n\t\t\t// });\r\n\t\t\t// sap.ui.getCore().byId(\"sancDate\").setMaxDate(new Date());\r\n\t\t\t// sap.ui.getCore().byId(\"sancDate\").setMaxDate(new Date());\r\n\t\t\t/*\t\tdate picker only select (no need enter date) - in fragment --End - cfms_ctm_npv(27_01_23)*/\r\n\t\t\tthis._createMigratedASFrag.open();\r\n\t\t\tthis._getMigratedCreateFragControlById(\"fileUpload\").setSelected(false);\r\n\t\t\tthis._setInputFieldsNumberOnly(this._getMigratedCreateFragControlById(\"sancAmount\"));\r\n\t\t\tthis._setInputFieldsNumberOnly(this._getMigratedCreateFragControlById(\"goAmount\"));\r\n\t\t\tthis._getMigratedCreateFragControlById(\"goCategory\").setSelected(true);\r\n\t\t\toCreateNewASModel.setProperty(\"/sancno1\", true);\r\n\t\t\toCreateNewASModel.setProperty(\"/sancno2\", false);\r\n\t\t\toCreateNewASModel.updateBindings();\r\n\t\t\tthis._setInputFieldsNumberOnly(this._getMigratedCreateFragControlById(\"sancNo\"));\r\n\t\t\tthis._setFormReset();\r\n\t\t\t// old code -start\r\n\t\t//\tthis._manuallyDisabledDatePicker(this._getMigratedCreateFragControlById(\"sancDate\"));\r\n\t\t// old code end\r\n\t\t},\r\n\t\t//Migrated Code Ends\r\n\r\n\t\t//Migrated Code Starts\r\n\t\t_setFormReset: function() {\r\n\t\t\tvar goSanctionForm = this._getMigratedCreateFragControlById(\"goSanctionForm\");\r\n\t\t\tfor (var i = 0; i < goSanctionForm.getFormContainers().length; i++) {\r\n\t\t\t\tgoSanctionForm.getFormContainers()[i].getFormElements()[0].getFields()[0].setValueState(sap.ui.core.ValueState.None);\r\n\t\t\t\tgoSanctionForm.getFormContainers()[i].getFormElements()[0].getFields()[0].setValueStateText(\"\");\r\n\t\t\t\tgoSanctionForm.getFormContainers()[i].getFormElements()[0].getFields()[0].setValue(\"\");\r\n\t\t\t}\r\n\t\t\tvar goSanctionForm1 = this._getMigratedCreateFragControlById(\"goSanctionFormRight\");\r\n\t\t\tfor (var j = 0; j < goSanctionForm1.getFormContainers().length; j++) {\r\n\t\t\t\tif (goSanctionForm1.getFormContainers()[j].getFormElements()[0].getFields()[0].getMetadata()._sClassName != 'sap.m.CheckBox') {\r\n\t\t\t\t\tgoSanctionForm1.getFormContainers()[j].getFormElements()[0].getFields()[0].setValueStateText(\"\");\r\n\t\t\t\t\tgoSanctionForm1.getFormContainers()[j].getFormElements()[0].getFields()[0].setValue(\"\");\r\n\t\t\t\t}\r\n\t\t\t\tgoSanctionForm1.getFormContainers()[j].getFormElements()[0].getFields()[0].setValueState(sap.ui.core.ValueState.None);\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\t//Migrated Code Ends\r\n\r\n\t\t/**\r\n\t\t * function to close po upload dialog.\r\n\t\t * @public\r\n\t\t */\r\n\r\n\t\t//Migrated Code Starts\r\n\t\tonOKPOUploadDialog: function() {\r\n\t\t\tvar that = this;\r\n\t\t\tvar oCreateNewASModel = this.getModel(\"createNewASModel\");\r\n\t\t\tthis._poUploadFragment.close();\r\n\t\t\tthis._createMigratedASFrag.close();\r\n\t\t\toCreateNewASModel.setProperty(\"/backBtnVisible\", false);\r\n\t\t\toCreateNewASModel.setProperty(\"/nextBtnVisible\", true);\r\n\t\t\toCreateNewASModel.updateBindings();\r\n\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bUserCreateAS\", true);\r\n\t\t\tthis.getRouter().navTo(\"Detail\", {\r\n\t\t\t\tobjectId: that.payloadData.Guid,\r\n\t\t\t\tstateId: \"C\"\r\n\t\t\t}, true);\r\n\t\t},\r\n\t\t//Migrated Code Ends\r\n\r\n\t\t// onClosePOUploadDialog: function (oEvent) {\r\n\t\t// \tthis.closeEventForDialog = oEvent.getSource();\r\n\t\t// \tthis._poUploadFragment.close();\r\n\t\t// },\r\n\t\t/**\r\n\t\t * event handler for upload button.\r\n\t\t * @public\r\n\t\t */\r\n\r\n\t\t//Migrated Code Starts\r\n\t\tonPOUpload: function() {\r\n\t\t\tvar that = this;\r\n\t\t\tvar poFile;\r\n\t\t\tif (this.poFile) {\r\n\t\t\t\tpoFile = this.poFile;\r\n\t\t\t} else {\r\n\t\t\t\tpoFile = [];\r\n\t\t\t}\r\n\t\t\tif (poFile.length > 0) {\r\n\t\t\t\tvar payload = {\r\n\t\t\t\t\tAppType: \"ZWAS\",\r\n\t\t\t\t\tGuid: that.payloadData.Guid,\r\n\t\t\t\t\tWrkAppType_Nav: poFile,\r\n\t\t\t\t\tWrkUplRet_Nav: []\r\n\t\t\t\t};\r\n\t\t\t\tthis.getOwnerComponent().getModel().create(\"/WrkAppTypeSet\", payload, {\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tsuccess: function(oData, oResponse) {\r\n\t\t\t\t\t\tvar model = new sap.ui.model.json.JSONModel();\r\n\t\t\t\t\t\tmodel.setData([]);\r\n\t\t\t\t\t\tif (oData.WrkUplRet_Nav.results.length > 0) {\r\n\t\t\t\t\t\t\tmodel.setData(oData.WrkUplRet_Nav.results);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthat.getOwnerComponent().setModel(model, \"uploadedItem\");\r\n\t\t\t\t\t\tthat.getOwnerComponent().getModel(\"uploadedItem\").refresh();\r\n\t\t\t\t\t\tthat.getOwnerComponent().getModel(\"uploadedItem\").updateBindings();\r\n\t\t\t\t\t},\r\n\t\t\t\t\terror: function(e) {}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tsap.m.MessageBox.error(\"Please select a file First!\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t//Migrated Code Ends\r\n\r\n\t\t/**\r\n\t\t * Method to restrict user numbers only.\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\t//Migrated Code Starts\r\n\t\t_setInputFieldsNumberOnly: function(id) {\r\n\t\t\tid.attachBrowserEvent(\"keydown\", function(e) {\r\n\t\t\t\tvar isModifierkeyPressed = e.metaKey || e.ctrlKey || e.shiftKey;\r\n\t\t\t\tvar isCursorMoveOrDeleteAction = [46, 8, 37, 38, 39, 40, 9].indexOf(e.keyCode) !== -1;\r\n\t\t\t\tvar isNumKeyPressed = e.keyCode >= 48 && e.keyCode <= 58 || e.keyCode >= 96 && e.keyCode <= 105;\r\n\t\t\t\tvar vKey = 86,\r\n\t\t\t\t\tcKey = 67,\r\n\t\t\t\t\taKey = 65;\r\n\r\n\t\t\t\tswitch (true) {\r\n\t\t\t\t\tcase isCursorMoveOrDeleteAction:\r\n\t\t\t\t\tcase isModifierkeyPressed === false && isNumKeyPressed:\r\n\t\t\t\t\tcase (e.metaKey || e.ctrlKey) && [vKey, cKey, aKey].indexOf(e.keyCode) !== -1:\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t//Migrated Code Ends\r\n\t\t/**\r\n\t\t * Method to fetch csrf token.\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\t//Migrated Code Starts\r\n\t\tgetResponse: function getResponse(serverUrl, token) {\r\n\t\t\tvar oResp;\r\n\t\t\t$.ajax(encodeURI(serverUrl), {\r\n\t\t\t\ttype: \"GET\",\r\n\t\t\t\tasync: false,\r\n\t\t\t\tbeforeSend: function beforeSend(xhr) {\r\n\t\t\t\t\txhr.setRequestHeader('Accept', 'application/json');\r\n\t\t\t\t\txhr.setRequestHeader('Content-Type', 'application/json');\r\n\t\t\t\t\txhr.setRequestHeader('X-CSRF-Token', token);\r\n\t\t\t\t}\r\n\t\t\t}).fail(function() {}).complete(function(response) {\r\n\t\t\t\toResp = response;\r\n\t\t\t});\r\n\t\t\treturn oResp;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Method to feed csv file to a file uploader.\r\n\t\t * @private\r\n\t\t */\r\n\t\t_import: function(file) {\r\n\t\t\tif (file && window.FileReader) {\r\n\t\t\t\tvar reader = new FileReader();\r\n\t\t\t\tvar that = this;\r\n\t\t\t\treader.onload = function(evt) {\r\n\t\t\t\t\tvar strCSV = evt.target.result;\r\n\t\t\t\t\tthat.csvJSON(strCSV);\r\n\t\t\t\t};\r\n\t\t\t\treader.readAsText(file);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Method to convert csv to json.\r\n\t\t * @private\r\n\t\t */\r\n\t\tcsvJSON: function(csv) {\r\n\t\t\tvar lines = csv.split(\"\\n\");\r\n\t\t\t// for (var i = 0; i < lines.length; i++) {\r\n\t\t\t// \tlines[i] = lines[i] + \",zzz\";\r\n\t\t\t// }\r\n\t\t\tlines.splice(0, 1);\r\n\t\t\tlines.unshift(\r\n\t\t\t\t\"Item,Shorttext,Specification,Quantity,Grossprice\"\r\n\t\t\t\t// \"Purchdoc,Item,Shorttext,Doctype,Cocd,Plnt,Purorg,Purgrp,Matlgrp,Vendor,Itemcat,Acctasmt,Docdate,Specification,Shortxt,Quantity,BaseUnit,PriceUnit,Grossprice,Userfield1,Userfield2,Glaccount,Busienessarea,Wbs,Hoa,Ddo,Treasuryoffice,TsNumber\"\r\n\t\t\t);\r\n\t\t\tvar result = [];\r\n\t\t\tvar headers = lines[0].split(\",\");\r\n\t\t\tlines.map(function(line, indexLine) {\r\n\t\t\t\tif (indexLine < 1) return; // Jump header line\r\n\r\n\t\t\t\tvar obj = {};\r\n\t\t\t\tvar currentline = line.split(\",\");\r\n\r\n\t\t\t\theaders.map(function(header, indexHeader) {\r\n\t\t\t\t\tif (header == \"Docdate\") {\r\n\t\t\t\t\t\tobj[header] = \"\\/Date(\" + new Date().getTime() + \")\\/\";\r\n\t\t\t\t\t} else if (header == \"Treasuryoffice\\r\") {\r\n\t\t\t\t\t\tobj[\"Treasuryoffice\"] = currentline[indexHeader];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tobj[header] = currentline[indexHeader];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t});\r\n\t\t\t\tresult.push(obj);\r\n\t\t\t});\r\n\t\t\tthis.poFile = result;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event Handler - when a file is being uploaded.\r\n\t\t * @public\r\n\t\t */\r\n\t\t/*eslint-disable */\r\n\t\t//eslint-disable-func-name-matching\r\n\t\tonFileUploaderChange: function onChange(oEvent) {\r\n\t\t\tthis._import(oEvent.getParameter(\"files\")[0]);\r\n\t\t},\r\n\t\t/*eslint-enable */\r\n\t\t/**\r\n\t\t * Event Handler - to control file size.\r\n\t\t * @public\r\n\t\t */\r\n\t\tonFileSizeExceed: function onFileSizeExceed() {\r\n\t\t\tsap.m.MessageToast.show(\"File Size Exceed, File should be less than 2 mb\");\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event Handler - to maintain file type.\r\n\t\t * @public\r\n\t\t */\r\n\t\tonTypeMissmatch: function onTypeMissmatch(oEvent) {\r\n\t\t\tsap.m.MessageToast.show(\"File type should be CSV only.\");\r\n\t\t},\r\n\t\t//Migrated Code Starts\r\n\r\n\t\tonSelectChange: function(oEvent) {\r\n\t\t\t// var value =\r\n\t\t\tif (oEvent.getSource().getName() == 'SanDepartment') {\r\n\t\t\t\tthis.SanCDepart = oEvent.getSource().getSelectedItem().getText();\r\n\t\t\t\tthis.getOwnerComponent().getModel(\"migratedModel\").getData().dept = oEvent.getParameter(\"selectedItem\").getProperty(\"key\");\r\n\t\t\t} else if (oEvent.getSource().getName() == 'SanType') {\r\n\t\t\t\tthis.getOwnerComponent().getModel(\"migratedModel\").getData().type = oEvent.getParameter(\"selectedItem\").getProperty(\"key\");\r\n\t\t\t}\r\n\t\t\tthis.getOwnerComponent().getModel(\"migratedModel\").updateBindings();\r\n\t\t},\r\n\t\t//Migrated Code Ends\r\n\r\n\t\t//Migrated Code Starts\r\n\t\tdateconv: function(value) {\r\n\t\t\t// var res = String(value).slice(4, 15);\r\n\t\t\t// var m = res.slice(0, 3);\r\n\t\t\t// var d = res.slice(4, 6);\r\n\t\t\t// var y = res.slice(7, 15);\r\n\t\t\t// switch (m) {\r\n\t\t\t// case \"Jan\":\r\n\t\t\t// \tm = \"01\";\r\n\t\t\t// \tbreak;\r\n\r\n\t\t\t// case \"Feb\":\r\n\t\t\t// \tm = \"02\";\r\n\t\t\t// \tbreak;\r\n\r\n\t\t\t// case \"Mar\":\r\n\t\t\t// \tm = \"03\";\r\n\t\t\t// \tbreak;\r\n\r\n\t\t\t// case \"Apr\":\r\n\t\t\t// \tm = \"04\";\r\n\t\t\t// \tbreak;\r\n\r\n\t\t\t// case \"May\":\r\n\t\t\t// \tm = \"05\";\r\n\t\t\t// \tbreak;\r\n\r\n\t\t\t// case \"Jun\":\r\n\t\t\t// \tm = \"06\";\r\n\t\t\t// \tbreak;\r\n\r\n\t\t\t// case \"Jul\":\r\n\t\t\t// \tm = \"07\";\r\n\t\t\t// \tbreak;\r\n\r\n\t\t\t// case \"Aug\":\r\n\t\t\t// \tm = \"08\";\r\n\t\t\t// \tbreak;\r\n\r\n\t\t\t// case \"Sep\":\r\n\t\t\t// \tm = \"09\";\r\n\t\t\t// \tbreak;\r\n\r\n\t\t\t// case \"Oct\":\r\n\t\t\t// \tm = \"10\";\r\n\t\t\t// \tbreak;\r\n\r\n\t\t\t// case \"Nov\":\r\n\t\t\t// \tm = \"11\";\r\n\t\t\t// \tbreak;\r\n\r\n\t\t\t// case \"Dec\":\r\n\t\t\t// \tm = \"12\";\r\n\t\t\t// \tbreak;\r\n\t\t\t// }\r\n\t\t\tvar y = value.split(\".\")[2];\r\n\t\t\tvar m = value.split(\".\")[1];\r\n\t\t\tvar d1 = value.split(\".\")[0];\r\n\t\t\t/*eslint-disable */\r\n\t\t\t//eslint-disable-no-implicit-coercion\r\n\t\t\tvar frmdatemil = y + \"\" + m + \"\" + d1;\r\n\t\t\t/*eslint-enable */\r\n\t\t\treturn frmdatemil;\r\n\t\t},\r\n\t\t//Migrated Code Ends\r\n\r\n\t\t//Migrated Code Starts\r\n\t\tonhandleSanctionAuthority: function(oEvent) {\r\n\t\t\tthis.getView().setBusy(true);\r\n\t\t\tthis.sourcesancauth = oEvent.getSource();\r\n\t\t\tif (!this.sacauthority) {\r\n\t\t\t\tthis.sacauthority = sap.ui.xmlfragment(\"com.goap.cfms.works.as.fragment.sacauthority\", this);\r\n\t\t\t\tthis.getView().addDependent(this.sacauthority);\r\n\t\t\t}\r\n\t\t\tvar that = this;\r\n\t\t\tif (this.getOwnerComponent().getModel(\"migratedModel\").getData().date === \"\" || this.getOwnerComponent().getModel(\"migratedModel\").getData()\r\n\t\t\t\t.date === null || this.getOwnerComponent().getModel(\"migratedModel\").getData().date === undefined) {\r\n\t\t\t\tsap.m.MessageBox.error(\"Please Select Sacntion Date\");\r\n\t\t\t} else if (this.getOwnerComponent().getModel(\"migratedModel\").getData().dept === \"\") {\r\n\t\t\t\tsap.m.MessageBox.error(\"Please Select Sacntion Department\");\r\n\t\t\t} else {\r\n\t\t\t\tvar sacdt = this.dateconv(this.getOwnerComponent().getModel(\"migratedModel\").getData().date);\r\n\t\t\t\tvar sacdept = this.getOwnerComponent().getModel(\"migratedModel\").getData().beschr;\r\n\t\t\t\tvar sactype = this.getOwnerComponent().getModel(\"migratedModel\").getData().type;\r\n\t\t\t\tvar selfilter = [];\r\n\t\t\t\tselfilter.push(new sap.ui.model.Filter(\"Auth_Type\", sap.ui.model.FilterOperator.EQ, \"AS\"));\r\n\t\t\t\tselfilter.push(new sap.ui.model.Filter(\"DeptCode\", sap.ui.model.FilterOperator.EQ, sacdept));\r\n\t\t\t\tselfilter.push(new sap.ui.model.Filter(\"SanDate\", sap.ui.model.FilterOperator.EQ, sacdt));\r\n\t\t\t\t//selfilter.push(new sap.ui.model.Filter(\"Cat_Work\", sap.ui.model.FilterOperator.EQ, \"DCW\"));\r\n\t\t\t\tthat.getOwnerComponent().getModel().read(\"/AuthPositionSet\", {\r\n\t\t\t\t\tasync: true,\r\n\t\t\t\t\tfilters: selfilter,\r\n\t\t\t\t\tsuccess: function(oData) {\r\n\t\t\t\t\t\tthat.getView().setBusy(false);\r\n\t\t\t\t\t\tthat.sacauth = oData.results;\r\n\t\t\t\t\t\tvar sacauthmodel = new sap.ui.model.json.JSONModel({\r\n\t\t\t\t\t\t\tresults: that.sacauth\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthat.getOwnerComponent().setModel(sacauthmodel, \"sacauthmodel\");\r\n\t\t\t\t\t\tthat.getOwnerComponent().getModel(\"sacauthmodel\").refresh();\r\n\t\t\t\t\t\tthat.sacauthority.setTitle(\"Sanction Authority (\" + oData.results.length + \")\");\r\n\t\t\t\t\t\tthat.sacauthority.open();\r\n\t\t\t\t\t},\r\n\t\t\t\t\terror: function(error) {\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t//Migrated Code Ends\r\n\r\n\t\t//Migrated Code Starts\r\n\t\tsacauthorityConfirm: function(oEvent) {\r\n\t\t\tvar oSelectedItem = oEvent.getParameter(\"selectedItem\");\r\n\t\t\tif (oSelectedItem) {\r\n\t\t\t\tthis.desc = oSelectedItem.getDescription();\r\n\t\t\t\tthis.id = oSelectedItem.getTitle();\r\n\t\t\t\tthis.sourcesancauth.setValue(this.id + \" \" + \"(\" + this.desc + \")\");\r\n\t\t\t}\r\n\t\t\tif (oEvent.getSource().getBinding(\"items\") !== undefined) {\r\n\t\t\t\toEvent.getSource().getBinding(\"items\").filter([]);\r\n\t\t\t}\r\n\t\t\tthis.getOwnerComponent().getModel(\"migratedModel\").getData().authority = this.id + \" \" + \"(\" + this.desc + \")\";\r\n\t\t\tthis.getOwnerComponent().getModel(\"migratedModel\").updateBindings();\r\n\t\t\tthis.sacauthority.destroy();\r\n\t\t\tthis.sacauthority = undefined;\r\n\t\t},\r\n\r\n\t\tsacauthoritySearch: function(oEvent) {\r\n\t\t\tvar sValue = oEvent.getParameter(\"value\");\r\n\t\t\tvar filters = new Array();\r\n\t\t\tvar oFilter = new sap.ui.model.Filter([\r\n\t\t\t\tnew sap.ui.model.Filter(\"Auth_Pos\", sap.ui.model.FilterOperator.Contains, sValue),\r\n\t\t\t\tnew sap.ui.model.Filter(\"Name_Pos\", sap.ui.model.FilterOperator.Contains, sValue)\r\n\t\t\t]);\r\n\t\t\tfilters.push(oFilter);\r\n\t\t\toEvent.getSource().getBinding(\"items\").filter([oFilter]);\r\n\t\t},\r\n\t\t//Migrated Code Ends\r\n\r\n\t\t/**\r\n\t\t * @param {*} oEvent is the onselect event\r\n\t\t */\r\n\r\n\t\t//Migrated Code Starts\r\n\t\tonSancTypeSelect: function(oEvent) {\r\n\t\t\tvar oSelectedItem = oEvent.getParameter(\"selectedItem\");\r\n\t\t\tif (oSelectedItem) {\r\n\t\t\t\tthis.getOwnerComponent().getModel(\"migratedModel\").getData().type = oSelectedItem.getTitle();\r\n\t\t\t\tthis.getOwnerComponent().getModel(\"migratedModel\").updateBindings();\r\n\t\t\t}\r\n\t\t},\r\n\t\t//Migrated Code Ends\r\n\r\n\t\t/**\r\n\t\t * function to return the Control \r\n\t\t * @param {string} sControlId Identifier for the Control Structure of Create Migrated Fragment\r\n\t\t * @returns {Object} Control inside the fragment\r\n\t\t */\r\n\r\n\t\t//Migrated Code Starts\r\n\t\t_getMigratedCreateFragControlById: function(sControlId) {\r\n\t\t\treturn sap.ui.core.Fragment.byId(this.createId(\"createMigratedASDialog\"), sControlId);\r\n\t\t},\r\n\t\t//Migrated Code Ends\r\n\r\n\t\t/**\r\n\t\t * function to save migrated as data.\r\n\t\t * @public\r\n\t\t */\r\n\r\n\t\t//Migrated Code Starts\r\n\t\t_saveMigratedASData: function(data) {\r\n\t\t\tvar that = this;\r\n\t\t\tdata.Action = \"MIGSAVE\";\r\n\t\t\tthis.getOwnerComponent().getModel().create(\"/WrkMigCmmSet\", data, {\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tsuccess: function(oData, oResponse) {\r\n\r\n\t\t\t\t\t//Updating sessionguid to browser storage\r\n\t\t\t\t\tvar oParamsBrowserStorage = jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\");\r\n\t\t\t\t\toParamsBrowserStorage.SessionGuid = oData.Sessionguid;\r\n\t\t\t\t\tjQuery.sap.storage(jQuery.sap.storage.Type.session).put(\"zworksBrowserStorage\", oParamsBrowserStorage);\r\n\r\n\t\t\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/SessionGuid\", oData.Sessionguid);\r\n\t\t\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bUserCreateAS\", true);\r\n\r\n\t\t\t\t\tthat.payloadData = oData;\r\n\t\t\t\t\t$.sap.ASNUMBER = oData;\r\n\t\t\t\t\tif (that._getMigratedCreateFragControlById(\"fileUpload\").getSelected()) {\r\n\t\t\t\t\t\tif (!that._poUploadFragment) {\r\n\t\t\t\t\t\t\tthat._poUploadFragment = sap.ui.xmlfragment(\"com.goap.cfms.works.as.fragment.POUpload\", that);\r\n\t\t\t\t\t\t\tthat.getView().addDependent(that._poUploadFragment);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (that.getOwnerComponent().getModel(\"uploadedItem\") != undefined) {\r\n\t\t\t\t\t\t\tthat.getOwnerComponent().getModel(\"uploadedItem\").setData([]);\r\n\t\t\t\t\t\t\tthat.getOwnerComponent().getModel(\"uploadedItem\").refresh();\r\n\t\t\t\t\t\t\tthat.getOwnerComponent().getModel(\"uploadedItem\").updateBindings();\r\n\t\t\t\t\t\t\tsap.ui.getCore().byId(\"fileUpload\").setValue(\"\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthat._poUploadFragment.open();\r\n\t\t\t\t\t\t// sap.ui.getCore(\"fileUpload\").setValue(\"\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat._createMigratedASFrag.close();\r\n\t\t\t\t\t\tvar oCreateNewASModel = that.getModel(\"createNewASModel\");\r\n\t\t\t\t\t\toCreateNewASModel.setProperty(\"/backBtnVisible\", false);\r\n\t\t\t\t\t\toCreateNewASModel.setProperty(\"/nextBtnVisible\", true);\r\n\t\t\t\t\t\toCreateNewASModel.updateBindings();\r\n\t\t\t\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bUserCreateAS\", true);\r\n\t\t\t\t\t\tthat.getRouter().navTo(\"Detail\", {\r\n\t\t\t\t\t\t\tobjectId: oData.Guid,\r\n\t\t\t\t\t\t\tstateId: \"C\"\r\n\t\t\t\t\t\t}, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terror: function(error) {\r\n\t\t\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bUserCreateAS\", false);\r\n\t\t\t\t\t// debugger;\r\n\t\t\t\t\t// sap.m.MessageBox.error(\"\" + JSON.parse(error.responseText).error.message.value + \"\", {\r\n\t\t\t\t\t// \tactions: [sap.m.MessageBox.Action.OK],\r\n\t\t\t\t\t// \tonClose: function (sAction) {\r\n\t\t\t\t\t// \t\tif (sAction === \"OK\" || sAction === null) {}\r\n\t\t\t\t\t// \t}\r\n\t\t\t\t\t// });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t//Migrated Code Ends\r\n\r\n\t\t/**\r\n\t\t * Event handler for Multiprocess \r\n\t\t * @param {*} oEvent \r\n\t\t */\r\n\t\tonMultiProcessBtnPress: function(oEvent) {\r\n\t\t\tvar oSource = oEvent.getSource();\r\n\t\t\tthis._setMultiPosition(oSource.getIcon());\r\n\t\t},\r\n\t\t/**\r\n\t\t * Private function to set Multi-Position \r\n\t\t * @param {string} sBtnTxt Button Icon text \r\n\t\t */\r\n\t\t_setMultiPosition: function(sBtnTxt) {\r\n\t\t\tvar oMasterViewModel = this.getModel(\"masterView\");\r\n\t\t\tif (sBtnTxt === \"sap-icon://activate\") {\r\n\t\t\t\tthis.getModel(\"appView\").setProperty(\"/sMasterListMode\", \"MultiSelect\");\r\n\t\t\t\toMasterViewModel.setProperty(\"/bMultiSelectVisible\", true);\r\n\t\t\t\tthis.byId(\"idMultiSelectBtn\").setIcon(\"sap-icon://sys-cancel\");\r\n\t\t\t\tthis.byId(\"idStatusTab\").setBusy(true);\r\n\t\t\t} else {\r\n\t\t\t\tthis.getModel(\"appView\").setProperty(\"/sMasterListMode\", \"SingleSelectMaster\");\r\n\t\t\t\toMasterViewModel.setProperty(\"/bMultiSelectVisible\", false);\r\n\t\t\t\tthis.byId(\"idMultiSelectBtn\").setIcon(\"sap-icon://activate\");\r\n\t\t\t\tthis.byId(\"idStatusTab\").setBusy(false);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event Handler function for Process Multiple AS\r\n\t\t * @param {*} oEvent \r\n\t\t */\r\n\t\tonProcessPress: function(oEvent) {\r\n\t\t\tif (!this._massProcessFrag) {\r\n\t\t\t\tvar fragId = this.createId(\"fragMassProcess\");\r\n\t\t\t\tthis._massProcessFrag = sap.ui.xmlfragment(fragId, \"com.goap.cfms.works.as.fragment.massProcessNote\", this);\r\n\t\t\t\tthis.getView().addDependent(this._massProcessFrag);\r\n\t\t\t\tjQuery.sap.syncStyleClass(\"sapUiSizeCompact\", this.getView(), this._massProcessFrag);\r\n\t\t\t}\r\n\t\t\tthis._massProcessFrag.open();\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler function to post selected AS\r\n\t\t * @param {*} oEvent \r\n\t\t */\r\n\t\tonMultiProcess: function(oEvent) {\r\n\t\t\tvar that = this,\r\n\t\t\t\tsUser = \"\",\r\n\t\t\t\tsPath = \"\";\r\n\t\t\tif (sap.ushell) {\r\n\t\t\t\tsUser = sap.ushell.Container.getService(\"UserInfo\").getId();\r\n\t\t\t}\r\n\t\t\tsPath = this.getModel().createKey(\"User_DetailsSet\", {\r\n\t\t\t\tUser_ID: sUser,\r\n\t\t\t\tApplication: 'AS',\r\n\t\t\t\tRole: this.getView().getModel(\"appView\").getProperty(\"/role\")\r\n\t\t\t});\r\n\t\t\tvar params = {\r\n\t\t\t\tpath: \"/\" + sPath,\r\n\t\t\t\tbusyControl: that.getView()\r\n\t\t\t};\r\n\t\t\tif (this.getModel(\"masterView\").getProperty(\"/Notingstring\")) {\r\n\t\t\t\tthis.oValidateBio = new Promise(function(resolve, reject) {\r\n\t\t\t\t\tthis._getBioValidation(params, resolve, reject);\r\n\t\t\t\t}.bind(this));\r\n\t\t\t\tthis.oValidateBio.then(function(oData) {\r\n\t\t\t\t\tthat._bioCheckSuccessful({});\r\n\t\t\t\t}, function(oError) {\r\n\t\t\t\t\tthat._bioCheckSuccessful({});\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis._displayWarnMessge(this.getModel(\"i18n\").getResourceBundle().getText(\"detail.message.note.empty\"));\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_bioCheckSuccessful: function(oParams) {\r\n\t\t\tvar bWorkFlowDefined = true,\r\n\t\t\t\toMultiProcessNoteDialog = sap.ui.core.Fragment.byId(this.createId(\"fragMassProcess\"), \"idMassProcessNoteDialog\"),\r\n\t\t\t\toMassPayload = this._getMassPayload();\r\n\t\t\toMultiProcessNoteDialog.setBusy(true);\r\n\t\t\tif (oMassPayload.MassHeaderItems[0].Guid) {\r\n\t\t\t\tvar sUserId = sap.ushell.Container.getService(\"UserInfo\").getId();\r\n\t\t\t\tvar oWorkFlow = new Promise(function(resolve, reject) {\r\n\t\t\t\t\tthis.getOwnerComponent().oDraft.getWorkflow({\r\n\t\t\t\t\t\tmethod: \"GET\",\r\n\t\t\t\t\t\tfName: \"/GetWorkFlowLog\",\r\n\t\t\t\t\t\turlParameters: {\r\n\t\t\t\t\t\t\tApplicationId: \"AS\",\r\n\t\t\t\t\t\t\tGuid: oMassPayload.MassHeaderItems[0].Guid,\r\n\t\t\t\t\t\t\tbusyControl: this.getView()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, resolve, reject);\r\n\t\t\t\t}.bind(this));\r\n\t\t\t\toWorkFlow.then(function(oResult) {\r\n\t\t\t\t\tvar aWorkFlowLogData = oResult.data.results;\r\n\t\t\t\t\tif (aWorkFlowLogData.length >= 1) {\r\n\t\t\t\t\t\tfor (var i = 0; i < aWorkFlowLogData.length; i++) {\r\n\t\t\t\t\t\t\tif ((sUserId === aWorkFlowLogData[i].Pernr) && (aWorkFlowLogData.length - 1) === i) {\r\n\t\t\t\t\t\t\t\tbWorkFlowDefined = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (bWorkFlowDefined) {\r\n\t\t\t\t\t\tthis.workflowProcess();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.getModel(\"appView\").setProperty(\"/busy\", false);\r\n\t\t\t\t\t\tMessageBox.alert(this.getResourceBundle().getText(\"detail.error.msg.wrkflowRoleNotMaint\"), {\r\n\t\t\t\t\t\t\tactions: [sap.m.MessageBox.Action.YES, sap.m.MessageBox.Action.NO],\r\n\t\t\t\t\t\t\tonClose: function(sAction) {\r\n\t\t\t\t\t\t\t\tif (sAction === \"YES\") {\r\n\t\t\t\t\t\t\t\t\tthis._reusePositionValueHelp(oMassPayload);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}.bind(this)\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}.bind(this));\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * multi-Process of AS document\r\n\t\t */\r\n\t\tworkflowProcess: function() {\r\n\t\t\tvar oWFCModel = this.getModel(\"WFCModel\"),\r\n\t\t\t\toMultiProcessNoteDialog = sap.ui.core.Fragment.byId(this.createId(\"fragMassProcess\"), \"idMassProcessNoteDialog\"),\r\n\t\t\t\toMassPayload = this._getMassPayload();\r\n\t\t\toMassPayload.Fflag = \"X\";\r\n\t\t\toMassPayload.Fposition = oWFCModel.getProperty(\"/nextPositionID\");\r\n\t\t\toMassPayload.Fuserid = oWFCModel.getProperty(\"/nextUserID\");\r\n\t\t\tvar oMultiProcess = new Promise(function(resolve, reject) {\r\n\t\t\t\tthis.getOwnerComponent().oDraft.whenHdrCreate({\r\n\t\t\t\t\tpath: \"/ZWRK_MASS_HEADERSet\",\r\n\t\t\t\t\tdata: oMassPayload,\r\n\t\t\t\t\tbusyControl: this.getView()\r\n\t\t\t\t}, resolve, reject);\r\n\t\t\t}.bind(this));\r\n\t\t\toMultiProcess.then(function(oResult) {\r\n\t\t\t\toMultiProcessNoteDialog.setBusy(false);\r\n\t\t\t\tthis._massProcessFrag.close();\r\n\t\t\t\tthis.getModel(\"masterView\").setProperty(\"/Notingstring\", \"\");\r\n\t\t\t\tthis.getModel(\"appView\").setProperty(\"/sMasterListMode\", \"SingleSelectMaster\");\r\n\t\t\t\tthis.getModel(\"masterView\").setProperty(\"/bMultiSelectVisible\", false);\r\n\t\t\t\tthis.byId(\"idMultiSelectBtn\").setIcon(\"sap-icon://activate\");\r\n\t\t\t\tthis.byId(\"idStatusTab\").setBusy(false);\r\n\t\t\t\tthis.getModel().refresh();\r\n\t\t\t}.bind(this));\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler to close the Note fragment\r\n\t\t * @param {*} oEvent \r\n\t\t */\r\n\t\tonCancelMultiProcess: function() {\r\n\t\t\tthis._massProcessFrag.close();\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for the master search field. Applies current\r\n\t\t * filter value and triggers a new search. If the search field's\r\n\t\t * 'refresh' button has been pressed, no new search is triggered\r\n\t\t * and the list binding is refresh instead.\r\n\t\t * @param {sap.ui.base.Event} oEvent the search event\r\n\t\t * @public\r\n\t\t */\r\n\t\tonSearch: function(oEvent) {\r\n\t\t\tif (oEvent.getParameters().refreshButtonPressed) {\r\n\t\t\t\t// Search field's 'refresh' button has been pressed.\r\n\t\t\t\t// This is visible if you select any master list item.\r\n\t\t\t\t// In this case no new search is triggered, we only\r\n\t\t\t\t// refresh the list binding.\r\n\t\t\t\tthis.onRefresh();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar sQuery = oEvent.getParameter(\"query\");\r\n\r\n\t\t\tif (sQuery) {\r\n\t\t\t\tthis._oListFilterState.aSearch = [new Filter(\"ShortDesc\", FilterOperator.Contains, sQuery)];\r\n\t\t\t} else {\r\n\t\t\t\tthis._oListFilterState.aSearch = [];\r\n\t\t\t}\r\n\t\t\tthis._applyFilterSearch();\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event Handler function to Open Create AS frag\r\n\t\t * @param {Event} oEvent is the event\r\n\t\t */\r\n\t\tonCreateNewAS: function(oEvent) {\r\n\t\t\tvar oCreateNewASModel = this.getModel(\"createNewASModel\");\r\n\t\t\tif (!this._createASFrag) {\r\n\t\t\t\tvar fragId = this.createId(\"fragCreateFrag\");\r\n\t\t\t\tthis._createASFrag = sap.ui.xmlfragment(fragId, \"com.goap.cfms.works.as.fragment.createAS\", this);\r\n\t\t\t\tthis.getView().addDependent(this._createASFrag);\r\n\t\t\t\tjQuery.sap.syncStyleClass(\"sapUiSizeCompact\", this.getView(), this._createASFrag);\r\n\t\t\t}\r\n\t\t\tthis._getCreateFragControlById(\"idNewRadioBtn\").setSelected(true);\r\n\t\t\toCreateNewASModel.setProperty(\"/amendEditable\", false);\r\n\t\t\toCreateNewASModel.setProperty(\"/copyEditable\", false);\r\n\t\t\t//Migrated Code Starts\r\n\t\t\toCreateNewASModel.setProperty(\"/migratedASRadioButtons\", false);\r\n\t\t\t//Migrated Code Ends\r\n\t\t\tif (this.getModel(\"oBundleCodeModel\")) {\r\n\t\t\t\tthis.getModel(\"oBundleCodeModel\").setData(null);\r\n\t\t\t}\r\n\t\t\toCreateNewASModel.updateBindings();\r\n\t\t\tthis._createASFrag.open();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Event Handler function to Create New Admin Sanction\r\n\t\t * @param {Event} oEvent is the event handler\r\n\t\t */\r\n\t\tonCreateAS: function(oEvent) {\r\n\t\t\tvar oASPayload;\r\n\t\t\tif (this._validateCreate()) {\r\n\t\t\t\t//Migrated Code Starts\r\n\t\t\t\t/*if (this._getCreateFragControlById(\"idMigratedRadioBtnPhaseOne\").getSelected() || this._getCreateFragControlById(\r\n\t\t\t\t\t\t\"idMigratedRadioBtnNonCfms\").getSelected()) {*/\r\n\t\t\t\tif (this._getCreateFragControlById(\"idMigratedRadioBtn\").getSelected()) {\r\n\t\t\t\t\tif (this._getCreateFragControlById(\"idMigratedRadioBtnPhaseOne\").getSelected()) {\r\n\t\t\t\t\t\tvar code = \"0000000001\";\r\n\t\t\t\t\t\tthis._createMigAS(code);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this._getCreateFragControlById(\"idMigratedRadioBtnNonCfms\").getSelected()) {\r\n\t\t\t\t\t\tvar code = \"0000000001\";\r\n\t\t\t\t\t\tthis._createMigAS(code);\r\n\t\t\t\t\t\t// this._createMigAS(oASPayload.Code);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//Migrated Code Ends\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//\t\t\t\t\tthis._createASFrag.setBusy(true);\r\n\t\t\t\t\tvar oDynamicBusyIndicator = new DynamicBusyIndicator(this);\r\n\t\t\t\t\toDynamicBusyIndicator.startBusy();\r\n\t\t\t\t\tthis.getModel(\"masterView\").setProperty(\"bCreateBtnEnable\", false);\r\n\t\t\t\t\toASPayload = this._createPayload();\r\n\t\t\t\t\tthis.oldASNumber = oASPayload.Code;\r\n\t\t\t\t\tvar oCreateAS = new Promise(function(resolve, reject) {\r\n\t\t\t\t\t\tthis.getOwnerComponent().oDraft.whenHdrCreate({\r\n\t\t\t\t\t\t\tpath: \"/WrkASDetailsDraftSet\",\r\n\t\t\t\t\t\t\tdata: oASPayload,\r\n\t\t\t\t\t\t\tbusyControl: this._createASFrag\r\n\t\t\t\t\t\t}, resolve, reject);\r\n\t\t\t\t\t}.bind(this));\r\n\r\n\t\t\t\t\toCreateAS.then(function(oResult) {\r\n\t\t\t\t\t\t//\t\t\t\t\t\tthis._createASFrag.setBusy(false);\r\n\t\t\t\t\t\toDynamicBusyIndicator.endBusy();\r\n\t\t\t\t\t\tthis._createASFrag.close();\r\n\t\t\t\t\t\tif (oResult.data.Action === \"NEW\") {\r\n\t\t\t\t\t\t\tthis.getModel(\"appView\").setProperty(\"/DepartDesc\", oResult.data.DepartDesc);\r\n\t\t\t\t\t\t\tthis.getModel(\"appView\").setProperty(\"/InitiatinDept\", oResult.data.InitiatinDept);\r\n\t\t\t\t\t\t} else if (oResult.data.Action === \"COPY\") {\r\n\t\t\t\t\t\t\tthis._getCreateFragControlById(\"idCopyFromASCode\").resetProperty(\"value\");\r\n\t\t\t\t\t\t\tthis.oSelectedObject = null;\r\n\t\t\t\t\t\t\tvar oCreateNewASModel = this.getModel(\"createNewASModel\");\r\n\t\t\t\t\t\t\toCreateNewASModel.setProperty(\"/amendEditable\", false);\r\n\t\t\t\t\t\t\toCreateNewASModel.setProperty(\"/copyEditable\", false);\r\n\t\t\t\t\t\t} else if (oResult.data.Action === \"AMEND\") {\r\n\t\t\t\t\t\t\tthis._getCreateFragControlById(\"idAmendASCode\").resetProperty(\"value\");\r\n\t\t\t\t\t\t\tthis.oSelectedObject = null;\r\n\t\t\t\t\t\t\tvar oCreateNewASModel = this.getModel(\"createNewASModel\");\r\n\t\t\t\t\t\t\toCreateNewASModel.setProperty(\"/amendEditable\", false);\r\n\t\t\t\t\t\t\toCreateNewASModel.setProperty(\"/copyEditable\", false);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t//Updating sessionguid to browser storage\r\n\t\t\t\t\t\tvar oParamsBrowserStorage = jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\");\r\n\t\t\t\t\t\toParamsBrowserStorage.SessionGuid = oResult.data.SessionGuid;\r\n\t\t\t\t\t\tjQuery.sap.storage(jQuery.sap.storage.Type.session).put(\"zworksBrowserStorage\", oParamsBrowserStorage);\r\n\r\n\t\t\t\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/SessionGuid\", oResult.data.SessionGuid);\r\n\t\t\t\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bUserCreateAS\", true);\r\n\t\t\t\t\t\tthis.getModel(\"masterView\").setProperty(\"bCreateBtnEnable\", true);\r\n\t\t\t\t\t\tthis.getRouter().navTo(\"Detail\", {\r\n\t\t\t\t\t\t\tobjectId: oResult.data.Guid,\r\n\t\t\t\t\t\t\tstateId: \"C\"\r\n\t\t\t\t\t\t}, true);\r\n\t\t\t\t\t}.bind(this));\r\n\t\t\t\t\toCreateAS.catch(function(oError) {\r\n\t\t\t\t\t\toDynamicBusyIndicator.endBusy();\r\n\t\t\t\t\t\tthis.getModel(\"masterView\").setProperty(\"bCreateBtnEnable\", true);\r\n\t\t\t\t\t}.bind(this));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Function to call for check validation for mandatory feilds\r\n\t\t */\r\n\r\n\t\t_validateInputs: function() {\r\n\t\t\tvar ainputs;\r\n\t\t\tif (this._getMigratedCreateFragControlById(\"goCategory\").getSelected()) {\r\n\t\t\t\t//Migrated Code Starts\r\n\t\t\t\tainputs = Constants.userInputControls.inputsForMigratedAgrFrag;\r\n\t\t\t\t//Migrated Code Ends\r\n\t\t\t} else {\r\n\t\t\t\tainputs = Constants.userInputControls.inputs;\r\n\t\t\t}\r\n\t\t\tfor (var i = 0; i < ainputs.length; i++) {\r\n\t\t\t\t//Migrated Code Starts\r\n\t\t\t\tvar aControls = this._getMigratedCreateFragControlById(ainputs[i]);\r\n\t\t\t\t//Migrated Code Ends\r\n\t\t\t\tvar oElementName = aControls.getMetadata().getElementName();\r\n\t\t\t\tswitch (oElementName) {\r\n\t\t\t\t\tcase \"sap.m.Input\":\r\n\t\t\t\t\t\tvar svalue = aControls.getValue();\r\n\t\t\t\t\t\tif (svalue === \"\") {\r\n\t\t\t\t\t\t\taControls.setValueState(\"Error\");\r\n\t\t\t\t\t\t\taControls.setValueStateText(\"Enter Mandatory Fields\");\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\taControls.setValueState(\"None\");\r\n\t\t\t\t\t\t\taControls.setValueStateText(\"\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"sap.m.DatePicker\":\r\n\t\t\t\t\t\tvar svalue = aControls.getDateValue();\r\n\t\t\t\t\t\tif (svalue === null) {\r\n\t\t\t\t\t\t\taControls.setValueState(\"Error\");\r\n\t\t\t\t\t\t\taControls.setValueStateText(\"Enter Mandatory Fields\");\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\taControls.setValueState(\"None\");\r\n\t\t\t\t\t\t\taControls.setValueStateText(\"\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"sap.m.Select\":\r\n\t\t\t\t\t\tvar svalue = aControls.getSelectedKey();\r\n\t\t\t\t\t\tif (svalue === \"\") {\r\n\t\t\t\t\t\t\taControls.setValueState(\"Error\");\r\n\t\t\t\t\t\t\taControls.setValueStateText(\"Enter Mandatory Fields\");\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\taControls.setValueState(\"None\");\r\n\t\t\t\t\t\t\taControls.setValueStateText(\"\");\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Event handler for refresh event. Keeps filter, sort\r\n\t\t * and group settings and refreshes the list binding.\r\n\t\t * @public\r\n\t\t */\r\n\t\tonRefresh: function() {\r\n\t\t\tthis._oList.getBinding(\"items\").refresh();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Event handler for the filter, sort and group buttons to open the ViewSettingsDialog.\r\n\t\t * @param {sap.ui.base.Event} oEvent the button press event\r\n\t\t * @public\r\n\t\t */\r\n\t\tonOpenViewSettings: function(oEvent) {\r\n\t\t\tif (!this._oViewSettingsDialog) {\r\n\t\t\t\tthis._oViewSettingsDialog = sap.ui.xmlfragment(\"as.sap.DemoApp.view.ViewSettingsDialog\", this);\r\n\t\t\t\tthis.getView().addDependent(this._oViewSettingsDialog);\r\n\t\t\t\t// forward compact/cozy style into Dialog\r\n\t\t\t\tthis._oViewSettingsDialog.addStyleClass(this.getOwnerComponent().getContentDensityClass());\r\n\t\t\t}\r\n\t\t\tvar sDialogTab = \"sort\";\r\n\r\n\t\t\tthis._oViewSettingsDialog.open(sDialogTab);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Event handler called when ViewSettingsDialog has been confirmed, i.e.\r\n\t\t * has been closed with 'OK'. In the case, the currently chosen filters, sorters or groupers\r\n\t\t * are applied to the master list, which can also mean that they\r\n\t\t * are removed from the master list, in case they are\r\n\t\t * removed in the ViewSettingsDialog.\r\n\t\t * @param {sap.ui.base.Event} oEvent the confirm event\r\n\t\t * @public\r\n\t\t */\r\n\t\tonConfirmViewSettingsDialog: function(oEvent) {\r\n\r\n\t\t\tthis._applySortGroup(oEvent);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Event handler for the list selection event\r\n\t\t * @param {sap.ui.base.Event} oEvent the list selectionChange event\r\n\t\t * @public\r\n\t\t */\r\n\t\tonSelectionChange: function(oEvent) {\r\n\t\t\tvar oList = oEvent.getSource(),\r\n\t\t\t\tbSelected = oEvent.getParameter(\"selected\");\r\n\r\n\t\t\t// skip navigation when deselecting an item in multi selection mode\r\n\t\t\t// if (!(oList.getMode() === \"MultiSelect\" && !bSelected)) {\r\n\t\t\tif (!(oList.getMode() === \"MultiSelect\")) {\r\n\t\t\t\t// get the list item, either from the listItem parameter or from the event's source itself (will depend on the device-dependent mode).\r\n\t\t\t\tthis.getView().byId(\"ItemsST\").getList().setSelectedItem(oList);\r\n\t\t\t\tthis._showDetail(oEvent.getParameter(\"listItem\") || oEvent.getSource());\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Event handler for the bypassed event, which is fired when no routing pattern matched.\r\n\t\t * If there was an object selected in the master list, that selection is removed.\r\n\t\t * @public\r\n\t\t */\r\n\t\tonBypassed: function() {\r\n\t\t\tthis._oList.removeSelections(true);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Used to create GroupHeaders with non-capitalized caption.\r\n\t\t * These headers are inserted into the master list to\r\n\t\t * group the master list's items.\r\n\t\t * @param {Object} oGroup group whose text is to be displayed\r\n\t\t * @public\r\n\t\t * @returns {sap.m.GroupHeaderListItem} group header with non-capitalized caption.\r\n\t\t */\r\n\t\tcreateGroupHeader: function(oGroup) {\r\n\t\t\treturn new GroupHeaderListItem({\r\n\t\t\t\ttitle: oGroup.text,\r\n\t\t\t\tupperCase: false\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Event handler for navigating back.\r\n\t\t * It there is a history entry or an previous app-to-app navigation we go one step back in the browser history\r\n\t\t * If not, it will navigate to the shell home\r\n\t\t * @public\r\n\t\t */\r\n\t\tonNavBack: function() {\r\n\t\t\tvar sPreviousHash = History.getInstance().getPreviousHash(),\r\n\t\t\t\toCrossAppNavigator = sap.ushell.Container.getService(\"CrossApplicationNavigation\");\r\n\r\n\t\t\tif (sPreviousHash !== undefined || !oCrossAppNavigator.isInitialNavigation()) {\r\n\t\t\t\thistory.go(-1);\r\n\t\t\t} else {\r\n\t\t\t\toCrossAppNavigator.toExternal({\r\n\t\t\t\t\ttarget: {\r\n\t\t\t\t\t\tshellHash: \"#Shell-home\"\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Private function for selected Item based on Position select\r\n\t\t * @param {*} oEvent \r\n\t\t */\r\n\t\t_applyPositionSelect: function() {\r\n\t\t\tvar oMasterModel = this.getModel(\"masterView\"),\r\n\t\t\t\tbPositionSelected = oMasterModel.getProperty(\"/bPositionSelected\");\r\n\t\t\tif (bPositionSelected) {\r\n\t\t\t\tthis._selectMasterListItem();\r\n\t\t\t\toMasterModel.setProperty(\"/bPositionSelected\", false);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event Handler for numbers of records under each type of document status - Draft, In Process & Approved\r\n\t\t * @param {Event}\r\n\t\t */\r\n\t\tonDataReceived: function(oEvent) {\r\n\t\t\tif (this.onListLoaded) {\r\n\t\t\t\tthis.onListLoaded();\r\n\t\t\t}\r\n\r\n\t\t\tvar sStorePosition = jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\").PositionId;\r\n\t\t\tvar sPosition = this.getModel(\"appView\").getProperty(\"/position\");\r\n\t\t\tvar Udf1;\r\n\t\t\tif (sStorePosition === sPosition) {\r\n\t\t\t\tUdf1 = sPosition;\r\n\t\t\t} else {\r\n\t\t\t\tUdf1 = sStorePosition;\r\n\t\t\t}\r\n\r\n\t\t\tvar oFilter1 = new Filter(\"udf1\", FilterOperator.EQ, Udf1);\r\n\t\t\tthis._applyPositionSelect();\r\n\t\t\tvar oStatusControl = this.getView().byId(\"idStatusTab\");\r\n\t\t\tvar sSearchTerm = this._concatStarToSearchValue(this.byId(oEvent.getSource().getSmartFilter()).getBasicSearchControl().getValue());\r\n\t\t\tvar aSmartFilter = [];\r\n\t\t\tif (this.byId(oEvent.getSource().getSmartFilter()).getFilters().length > 0) {\r\n\t\t\t\t$(this.byId(oEvent.getSource().getSmartFilter()).getFilters()[0].aFilters).each(function(index, value) {\r\n\t\t\t\t\taSmartFilter.push(value);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tvar oDraftCount = new Promise(function(resolve, reject) {\r\n\t\t\t\tvar aStatusFilter = aSmartFilter.slice();\r\n\t\t\t\taStatusFilter.push(new Filter(\"status\", FilterOperator.EQ, \"E0001\"), oFilter1);\r\n\t\t\t\tthis.getOwnerComponent().oDraft.getCount({\r\n\t\t\t\t\tpath: \"/ZWRK_C_ASHDR_DETAILS_C\",\r\n\t\t\t\t\turlParameters: {\r\n\t\t\t\t\t\tsearch: sSearchTerm\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilters: aStatusFilter,\r\n\t\t\t\t\tbusyControl: oStatusControl\r\n\t\t\t\t}, resolve, reject);\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\toDraftCount.then(function(oResult) {\r\n\t\t\t\tthis.getModel(\"masterView\").setProperty(\"/dCount\", oResult.data);\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\tvar oInpCount = new Promise(function(resolve, reject) {\r\n\t\t\t\tvar aStatusFilter = aSmartFilter.slice();\r\n\t\t\t\taStatusFilter.push(new Filter(\"status\", FilterOperator.EQ, \"E0003\"), oFilter1);\r\n\t\t\t\tthis.getOwnerComponent().oDraft.getCount({\r\n\t\t\t\t\tpath: \"/ZWRK_C_ASHDR_DETAILS_C\",\r\n\t\t\t\t\turlParameters: {\r\n\t\t\t\t\t\tsearch: sSearchTerm\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilters: aStatusFilter,\r\n\t\t\t\t\tbusyControl: oStatusControl\r\n\t\t\t\t}, resolve, reject);\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\toInpCount.then(function(oResult) {\r\n\t\t\t\tthis.getModel(\"masterView\").setProperty(\"/inPCount\", oResult.data);\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\tvar oApprCount = new Promise(function(resolve, reject) {\r\n\t\t\t\tvar aStatusFilter = aSmartFilter.slice();\r\n\t\t\t\taStatusFilter.push(new Filter(\"status\", FilterOperator.EQ, \"E0006\"), oFilter1);\r\n\t\t\t\tthis.getOwnerComponent().oDraft.getCount({\r\n\t\t\t\t\tpath: \"/ZWRK_C_ASHDR_DETAILS_C\",\r\n\t\t\t\t\turlParameters: {\r\n\t\t\t\t\t\tsearch: sSearchTerm\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilters: aStatusFilter,\r\n\t\t\t\t\tbusyControl: oStatusControl\r\n\t\t\t\t}, resolve, reject);\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\toApprCount.then(function(oResult) {\r\n\t\t\t\tthis.getModel(\"masterView\").setProperty(\"/apprCount\", oResult.data);\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\tvar oHoldCount = new Promise(function(resolve, reject) {\r\n\t\t\t\tvar aStatusFilter = aSmartFilter.slice();\r\n\t\t\t\taStatusFilter.push(new Filter(\"status\", FilterOperator.EQ, \"E0005\"), oFilter1);\r\n\t\t\t\tthis.getOwnerComponent().oDraft.getCount({\r\n\t\t\t\t\tpath: \"/ZWRK_C_ASHDR_DETAILS_C\",\r\n\t\t\t\t\turlParameters: {\r\n\t\t\t\t\t\tsearch: sSearchTerm\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilters: aStatusFilter,\r\n\t\t\t\t\tbusyControl: oStatusControl\r\n\t\t\t\t}, resolve, reject);\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\toHoldCount.then(function(oResult) {\r\n\t\t\t\tthis.getModel(\"masterView\").setProperty(\"/holdCount\", oResult.data);\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\tvar oReturnCount = new Promise(function(resolve, reject) {\r\n\t\t\t\tvar aStatusFilter = aSmartFilter.slice();\r\n\t\t\t\taStatusFilter.push(new Filter(\"status\", FilterOperator.EQ, \"E0004\"), oFilter1);\r\n\t\t\t\tthis.getOwnerComponent().oDraft.getCount({\r\n\t\t\t\t\tpath: \"/ZWRK_C_ASHDR_DETAILS_C\",\r\n\t\t\t\t\turlParameters: {\r\n\t\t\t\t\t\tsearch: sSearchTerm\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilters: aStatusFilter,\r\n\t\t\t\t\tbusyControl: oStatusControl\r\n\t\t\t\t}, resolve, reject);\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\toReturnCount.then(function(oResult) {\r\n\t\t\t\tthis.getModel(\"masterView\").setProperty(\"/returnCount\", oResult.data);\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\tvar oAllCount = new Promise(function(resolve, reject) {\r\n\t\t\t\tvar aStatusFilter = aSmartFilter.slice();\r\n\t\t\t\taStatusFilter.push(oFilter1);\r\n\t\t\t\tthis.getOwnerComponent().oDraft.getCount({\r\n\t\t\t\t\tpath: \"/ZWRK_C_ASHDR_DETAILS_C\",\r\n\t\t\t\t\turlParameters: {\r\n\t\t\t\t\t\tsearch: sSearchTerm\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilters: aStatusFilter,\r\n\t\t\t\t\tbusyControl: oStatusControl\r\n\t\t\t\t}, resolve, reject);\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\toAllCount.then(function(oResult) {\r\n\t\t\t\tthis.getModel(\"masterView\").setProperty(\"/aCount\", oResult.data);\r\n\t\t\t}.bind(this));\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event Handler for clicking on Sort in the Master List\r\n\t\t * @param {sap.ui.base.Event} oEvent Event for Pressing Sort on the master list\r\n\t\t */\r\n\t\tonSortPress: function(oEvent) {\r\n\t\t\tthis._getSortDialog().open();\r\n\t\t},\r\n\t\t/**\r\n\t\t * Function to refresh Master List Model\r\n\t\t * @private\r\n\t\t */\r\n\t\tonMasterListRefresh: function() {\r\n\t\t\tthis.getModel().refresh();\r\n\t\t},\r\n\r\n\t\t_onDetailRouteMatch: function() {\r\n\t\t\t//\t\tthis.getView().byId(\"ItemsST\").rebindList();\t\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Event Handler for clicking the confirm button on the Sort Dialog\r\n\t\t * @param {Event} oEvent Event for confirming sort parameters\r\n\t\t */\r\n\t\thandleConfirm: function(oEvent) {\r\n\t\t\tvar oBinding = this.byId(\"ItemsST\").getList().getBinding(\"items\"),\r\n\t\t\t\tSORTKEY = oEvent.getParameter(\"sortItem\").getProperty(\"key\"),\r\n\t\t\t\taSorter = [];\r\n\t\t\taSorter.push(new sap.ui.model.Sorter(SORTKEY, oEvent.getParameter(\"sortDescending\")));\r\n\t\t\toBinding.sort(aSorter);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Lifecycle method for setting filters everytime the list is rebound\r\n\t\t * @param {Event} oEvent Event for list binding redone\r\n\t\t */\r\n\t\tbeforeRebindList: function(oEvent) {\r\n\t\t\tvar mBindingParams = oEvent.getParameter(\"bindingParams\");\r\n\t\t\tif (mBindingParams.parameters.custom && mBindingParams.parameters.custom.search) {\r\n\t\t\t\tmBindingParams.parameters.custom.search = this._concatStarToSearchValue(mBindingParams.parameters.custom.search);\r\n\t\t\t}\r\n\t\t\tvar sStorePosition = jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\").PositionId;\r\n\t\t\tvar sPosition = this.getModel(\"appView\").getProperty(\"/position\");\r\n\t\t\tvar Udf1;\r\n\t\t\tif (sStorePosition === sPosition) {\r\n\t\t\t\tUdf1 = sPosition;\r\n\t\t\t} else {\r\n\t\t\t\tUdf1 = sStorePosition;\r\n\t\t\t}\r\n\r\n\t\t\tvar oFilter1 = new Filter(\"udf1\", FilterOperator.EQ, Udf1),\r\n\t\t\t\toFilter2 = new Filter(\"status\", FilterOperator.EQ, this.getModel(\"masterView\").getProperty(\"/listStatusCode\")),\r\n\t\t\t\taFilters = new Filter([oFilter1, oFilter2], true),\r\n\t\t\t\toDefSorter = new sap.ui.model.Sorter(\"changetat\", true);\r\n\t\t\tif (this.getModel(\"masterView\").getProperty(\"/highStatus\") !== \"X\") {\r\n\t\t\t\toEvent.getParameter(\"bindingParams\").filters.push(oFilter2);\r\n\t\t\t}\r\n\t\t\tif (!sPosition) {\r\n\t\t\t\tsPosition = \"00000000\";\r\n\t\t\t}\r\n\t\t\tif (sPosition) {\r\n\t\t\t\toEvent.getParameter(\"bindingParams\").filters.push(oFilter1);\r\n\t\t\t}\r\n\t\t\tif (this.byId(\"ItemsST\").getList().getBinding(\"items\") && this.byId(\"ItemsST\").getList().getBinding(\"items\").aSorters.length > 0) {\r\n\t\t\t\toEvent.getParameter(\"bindingParams\").sorter = this.byId(\"ItemsST\").getList().getBinding(\"items\").aSorters;\r\n\t\t\t} else {\r\n\t\t\t\toEvent.getParameter(\"bindingParams\").sorter.push(oDefSorter);\r\n\t\t\t}\r\n\t\t\tthis._setMultiPosition(\"sap-icon://sys-cancel\");\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event Handler for clicking on the Draft filter on the Master List\r\n\t\t * @param {sap.ui.base.Event} oEvent Event for pressing on \"ALL\" filter\r\n\t\t */\r\n\t\tonAllPress: function(oEvent) {\r\n\t\t\tvar oMasterViewModel = this.getModel(\"masterView\");\r\n\t\t\toMasterViewModel.setProperty(\"/listFilter\", \"\");\r\n\t\t\toMasterViewModel.setProperty(\"/listStatusCode\", \"\");\r\n\t\t\toMasterViewModel.setProperty(\"/highStatus\", \"X\");\r\n\t\t\toMasterViewModel.setProperty(\"/bMultiSelectEnabled\", false);\r\n\t\t\tthis.getView().byId(\"ItemsST\").rebindList();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Event Handler for clicking on the Draft filter on the Master List\r\n\t\t * @param {Event}  oEvent Event for pressing on \"DRAFT\" filter\r\n\t\t */\r\n\t\tonDraftPress: function(oEvent) {\r\n\t\t\tvar oMasterViewModel = this.getModel(\"masterView\");\r\n\t\t\toMasterViewModel.setProperty(\"/listFilter\", \"Draft\");\r\n\t\t\toMasterViewModel.setProperty(\"/listStatusCode\", \"E0001\");\r\n\t\t\toMasterViewModel.setProperty(\"/highStatus\", \"D\");\r\n\t\t\toMasterViewModel.setProperty(\"/bMultiSelectEnabled\", false);\r\n\t\t\tthis.getView().byId(\"ItemsST\").rebindList();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Event Handler for clicking on the In Process filter on the Master List\r\n\t\t * @param {Event}  oEvent Event for pressing on \"IN PROCESS\" filter\r\n\t\t */\r\n\t\tonInprocessPress: function(oEvent) {\r\n\t\t\tvar oMasterViewModel = this.getModel(\"masterView\");\r\n\t\t\toMasterViewModel.setProperty(\"/listFilter\", \"\");\r\n\t\t\t//Code for In-Process\r\n\t\t\toMasterViewModel.setProperty(\"/listStatusCode\", \"E0003\");\r\n\t\t\toMasterViewModel.setProperty(\"/highStatus\", \"I\");\r\n\t\t\tif (this.getView().getModel(\"appView\").getProperty(\"/role\") === \"C\") {\r\n\t\t\t\toMasterViewModel.setProperty(\"/bMultiSelectEnabled\", true);\r\n\t\t\t}\r\n\t\t\tthis.getView().byId(\"ItemsST\").rebindList();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Event Handler for clicking on the Return filter on the Master List\r\n\t\t * @param {Event}  oEvent Event for pressing on \"RETURN\" filter\r\n\t\t */\r\n\t\tonReturnPress: function(oEvent) {\r\n\t\t\tvar oMasterViewModel = this.getModel(\"masterView\");\r\n\t\t\toMasterViewModel.setProperty(\"/listFilter\", \"\");\r\n\t\t\toMasterViewModel.setProperty(\"/listStatusCode\", \"E0004\");\r\n\t\t\toMasterViewModel.setProperty(\"/highStatus\", \"R\");\r\n\t\t\toMasterViewModel.setProperty(\"/bMultiSelectEnabled\", false);\r\n\t\t\tthis.getView().byId(\"ItemsST\").rebindList();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Event Handler for clicking on the Approved filter on the Master List\r\n\t\t * @param {Event}  oEvent Event for pressing on \"APPROVED\" filter\r\n\t\t */\r\n\t\tonApprovedPress: function(oEvent) {\r\n\t\t\tvar oMasterViewModel = this.getModel(\"masterView\");\r\n\t\t\toMasterViewModel.setProperty(\"/listFilter\", \"Approved\");\r\n\t\t\t//Code for Approve\r\n\t\t\toMasterViewModel.setProperty(\"/listStatusCode\", \"E0006\");\r\n\t\t\toMasterViewModel.setProperty(\"/highStatus\", \"A\");\r\n\t\t\toMasterViewModel.setProperty(\"/bMultiSelectEnabled\", false);\r\n\t\t\tthis.getView().byId(\"ItemsST\").rebindList();\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event Handler for clicking on the Approved filter on the Master List\r\n\t\t * @param {Event}  oEvent Event for pressing on \"ON HOLD\" filter\r\n\t\t */\r\n\t\tonHoldPress: function(oEvent) {\r\n\t\t\tvar oMasterViewModel = this.getModel(\"masterView\");\r\n\t\t\toMasterViewModel.setProperty(\"/listFilter\", \"Hold\");\r\n\t\t\t//Code for Approve\r\n\t\t\toMasterViewModel.setProperty(\"/listStatusCode\", \"E0005\");\r\n\t\t\toMasterViewModel.setProperty(\"/highStatus\", \"H\");\r\n\t\t\toMasterViewModel.setProperty(\"/bMultiSelectEnabled\", false);\r\n\t\t\tthis.getView().byId(\"ItemsST\").rebindList();\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for Radio button selection\r\n\t\t * @param {sap.ui.base.Event} oEvent Event for selecting radio button on Create Fragment\r\n\t\t */\r\n\t\tonSelectRadioAS: function(oEvent) {\r\n\t\t\tvar sControlId = oEvent.getSource().getId(),\r\n\t\t\t\toCreateNewASModel = this.getModel(\"createNewASModel\");\r\n\t\t\toCreateNewASModel.setProperty(\"/amendEditable\", false);\r\n\t\t\toCreateNewASModel.setProperty(\"/copyEditable\", false);\r\n\t\t\t//Controlling the Visibility of Bundle Table\r\n\t\t\tif (sControlId === this._getCreateFragControlById(\"idBundleRadioBtn\").getId()) {\r\n\t\t\t\tif (!this.getModel(\"oBundleCodeModel\")) {\r\n\t\t\t\t\tvar oBundleCodeModelData = [{\r\n\t\t\t\t\t\tcode: \"\",\r\n\t\t\t\t\t\tdescription: \"\",\r\n\t\t\t\t\t\tamount: \"\"\r\n\t\t\t\t\t}];\r\n\t\t\t\t\tthis.setModel(new JSONModel(oBundleCodeModelData), \"oBundleCodeModel\");\r\n\t\t\t\t}\r\n\t\t\t\tthis._getCreateFragControlById(\"idMasterBundleCodeTable\").setVisible(true);\r\n\t\t\t} else {\r\n\t\t\t\tthis._getCreateFragControlById(\"idMasterBundleCodeTable\").setVisible(false);\r\n\t\t\t}\r\n\t\t\t//Migrated Code Starts\r\n\t\t\tif (sControlId === this._getCreateFragControlById(\"idAmendRadioBtn\").getId()) {\r\n\t\t\t\toCreateNewASModel.setProperty(\"/amendEditable\", true);\r\n\t\t\t\tthis._getCreateFragControlById(\"idCopyFromASCode\").setValue(\"\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idCopyFromASCode\").resetProperty(\"valueState\");\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedASRadioButtons\", false);\r\n\t\t\t} else if (sControlId === this._getCreateFragControlById(\"idCopyFromRadioBtn\").getId()) {\r\n\t\t\t\toCreateNewASModel.setProperty(\"/copyEditable\", true);\r\n\t\t\t\tthis._getCreateFragControlById(\"idAmendASCode\").setValue(\"\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idAmendASCode\").resetProperty(\"valueState\");\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedASRadioButtons\", false);\r\n\t\t\t\tthis.oSelectedObject = null;\r\n\t\t\t} else if (sControlId === this._getCreateFragControlById(\"idMigratedRadioBtn\").getId()) {\r\n\t\t\t\tthis._getCreateFragControlById(\"idCopyFromASCode\").setValue(\"\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idCopyFromASCode\").resetProperty(\"valueState\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idAmendASCode\").setValue(\"\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idAmendASCode\").resetProperty(\"valueState\");\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedASRadioButtons\", true);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedPhaseOneEditable\", true);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedNonCfmsEditable\", false);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedRadioBtnPhaseOneSelected\", true);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedRadioBtnNonCfmsSelected\", false);\r\n\t\t\t\tthis.oSelectedObject = null;\r\n\t\t\t} else {\r\n\t\t\t\tthis._getCreateFragControlById(\"idCopyFromASCode\").resetProperty(\"value\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idAmendASCode\").resetProperty(\"value\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idCopyFromASCode\").resetProperty(\"valueState\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idAmendASCode\").resetProperty(\"valueState\");\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedASRadioButtons\", false);\r\n\t\t\t}\r\n\t\t\t//Migrated Code Ends\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for adding a new row to bundle table\r\n\t\t * @param {sap.ui.base.Event} oEvent Event for pressing on new row addition\r\n\t\t */\r\n\t\tonAddNewRow: function(oEvent) {\r\n\t\t\tvar oNewRowData = {\r\n\t\t\t\t\tcode: \"\",\r\n\t\t\t\t\tdescription: \"\",\r\n\t\t\t\t\tamount: \"\"\r\n\t\t\t\t},\r\n\t\t\t\toBundleModel = this.getModel(\"oBundleCodeModel\");\r\n\t\t\tvar oModelData = oBundleModel.getProperty(\"/\");\r\n\t\t\toModelData.splice(0, 0, oNewRowData);\r\n\t\t\toBundleModel.updateBindings();\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler funtion for Deleting the Row of Bundle table\r\n\t\t * @param {sap.ui.base.Event} oEvent Event for removing row\r\n\t\t */\r\n\t\tonDeleteRow: function(oEvent) {\r\n\t\t\tvar oModel = this.getModel(\"oBundleCodeModel\"),\r\n\t\t\t\toModelData = oModel.getProperty(\"/\"),\r\n\t\t\t\tsDltItemIndex = this._getCreateFragControlById(\"idMasterBundleCodeTable\").getSelectedItem().getBindingContext(\"oBundleCodeModel\")\r\n\t\t\t\t.getPath().split(\"/\")[1];\r\n\t\t\toModelData.splice(sDltItemIndex, 1);\r\n\t\t\toModel.updateBindings();\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for code value help\r\n\t\t * @param {sap.ui.base.Event} oEvent Event for pressing on value help dialog button\r\n\t\t */\r\n\t\thandleCodeValueHelp: function(oEvent) {\r\n\t\t\tthis.ASCode = oEvent.getSource();\r\n\t\t\tthis.getASCodeVH().open({\r\n\t\t\t\tfilters: [new Filter([new Filter(\"status\", FilterOperator.NE, \"E0001\"), new Filter(\"status\", FilterOperator.NE, \"Draft\")],\r\n\t\t\t\t\ttrue)],\r\n\t\t\t\t//for single select pass this method\r\n\t\t\t\tselect: function(oSelectedObject) {\r\n\t\t\t\t\tthis.ASCode.setValue(oSelectedObject.code);\r\n\t\t\t\t\tthis.getModel(\"masterView\").setProperty(\"/copyObject\", oSelectedObject);\r\n\t\t\t\t}.bind(this)\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler when suggestion item is selected\r\n\t\t * @param {sap.ui.base.Event} oEvent  Event for selecting an item out of suggestions\r\n\t\t */\r\n\t\thandleSuggestionItemSelected: function(oEvent) {\r\n\t\t\tvar oSelectedItem = oEvent.getParameter(\"selectedItem\");\r\n\t\t\tif (oSelectedItem) {\r\n\t\t\t\tthis.oSelectedObject = oSelectedItem.getBindingContext().getObject();\r\n\t\t\t\toEvent.getSource().setValueState();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for live change on Input fields\r\n\t\t * @param {sap.ui.base.Event} oEvent Event for live change\r\n\t\t */\r\n\t\thandleLiveChange: function(oEvent) {\r\n\t\t\tif (this.oSelectedObject) {\r\n\t\t\t\tthis.oSelectedObject = null;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Internal function for Value help dialog\r\n\t\t * @private\r\n\t\t * @returns {Object} Value help dialog control\r\n\t\t */\r\n\t\tgetASCodeVH: function() {\r\n\t\t\tif (!this.oASCodeVH) {\r\n\t\t\t\tthis.oASCodeVH = new VHDialog({\r\n\t\t\t\t\tcomponent: this.getOwnerComponent(),\r\n\t\t\t\t\tid: \"vhCodeAS\",\r\n\t\t\t\t\ttitleKey: \"detail.ops.panel.content.table.column.vh.title.code\",\r\n\t\t\t\t\tentitySet: \"/ZWRK_C_CODE\",\r\n\t\t\t\t\tsorter: new Sorter(\"code\", false),\r\n\t\t\t\t\tbMultiSelect: false,\r\n\t\t\t\t\tkey: \"code\",\r\n\t\t\t\t\tdescriptionKey: \"guid\",\r\n\t\t\t\t\tfields: [{\r\n\t\t\t\t\t\tkey: \"code\",\r\n\t\t\t\t\t\tlabel: \"{i18n>master.fragment.table.code}\",\r\n\t\t\t\t\t\tvalue: \"{code}\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tkey: \"short_desc\",\r\n\t\t\t\t\t\tlabel: \"{i18n>master.fragment.table.shortdesc}\",\r\n\t\t\t\t\t\tvalue: \"{short_desc}\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tkey: \"stext\",\r\n\t\t\t\t\t\tlabel: \"{i18n>master.fragment.table.status}\",\r\n\t\t\t\t\t\tvalue: \"{stext}\"\r\n\t\t\t\t\t}]\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn this.oASCodeVH;\r\n\t\t},\r\n\r\n\t\t/* =========================================================== */\r\n\t\t/* begin: internal methods                                     */\r\n\t\t/* =========================================================== */\r\n\r\n\t\t/*\r\n\t\t * Function to create a Model for the Master View\r\n\t\t */\r\n\t\t_createViewModel: function() {\r\n\t\t\tvar iCount = 0;\r\n\t\t\treturn new JSONModel({\r\n\t\t\t\tisFilterBarVisible: false,\r\n\t\t\t\tfilterBarLabel: \"\",\r\n\t\t\t\tdelay: 0,\r\n\t\t\t\ttitle: this.getResourceBundle().getText(\"master.count.title\", [0]),\r\n\t\t\t\tnoDataText: this.getResourceBundle().getText(\"master.nodatatext\"),\r\n\t\t\t\tsortBy: \"ShortDesc\",\r\n\t\t\t\tgroupBy: \"None\",\r\n\t\t\t\tdCount: iCount,\r\n\t\t\t\tinPCount: 0,\r\n\t\t\t\tapprCount: 0,\r\n\t\t\t\thighStatus: \"D\",\r\n\t\t\t\tlistFilter: \"Draft\",\r\n\t\t\t\tlistStatusCode: \"E0001\",\r\n\t\t\t\tbPositionSelected: false,\r\n\t\t\t\tbMultiSelectVisible: false,\r\n\t\t\t\tbMultiSelectEnabled: false,\r\n\t\t\t\tNotingstring: \"\",\r\n\t\t\t\tbCreateBtnEnable: true\r\n\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t/*\r\n\t\t * Event handler When the Master List is received\r\n\t\t */\r\n\t\t_onMasterMatched: function() {\r\n\t\t\t//Set the layout property of the FCL control to 'OneColumn'\r\n\t\t\tthis.getModel(\"appView\").setProperty(\"/layout\", sap.f.LayoutType.TwoColumnsMidExpanded);\r\n\t\t\t//Enabling/desabling the view ctrs based on Detail view visibility mode\r\n\t\t\tvar oAppViewModel = this.getModel(\"appView\");\r\n\t\t\tif (!oAppViewModel.getProperty(\"/bEnabledMasterViewCtr\")) {\r\n\t\t\t\toAppViewModel.setProperty(\"/bEnabledMasterViewCtr\", true);\r\n\t\t\t\toAppViewModel.setProperty(\"/sMasterListMode\", \"SingleSelectMaster\");\r\n\t\t\t} else {\r\n\t\t\t\toAppViewModel.setProperty(\"/bEnabledMasterViewCtr\", false);\r\n\t\t\t\toAppViewModel.setProperty(\"/sMasterListMode\", \"None\");\r\n\t\t\t}\r\n\t\t\toAppViewModel.updateBindings();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Shows the selected item on the detail page\r\n\t\t * On phones a additional history entry is created\r\n\t\t * @param {sap.m.ObjectListItem} oItem selected Item\r\n\t\t * @private\r\n\t\t */\r\n\t\t_showDetail: function(oItem) {\r\n\t\t\tvar bReplace = !Device.system.phone;\r\n\t\t\t// set the layout property of FCL control to show two columns\r\n\t\t\tthis.getModel(\"appView\").setProperty(\"/layout\", \"TwoColumnsMidExpanded\");\r\n\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bUserCreateAS\", false);\r\n\t\t\tthis.getRouter().navTo(\"Detail\", {\r\n\t\t\t\tobjectId: oItem.getBindingContext().getProperty(\"guid\"),\r\n\t\t\t\tstateId: \"D\" + \":\" + oItem.getBindingContext().getProperty(\"IsActive\")\r\n\t\t\t}, bReplace);\r\n\t\t},\r\n\t\t/**\r\n\t\t * \r\n\t\t * @param {*} sGuid is the document Guid to navigate\r\n\t\t */\r\n\t\t_showDetailWithCrossApp: function(sGuid) {\r\n\t\t\tvar bReplace = !Device.system.phone;\r\n\t\t\tthis.getRouter().navTo(\"Detail\", {\r\n\t\t\t\tobjectId: sGuid,\r\n\t\t\t\tstateId: \"D\" + \":\"\r\n\t\t\t}, bReplace);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Apply the chosen sorter and grouper to the master list\r\n\t\t * @param {sap.ui.base.Event} oEvent the confirm event\r\n\t\t * @private\r\n\t\t */\r\n\t\t_applySortGroup: function(oEvent) {\r\n\t\t\tvar mParams = oEvent.getParameters(),\r\n\t\t\t\tsPath,\r\n\t\t\t\tbDescending,\r\n\t\t\t\taSorters = [];\r\n\t\t\tsPath = mParams.sortItem.getKey();\r\n\t\t\tbDescending = mParams.sortDescending;\r\n\t\t\taSorters.push(new Sorter(sPath, bDescending));\r\n\t\t\tthis._oList.getBinding(\"items\").sort(aSorters);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Internal function to return the payload for create\r\n\t\t * @returns{oPayload} payload for create AS\r\n\t\t */\r\n\t\t_createPayload: function() {\r\n\t\t\tvar sPosition = this.getModel(\"appView\").getProperty(\"/position\"),\r\n\t\t\t\toPayload = {\r\n\t\t\t\t\tAction: \"\",\r\n\t\t\t\t\tGuid: \"00000000-0000-0000-0000-000000000000\",\r\n\t\t\t\t\tLockTimestamp: \"\\/Date(\" + (new Date()).getTime() + \")\\/\",\r\n\t\t\t\t\tFnam: \"\",\r\n\t\t\t\t\tFval: \"\",\r\n\t\t\t\t\tCode: \"\",\r\n\t\t\t\t\tPosition: sPosition,\r\n\t\t\t\t\tInitiatinDept: \"\",\r\n\t\t\t\t\tDepartDesc: \"\",\r\n\t\t\t\t\tSessionGuid: jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\").SessionGuid\r\n\t\t\t\t};\r\n\r\n\t\t\t//Migrated Code Starts\r\n\t\t\tif (this._getCreateFragControlById(\"idNewRadioBtn\").getSelected()) {\r\n\t\t\t\toPayload.Action = \"NEW\";\r\n\t\t\t} else if (this._getCreateFragControlById(\"idAmendRadioBtn\").getSelected()) {\r\n\t\t\t\toPayload.Action = \"AMEND\";\r\n\t\t\t\toPayload.Guid = this.oSelectedObject.guid;\r\n\t\t\t\toPayload.Code = this._getCreateFragControlById(\"idAmendASCode\").getValue();\r\n\t\t\t} else if (this._getCreateFragControlById(\"idCopyFromRadioBtn\").getSelected()) {\r\n\t\t\t\toPayload.Action = \"COPY\";\r\n\t\t\t\toPayload.Guid = this.oSelectedObject.guid;\r\n\t\t\t\toPayload.Code = this._getCreateFragControlById(\"idCopyFromASCode\").getValue();\r\n\t\t\t} else if (this._getCreateFragControlById(\"idMigratedRadioBtnPhaseOne\").getSelected()) {\r\n\t\t\t\toPayload.Action = \"MIGRATED\";\r\n\t\t\t\toPayload.Code = this._getCreateFragControlById(\"idMigratedASCode\").getValue();\r\n\t\t\t} else if (this._getCreateFragControlById(\"idMigratedRadioBtnNonCfms\").getSelected()) {\r\n\t\t\t\toPayload.Action = \"MIGRATED\";\r\n\t\t\t\t// oPayload.Code = this._getCreateFragControlById(\"idMigratedNonCfms\").getValue();\r\n\t\t\t} else {\r\n\t\t\t\toPayload.Action = \"BUNDLE\";\r\n\t\t\t\tvar sASCode = \"\",\r\n\t\t\t\t\taBundleModelData = this.getModel(\"oBundleCodeModel\").getProperty(\"/\");\r\n\t\t\t\tfor (var i = 0; i < aBundleModelData.length; i++) {\r\n\t\t\t\t\tif (sASCode) {\r\n\t\t\t\t\t\tsASCode = \",\" + aBundleModelData[i];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsASCode = aBundleModelData[i];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\toPayload.Code = sASCode;\r\n\t\t\t}\r\n\t\t\treturn oPayload;\r\n\t\t\t//Migrated Code Ends\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * function to handle radio buttons\r\n\t\t * @public\r\n\t\t */\r\n\r\n\t\t//Migrated Code Starts\r\n\t\tonRadioButtonSelect: function(oEvent) {\r\n\t\t\tvar oCreateNewASModel = this.getModel(\"createNewASModel\");\r\n\t\t\tif (oEvent.getSource().getId().indexOf(\"goCategory\") >= 0) {\r\n\t\t\t\toCreateNewASModel.setProperty(\"/refVisible\", false);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/typeVisible\", true);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/sancno1\", true);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/sancno2\", false);\r\n\t\t\t\tthis._setInputFieldsNumberOnly(this._getMigratedCreateFragControlById(\"sancNo\"));\r\n\t\t\t} else if (oEvent.getSource().getId().indexOf(\"deptCategory\") >= 0) {\r\n\t\t\t\toCreateNewASModel.setProperty(\"/refVisible\", true);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/typeVisible\", false);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/sancno2\", true);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/sancno1\", false);\r\n\t\t\t}\r\n\t\t\toCreateNewASModel.updateBindings();\r\n\t\t},\r\n\t\t//Migrated Code Ends\r\n\r\n\t\t/**\r\n\t\t * Sets the item count on the master list header\r\n\t\t * @param {integer} iTotalItems the total number of items in the list\r\n\t\t * @private\r\n\t\t */\r\n\t\t_updateListItemCount: function(iTotalItems) {\r\n\t\t\tvar sTitle;\r\n\t\t\t// only update the counter if the length is final\r\n\t\t\tif (this._oList.getBinding(\"items\").isLengthFinal()) {\r\n\t\t\t\tsTitle = this.getResourceBundle().getText(\"master.count.title\", [iTotalItems]);\r\n\t\t\t\tthis.getModel(\"masterView\").setProperty(\"/title\", sTitle);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Internal helper method to apply both filter and search state together on the list binding\r\n\t\t * @private\r\n\t\t */\r\n\t\t_applyFilterSearch: function() {\r\n\t\t\tvar aFilters = this._oListFilterState.aSearch.concat(this._oListFilterState.aFilter),\r\n\t\t\t\toViewModel = this.getModel(\"masterView\");\r\n\t\t\tthis._oList.getBinding(\"items\").filter(aFilters, \"Application\");\r\n\t\t\t// changes the noDataText of the list in case there are no filter results\r\n\t\t\tif (aFilters.length !== 0) {\r\n\t\t\t\toViewModel.setProperty(\"/noDataText\", this.getResourceBundle().getText(\"masterListNoDataWithFilterOrSearchText\"));\r\n\t\t\t} else if (this._oListFilterState.aSearch.length > 0) {\r\n\t\t\t\t// only reset the no data text to default when no new search was triggered\r\n\t\t\t\toViewModel.setProperty(\"/noDataText\", this.getResourceBundle().getText(\"masterListNoDataText\"));\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Internal helper method that sets the filter bar visibility property and the label's caption to be shown\r\n\t\t * @param {string} sFilterBarText the selected filter value\r\n\t\t * @private\r\n\t\t */\r\n\t\t_updateFilterBar: function(sFilterBarText) {\r\n\t\t\tvar oViewModel = this.getModel(\"masterView\");\r\n\t\t\toViewModel.setProperty(\"/isFilterBarVisible\", (this._oListFilterState.aFilter.length > 0));\r\n\t\t\toViewModel.setProperty(\"/filterBarLabel\", this.getResourceBundle().getText(\"masterFilterBarText\", [sFilterBarText]));\r\n\t\t},\r\n\t\t/**\r\n\t\t * Selects first item of the list\r\n\t\t * @param {object} sGuid Header guid of the record \r\n\t\t */\r\n\t\t_selectMasterListItem: function(sGuid) {\r\n\t\t\t// if(this._oList.getList().getItems().length && sGuid){\r\n\t\t\t// \tif(!this._oList.getList().getSelectedItem()) {\r\n\t\t\t// \t\tthis._oList.getList().setSelectedItem(oItem);\r\n\t\t\t// \t}\r\n\t\t\t// } else \r\n\t\t\tvar startupParams = this.getOwnerComponent().getComponentData().startupParameters;\r\n\t\t\tif (this._oList.getList().getItems().length || startupParams.Mode) {\r\n\t\t\t\t//var startupParams = oStartupParameters; // get Startup params from Owner Component\r\n\t\t\t\tif (startupParams.GUID && startupParams.GUID[0]) {\r\n\t\t\t\t\tthis._showDetailWithCrossApp(startupParams.GUID[0]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar oFirstItem = this._oList.getList().getItems()[0];\r\n\t\t\t\t\tthis._oList.getList().setSelectedItem(oFirstItem);\r\n\t\t\t\t\tthis._showDetail(oFirstItem);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar bReplace = !Device.system.phone;\r\n\t\t\t\t// set the layout property of FCL control to show two columns\r\n\t\t\t\tthis.getModel(\"appView\").setProperty(\"/layout\", \"TwoColumnsMidExpanded\");\r\n\t\t\t\tthis.getRouter().navTo(\"notFound\", bReplace);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Internal Function for the Dialog Box of Sorting Parameters\r\n\t\t * @private\r\n\t\t * @returns {Object} Dialog box for sort\r\n\t\t */\r\n\t\t_getSortDialog: function() {\r\n\t\t\tif (!this._oSortDialog) {\r\n\t\t\t\tvar fragId = this.createId(\"fragSortDialog\");\r\n\t\t\t\tthis._oSortDialog = sap.ui.xmlfragment(fragId, \"com.goap.cfms.works.as.fragment.sort\", this);\r\n\t\t\t\tthis.getView().addDependent(this._oSortDialog);\r\n\t\t\t\tjQuery.sap.syncStyleClass(\"sapUiSizeCompact\", this.getView(), this._oSortDialog);\r\n\t\t\t}\r\n\t\t\treturn this._oSortDialog;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Internal function to validate when Create button is pressed\r\n\t\t * @private\r\n\t\t * @returns {boolean} Check condition for create dialog close\r\n\t\t */\r\n\t\t_validateCreate: function() {\r\n\t\t\tvar bCopy = this._getCreateFragControlById(\"idCopyFromRadioBtn\").getSelected(),\r\n\t\t\t\tsCopyCode = this._getCreateFragControlById(\"idCopyFromASCode\").getValue(),\r\n\t\t\t\tbAmend = this._getCreateFragControlById(\"idAmendRadioBtn\").getSelected(),\r\n\t\t\t\tsAmendCode = this._getCreateFragControlById(\"idAmendASCode\").getValue(),\r\n\t\t\t\tbRetVal = true;\r\n\r\n\t\t\tthis._getCreateFragControlById(\"idCopyFromASCode\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tif (bCopy && (!sCopyCode || !this.oSelectedObject)) {\r\n\t\t\t\tbRetVal = false;\r\n\t\t\t\tthis._getCreateFragControlById(\"idCopyFromASCode\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\t} else if (bAmend && (!sAmendCode || !this.oSelectedObject)) {\r\n\t\t\t\tbRetVal = false;\r\n\t\t\t\tthis._getCreateFragControlById(\"idAmendASCode\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\t}\r\n\t\t\treturn bRetVal;\r\n\t\t},\r\n\t\t/**\r\n\t\t * function to return the Control \r\n\t\t * @param {string} sControlId Identifier for the Control Structure of Create Fragment\r\n\t\t * @returns {Object} Control inside the fragment\r\n\t\t */\r\n\t\t_getCreateFragControlById: function(sControlId) {\r\n\t\t\treturn sap.ui.core.Fragment.byId(this.createId(\"fragCreateFrag\"), sControlId);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Private function to read Role\r\n\t\t * @param{Object} oData\r\n\t\t */\r\n\t\t_getUserRole: function(sPosition) {\r\n\t\t\tvar Mode = this.getOwnerComponent().getComponentData().startupParameters.Mode;\r\n\t\t\tif (!Mode) {\r\n\t\t\t\t//var sUserId = \"14482503\";\r\n\t\t\t\t//sPosition = \"30058277\";\r\n\t\t\t\tvar sUserId = sap.ushell.Container.getService(\"UserInfo\").getId();\r\n\t\t\t\tvar oRole = new Promise(function(resolve, reject) {\r\n\t\t\t\t\tthis.getOwnerComponent().oDraft.getRole({\r\n\t\t\t\t\t\tfName: \"/GetRole\",\r\n\t\t\t\t\t\tApplicationId: \"AS\",\r\n\t\t\t\t\t\tUserId: sUserId,\r\n\t\t\t\t\t\tPositionId: sPosition\r\n\t\t\t\t\t}, resolve, reject);\r\n\t\t\t\t}.bind(this));\r\n\t\t\t\toRole.then(function(oResult) {\r\n\t\t\t\t\tvar oViewAppModel = this.getOwnerComponent().getModel(\"appView\");\r\n\t\t\t\t\tif (oResult.data.results.length > 0) {\r\n\t\t\t\t\t\toViewAppModel.setProperty(\"/role\", oResult.data.results[0].Role);\r\n\t\t\t\t\t\toViewAppModel.setProperty(\"/position\", oResult.data.results[0].PositionId);\r\n\t\t\t\t\t\toViewAppModel.setProperty(\"/positionText\", oResult.data.results[0].PositionText);\r\n\r\n\t\t\t\t\t\tvar sCreatedBy = sap.ushell.Container.getService(\"UserInfo\").getId();\r\n\t\t\t\t\t\tvar oParamsBrowserStorage = {\r\n\t\t\t\t\t\t\tUserId: sCreatedBy,\r\n\t\t\t\t\t\t\tPositionId: oResult.data.results[0].PositionId,\r\n\t\t\t\t\t\t\tRole: oResult.data.results[0].Role,\r\n\t\t\t\t\t\t\tSessionGuid: jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\").SessionGuid\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tjQuery.sap.storage(jQuery.sap.storage.Type.session).put(\"zworksBrowserStorage\", oParamsBrowserStorage);\r\n\r\n\t\t\t\t\t\tvar role = oViewAppModel.getData().role;\r\n\t\t\t\t\t\tif (role === \"A\" || role === \"C\") {\r\n\t\t\t\t\t\t\tthis.byId(\"idInProcess\").firePress();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar oMasterViewModel = this.getModel(\"masterView\");\r\n\t\t\t\t\t\t\toMasterViewModel.setProperty(\"/listFilter\", \"Draft\");\r\n\t\t\t\t\t\t\toMasterViewModel.setProperty(\"/listStatusCode\", \"E0001\");\r\n\t\t\t\t\t\t\toMasterViewModel.setProperty(\"/highStatus\", \"D\");\r\n\t\t\t\t\t\t\toMasterViewModel.setProperty(\"/bMultiSelectEnabled\", false);\r\n\t\t\t\t\t\t\tthis.getView().byId(\"ItemsST\").rebindList();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}.bind(this));\r\n\t\t\t\toRole.catch(function(oError) {\r\n\t\t\t\t\tthis.getModel(\"appView\").setProperty(\"/role\", \"\");\r\n\t\t\t\t}.bind(this));\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Private function to create payload for MassPayload Note\r\n\t\t */\r\n\t\t_getMassPayload: function() {\r\n\t\t\tvar oMassPayload = {\r\n\t\t\t\t\tFflag: \"\",\r\n\t\t\t\t\tFposition: \"\",\r\n\t\t\t\t\tFuserid: \"\",\r\n\t\t\t\t\tAplication: \"AS\",\r\n\t\t\t\t\tAction: \"D\",\r\n\t\t\t\t\tGuid: \"00000000-0000-0000-0000-000000000000\",\r\n\t\t\t\t\tNotingid: \"CREATE\",\r\n\t\t\t\t\tPagent: \"INCFMS_CNS_\",\r\n\t\t\t\t\tTextid: \"0004\",\r\n\t\t\t\t\tNotingstring: encodeURIComponent(this.getModel(\"masterView\").getProperty(\"/Notingstring\")),\r\n\t\t\t\t\tMassHeaderItems: []\r\n\t\t\t\t},\r\n\t\t\t\taSelectedItems = this.byId(\"ItemsST\").getList().getSelectedItems();\r\n\t\t\tif (aSelectedItems.length > 0) {\r\n\t\t\t\tfor (var i = 0; i < aSelectedItems.length; i++) {\r\n\t\t\t\t\tvar oBindingContext = aSelectedItems[i].getBindingContext(),\r\n\t\t\t\t\t\toItems = {\r\n\t\t\t\t\t\t\tAplication: \"AS\",\r\n\t\t\t\t\t\t\tAction: \"D\",\r\n\t\t\t\t\t\t\tGuid: this.getModel().getProperty(\"guid\", oBindingContext)\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\toMassPayload.MassHeaderItems.push(oItems);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn oMassPayload;\r\n\t\t}\r\n\t});\r\n});",
		"com/goap/cfms/works/as/controller/Detail.controller.js": "var that;\r\nvar myObj;\r\n// var myObj;\r\n\r\nvar strHash;\r\nvar signerName;\r\nvar offset;\r\nvar signerCert;\r\nvar outfile;\r\nvar resellerCode = 75;\r\nvar filecontent = \"\";\r\nvar pdf_data = \"JVBERY=\";\r\n/*eslint-disable */\r\n//eslint-disable-sap-no-hardcoded-url\r\nvar serverUrl = \"https://202.65.131.15:8443/sign\";\r\nvar DetailControl = null;\r\n/*eslint-enable */\r\nsap.ui.define([\r\n\t\"com/goap/cfms/works/reuselib/WorksBaseController\",\r\n\t\"com/goap/cfms/works/reuselib/DynamicBusyIndicator\",\r\n\t\"sap/ui/model/json/JSONModel\",\r\n\t\"sap/ui/model/Filter\",\r\n\t\"sap/ui/model/FilterOperator\",\r\n\t\"sap/ui/model/Sorter\",\r\n\t\"com/goap/cfms/works/reuselib/VHDialog.controller\",\r\n\t\"sap/m/UploadCollectionParameter\",\r\n\t\"sap/m/MessageToast\",\r\n\t\"com/goap/cfms/works/as/model/formatter\",\r\n\t\"sap/m/Token\",\r\n\t\"sap/m/MessageBox\",\r\n\t\"sap/m/TablePersoController\",\r\n\t\"com/goap/cfms/works/as/Digital_Sign/ds2min\"\r\n], function(BaseController, DynamicBusyIndicator, JSONModel, Filter, FilterOperator, Sorter, VHDialog,\r\n\tUploadCollectionParameter, MessageToast, formatter,\r\n\tToken, MessageBox, TablePersoController, ds2min) {\r\n\t\"use strict\";\r\n\r\n\treturn BaseController.extend(\"com.goap.cfms.works.as.controller.Detail\", {\r\n\r\n\t\tformatter: formatter,\r\n\r\n\t\t/* =========================================================== */\r\n\t\t/* lifecycle methods                                           */\r\n\t\t/* =========================================================== */\r\n\r\n\t\t/**\r\n\t\t * Lifecycle method to instantiate Detail controller and bind view\r\n\t\t */\r\n\t\tonInit: function() {\r\n\t\t\t//Initializing the DS2min\r\n\t\t\t/*eslint-disable */\r\n\t\t\t//eslint-disable-no-undef\r\n\t\t\tDetailControl = this;\r\n\t\t\tmyObj = _elk_desksignObj;\r\n\t\t\t/*eslint-enable */\r\n\t\t\tmyObj._elk_initialize(this.mycallback, this);\r\n\t\t\t// Model used to manipulate control states. The chosen values make sure,\r\n\t\t\t// detail page is busy indication immediately so there is no break in\r\n\t\t\t// between the busy indication for loading the view's meta data\r\n\t\t\tvar oViewModel = new JSONModel({\r\n\t\t\t\tSrcDDOTableRowCount: 0,\r\n\t\t\t\tDDOTableRowCount: 0,\r\n\t\t\t\tESTTableRowCount: 0,\r\n\t\t\t\tstateId: \"D\",\r\n\t\t\t\tObjectTitle: \"Display\",\r\n\t\t\t\tbusy: true,\r\n\t\t\t\tdelay: 0,\r\n\t\t\t\tbUAVisible: false,\r\n\t\t\t\tMigrated: false,\r\n\t\t\t\tbOwnDCW: true,\r\n\t\t\t\tbPicCodeVisible: false,\r\n\t\t\t\tApproveBtnVisibility: false,\r\n\t\t\t\tReturnBtnVisibility: false,\r\n\t\t\t\tOnholdBtnVisibility: false,\r\n\t\t\t\tNextBtnVisibility: false,\r\n\t\t\t\tSubmitBtnVisibility: false,\r\n\t\t\t\toToDayDate: new Date(),\r\n\t\t\t\tlineItemListTitle: this.getResourceBundle().getText(\"detail.lineitem.table.heading\"),\r\n\t\t\t\tWorkLog: [],\r\n\t\t\t\tUserNotes: [],\r\n\t\t\t\tNotingstring: \"\",\r\n\t\t\t\taddNotingstring: \"\",\r\n\t\t\t\tReferenceaddNotingstring: \"\",\r\n\t\t\t\tNotingid: \"CREATE\",\r\n\t\t\t\tReferenceNotingid: \"CREATE\",\r\n\t\t\t\taddNotePagent: \"\",\r\n\t\t\t\tReferenceaddNotePagent: \"\",\r\n\t\t\t\tPagent: \"\",\r\n\t\t\t\tWfRole: \"\",\r\n\t\t\t\tbIsSecratary: false,\r\n\t\t\t\tgoDateValueState: \"None\",\r\n\t\t\t\tsecCodeValueState: \"None\",\r\n\t\t\t\tGoNumValueState: \"None\",\r\n\t\t\t\tgoDateValueStateText: \"\",\r\n\t\t\t\tsecCodeValueStateText: \"\",\r\n\t\t\t\tGoNumValueStateText: \"\",\r\n\t\t\t\tCategoryKey: \"\",\r\n\t\t\t\tExecutingDeptKey: \"\",\r\n\t\t\t\tSanctioningDeptKey: \"\",\r\n\t\t\t\tbEditExectDept: false,\r\n\t\t\t\tsFiledControlRole: \"\",\r\n\t\t\t\tSessionGuid: \"00000000-0000-0000-0000-000000000000\",\r\n\t\t\t\tschemeDesc: \"\",\r\n\t\t\t\tpropertyIdMapping: {\r\n\t\t\t\t\tMN_WRK_CODE: \"idMainNatureWork\",\r\n\t\t\t\t\tsb_wrk01_code: \"idSubClass01\",\r\n\t\t\t\t\tsb_wrk02_code: \"idSubClass02\",\r\n\t\t\t\t\tsb_wrk03_code: \"idSubClass03\",\r\n\t\t\t\t\tfundid: \"idFundingAgency\"\r\n\t\t\t\t},\r\n\t\t\t\tdependentFields: {\r\n\t\t\t\t\tMN_WRK_CODE: {\r\n\t\t\t\t\t\tfields: [\"SubclassL01\", \"SubclassL02\", \"SubclassL03\"]\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsb_wrk01_code: {\r\n\t\t\t\t\t\tfields: [\"SubclassL02\", \"SubclassL03\"]\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsb_wrk02_code: {\r\n\t\t\t\t\t\tfields: [\"SubclassL03\"]\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// Hoa: {fields: [\"Ddo\"]},\r\n\t\t\t\t\tCategory: {\r\n\t\t\t\t\t\tsource: this.byId(\"idWorksHoA\"),\r\n\t\t\t\t\t\tfields: [\"Hoa\", \"Ddo\"]\r\n\t\t\t\t\t},\r\n\t\t\t\t\tInitiatingDept: {\r\n\t\t\t\t\t\tsource: this.byId(\"idWorksHoA\"),\r\n\t\t\t\t\t\tfields: [\"Hoa\", \"Ddo\"]\r\n\t\t\t\t\t},\r\n\t\t\t\t\tExecutingDept: {\r\n\t\t\t\t\t\tsource: this.byId(\"idWorksHoA\"),\r\n\t\t\t\t\t\tfields: [\"Ddo\"]\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tsortOrder: {\r\n\t\t\t\t\tdistrict: [\"name\"],\r\n\t\t\t\t\tmandal: [\"districtx\", \"mandalx\"],\r\n\t\t\t\t\tvillage: [\"districtx\", \"mandalx\", \"villagex\"],\r\n\t\t\t\t\tloksabha: [\"District_name\", \"loksabha_name\"],\r\n\t\t\t\t\tconstutuency: [\"distx\", \"assembly\"],\r\n\t\t\t\t\tMN_WRK_CODE: [\"MAIN_WORK\"],\r\n\t\t\t\t\tsb_wrk03_code: [\"sub_work_03\"],\r\n\t\t\t\t\tsb_wrk01_code: [\"sub_work_01\"],\r\n\t\t\t\t\tsb_wrk02_code: [\"sub_work_02\"]\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tvar oHoaDdoFilterModel = new JSONModel({\r\n\t\t\t\toHoaFilterNonDCW: {\r\n\t\t\t\t\tfilter: [{\r\n\t\t\t\t\t\tid: \"idCategory\",\r\n\t\t\t\t\t\tkey: \"category\",\r\n\t\t\t\t\t\tvalue: \"Category\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tid: \"idInitDept\",\r\n\t\t\t\t\t\tkey: \"dept\",\r\n\t\t\t\t\t\tvalue: \"InitiatinDept\"\r\n\t\t\t\t\t}]\r\n\t\t\t\t},\r\n\t\t\t\toDdoFilterNonDCW: {\r\n\t\t\t\t\tfilter: [{\r\n\t\t\t\t\t\tid: \"idExecDept\",\r\n\t\t\t\t\t\tkey: \"fictr\",\r\n\t\t\t\t\t\tvalue: \"ExecutingDept\"\r\n\t\t\t\t\t}]\r\n\t\t\t\t},\r\n\t\t\t\toHoaFilterOwnDCW: {\r\n\t\t\t\t\tfilter: []\r\n\t\t\t\t},\r\n\t\t\t\toDdoFilterOwnDCW: {\r\n\t\t\t\t\tfilter: [{\r\n\t\t\t\t\t\tid: \"idExecDept\",\r\n\t\t\t\t\t\tkey: \"fictr\",\r\n\t\t\t\t\t\tvalue: \"ExecutingDept\"\r\n\t\t\t\t\t}]\r\n\t\t\t\t},\r\n\t\t\t\toHoaFilterSource: {\r\n\t\t\t\t\tfilter: [{\r\n\t\t\t\t\t\tid: \"idCategory\",\r\n\t\t\t\t\t\tkey: \"category\",\r\n\t\t\t\t\t\tvalue: \"Category\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tid: \"idInitDept\",\r\n\t\t\t\t\t\tkey: \"dept\",\r\n\t\t\t\t\t\tvalue: \"InitiatinDept\"\r\n\t\t\t\t\t}]\r\n\t\t\t\t},\r\n\t\t\t\toDdoFilterSource: {\r\n\t\t\t\t\tfilter: [{\r\n\t\t\t\t\t\tid: \"idInitDept\",\r\n\t\t\t\t\t\tkey: \"dept\",\r\n\t\t\t\t\t\tvalue: \"InitiatinDept\"\r\n\t\t\t\t\t}]\r\n\t\t\t\t},\r\n\t\t\t\toHoaFilterTarget: {\r\n\t\t\t\t\tfilter: [{\r\n\t\t\t\t\t\tid: \"idCategory\",\r\n\t\t\t\t\t\tkey: \"category\",\r\n\t\t\t\t\t\tvalue: \"Category\"\r\n\t\t\t\t\t}]\r\n\t\t\t\t},\r\n\t\t\t\toDdoFilterTarget: {\r\n\t\t\t\t\tfilter: []\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tvar sCreatedBy = sap.ushell.Container.getService(\"UserInfo\").getId();\r\n\t\t\tif (!jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\")) {\r\n\t\t\t\tvar oParamsBrowserStorage = {\r\n\t\t\t\t\tUserId: sCreatedBy,\r\n\t\t\t\t\tPositionId: \"00000000\",\r\n\t\t\t\t\tRole: \"\",\r\n\t\t\t\t\tSessionGuid: \"00000000-0000-0000-0000-000000000000\"\r\n\t\t\t\t};\r\n\t\t\t\tjQuery.sap.storage(jQuery.sap.storage.Type.session).put(\"zworksBrowserStorage\", oParamsBrowserStorage);\r\n\t\t\t} else {\r\n\t\t\t\tvar sStorageUser = jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\").UserId;\r\n\t\t\t\tif (sStorageUser !== sCreatedBy) {\r\n\t\t\t\t\tvar oParamsBrowserStorage = {\r\n\t\t\t\t\t\tUserId: sCreatedBy,\r\n\t\t\t\t\t\tPositionId: \"00000000\",\r\n\t\t\t\t\t\tRole: \"\",\r\n\t\t\t\t\t\tSessionGuid: \"00000000-0000-0000-0000-000000000000\"\r\n\t\t\t\t\t};\r\n\t\t\t\t\tjQuery.sap.storage(jQuery.sap.storage.Type.session).put(\"zworksBrowserStorage\", oParamsBrowserStorage);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\").SessionGuid === null) {\r\n\t\t\t\tvar oParamsBrowserStorage = jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\");\r\n\t\t\t\toParamsBrowserStorage.SessionGuid = \"00000000-0000-0000-0000-000000000000\";\r\n\t\t\t\tjQuery.sap.storage(jQuery.sap.storage.Type.session).put(\"zworksBrowserStorage\", oParamsBrowserStorage);\r\n\t\t\t}\r\n\t\t\tvar sStorePosition = jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\").PositionId;\r\n\t\t\tvar sStorageRole = jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\").Role;\r\n\t\t\tvar oViewAppModel = this.getOwnerComponent().getModel(\"appView\");\r\n\t\t\toViewAppModel.setProperty(\"/position\", sStorePosition);\r\n\t\t\toViewAppModel.setProperty(\"/role\", sStorageRole);\r\n\t\t\tthis._callFieldControl({\r\n\t\t\t\taction: \"LOAD\",\r\n\t\t\t\tapplication: \"AS\",\r\n\t\t\t\tPositionid: sStorePosition,\r\n\t\t\t\tRole: sStorageRole\r\n\t\t\t});\r\n\r\n\t\t\tthis.getRouter().getRoute(\"Detail\").attachPatternMatched(this._onObjectMatched, this);\r\n\t\t\tthis.setModel(oViewModel, \"detailView\");\r\n\t\t\tthis.setModel(oHoaDdoFilterModel, \"hoaDdoFilters\");\r\n\t\t\t//register the Message Manager and attach event handler for changes\r\n\t\t\tsap.ui.getCore().getMessageManager().registerObject(this.getView(), true);\r\n\t\t\tsap.ui.getCore().getMessageManager().getMessageModel().attachMessageChange(this._updateMessage, this);\r\n\t\t\t//var sRole = this.getOwnerComponent().getModel(\"appView\").getProperty(\"/role\");\r\n\t\t\t//var aFilter = [(new Filter(\"Action\", FilterOperator.EQ, \"LOAD\")), (new Filter(\"Application\", FilterOperator.EQ, \"AS\"),(new Filter(\"Application\", FilterOperator.EQ, sRole)))];\r\n\t\t\tthis.oDefaultControlModel = new JSONModel();\r\n\t\t\tthis.oAmendControlModel = new JSONModel();\r\n\t\t\tthis.oBundleControlModel = new JSONModel();\r\n\t\t\t//this.getView().addStyleClass(\"sapUiSizeCompact\");\r\n\t\t\tthis.getOwnerComponent().getModel().metadataLoaded().then(this._onMetadataLoaded.bind(this));\r\n\r\n\t\t\tif (!this.contentDensity) {\r\n\t\t\t\tthis.contentDensity = \"sapUiSizeCompact\";\r\n\t\t\t}\r\n\r\n\t\t\t//For Launchpad Back Button preventing default action\r\n\t\t\tthis.getOwnerComponent().getService(\"ShellUIService\").then(function(oShellService) {\r\n\t\t\t\toShellService.setBackNavigation(function() {\r\n\t\t\t\t\tthis._navBackPreventDefault(\"BackBtnAction\", \"detail.message.warning.unsaveDataLost\");\r\n\t\t\t\t}.bind(this));\r\n\t\t\t}.bind(this));\r\n\t\t\t//For Launchpad Home Button preventing default action\r\n\t\t\t/*  $(\"#homeBtn\").bind(\"click\", function(oEvent) {\r\n\t\t\t      oEvent.preventDefault();\r\n\t\t\t      this._navBackPreventDefault(\"HomeBtnAction\", \"detail.message.warning.unsaveDataLostHome\");\r\n\t\t\t  }.bind(this));*/\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Lifecycle method to perform operation just after rendering the view\r\n\t\t */\r\n\t\tonAfterRendering: function() {\r\n\t\t\tvar that = this,\r\n\t\t\t\toSrcDDOTable = this.getView().byId(\"idWorksSrcHoA\"),\r\n\t\t\t\toDDOTable = this.getView().byId(\"idWorksHoA\"),\r\n\t\t\t\toEstTable = this.byId(\"idWorksEstim\"),\r\n\r\n\t\t\t\toEstItemsBinding = oEstTable.getBinding(\"items\"),\r\n\t\t\t\toDDOItemsBinding = oDDOTable.getBinding(\"items\"),\r\n\t\t\t\toSrcDDOTableBinding = oSrcDDOTable.getBinding(\"items\");\r\n\r\n\t\t\t//Check items Binding change\r\n\t\t\toSrcDDOTableBinding.attachChange(function(oEvent) {\r\n\t\t\t\tvar oLength = oEvent.getSource().iLength;\r\n\t\t\t\tthat.getModel(\"detailView\").setProperty(\"/SrcDDOTableRowCount\", oLength);\r\n\t\t\t\tthat.getModel(\"detailView\").updateBindings();\r\n\t\t\t});\r\n\t\t\toDDOItemsBinding.attachChange(function(oEvent) {\r\n\t\t\t\tvar oLength = oEvent.getSource().iLength;\r\n\t\t\t\tthat.getModel(\"detailView\").setProperty(\"/DDOTableRowCount\", oLength);\r\n\t\t\t\tthat.getModel(\"detailView\").updateBindings();\r\n\t\t\t});\r\n\t\t\toEstItemsBinding.attachChange(function(oEvent) {\r\n\t\t\t\tvar oLength = oEvent.getSource().iLength;\r\n\t\t\t\tthat.getModel(\"detailView\").setProperty(\"/ESTTableRowCount\", oLength);\r\n\t\t\t\tthat.getModel(\"detailView\").updateBindings();\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Lifecycle method to clear all references\r\n\t\t */\r\n\t\tonExit: function() {\r\n\t\t\tthis.bRefreshDDoTable = null;\r\n\t\t\tif (this._oDDOVHDialog) {\r\n\t\t\t\tthis._oDDOVHDialog.destroy();\r\n\t\t\t\tthis._oDDOVHDialog = null;\r\n\t\t\t}\r\n\t\t\tif (this._valueHelpDialog) {\r\n\t\t\t\tthis._valueHelpDialog.destroy();\r\n\t\t\t\tthis._valueHelpDialog = null;\r\n\t\t\t}\r\n\t\t\tif (this._oHOAVHDialog) {\r\n\t\t\t\tthis._oHOAVHDialog.destroy();\r\n\t\t\t\tthis._oHOAVHDialog = null;\r\n\t\t\t}\r\n\t\t\tif (this._oPicCodeVHDialog) {\r\n\t\t\t\tthis._oPicCodeVHDialog.destroy();\r\n\t\t\t\tthis._oPicCodeVHDialog = null;\r\n\t\t\t}\r\n\t\t\tif (this._createChangeLogFrag) {\r\n\t\t\t\tthis._createChangeLogFrag.close();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/* =========================================================== */\r\n\t\t/* event handlers                                              */\r\n\t\t/* =========================================================== */\r\n\r\n\t\t/**\r\n\t\t * Handler called when suggestion item is selected\r\n\t\t * @param {sap.ui.base.Event} oEvent Selection of an Item from the Suggestions\r\n\t\t */\r\n\t\thandleSuggestionItemSelected: function(oEvent) {\r\n\t\t\tif (!oEvent.getSource().getValue()) {\r\n\t\t\t\toEvent.getSource().setValueState();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler when the share by E-Mail button has been clicked\r\n\t\t * @public\r\n\t\t */\r\n\t\tonSendEmailPress: function() {\r\n\t\t\tvar oViewModel = this.getModel(\"detailView\");\r\n\r\n\t\t\tsap.m.URLHelper.triggerEmail(\r\n\t\t\t\tnull,\r\n\t\t\t\toViewModel.getProperty(\"/shareSendEmailSubject\"),\r\n\t\t\t\toViewModel.getProperty(\"/shareSendEmailMessage\")\r\n\t\t\t);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Event handler function to adjust the screen\r\n\t\t * @param {Event} oEvent Press event\r\n\t\t */\r\n\t\tonFullScreenPress: function(oEvent) {\r\n\t\t\tvar param = {\r\n\t\t\t\tevent: oEvent,\r\n\t\t\t\ttarget: \"detail\",\r\n\t\t\t\tmasterPage: \"MasterPage\",\r\n\t\t\t\tdetailPage: \"DetailPage\"\r\n\t\t\t};\r\n\t\t\tthis._setScreenSize(param);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler when the share in JAM button has been clicked\r\n\t\t * @public\r\n\t\t */\r\n\t\tonShareInJamPress: function() {\r\n\t\t\tvar oViewModel = this.getModel(\"detailView\"),\r\n\t\t\t\toShareDialog = sap.ui.getCore().createComponent({\r\n\t\t\t\t\tname: \"sap.collaboration.components.fiori.sharing.dialog\",\r\n\t\t\t\t\tsettings: {\r\n\t\t\t\t\t\tobject: {\r\n\t\t\t\t\t\t\tid: location.href,\r\n\t\t\t\t\t\t\tshare: oViewModel.getProperty(\"/shareOnJamTitle\")\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\toShareDialog.open();\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for the value help to select DDO\r\n\t\t * @param {sap.ui.base.Event} oEvent is the event raised by the control\r\n\t\t */\r\n\t\thandleDDOValueHelp: function(oEvent) {\r\n\t\t\t//this.oDDO = oEvent.getSource();\r\n\t\t\tvar sCustomData = oEvent.getSource().getCustomData()[0].getValue();\r\n\t\t\tvar oDdoVH = this._getDdoVH(oEvent, sCustomData);\r\n\t\t\tif (oDdoVH) {\r\n\t\t\t\toDdoVH.open();\r\n\t\t\t}\r\n\t\t\tthis.oCurrentInput = oEvent.getSource();\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for the value help to select DDO\r\n\t\t * @param {sap.ui.base.Event} oEvent is the event raised by the control\r\n\t\t */\r\n\t\thandleHoaValueHelp: function(oEvent) {\r\n\t\t\t//this.oHOA = oEvent.getSource();\r\n\t\t\tvar sCustomData = oEvent.getSource().getCustomData()[0].getValue();\r\n\t\t\tvar oHoaVH = this._getHoaVH(oEvent, sCustomData);\r\n\t\t\tif (oHoaVH) {\r\n\t\t\t\toHoaVH.open();\r\n\t\t\t}\r\n\t\t\tthis.oCurrentInput = oEvent.getSource();\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for the value help to select Pic Code\r\n\t\t * @param {sap.ui.base.Event} oEvent is the event raised by the control\r\n\t\t */\r\n\t\thandlePicCodeValueHelp: function(oEvent) {\r\n\t\t\t//this.oHOA = oEvent.getSource();\r\n\t\t\tvar sCustomData = oEvent.getSource().getCustomData()[0].getValue();\r\n\t\t\tthis._getPicCodeVH(oEvent, sCustomData).open();\r\n\t\t\tthis.oCurrentInput = oEvent.getSource();\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for the search in the value help fragments\r\n\t\t * @param {sap.ui.base.Event} oEvent Search press inside the Value help for Location\r\n\t\t */\r\n\t\t_handleValueHelpSearch: function(oEvent) {\r\n\t\t\tvar sValue = oEvent.getParameter(\"value\");\r\n\t\t\tvar oFilter = new Filter(\r\n\t\t\t\t\"Desc\",\r\n\t\t\t\tsap.ui.model.FilterOperator.Contains, sValue\r\n\t\t\t);\r\n\t\t\toEvent.getSource().getBinding(\"items\").filter([oFilter]);\r\n\t\t},\r\n\r\n\t\t// /**\r\n\t\t//  * Event handler for the value help to select HOA\r\n\t\t//  * @param {sap.ui.base.Event} oEvent Value Help for HOA selection from Table\r\n\t\t//  */\r\n\t\t// handleHOAValueHelp: function(oEvent){\r\n\t\t// \tthis.oHoa = oEvent.getSource();\r\n\t\t// \tthis.getASHoaVH().open({\r\n\t\t// \t\tfilters: [],\r\n\t\t// \t\tmode: \"Single\",\t\r\n\t\t// \t\thideFilter: false,\r\n\t\t// \t\t//for multiselect\r\n\t\t// \t\t// multiSelect: function (aSelectedRows) {\r\n\t\t// \t\t//     this.onSelectEmployee(aSelectedRows);\r\n\r\n\t\t// \t\t// }.bind(this),\r\n\r\n\t\t// \t\t//for single select pass this method\r\n\t\t// \t\tselect: function(oSelectedObject){\r\n\t\t// \t\t\tthis.getModel().setProperty(\"Hoa\", oSelectedObject.hoa, this.oHoa.getBindingContext());\r\n\t\t// \t\t\tthis.oHoa.fireChange();\r\n\t\t// \t\t}.bind(this)\r\n\t\t// \t});\r\n\t\t// },\r\n\r\n\t\t/**\r\n\t\t * Event handler for value help to select currency\r\n\t\t * @param {sap.ui.base.Event} oEvent Value help for currency selection\r\n\t\t */\r\n\t\thandleCurrValueHelp: function(oEvent) {\r\n\t\t\tthis.oCurr = oEvent.getSource();\r\n\t\t\tthis.getASCurrVH().open({\r\n\t\t\t\tfilters: [],\r\n\t\t\t\t//for multiselect\r\n\t\t\t\t// multiSelect: function (aSelectedRows) {\r\n\t\t\t\t//     this.onSelectEmployee(aSelectedRows);\r\n\r\n\t\t\t\t// }.bind(this),\r\n\r\n\t\t\t\t//for single select pass this method\r\n\t\t\t\tselect: function(oSelectedObject) {\r\n\t\t\t\t\tthis.oCurr.setValue(oSelectedObject.waers);\r\n\t\t\t\t\tthis.oCurr.fireChange();\r\n\t\t\t\t}.bind(this)\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * Need to change the Binding as per the data for value help\r\n\t\t * @param {sap.ui.base.Event} oEvent Value Help for Estimations\r\n\t\t */\r\n\t\thandleEstValueHelp: function(oEvent) {\r\n\t\t\tvar sInputValue = oEvent.getSource().getValue();\r\n\t\t\tthis.oBindingContext = oEvent.getSource().getBindingContext(\"oLocalJSONModel\");\r\n\t\t\tthis.sProperty = \"EstimateTable\";\r\n\t\t\tif (!this.getModel(\"valueHelpModel\")) {\r\n\t\t\t\tvar oDDOModel = new JSONModel(this.getModel(\"oLocalJSONModel\").getProperty(\"/DDO\"));\r\n\t\t\t\tthis.setModel(oDDOModel, \"valueHelpModel\");\r\n\t\t\t}\r\n\r\n\t\t\t// create value help dialog\r\n\t\t\tif (!this._valueHelpDialog) {\r\n\t\t\t\tthis._valueHelpDialog = sap.ui.xmlfragment(\r\n\t\t\t\t\t\"com.goap.cfms.works.as.fragment.ValueHelpDialog\",\r\n\t\t\t\t\tthis\r\n\t\t\t\t);\r\n\t\t\t\tthis.getView().addDependent(this._valueHelpDialog);\r\n\t\t\t}\r\n\t\t\t// create a filter for the binding\r\n\t\t\tthis._valueHelpDialog.getBinding(\"items\").filter([new Filter(\r\n\t\t\t\t\"Desc\",\r\n\t\t\t\tsap.ui.model.FilterOperator.Contains, sInputValue\r\n\t\t\t)]);\r\n\r\n\t\t\t// open value help dialog filtered by the input value\r\n\t\t\tthis._valueHelpDialog.open(sInputValue);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Function for creating new Estimate Payload nd sending to EntitySet\r\n\t\t * @param {sap.ui.base.Event} oEvent On Editting existing estimate\r\n\t\t */\r\n\t\tonEstChange: function(oEvent) {\r\n\t\t\tvar oEstPayload = {\r\n\t\t\t\tAction: \"UPD_ESTMT\",\r\n\t\t\t\tGuid: oEvent.getSource().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\tEstimateGuid: oEvent.getSource().getBindingContext().getProperty(\"EstimateGuid\"),\r\n\t\t\t\tLockTimestamp: oEvent.getSource().getBindingContext().getProperty(\"LockTimestamp\"),\r\n\t\t\t\tItemNo: oEvent.getSource().getBindingContext().getProperty(\"ItemNo\"),\r\n\t\t\t\tEstimateId: oEvent.getSource().getBindingContext().getProperty(\"EstimateId\"),\r\n\t\t\t\tQuantity: oEvent.getSource().getBindingContext().getProperty(\"Quantity\"),\r\n\t\t\t\tRate: oEvent.getSource().getBindingContext().getProperty(\"Rate\"),\r\n\t\t\t\tValue: oEvent.getSource().getBindingContext().getProperty(\"Value\")\r\n\t\t\t};\r\n\t\t\t//var sUpdPath = \"/WrkASDetailsDraftSet(Guid=guid'\" + oEvent.getSource().getBindingContext().getProperty(\"Guid\") + \"'),LockTimestamp=\\/Date(\" +  ( new Date()).getTime() + \")\\/ )\";\r\n\t\t\tvar sUpdPath = this.getModel().createKey(\"WrkEstimatesSet\", {\r\n\t\t\t\tGuid: oEvent.getSource().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\tEstimateGuid: oEvent.getSource().getBindingContext().getProperty(\"EstimateGuid\")\r\n\t\t\t});\r\n\r\n\t\t\tsUpdPath = \"/\" + sUpdPath;\r\n\r\n\t\t\tthis.getModel().update(sUpdPath, oEstPayload, {\r\n\t\t\t\trefreshAfterChange: false\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler function for Version press\r\n\t\t * @param {Event} oEvent Button press on version selection\r\n\t\t */\r\n\t\tonVersionPress: function(oEvent) {\r\n\t\t\tvar sTitle = this.getModel(\"i18n\").getResourceBundle().getText(\"detail.page.header.version.title\"),\r\n\t\t\t\tsNav = \"worksversions\";\r\n\t\t\tthis._openVersionDialog(sTitle, sNav);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler function for navigation for Version No\r\n\t\t * @param {Event} oEvent Event handler for navigating to different version\r\n\t\t */\r\n\t\tonVersionNav: function(oEvent) {\r\n\t\t\tthis.getRouter().navTo(\"Detail\", {\r\n\t\t\t\tobjectId: oEvent.getSource().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\tstateId: \"D\" //this.getModel(\"detailView\").getProperty(\"/stateId\")\r\n\t\t\t}, true);\r\n\t\t\tthis.onVersionClose();\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for addition of new rows to DDO table\r\n\t\t * @param {Event} oEvent On adding new records to DDO table\r\n\t\t */\r\n\t\taddNewRowDDOs: function(oEvent) {\r\n\t\t\tvar bInsertItem = false,\r\n\t\t\t\toItems = this.byId(\"idWorksHoA\").getItems(),\r\n\t\t\t\toBusyControl = this.byId(\"idWorksHoA\");\r\n\t\t\toBusyControl.setBusy(true);\r\n\t\t\tvar columnListItemNewLine = this._returnListItemTemplate(),\r\n\t\t\t\toDetailsContext = this.byId(\"idWorksHoA\").getBindingContext();\r\n\t\t\tif (oItems.length > 0) {\r\n\t\t\t\tvar oModel = this.getModel(),\r\n\t\t\t\t\toBindingContext = oItems[oItems.length - 1].getBindingContext(),\r\n\t\t\t\t\tsDDO = oModel.getProperty(\"Ddo\", oBindingContext),\r\n\t\t\t\t\tsHOA = oModel.getProperty(\"Hoa\", oBindingContext),\r\n\t\t\t\t\tsShare = oModel.getProperty(\"Zshare\", oBindingContext);\r\n\t\t\t\tif (sDDO && sHOA && sShare) {\r\n\t\t\t\t\tbInsertItem = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\toBusyControl.setBusy(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (oItems.length === 0) {\r\n\t\t\t\tthis.getModel().setProperty(\"Ddo\", \"\", oDetailsContext);\r\n\t\t\t\tthis.getModel().setProperty(\"Hoa\", \"\", oDetailsContext);\r\n\t\t\t\tthis.byId(\"idWorksHoA\").addItem(columnListItemNewLine);\r\n\t\t\t\tthis._setPropertyCall(columnListItemNewLine, \"TGT\", oBusyControl);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tif (bInsertItem) {\r\n\t\t\t\t\tthis.getModel().setProperty(\"Ddo\", \"\", oDetailsContext);\r\n\t\t\t\t\tthis.getModel().setProperty(\"Hoa\", \"\", oDetailsContext);\r\n\t\t\t\t\tthis.byId(\"idWorksHoA\").addItem(columnListItemNewLine);\r\n\t\t\t\t\tthis._setPropertyCall(columnListItemNewLine, \"TGT\", oBusyControl);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for addition of new rows to Source DDO table\r\n\t\t * @param {Event} oEvent On adding new records to Source DDO table\r\n\t\t */\r\n\t\taddNewRowSrcDDOs: function(oEvent) {\r\n\t\t\tvar bInsertItem = false,\r\n\t\t\t\toItems = this.byId(\"idWorksSrcHoA\").getItems(),\r\n\t\t\t\toBusyControl = this.byId(\"idWorksSrcHoA\");\r\n\t\t\toBusyControl.setBusy(true);\r\n\t\t\tvar columnListItemNewLine = this._returnSrcListItemTemplate(),\r\n\t\t\t\toDetailsContext = this.byId(\"idWorksSrcHoA\").getBindingContext();\r\n\t\t\tif (oItems.length > 0) {\r\n\t\t\t\tvar oModel = this.getModel(),\r\n\t\t\t\t\toBindingContext = oItems[oItems.length - 1].getBindingContext(),\r\n\t\t\t\t\tsDDO = oModel.getProperty(\"SourceDdo\", oBindingContext),\r\n\t\t\t\t\tsHOA = oModel.getProperty(\"SourceHoa\", oBindingContext),\r\n\t\t\t\t\tsShare = oModel.getProperty(\"SourceZShare\", oBindingContext);\r\n\t\t\t\tif (sDDO && sHOA && sShare) {\r\n\t\t\t\t\tbInsertItem = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\toBusyControl.setBusy(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (oItems.length === 0) {\r\n\t\t\t\tthis.getModel().setProperty(\"SourceDdo\", \"\", oDetailsContext);\r\n\t\t\t\tthis.getModel().setProperty(\"SourceHoa\", \"\", oDetailsContext);\r\n\t\t\t\tthis.byId(\"idWorksSrcHoA\").addItem(columnListItemNewLine);\r\n\t\t\t\tthis._setPropertyCall(columnListItemNewLine, \"SRC\", oBusyControl);\r\n\t\t\t} else {\r\n\t\t\t\tif (bInsertItem) {\r\n\t\t\t\t\tthis.getModel().setProperty(\"SourceDdo\", \"\", oDetailsContext);\r\n\t\t\t\t\tthis.getModel().setProperty(\"SourceHoa\", \"\", oDetailsContext);\r\n\t\t\t\t\tthis.byId(\"idWorksSrcHoA\").addItem(columnListItemNewLine);\r\n\t\t\t\t\tthis._setPropertyCall(columnListItemNewLine, \"SRC\", oBusyControl);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for modification of the value of percentage share in DDO table\r\n\t\t * @param {sap.ui.base.Event} oEvent On changing the % share field in DDO\r\n\t\t */\r\n\t\tonDdoShareChange: function(oEvent) {\r\n\t\t\tvar oSource = oEvent.getSource();\r\n\t\t\tthis._validateShare(oSource);\r\n\t\t\tif (oSource.getValueState() !== \"Error\") {\r\n\t\t\t\tthis._setPropertyCall(oSource, \"TGT\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for modification of the value of percentage share in DDO table\r\n\t\t * @param {sap.ui.base.Event} oEvent On changing the % share field in DDO\r\n\t\t */\r\n\t\trediobtnGO: function() {\r\n\t\t\treturn this.getView().byId(\"idNEWGO\");\r\n\t\t},\r\n\t\trediobtnProceeding: function() {\r\n\t\t\treturn this.getView().byId(\"idNEWPROCEEDING\");\r\n\t\t},\r\n\t\tonDdoShareLiveChange: function(oEvent) {\r\n\t\t\tvar oSource = oEvent.getSource();\r\n\t\t\tthis._validateShare(oSource);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for modification of the value of percentage share in DDO table\r\n\t\t * @param {sap.ui.base.Event} oEvent On changing the % share field in DDO\r\n\t\t */\r\n\t\tonSrcDdoShareChange: function(oEvent) {\r\n\t\t\tvar oSource = oEvent.getSource();\r\n\t\t\tthis._setPropertyCall(oSource, \"SRC\");\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event Handler for any changes performed to the DDO table\r\n\t\t * @param {Event} oEvent Performing changes on the DDO table\r\n\t\t */\r\n\t\tonDdoChange: function(oEvent) {\r\n\t\t\tif (oEvent.getSource().getMetadata().getElementName() === \"sap.m.Input\") {\r\n\t\t\t\tif (oEvent.getSource().getSelectedKey()) {\r\n\t\t\t\t\toEvent.getSource().setValueState();\r\n\t\t\t\t} else if (oEvent.getSource().getValue()) {\r\n\t\t\t\t\toEvent.getSource().setValueState();\r\n\t\t\t\t} else {\r\n\t\t\t\t\toEvent.getSource().setValueState(\"Error\");\r\n\t\t\t\t}\r\n\t\t\t} else if (oEvent.getSource().data(\"bindPath\") === \"ValidTo\" || oEvent.getSource().data(\"bindPath\") === \"ValidFrom\") {\r\n\t\t\t\tvar oValidTo = oEvent.getSource().getBindingContext().getProperty(\"ValidTo\"),\r\n\t\t\t\t\toValidFrom = oEvent.getSource().getBindingContext().getProperty(\"ValidFrom\");\r\n\t\t\t\tif (oValidFrom > oValidTo) {\r\n\t\t\t\t\tthis._displayWarnMessge(this.getModel(\"i18n\").getResourceBundle().getText(\"detail.message.error.ValidToFrom\"));\r\n\t\t\t\t\toEvent.getSource().setValue(null);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._setPropertyCall(oEvent.getSource(), \"TGT\");\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event Handler for any changes performed to the DDO table\r\n\t\t * @param {Event} oEvent Performing changes on the DDO table\r\n\t\t */\r\n\t\tonSrcDdoChange: function(oEvent) {\r\n\t\t\tif (oEvent.getSource().getMetadata().getElementName() === \"sap.m.Input\") {\r\n\t\t\t\tif (oEvent.getSource().getSelectedKey()) {\r\n\t\t\t\t\toEvent.getSource().setValueState();\r\n\t\t\t\t} else if (oEvent.getSource().getValue()) {} else {\r\n\t\t\t\t\toEvent.getSource().setValueState(\"Error\");\r\n\t\t\t\t}\r\n\t\t\t} else if (oEvent.getSource().data(\"bindPath\") === \"SourceValidFrom\" || oEvent.getSource().data(\"bindPath\") === \"SourceValidTo\") {\r\n\t\t\t\tvar oValidTo = oEvent.getSource().getBindingContext().getProperty(\"SourceValidTo\"),\r\n\t\t\t\t\toValidFrom = oEvent.getSource().getBindingContext().getProperty(\"SourceValidFrom\");\r\n\t\t\t\tif (oValidFrom > oValidTo) {\r\n\t\t\t\t\tthis._displayWarnMessge(this.getModel(\"i18n\").getResourceBundle().getText(\"detail.message.error.ValidToFrom\"));\r\n\t\t\t\t\toEvent.getSource().setValue(null);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._setPropertyCall(oEvent.getSource(), \"SRC\");\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event Handler for deletions performed to the DDO table\r\n\t\t * @param {Event} oEvent Deleting from the DDO table\r\n\t\t */\r\n\t\tonDeleteDDO: function(oEvent) {\r\n\t\t\tvar oParams = {\r\n\t\t\t\tMessage: \"detail.messageBox.delete\",\r\n\t\t\t\tsource: oEvent.getSource(),\r\n\t\t\t\taction: \"DEL_HOA\",\r\n\t\t\t\tguid: oEvent.getSource().getBindingContext().getObject().HoaGuid\r\n\t\t\t};\r\n\t\t\tif (this.getView().getBindingContext().getProperty(\"Status\") === \"E0003\") {\r\n\t\t\t\toParams.action = \"APPR_DELI\";\r\n\t\t\t}\r\n\t\t\tthis._onActionConfirm(this._onDeleteConfirmation.bind(this), oParams);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event Handler for deletions performed to the Source DDO table\r\n\t\t * @param {Event} oEvent Deleting from the Source DDO table\r\n\t\t */\r\n\t\tonSourceDeleteDDO: function(oEvent) {\r\n\t\t\tvar oParams = {\r\n\t\t\t\tMessage: \"detail.messageBox.delete\",\r\n\t\t\t\tsource: oEvent.getSource(),\r\n\t\t\t\taction: \"DEL_S_HOA\",\r\n\t\t\t\tguid: oEvent.getSource().getBindingContext().getObject().HoaGuid\r\n\t\t\t};\r\n\t\t\tthis._onActionConfirm(this._onDeleteConfirmation.bind(this), oParams);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for Additional Note\r\n\t\t * @param {*} oEvent \r\n\t\t */\r\n\t\tonAdditionalNotePress: function(oEvent) {\r\n\t\t\tvar that = this,\r\n\r\n\t\t\t\toDetailViewModel = this.getModel(\"detailView\");\r\n\t\t\tvar asnum = this.getView().byId(\"idCode\").getValue();\r\n\t\t\tif (asnum == \"\") {\r\n\t\t\t\tsap.m.MessageBox.error(\"Please Create Admistrative Sanction\");\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif (!this._addNoteFrag) {\r\n\t\t\t\t\tvar fragId = this.createId(\"fragAddNote\");\r\n\t\t\t\t\tthis._addNoteFrag = sap.ui.xmlfragment(fragId, \"com.goap.cfms.works.as.fragment.additionalNote\", this);\r\n\t\t\t\t\tthis.getView().addDependent(this._addNoteFrag);\r\n\t\t\t\t\tjQuery.sap.syncStyleClass(\"sapUiSizeCompact\", this.getView(), this._addNoteFrag);\r\n\t\t\t\t}\r\n\t\t\t\tthis._addNoteFrag.setModel(oDetailViewModel);\r\n\t\t\t\tthis._addNoteFrag.open();\r\n\r\n\t\t\t\toDetailViewModel.setProperty(\"/addNotingstring\", \"\");\r\n\t\t\t\tthis._addNoteFrag.setBusy(true);\r\n\t\t\t\tvar sPath = this.getModel().createKey(\"WrkCoverPageSet\", {\r\n\t\t\t\t\tCaseguid: this.getView().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\t\tNotingid: oDetailViewModel.getProperty(\"/Notingid\")\r\n\t\t\t\t});\r\n\t\t\t\tsPath = \"/\" + sPath;\r\n\t\t\t\tthis.getModel().read(sPath, {\r\n\t\t\t\t\tsuccess: function(oData) {\r\n\t\t\t\t\t\toDetailViewModel.setProperty(\"/addNotingstring\", decodeURIComponent(oData.Notingstring));\r\n\t\t\t\t\t\toDetailViewModel.setProperty(\"/addNotePagent\", oData.Pagent);\r\n\t\t\t\t\t\toDetailViewModel.setProperty(\"/Notingid\", oData.Notingid);\r\n\t\t\t\t\t\tthat._addNoteFrag.setBusy(false);\r\n\t\t\t\t\t},\r\n\t\t\t\t\terror: function(oError) {\r\n\t\t\t\t\t\tthat._addNoteFrag.setBusy(false);\r\n\t\t\t\t\t\t// sap.m.MessageBox.error(oError.responseText);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tonAdditionalNotePressReference: function(oEvent) {\r\n\t\t\tvar that = this,\r\n\t\t\t\toDetailViewModel = this.getModel(\"detailView\");\r\n\t\t\tvar asnum = this.getView().byId(\"idCode\").getValue();\r\n\t\t\tif (asnum == \"\") {\r\n\t\t\t\tsap.m.MessageBox.error(\"Please Create Admistrative Sanction\");\r\n\t\t\t} else {\r\n\t\t\t\tif (!this._addNoteFragReference) {\r\n\t\t\t\t\tvar fragId = this.createId(\"fragAddNote\");\r\n\r\n\t\t\t\t\tthis._addNoteFragReference = sap.ui.xmlfragment(\"com.goap.cfms.works.as.fragment.additionalNoteReference\", this);\r\n\t\t\t\t\t// sap.ui.xmlfragment(fragId, \"com.goap.cfms.works.as.fragment.additionalNoteReference\", this);\r\n\t\t\t\t\tthis.getView().addDependent(this._addNoteFragReference);\r\n\t\t\t\t\tjQuery.sap.syncStyleClass(\"sapUiSizeCompact\", this.getView(), this._addNoteFragReference);\r\n\t\t\t\t}\r\n\t\t\t\tthis._addNoteFragReference.setModel(oDetailViewModel);\r\n\t\t\t\tthis._addNoteFragReference.open();\r\n\t\t\t\toDetailViewModel.setProperty(\"/ReferenceaddNotingstring\", \"\");\r\n\t\t\t\tthis._addNoteFragReference.setBusy(true);\r\n\t\t\t\tvar sPath = this.getModel().createKey(\"WrksReferenceSet\", {\r\n\t\t\t\t\tCaseguid: this.getView().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\t\tNotingid: oDetailViewModel.getProperty(\"/ReferenceNotingid\")\r\n\t\t\t\t});\r\n\t\t\t\tsPath = \"/\" + sPath;\r\n\t\t\t\tthis.getModel().read(sPath, {\r\n\t\t\t\t\tsuccess: function(oData) {\r\n\t\t\t\t\t\toDetailViewModel.setProperty(\"/ReferenceaddNotingstring\", decodeURIComponent(oData.Notingstring));\r\n\t\t\t\t\t\toDetailViewModel.setProperty(\"/ReferenceaddNotePagent\", oData.Pagent);\r\n\t\t\t\t\t\toDetailViewModel.setProperty(\"/ReferenceNotingid\", oData.Notingid);\r\n\t\t\t\t\t\tthat._addNoteFragReference.setBusy(false);\r\n\t\t\t\t\t},\r\n\t\t\t\t\terror: function(oError) {\r\n\t\t\t\t\t\tvar MSG = JSON.parse(oError.responseText).error.message.value;\r\n\t\t\t\t\t\tthat._addNoteFragReference.setBusy(false);\r\n\t\t\t\t\t\tif (MSG.includes(\"Resource not found\")) {\r\n\t\t\t\t\t\t\toDetailViewModel.setProperty(\"/ReferenceaddNotingstring\", \"\");\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsap.m.MessageBox.error(MSG);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for save additional note\r\n\t\t * @param {*} oEvent \r\n\t\t */\r\n\t\tonSaveAdditionalNote: function(oEvent) {\r\n\t\t\tvar oDetailViewModelData = this.getModel(\"detailView\").getProperty(\"/\"),\r\n\t\t\t\toParam = {\r\n\t\t\t\t\tsPath: \"WrkCoverPageSet\",\r\n\t\t\t\t\tsNotingId: oDetailViewModelData.Notingid,\r\n\t\t\t\t\tsPagent: oDetailViewModelData.addNotePagent,\r\n\t\t\t\t\tsNotingString: encodeURIComponent(oDetailViewModelData.addNotingstring),\r\n\t\t\t\t\tsGuid: this.getView().getBindingContext().getProperty(\"Guid\")\r\n\t\t\t\t};\r\n\t\t\tvar oAdditionNoteSave = new Promise(function(resolve, reject) {\r\n\t\t\t\tthis._addNoteFrag.setBusy(true);\r\n\t\t\t\tthis._postNote(oParam, resolve, reject);\r\n\t\t\t}.bind(this));\r\n\t\t\toAdditionNoteSave.then(function(oResult) {\r\n\t\t\t\tthis._addNoteFrag.setBusy(false);\r\n\t\t\t\tthis._addNoteFrag.close();\r\n\t\t\t}.bind(this));\r\n\t\t},\r\n\t\tonSaveAdditionalNoteReference: function(oEvent) {\r\n\t\t\tvar oDetailViewModelData = this.getModel(\"detailView\").getProperty(\"/\"),\r\n\t\t\t\toParam = {\r\n\t\t\t\t\tsPath: \"WrksReferenceSet\",\r\n\t\t\t\t\tsNotingId: oDetailViewModelData.ReferenceNotingid,\r\n\t\t\t\t\tsPagent: oDetailViewModelData.ReferenceaddNotePagent,\r\n\t\t\t\t\tsNotingString: encodeURIComponent(oDetailViewModelData.ReferenceaddNotingstring),\r\n\t\t\t\t\tsGuid: this.getView().getBindingContext().getProperty(\"Guid\")\r\n\t\t\t\t};\r\n\t\t\tvar oAdditionNoteSaveReference = new Promise(function(resolve, reject) {\r\n\t\t\t\tthis._addNoteFragReference.setBusy(true);\r\n\t\t\t\tthis._postNote(oParam, resolve, reject);\r\n\t\t\t}.bind(this));\r\n\t\t\toAdditionNoteSaveReference.then(function(oResult) {\r\n\t\t\t\tthis._addNoteFragReference.setBusy(false);\r\n\t\t\t\tthis._addNoteFragReference.close();\r\n\t\t\t}.bind(this));\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler function for Print\r\n\t\t * @param {Event} oEvent \r\n\t\t */\r\n\t\tonPrintPress: function(oEvent) {\r\n\t\t\tvar oPrintModel = this.getModel(\"printModel\");\r\n\t\t\tvar sServiceUrl = oPrintModel.sServiceUrl;\r\n\t\t\tvar params = {\r\n\t\t\t\tsServiceUrl: sServiceUrl,\r\n\t\t\t\tsGuid: oEvent.getSource().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\tsDocCategory: \"ZAS\"\r\n\t\t\t};\r\n\t\t\tthis._onPrintPress(params);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event Handler for closing the value help dialog\r\n\t\t * @param {sap.ui.base.Event} oEvent Pressing on Close in Value Help\r\n\t\t */\r\n\t\t_handleValueHelpClose: function(oEvent) {\r\n\t\t\tvar oSelectedItem = oEvent.getParameter(\"selectedItem\");\r\n\t\t\tif (oSelectedItem) {\r\n\t\t\t\tthis.getModel(\"oLocalJSONModel\").setProperty(this.sProperty, oSelectedItem.getDescription(), this.oBindingContext);\r\n\t\t\t\tthis.getModel(\"oLocalJSONModel\").updateBindings();\r\n\t\t\t}\r\n\t\t\toEvent.getSource().getBinding(\"items\").filter([]);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Event Handler for clicking on the Save button\r\n\t\t * @param {sap.ui.base.Event} oEvent Save button press\r\n\t\t */\r\n\t\tonSavePress: function(oEvent) {\r\n\t\t\t$.sap.ASNUMBER = undefined;\r\n\t\t\tthis.updateControlModel(\"oControlModel\");\r\n\t\t\tvar bMandatoryCheck = this._mandatoryFieldCheckOnSave(\"oControlModel\");\r\n\t\t\tvar bValidated = this._validateBeforeSave(\"oControlModel\");\r\n\t\t\tvar bIsAmendDoc = parseInt(this.getView().getBindingContext().getProperty(\"Version\"), 10) > 0 ? true : false;\r\n\t\t\tvar bCheckListValidation = this._handleCheckListValidate(\"idChecklistTable\", bIsAmendDoc);\r\n\t\t\tif (bMandatoryCheck && bValidated && bCheckListValidation) {\r\n\t\t\t\tvar oParams = {\r\n\t\t\t\t\tMessage: \"detail.messageBox.save\",\r\n\t\t\t\t\taction: \"SAVE\",\r\n\t\t\t\t\tevent: oEvent\r\n\t\t\t\t};\r\n\t\t\t\tthis._onActionConfirm(this._postAS.bind(this), oParams);\r\n\t\t\t\tthis.onddomappingwork();\r\n\r\n\t\t\t} else {\r\n\t\t\t\t//Logic for Not save\r\n\t\t\t\tif (bCheckListValidation) {\r\n\t\t\t\t\tthis.getModel(\"oControlModel\").updateBindings();\r\n\t\t\t\t\tthis._displayWarnMessge(this.getModel(\"i18n\").getResourceBundle().getText(\"detail.message.error.mandatoryField\"));\r\n\t\t\t\t\tthis.byId(\"idCode\").applyFocusInfo(true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t// code for save navigation on ddo-mapping work //\r\n\t\tonpresscheckbox: function(oEvent) {\r\n\t\t\tvar sName = oEvent.getSource().getText();\r\n\t\t\tvar sCheckbox = oEvent.getSource().getSelected();\r\n\t\t\tif (sName === \"Yes\") {\r\n\t\t\t\tif (sCheckbox) {\r\n\t\t\t\t\tthis.getView().byId(\"no\").setSelected(false);\r\n\t\t\t\t\tthis.getView().byId(\"no\").setEnabled(true);\r\n\t\t\t\t\tthis.getView().byId(\"idTextarea\").setEnabled(true);\r\n\t\t\t\t\toEvent.getSource().setEnabled(false);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (sCheckbox) {\r\n\t\t\t\t\tthis.getView().byId(\"yes\").setSelected(false);\r\n\t\t\t\t\tthis.getView().byId(\"yes\").setEnabled(true);\r\n\t\t\t\t\tthis.getView().byId(\"idTextarea\").setEnabled(false);\r\n\t\t\t\t\tthis.getView().byId(\"idTextarea\").setValue();\r\n\t\t\t\t\toEvent.getSource().setEnabled(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonddomappingwork: function() {\r\n\t\t\tvar that = this;\r\n\r\n\t\t\tvar Data = this.getView().byId(\"idWorksDDOMapping_work\").getBinding(\"items\").getContexts()[0].getProperty();\r\n\t\t\tvar asnum = this.getView().byId(\"idCode\").getValue();\r\n\t\t\tvar textarea = this.getView().byId(\"idTextarea\").getValue();\r\n\t\t\tthis.checkbox = this.getView().byId(\"yes\").getSelected();\r\n\t\t\tif (this.checkbox === true) {\r\n\t\t\t\tthis.checkbox === \"X\";\r\n\t\t\t} else {\r\n\t\t\t\tthis.checkbox === \"\";\r\n\t\t\t}\r\n\t\t\tvar arr = [];\r\n\t\t\tvar obj = {};\r\n\t\t\tobj.DDO_Code = Data.Ddo;\r\n\t\t\tobj.EstId = Data.EstId;\r\n\t\t\tobj.DDO_Desc = Data.DdoDes;\r\n\t\t\tobj.EstDesc = Data.EstDesc;\r\n\t\t\tobj.EstTotValue = Data.EstTotValue;\r\n\t\t\tarr.push(obj);\r\n\t\t\tvar header = {\r\n\t\t\t\tEstGuid: Data.EstGuid,\r\n\t\t\t\tEstId: Data.EstId,\r\n\t\t\t\tRefCode: asnum,\r\n\t\t\t\tFinconcdesc: textarea,\r\n\t\t\t\tFinanaceconcurr: this.checkbox,\r\n\t\t\t\tNav_DDO_Est: arr\r\n\t\t\t};\r\n\t\t\t// header.ASNumber = \"\";\r\n\t\t\t// header.SanctionType = button;\r\n\t\t\t// header.GoType = TypeOfGO;\r\n\r\n\t\t\t// header.Nav_DDO_Est = Data;\r\n\t\t\t// header.Nav_Proceeding = selectedItem;\r\n\r\n\t\t\t// var oBusy = new sap.m.BusyDialog();\r\n\r\n\t\t\tvar oEntity1 = \"/WrkEstimatesSet\";\r\n\t\t\t// oBusy.open();\r\n\t\t\tthis.getModel().create(oEntity1, header, {\r\n\t\t\t\tsuccess: function(oData, response) {\r\n\t\t\t\t\t// oBusy.close();\r\n\t\t\t\t\t// that.oDialog.close();\r\n\t\t\t\t\t// sap.ui.getCore().byId(\"FragmentTable\").getModel(\"oDetailsModelFragment\").setData(oData.Nav_Map.results);\r\n\t\t\t\t\t// sap.m.MessageBox.success(\"Data Successfully Saved\");\r\n\r\n\t\t\t\t},\r\n\t\t\t\terror: function(oError) {\r\n\t\t\t\t\t// oBusy.close();\r\n\t\t\t\t\t// that.oDialog.close();\r\n\t\t\t\t\t// var erMsg = JSON.parse(oError.responseText).error.message.value;\r\n\t\t\t\t\t// sap.m.MessageBox.error(erMsg); // for displaying message in box\r\n\t\t\t\t\tvar oErrorMsg = JSON.parse(oError.responseText).error.message.value;\r\n\t\t\t\t\tsap.m.MessageBox.show(oErrorMsg, sap.m.MessageBox.Icon.ERROR, \"Error\");\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for Making Live changes in particular fields\r\n\t\t * @param {Event} oEvent Change triggering on some particular fields\r\n\t\t */\r\n\t\tonFieldLiveChange: function(oEvent) {\r\n\t\t\tvar oSource = oEvent.getSource(),\r\n\t\t\t\tsPath = \"/\" + oSource.getBinding(\"value\").sPath,\r\n\t\t\t\toControlModel = this.getModel(\"oControlModel\"),\r\n\t\t\t\tsValueState = sPath + \"/valueState\",\r\n\t\t\t\tsType = oControlModel.getProperty(sPath + \"/type\");\r\n\t\t\tif (sType !== \"Number\") {\r\n\t\t\t\toControlModel.setProperty(sValueState, \"None\");\r\n\t\t\t} else {\r\n\t\t\t\tvar sMaxValue = oControlModel.getProperty(sPath + \"/maxLength\"),\r\n\t\t\t\t\tsInputLen = oSource.getValue().length;\r\n\t\t\t\tif (sInputLen > sMaxValue) {\r\n\t\t\t\t\toControlModel.setProperty(sValueState, \"Error\");\r\n\t\t\t\t} else if (oSource.getValue() < 0) {\r\n\t\t\t\t\toControlModel.setProperty(sValueState, \"Error\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\toControlModel.setProperty(sValueState, \"None\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler function for GONumber\r\n\t\t * @param {*} oEvent \r\n\t\t */\r\n\t\tonGOLiveChange: function(oEvent) {\r\n\t\t\tthis.getModel(\"detailView\").setProperty(\"/GoNumValueState\", \"None\");\r\n\t\t},\r\n\t\t/**\r\n\t\t * Updates the item count within the line item table's header\r\n\t\t * @param {object} oEvent an event containing the total number of items in the list\r\n\t\t * @private\r\n\t\t */\r\n\t\tonListUpdateFinished: function(oEvent) {\r\n\t\t\tvar sTitle,\r\n\t\t\t\tiTotalItems = oEvent.getParameter(\"total\"),\r\n\t\t\t\toViewModel = this.getModel(\"detailView\");\r\n\t\t\t// only update the counter if the length is final\r\n\t\t\tif (this.byId(\"lineItemsList\").getBinding(\"items\").isLengthFinal()) {\r\n\t\t\t\tif (iTotalItems) {\r\n\t\t\t\t\tsTitle = this.getResourceBundle().getText(\"detailLineItemTableHeadingCount\", [iTotalItems]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//Display 'Line Items' instead of 'Line items (0)'\r\n\t\t\t\t\tsTitle = this.getResourceBundle().getText(\"detailLineItemTableHeading\");\r\n\t\t\t\t}\r\n\t\t\t\toViewModel.setProperty(\"/lineItemListTitle\", sTitle);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tonhandleSanctionAuthority: function(oEvent) {\r\n\t\t\tthis.getView().setBusy(true);\r\n\t\t\tthis.sourcesancauth = oEvent.getSource();\r\n\t\t\tif (!this.sacauthority) {\r\n\t\t\t\tthis.sacauthority = sap.ui.xmlfragment(\"com.goap.cfms.works.as.fragment.sacauthority\", this);\r\n\t\t\t\tthis.getView().addDependent(this.sacauthority);\r\n\t\t\t}\r\n\t\t\tvar that = this;\r\n\t\t\tif (this.getOwnerComponent().getModel(\"migratedModel\").getData().date === \"\" || this.getOwnerComponent().getModel(\"migratedModel\").getData()\r\n\t\t\t\t.date === null || this.getOwnerComponent().getModel(\"migratedModel\").getData().date === undefined) {\r\n\t\t\t\tsap.m.MessageBox.error(\"Please Select Sacntion Date\");\r\n\t\t\t} else if (this.getOwnerComponent().getModel(\"migratedModel\").getData().dept === \"\") {\r\n\t\t\t\tsap.m.MessageBox.error(\"Please Select Sacntion Department\");\r\n\t\t\t} else {\r\n\t\t\t\tvar sacdt = this.dateconv(this.getOwnerComponent().getModel(\"migratedModel\").getData().date);\r\n\t\t\t\tvar sacdept = this.getOwnerComponent().getModel(\"migratedModel\").getData().beschr;\r\n\t\t\t\tvar sactype = this.getOwnerComponent().getModel(\"migratedModel\").getData().type;\r\n\t\t\t\tvar selfilter = [];\r\n\t\t\t\tselfilter.push(new sap.ui.model.Filter(\"Auth_Type\", sap.ui.model.FilterOperator.EQ, \"AS\"));\r\n\t\t\t\tselfilter.push(new sap.ui.model.Filter(\"DeptCode\", sap.ui.model.FilterOperator.EQ, sacdept));\r\n\t\t\t\tselfilter.push(new sap.ui.model.Filter(\"SanDate\", sap.ui.model.FilterOperator.EQ, sacdt));\r\n\t\t\t\t//selfilter.push(new sap.ui.model.Filter(\"Cat_Work\", sap.ui.model.FilterOperator.EQ, \"DCW\"));\r\n\t\t\t\tthat.getOwnerComponent().getModel().read(\"/AuthPositionSet\", {\r\n\t\t\t\t\tasync: true,\r\n\t\t\t\t\tfilters: selfilter,\r\n\t\t\t\t\tsuccess: function(oData) {\r\n\t\t\t\t\t\tthat.getView().setBusy(false);\r\n\t\t\t\t\t\tthat.sacauth = oData.results;\r\n\t\t\t\t\t\tvar sacauthmodel = new sap.ui.model.json.JSONModel({\r\n\t\t\t\t\t\t\tresults: that.sacauth\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthat.getOwnerComponent().setModel(sacauthmodel, \"sacauthmodel\");\r\n\t\t\t\t\t\tthat.getOwnerComponent().getModel(\"sacauthmodel\").refresh();\r\n\t\t\t\t\t\tthat.sacauthority.setTitle(\"Sanction Authority (\" + oData.results.length + \")\");\r\n\t\t\t\t\t\tthat.sacauthority.open();\r\n\t\t\t\t\t},\r\n\t\t\t\t\terror: function(error) {\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t//Migrated Code Starts\r\n\t\tsacauthorityConfirm: function(oEvent) {\r\n\t\t\tvar oSelectedItem = oEvent.getParameter(\"selectedItem\");\r\n\t\t\tif (oSelectedItem) {\r\n\t\t\t\tthis.desc = oSelectedItem.getDescription();\r\n\t\t\t\tthis.id = oSelectedItem.getTitle();\r\n\t\t\t\tthis.sourcesancauth.setValue(this.id + \" \" + \"(\" + this.desc + \")\");\r\n\t\t\t}\r\n\t\t\tif (oEvent.getSource().getBinding(\"items\") !== undefined) {\r\n\t\t\t\toEvent.getSource().getBinding(\"items\").filter([]);\r\n\t\t\t}\r\n\t\t\tthis.getOwnerComponent().getModel(\"migratedModel\").getData().authority = this.id + \" \" + \"(\" + this.desc + \")\";\r\n\t\t\tthis.getOwnerComponent().getModel(\"migratedModel\").updateBindings();\r\n\t\t\tthis.sacauthority.destroy();\r\n\t\t\tthis.sacauthority = undefined;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event Handler for changes made in the text fields\r\n\t\t * @param {sap.ui.base.Event} oEvent Changes made to fields in the View\r\n\t\t */\r\n\t\tonFieldChange: function(oEvent) {\r\n\t\t\tvar bLocation = false,\r\n\t\t\t\tsFNam = \"\",\r\n\t\t\t\tsFValue = \"\";\r\n\t\t\tif (oEvent.getSource().getValueState() !== \"Error\" || oEvent.getSource().getMetadata().getElementName() === \"sap.m.DatePicker\") {\r\n\t\t\t\tif (oEvent.getSource().getMetadata().getElementName() === \"sap.m.DatePicker\") {\r\n\t\t\t\t\tif (oEvent.getSource().getCustomData() && (oEvent.getSource().getCustomData()[0].getKey() === \"apprField\")) {\r\n\t\t\t\t\t\tthis.getModel(\"detailView\").setProperty(\"/goDateValueState\", \"None\");\r\n\t\t\t\t\t\tvar fieldDate = oEvent.getSource().getBindingContext().getProperty(\"GoRefDate\");\r\n\t\t\t\t\t\tvar oMaxDate = oEvent.getSource().getMaxDate();\r\n\t\t\t\t\t\tif (fieldDate > oMaxDate) {\r\n\t\t\t\t\t\t\tsap.m.MessageBox.error(\"Maximum Date for GOIR is Today's Date\");\r\n\t\t\t\t\t\t\toEvent.getSource().setDateValue(new Date());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar sPath = \"/\" + oEvent.getSource().getBinding(\"value\").sPath + \"/valueState\";\r\n\t\t\t\t\t\tthis.getModel(\"oControlModel\").setProperty(sPath, \"None\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//sFValue = sap.ui.model.odata.ODataUtils.formatValue(oEvent.getSource().getDateValue(), \"Edm.DateTime\");\r\n\t\t\t\t\tsFValue = oEvent.getSource().getDateValue();\r\n\t\t\t\t\tsFNam = oEvent.getSource().getBindingInfo(\"value\").binding.sPath;\r\n\t\t\t\t\tvar oDateFormat = sap.ui.core.format.DateFormat.getDateInstance({\r\n\t\t\t\t\t\tformat: \"yyyy\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\tvar sYear = oDateFormat.format(sFValue);\r\n\t\t\t\t\toDateFormat = sap.ui.core.format.DateFormat.getDateInstance({\r\n\t\t\t\t\t\tformat: \"MM\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\tvar sMonth = oDateFormat.format(sFValue);\r\n\t\t\t\t\toDateFormat = sap.ui.core.format.DateFormat.getDateInstance({\r\n\t\t\t\t\t\tformat: \"dd\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\tvar sDate = oDateFormat.format(sFValue);\r\n\t\t\t\t\tsFValue = sYear + sMonth + sDate;\r\n\t\t\t\t\tbLocation = true;\r\n\r\n\t\t\t\t} else if (oEvent.getSource().getMetadata().getElementName() === \"sap.m.MultiInput\") {\r\n\t\t\t\t\tbLocation = true;\r\n\t\t\t\t\tsFValue = this._getTokensAsString(oEvent);\r\n\t\t\t\t\tsFNam = this._getFieldName(oEvent.getSource().getCustomData()[0].getValue());\r\n\t\t\t\t} else if (oEvent.getSource().getMetadata().getElementName() === \"sap.m.CheckBox\") {\r\n\t\t\t\t\tsFValue = oEvent.getSource().getSelected();\r\n\t\t\t\t\tsFNam = oEvent.getSource().getBindingInfo(\"selected\").binding.sPath;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsFNam = oEvent.getSource().getBindingInfo(\"value\").binding.sPath;\r\n\t\t\t\t\tsFValue = this.getModel().getProperty(sFNam, oEvent.getSource().getBindingContext());\r\n\r\n\t\t\t\t}\r\n\t\t\t\tvar oASUpdatePayload = {\r\n\t\t\t\t\tAction: \"UPHDR\",\r\n\t\t\t\t\tGuid: oEvent.getSource().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\t\tLockTimestamp: \"\\/Date(\" + (new Date()).getTime() + \")\\/\",\r\n\t\t\t\t\tFnam: sFNam,\r\n\t\t\t\t\tFval: sFValue,\r\n\t\t\t\t\tCode: \"\",\r\n\t\t\t\t\tPosition: this.getModel(\"appView\").getProperty(\"/position\"),\r\n\t\t\t\t\tInitiatinDept: \"\",\r\n\t\t\t\t\tDepartDesc: \"\",\r\n\t\t\t\t\tSessionGuid: jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\").SessionGuid,\r\n\t\t\t\t\tFinconcdesc: \"\",\r\n\t\t\t\t\tFinanaceconcurr: false\r\n\t\t\t\t};\r\n\t\t\t\tif (oEvent.getSource().data(\"apprField\") && (oEvent.getSource().getBindingContext().getProperty(\"Status\") === \"E0003\")) {\r\n\t\t\t\t\toASUpdatePayload.Action = \"APPR_UPDT\";\r\n\t\t\t\t}\r\n\t\t\t\t//var sUpdPath = \"/WrkASDetailsDraftSet(Guid=guid'\" + oEvent.getSource().getBindingContext().getProperty(\"Guid\") + \"'),LockTimestamp=\\/Date(\" +  ( new Date()).getTime() + \")\\/ )\";\r\n\t\t\t\tvar sUpdPath = this.getModel().createKey(\"WrkASDetailsDraftSet\", {\r\n\t\t\t\t\tGuid: oEvent.getSource().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\t\tLockTimestamp: new Date().getTime()\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (sFNam === \"GoNumber\" && !/\\d/.test(sFValue)) {\r\n\t\t\t\t\tMessageBox.warning(this.getResourceBundle().getText(\"detail.ops.panel.content.label.GoNumberVal\"), {\r\n\t\t\t\t\t\tactions: [sap.m.MessageBox.Action.YES, sap.m.MessageBox.Action.NO],\r\n\t\t\t\t\t\tonClose: function(sAction) {\r\n\t\t\t\t\t\t\tif (sAction === \"YES\") {\r\n\t\t\t\t\t\t\t\tsUpdPath = \"/\" + sUpdPath;\r\n\t\t\t\t\t\t\t\tthis.getModel().update(sUpdPath, oASUpdatePayload, {\r\n\t\t\t\t\t\t\t\t\tsuccess: function(oData, oResponse) {\r\n\t\t\t\t\t\t\t\t\t\tif (!bLocation) {\r\n\t\t\t\t\t\t\t\t\t\t\tthis.getModel().setProperty(oASUpdatePayload.Fnam, oASUpdatePayload.Fval, this.getView().getElementBinding());\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tif (!this.getView().getBindingContext().getProperty(\"Status\")) {\r\n\t\t\t\t\t\t\t\t\t\t\tthis.getView().getElementBinding().refresh();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}.bind(this),\r\n\t\t\t\t\t\t\t\t\terror: function(oError) {\r\n\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\trefreshAfterChange: false\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}.bind(this)\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsUpdPath = \"/\" + sUpdPath;\r\n\t\t\t\t\tthis.getModel().update(sUpdPath, oASUpdatePayload, {\r\n\t\t\t\t\t\tsuccess: function(oData, oResponse) {\r\n\t\t\t\t\t\t\tif (!bLocation) {\r\n\t\t\t\t\t\t\t\tthis.getModel().setProperty(oASUpdatePayload.Fnam, oASUpdatePayload.Fval, this.getView().getElementBinding());\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (!this.getView().getBindingContext().getProperty(\"Status\")) {\r\n\t\t\t\t\t\t\t\tthis.getView().getElementBinding().refresh();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}.bind(this),\r\n\t\t\t\t\t\terror: function(oError) {\r\n\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\trefreshAfterChange: false\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Select key after suggestionItems are loaded\r\n\t\t * @param {sap.ui.base.event} oEvent Loading data recieved for the Suggestions fields.\r\n\t\t */\r\n\t\tonSuggestDataReceived: function(oEvent) {\r\n\t\t\tvar oSource = oEvent.getSource(),\r\n\t\t\t\toContext = oSource.getContext(),\r\n\t\t\t\toInputSource;\r\n\t\t\t//Checking if it is Ddo or Hoa\r\n\t\t\tif (oContext && oContext.getPath().includes(\"WrkHOASet\")) {\r\n\t\t\t\tvar aItems = this.byId(\"idWorksHoA\").getItems();\r\n\t\t\t\tfor (var i = 0; i < aItems.length; i++) {\r\n\t\t\t\t\tif (aItems[i].getBindingContextPath() === oContext.getPath()) {\r\n\t\t\t\t\t\tvar aCells = aItems[i].getCells();\r\n\t\t\t\t\t\tfor (var j = 0; j < aCells.length; j++) {\r\n\t\t\t\t\t\t\tif (aCells[j].getId().indexOf(\"Hoa\") !== -1) {\r\n\t\t\t\t\t\t\t\toInputSource = aCells[j];\r\n\t\t\t\t\t\t\t\tthis._callingBindingParams(oInputSource);\r\n\t\t\t\t\t\t\t} else if (aCells[j].getId().indexOf(\"Ddo\") !== -1) {\r\n\t\t\t\t\t\t\t\toInputSource = aCells[j];\r\n\t\t\t\t\t\t\t\tthis._callingBindingParams(oInputSource);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//Checking for other value help fields\r\n\t\t\t} else {\r\n\t\t\t\tvar aReferences = oSource._getEntityType().key.propertyRef,\r\n\t\t\t\t\tsProperty = aReferences[aReferences.length - 1].name,\r\n\t\t\t\t\tsId = this.getModel(\"detailView\").getProperty(\"/propertyIdMapping/\" + sProperty);\r\n\t\t\t\toInputSource = this.byId(sId);\r\n\t\t\t\tthis._callingBindingParams(oInputSource);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event Handler for changes made in selection\r\n\t\t * @param {Event} oEvent Change made in Selection fields\r\n\t\t */\r\n\t\tonSelectChange: function(oEvent) {\r\n\t\t\tvar sFValue = \"\",\r\n\t\t\t\tsKey = oEvent.getSource().data(\"clearKey\");\r\n\t\t\tif (sKey) {\r\n\t\t\t\tvar oParams = {\r\n\t\t\t\t\tsProperty: sKey\r\n\t\t\t\t};\r\n\t\t\t\tthis._clearDependentField(oParams);\r\n\t\t\t}\r\n\t\t\tif (oEvent.getSource().getMetadata().getElementName() === \"sap.m.DatePicker\") {\r\n\t\t\t\tsFValue = sap.ui.model.odata.ODataUtils.formatValue(oEvent.getSource().getDateValue(), \"Edm.DateTime\");\r\n\t\t\t} else {\r\n\t\t\t\tsFValue = oEvent.getSource().getSelectedKey();\r\n\t\t\t}\r\n\t\t\tif (sFValue || !oEvent.getSource().getValue()) {\r\n\t\t\t\toEvent.getSource().setValueState();\r\n\t\t\t\tif (this.getModel(\"oControlModel\")) {\r\n\t\t\t\t\tthis.getModel(\"oControlModel\").setProperty(\"/\" + oEvent.getSource().getCustomData()[0].getProperty(\"value\") + \"/\" + \"/valueState\",\r\n\t\t\t\t\t\t\"None\");\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\t\t\t\toEvent.getSource().setValueState(\"Error\");\r\n\t\t\t}\r\n\t\t\tif (oEvent.getSource().getCustomData()[0].getProperty(\"value\") === \"Category\") {\r\n\t\t\t\tvar oDetailViewModel = this.getModel(\"detailView\");\r\n\t\t\t\tif (sFValue === \"02\") {\r\n\t\t\t\t\toDetailViewModel.setProperty(\"/bUAVisible\", true);\r\n\t\t\t\t\toDetailViewModel.setProperty(\"/bOwnDCW\", true);\r\n\t\t\t\t} else {\r\n\t\t\t\t\toDetailViewModel.setProperty(\"/bUAVisible\", false);\r\n\t\t\t\t\toDetailViewModel.setProperty(\"/bOwnDCW\", false);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.bRefreshDDoTable = true;\r\n\t\t\t\tthis._identifyHoaDdoFilters();\r\n\t\t\t\tthis._setHoaDdoFilters();\r\n\t\t\t}\r\n\t\t\t//DCW type changes\r\n\t\t\tif (oEvent.getSource().getCustomData()[0].getProperty(\"value\") === \"DcwType\") {\r\n\t\t\t\tvar oDetailViewModel = this.getModel(\"detailView\");\r\n\t\t\t\tif (sFValue === \"01\") {\r\n\t\t\t\t\toDetailViewModel.setProperty(\"/bOwnDCW\", true);\r\n\t\t\t\t\tthis.getModel(\"oControlModel\").setProperty(\"/SourceDdo/mandatory\",\r\n\t\t\t\t\t\tfalse);\r\n\t\t\t\t\tthis.getModel(\"oControlModel\").setProperty(\"/SourceHoa/mandatory\",\r\n\t\t\t\t\t\tfalse);\r\n\t\t\t\t\tthis.getModel(\"oControlModel\").setProperty(\"/SourceDdo/valueState\", \"None\");\r\n\t\t\t\t\tthis.getModel(\"oControlModel\").setProperty(\"/SourceHoa/valueState\", \"None\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\toDetailViewModel.setProperty(\"/bOwnDCW\", false);\r\n\t\t\t\t\tthis.getModel(\"oControlModel\").setProperty(\"/SourceDdo/mandatory\",\r\n\t\t\t\t\t\ttrue);\r\n\t\t\t\t\tthis.getModel(\"oControlModel\").setProperty(\"/SourceHoa/mandatory\",\r\n\t\t\t\t\t\ttrue);\r\n\t\t\t\t\tthis.getModel(\"oControlModel\").setProperty(\"/SourceDdo/valueState\", \"Error\");\r\n\t\t\t\t\tthis.getModel(\"oControlModel\").setProperty(\"/SourceHoa/valueState\", \"Error\");\r\n\t\t\t\t}\r\n\t\t\t\toDetailViewModel.updateBindings();\r\n\t\t\t\tthis.bRefreshDDoTable = true;\r\n\t\t\t\t// this.byId(\"idWorksSrcHoA\").getBinding(\"items\").refresh(true);\r\n\t\t\t\t// this.byId(\"idWorksHoA\").getBinding(\"items\").refresh(true);\r\n\t\t\t\tthis._identifyHoaDdoFilters();\r\n\t\t\t\tthis._setHoaDdoFilters();\r\n\t\t\t}\r\n\t\t\tvar oASUpdatePayload = {\r\n\t\t\t\tAction: \"UPHDR\",\r\n\t\t\t\tGuid: oEvent.getSource().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\tLockTimestamp: \"\\/Date(\" + (new Date()).getTime() + \")\\/\",\r\n\t\t\t\tFnam: oEvent.getSource().getCustomData()[0].getProperty(\"value\"),\r\n\t\t\t\tFval: sFValue,\r\n\t\t\t\tCode: \"\",\r\n\t\t\t\tPosition: this.getModel(\"appView\").getProperty(\"/position\"),\r\n\t\t\t\tInitiatinDept: \"\",\r\n\t\t\t\tDepartDesc: \"\",\r\n\t\t\t\tSessionGuid: jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\").SessionGuid\r\n\t\t\t};\r\n\t\t\tif (oEvent.getSource().data(\"apprField\") && (oEvent.getSource().getBindingContext().getProperty(\"Status\") === \"E0003\")) {\r\n\t\t\t\toASUpdatePayload.Action = \"APPR_UPDT\";\r\n\t\t\t}\r\n\t\t\tif (oEvent.getSource().getCustomData() && oEvent.getSource().getCustomData()[0].getValue() === \"Scheme\" && (oEvent.getSource().getBindingContext()\r\n\t\t\t\t\t.getProperty(\"Status\") === \"E0003\")) {\r\n\t\t\t\toASUpdatePayload.Action = \"APPR_UPDT\";\r\n\t\t\t}\r\n\t\t\t//var sUpdPath = \"/WrkASDetailsDraftSet(Guid=guid'\" + oEvent.getSource().getBindingContext().getProperty(\"Guid\") + \"'),LockTimestamp=\\/Date(\" +  ( new Date()).getTime() + \")\\/ )\";\r\n\t\t\tvar sUpdPath = this.getModel().createKey(\"WrkASDetailsDraftSet\", {\r\n\t\t\t\tGuid: oEvent.getSource().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\tLockTimestamp: new Date().getTime()\r\n\t\t\t});\r\n\t\t\t//Prashil Add Code to attach suggest items to DDO\r\n\r\n\t\t\tsUpdPath = \"/\" + sUpdPath;\r\n\t\t\tthis.getModel().update(sUpdPath, oASUpdatePayload, {\r\n\t\t\t\tsuccess: function(oData, oResponse) {\r\n\t\t\t\t\tthis.getModel().setProperty(oASUpdatePayload.Fnam, oASUpdatePayload.Fval, this.getView().getElementBinding());\r\n\t\t\t\t\tif (this.bRefreshDDoTable) {\r\n\t\t\t\t\t\tthis.byId(\"idWorksSrcHoA\").getBinding(\"items\").refresh(true);\r\n\t\t\t\t\t\tthis.byId(\"idWorksHoA\").getBinding(\"items\").refresh(true);\r\n\t\t\t\t\t\tthis.byId(\"idBudgetCtrl\").setValue(\"\");\r\n\t\t\t\t\t\tthis.byId(\"idBudgetCtrl\").fireChange();\r\n\t\t\t\t\t\tthis.bRefreshDDoTable = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}.bind(this),\r\n\t\t\t\terror: function(oError) {\r\n\r\n\t\t\t\t},\r\n\t\t\t\trefreshAfterChange: false\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tonSelectChangeDetailWork: function(oEvent) {\r\n\t\t\tvar sFValue = \"\",\r\n\t\t\t\tsKey = oEvent.getSource().data(\"clearKey\");\r\n\t\t\tif (sKey) {\r\n\t\t\t\tvar oParams = {\r\n\t\t\t\t\tsProperty: sKey\r\n\t\t\t\t};\r\n\t\t\t\t//\t\tthis._clearDependentFieldDetailWork(oParams);\r\n\t\t\t}\r\n\r\n\t\t\tsFValue = oEvent.getSource().getSelectedKey();\r\n\r\n\t\t\tif (sFValue || !oEvent.getSource().getValue()) {\r\n\t\t\t\toEvent.getSource().setValueState();\r\n\t\t\t\tif (this.getModel(\"oControlModel\")) {\r\n\t\t\t\t\tthis.getModel(\"oControlModel\").setProperty(\"/\" + oEvent.getSource().getCustomData()[0].getProperty(\"value\") + \"/\" + \"/valueState\",\r\n\t\t\t\t\t\t\"None\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar oASUpdatePayload = {\r\n\t\t\t\tAction: \"UPHDR\",\r\n\t\t\t\tGuid: oEvent.getSource().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\tLockTimestamp: \"\\/Date(\" + (new Date()).getTime() + \")\\/\",\r\n\t\t\t\tFnam: oEvent.getSource().getCustomData()[0].getProperty(\"value\"),\r\n\t\t\t\tFval: sFValue,\r\n\t\t\t\tCode: \"\",\r\n\t\t\t\tPosition: this.getModel(\"appView\").getProperty(\"/position\"),\r\n\t\t\t\tInitiatinDept: \"\",\r\n\t\t\t\tDepartDesc: \"\",\r\n\t\t\t\tSessionGuid: jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\").SessionGuid\r\n\t\t\t};\r\n\t\t\tif (oEvent.getSource().data(\"apprField\") && (oEvent.getSource().getBindingContext().getProperty(\"Status\") === \"E0003\")) {\r\n\t\t\t\toASUpdatePayload.Action = \"APPR_UPDT\";\r\n\t\t\t}\r\n\t\t\tif (oEvent.getSource().getCustomData() && oEvent.getSource().getCustomData()[0].getValue() === \"Scheme\" && (oEvent.getSource().getBindingContext()\r\n\t\t\t\t\t.getProperty(\"Status\") === \"E0003\")) {\r\n\t\t\t\toASUpdatePayload.Action = \"APPR_UPDT\";\r\n\t\t\t}\r\n\t\t\t//var sUpdPath = \"/WrkASDetailsDraftSet(Guid=guid'\" + oEvent.getSource().getBindingContext().getProperty(\"Guid\") + \"'),LockTimestamp=\\/Date(\" +  ( new Date()).getTime() + \")\\/ )\";\r\n\t\t\tvar sUpdPath = this.getModel().createKey(\"WrkASDetailsDraftSet\", {\r\n\t\t\t\tGuid: oEvent.getSource().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\tLockTimestamp: new Date().getTime()\r\n\t\t\t});\r\n\t\t\t//Prashil Add Code to attach suggest items to DDO\r\n\r\n\t\t\tsUpdPath = \"/\" + sUpdPath;\r\n\t\t\tthis.getModel().update(sUpdPath, oASUpdatePayload, {\r\n\t\t\t\tsuccess: function(oData, oResponse) {\r\n\t\t\t\t\t//\tthis.getModel().setProperty(oASUpdatePayload.Fnam, oASUpdatePayload.Fval, this.getView().getElementBinding());\r\n\r\n\t\t\t\t}.bind(this),\r\n\t\t\t\terror: function(oError) {\r\n\r\n\t\t\t\t},\r\n\t\t\t\trefreshAfterChange: false\r\n\t\t\t});\r\n\r\n\t\t},\r\n\r\n\t\t_clearDependentFieldDetailWork: function(oParams) {\r\n\t\t\tvar aFieldId = [];\r\n\t\t\tif (oParams.sProperty === \"MAIN_WORK\") {\r\n\t\t\t\taFieldId = [\"idSubClass01\", \"idSubClass02\", \"idSubClass03\"];\r\n\t\t\t} else if (oParams.sProperty === \"sub_work_01\") {\r\n\t\t\t\taFieldId = [\"idSubClass02\", \"idSubClass03\"];\r\n\t\t\t} else if (oParams.sProperty === \"sub_work_02\") {\r\n\t\t\t\taFieldId = [\"idSubClass03\"];\r\n\t\t\t}\r\n\t\t\tthis._clearField(aFieldId);\r\n\t\t},\r\n\r\n\t\t_clearField: function(aFieldId) {\r\n\t\t\tfor (var i = 0; i < aFieldId.length; i++) {\r\n\t\t\t\tvar oControl = this.byId(aFieldId[i]);\r\n\t\t\t\toControl.setSelectedKey(\"\");\r\n\t\t\t\toControl.setValueState();\r\n\t\t\t\tif (oControl.getMetadata().getElementName() === \"sap.m.Input\") {\r\n\t\t\t\t\toControl.setValue(\"\");\r\n\t\t\t\t\tvar sFname;\r\n\t\t\t\t\tswitch (aFieldId[i]) {\r\n\t\t\t\t\t\tcase \"idSubClass01\":\r\n\t\t\t\t\t\t\tsFname = \"SubclassL01\";\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"idSubClass02\":\r\n\t\t\t\t\t\t\tsFname = \"SubclassL02\";\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"idSubClass03\":\r\n\t\t\t\t\t\t\tsFname = \"SubclassL03\";\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar oASUpdatePayload = {\r\n\t\t\t\t\t\tAction: \"UPHDR\",\r\n\t\t\t\t\t\tGuid: this.getView().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\t\t\tLockTimestamp: \"\\/Date(\" + (new Date()).getTime() + \")\\/\",\r\n\t\t\t\t\t\tFnam: sFname,\r\n\t\t\t\t\t\tFval: \"\",\r\n\t\t\t\t\t\tCode: \"\",\r\n\t\t\t\t\t\tPosition: this.getModel(\"appView\").getProperty(\"/position\"),\r\n\t\t\t\t\t\tInitiatinDept: \"\",\r\n\t\t\t\t\t\tDepartDesc: \"\",\r\n\t\t\t\t\t\tSessionGuid: jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\").SessionGuid\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tvar sUpdPath = this.getModel().createKey(\"WrkASDetailsDraftSet\", {\r\n\t\t\t\t\t\tGuid: this.getView().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\t\t\tLockTimestamp: new Date().getTime()\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsUpdPath = \"/\" + sUpdPath;\r\n\t\t\t\t\tthis.getModel().update(sUpdPath, oASUpdatePayload, {\r\n\t\t\t\t\t\tsuccess: function(oData, oResponse) {\r\n\t\t\t\t\t\t\tthis.getModel().setProperty(oASUpdatePayload.Fnam, oASUpdatePayload.Fval, this.getView().getElementBinding());\r\n\t\t\t\t\t\t\t//\tthis.getView().getElementBinding().refresh();\r\n\t\t\t\t\t\t}.bind(this),\r\n\t\t\t\t\t\terror: function(oError) {\r\n\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\trefreshAfterChange: false\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Event Handler for clicking on Cancel button in Detail View\r\n\t\t * @param {sap.ui.base.Event} oEvent Pressing cancel in view\r\n\t\t */\r\n\t\tonCancelPress: function(oEvent) {\r\n\t\t\tvar that = this;\r\n\t\t\tvar oParams = {\r\n\t\t\t\tMessage: \"detail.messageBox.cancel\",\r\n\t\t\t\taction: \"DFT_CNCL\",\r\n\t\t\t\tevent: oEvent\r\n\t\t\t};\r\n\t\t\tthis._onActionConfirm(this._cancelPost.bind(this), oParams);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for additional note\r\n\t\t * @param {*} oEvent \r\n\t\t */\r\n\t\tonCancelAdditionalNoteReference: function(oEvent) {\r\n\t\t\tthis._addNoteFragReference.close();\r\n\t\t},\r\n\t\tonCancelAdditionalNote: function(oEvent) {\r\n\t\t\tthis._addNoteFrag.close();\r\n\t\t},\r\n\t\t/**\r\n\t\t * \r\n\t\t * @param {*} param \r\n\t\t */\r\n\t\t_cancelPost: function(param) {\r\n\t\t\tvar that = this;\r\n\t\t\tthis.getModel().callFunction(\"/WrkLockEdit\", {\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t\turlParameters: {\r\n\t\t\t\t\tLockTimeStamp: new Date().getTime(),\r\n\t\t\t\t\tAction: param.action,\r\n\t\t\t\t\tGuid: this.getView().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\t\tApplication: \"AS\",\r\n\t\t\t\t\tSessionGuid: sap.ui.getCore().getModel(\"ZWRKGlobalModel\").getProperty(\"/AS/SessionGuid\")\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function(oResponse, oTe) {\r\n\t\t\t\t\tthat._notAllowEditOnDocument();\r\n\t\t\t\t\tthat._changeFullScreenMode(false, \"detail\", \"MasterPage\", \"asIdBtnScreenToggle\");\r\n\t\t\t\t\tsap.ushell.Container.setDirtyFlag(false);\r\n\t\t\t\t\tthat.getRouter().navTo(\"default\", {}, true);\r\n\t\t\t\t\tthat.getModel().refresh();\r\n\t\t\t\t},\r\n\t\t\t\terror: function(oError) {\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event Handler for clicking on Submit button in Detail View\r\n\t\t * @param {sap.ui.base.Event} oEvent Pressing submit in view\r\n\t\t */\r\n\t\tonSubmitPress: function(oEvent) {\r\n\t\t\t$.sap.ASNUMBER = undefined;\r\n\t\t\tthis.updateControlModel(\"oControlModel\");\r\n\t\t\tvar bMandatoryCheck = this._mandatoryFieldCheckOnSave(\"oControlModel\"),\r\n\t\t\t\tbValidated = this._validateBeforeSave(\"oControlModel\"),\r\n\t\t\t\tbIsAmendDoc = parseInt(this.getView().getBindingContext().getProperty(\"Version\")) > 0 ? true : false,\r\n\t\t\t\tbCheckListValidation = this._handleCheckListValidate(\"idChecklistTable\", bIsAmendDoc);\r\n\t\t\tif (bMandatoryCheck && bValidated && bCheckListValidation) {\r\n\t\t\t\tvar oParams = {\r\n\t\t\t\t\tMessage: \"detail.messageBox.submit\",\r\n\t\t\t\t\taction: \"SUBMIT\",\r\n\t\t\t\t\tevent: oEvent\r\n\t\t\t\t};\r\n\t\t\t\tif (this._checkNote()) {\r\n\t\t\t\t\tvar backendValidationCheck = new Promise(function(resolve, reject) {\r\n\t\t\t\t\t\tthis.checkBackendValidation(resolve, reject);\r\n\t\t\t\t\t}.bind(this));\r\n\r\n\t\t\t\t\tbackendValidationCheck.then(function() {\r\n\t\t\t\t\t\tthis._onActionConfirm(this._postAS.bind(this), oParams);\r\n\t\t\t\t\t}.bind(this));\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\t\t\t\tif (bCheckListValidation) {\r\n\t\t\t\t\tthis.getModel(\"oControlModel\").updateBindings();\r\n\t\t\t\t\tthis._displayWarnMessge(this.getModel(\"i18n\").getResourceBundle().getText(\"detail.message.error.mandatoryField\"));\r\n\t\t\t\t\tthis.byId(\"idCode\").applyFocusInfo(true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event Handler for clicking on Next Level button in Detail View\r\n\t\t * @param {sap.ui.base.Event} oEvent Pressing Next Level in view\r\n\t\t */\r\n\t\tonNextLevelPress: function(oEvent) {\r\n\t\t\tvar oParams = {\r\n\t\t\t\tMessage: \"detail.messageBox.next\",\r\n\t\t\t\taction: \"NEXT\",\r\n\t\t\t\tevent: oEvent\r\n\t\t\t};\r\n\t\t\tif (this._checkNote()) {\r\n\t\t\t\tvar backendValidationCheck = new Promise(function(resolve, reject) {\r\n\t\t\t\t\tthis.checkBackendValidation(resolve, reject);\r\n\t\t\t\t}.bind(this));\r\n\r\n\t\t\t\tbackendValidationCheck.then(function() {\r\n\t\t\t\t\tthis._onActionConfirm(this._postAS.bind(this), oParams);\r\n\t\t\t\t}.bind(this));\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Event Handler for clicking on Return button in Detail View\r\n\t\t * @param {sap.ui.base.Event} oEvent Pressing return in view\r\n\t\t */\r\n\t\tonReturnPress: function(oEvent) {\r\n\t\t\tvar oParams = {\r\n\t\t\t\tMessage: \"detail.messageBox.return\",\r\n\t\t\t\taction: \"RETURN\",\r\n\t\t\t\tevent: oEvent\r\n\t\t\t};\r\n\t\t\tif (this._checkNote()) {\r\n\t\t\t\tthis._onActionConfirm(this._postAS.bind(this), oParams);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Event Handler for clicking on Approve button in Detail View\r\n\t\t * @param {sap.ui.base.Event} oEvent Pressing approve in view\r\n\t\t */\r\n\t\tonApprovePress: function(oEvent) {\r\n\t\t\tthis.updateControlModel(\"oControlModel\");\r\n\t\t\tvar bMandatoryCheck = this._mandatoryFieldCheckOnSave(\"oControlModel\"),\r\n\t\t\t\tbValidated = this._validateBeforeSave(\"oControlModel\"),\r\n\t\t\t\tbApprovalMandatoryCheck = this._checkSecrataryMand();\r\n\t\t\tif (bApprovalMandatoryCheck && bMandatoryCheck && bValidated) {\r\n\t\t\t\tvar oParams = {\r\n\t\t\t\t\tMessage: \"detail.messageBox.approve\",\r\n\t\t\t\t\taction: \"APPROVE\",\r\n\t\t\t\t\tevent: oEvent\r\n\t\t\t\t};\r\n\t\t\t\tif (this._checkNote()) {\r\n\t\t\t\t\tthis._onActionConfirm(this._postAS.bind(this), oParams);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.getModel(\"oControlModel\").updateBindings();\r\n\t\t\t\tthis._displayWarnMessge(this.getModel(\"i18n\").getResourceBundle().getText(\"detail.message.error.mandatoryField\"));\r\n\t\t\t\tthis.byId(\"idCode\").applyFocusInfo(true);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Event Handler for clicking on On Hold button in Detail View\r\n\t\t * @param {sap.ui.base.Event} oEvent Pressing withhold in view\r\n\t\t */\r\n\t\tonWithheldPress: function(oEvent) {\r\n\t\t\tvar oParams = {\r\n\t\t\t\tMessage: \"detail.messageBox.withHeld\",\r\n\t\t\t\taction: \"WITHHELD\",\r\n\t\t\t\tevent: oEvent\r\n\t\t\t};\r\n\t\t\t//this._onActionConfirm(this._postAS.bind(this), oParams);\r\n\t\t\tif (this._checkNote()) {\r\n\t\t\t\tthis._onActionConfirm(this._postAS.bind(this), oParams);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for Add new Estimation\r\n\t\t * @param {sap.ui.base.Event} oEvent Adding new estimate\r\n\t\t */\r\n\t\t/*onAddNewEstimation: function(oEvent){\r\n\t\t\tvar oBindingContext = this.getView().getBindingContext(),\r\n\t\t\t\toCrossAppNavigator = sap.ushell.Container.getService(\"CrossApplicationNavigation\");\r\n\t\t\tvar hash = (oCrossAppNavigator && oCrossAppNavigator.hrefForExternal({\r\n\t\t\t\ttarget:{\r\n\t\t\t\t\tsemanticObject: \"ZWorks\",\r\n\t\t\t\t\taction: \"estimation\"\r\n\t\t\t\t},\r\n\t\t\t\tparams:{\r\n\t\t\t\t\trefGuid: oBindingContext.getProperty(\"Guid\"),\r\n\t\t\t\t\trefType : \"ZWAS\",\r\n\t\t\t\t\tRefNo : oBindingContext.getProperty(\"Code\"),\r\n\t\t\t\t\tappState: this.getModel(\"detailView\").getProperty(\"/stateId\")\r\n\t\t\t\t}\r\n\t\t\t})) || \"\";\r\n\t\t\toCrossAppNavigator.toExternal({\r\n\t\t\t\ttarget: {\r\n\t\t\t\t\tshellHash: hash\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},*/\r\n\r\n\t\tonAddNewEstimation: function(oEvent) {\r\n\t\t\tvar oBindingContext = this.getView().getBindingContext();\r\n\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/EST/bAddNewEST\", true);\r\n\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bUserCreateAS\", true);\r\n\t\t\tsap.ushell.Container.setDirtyFlag(false);\r\n\t\t\tthis.getOwnerComponent().getModel().read(\"/WrkMigCheckSet(Code='\" + oBindingContext.getProperty(\"Code\") + \"',AppType='ZWAS')\", {\r\n\t\t\t\t// filters: aFilters,\r\n\t\t\t\tsuccess: function(oData) {\r\n\t\t\t\t\tvar oCrossAppNavigator = sap.ushell.Container.getService(\"CrossApplicationNavigation\");\r\n\t\t\t\t\tvar hash = (oCrossAppNavigator && oCrossAppNavigator.hrefForExternal({\r\n\t\t\t\t\t\ttarget: {\r\n\t\t\t\t\t\t\tsemanticObject: \"ZWorks\",\r\n\t\t\t\t\t\t\taction: \"estimation\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\trefGuid: oBindingContext.getProperty(\"Guid\"),\r\n\t\t\t\t\t\t\trefType: \"ZWAS\",\r\n\t\t\t\t\t\t\tRefNo: oBindingContext.getProperty(\"Code\"),\r\n\t\t\t\t\t\t\tappState: this.getModel(\"detailView\").getProperty(\"/stateId\"),\r\n\t\t\t\t\t\t\tmigInd: oData.Migrated\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})) || \"\";\r\n\t\t\t\t\tvar sNoteText = this.getModel(\"detailView\").getProperty('/Notingstring');\r\n\t\t\t\t\tif (!sNoteText) {\r\n\t\t\t\t\t\tthis._navToEst(hash);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar sMsgText = this.getModel(\"i18n\").getResourceBundle().getText('detail.message.warning.notetextlost');\r\n\t\t\t\t\t\tMessageBox.confirm(sMsgText, {\r\n\t\t\t\t\t\t\tonClose: function(oAction) {\r\n\t\t\t\t\t\t\t\tif (oAction === MessageBox.Action.OK) {\r\n\t\t\t\t\t\t\t\t\tthis._navToEst(hash);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}.bind(this)\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// oCrossAppNavigator.toExternal({\r\n\t\t\t\t\t// \ttarget: {\r\n\t\t\t\t\t// \t\tshellHash: hash\r\n\t\t\t\t\t// \t}\r\n\t\t\t\t\t// });\r\n\t\t\t\t}.bind(this),\r\n\t\t\t\terror: function(oData) {\r\n\r\n\t\t\t\t}.bind(this)\r\n\t\t\t});\r\n\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for Link press\r\n\t\t * @param {*} oEvent \r\n\t\t */\r\n\t\tonEstItemPress: function(oEvent) {\r\n\r\n\t\t\tif (this.getModel(\"detailView\").getProperty(\"/bEditable\")) {\r\n\t\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bUserCreateAS\", true);\r\n\t\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/EST/parentEdit\", true);\r\n\t\t\t} else {\r\n\t\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/EST/parentEdit\", false);\r\n\t\t\t}\r\n\t\t\tsap.ushell.Container.setDirtyFlag(false);\r\n\t\t\tvar sNoteText = this.getModel(\"detailView\").getProperty('/Notingstring'),\r\n\t\t\t\tsEstGuid = oEvent.getSource().getBindingContext().getObject(\"EstGuid\"),\r\n\t\t\t\toCrossAppNavigator = sap.ushell.Container.getService(\"CrossApplicationNavigation\");\r\n\t\t\tvar sHash = oCrossAppNavigator.hrefForExternal({\r\n\t\t\t\ttarget: {\r\n\t\t\t\t\tshellHash: \"ZWorks-estimation&/Detail/\" + sEstGuid + \"/D/ZDE/xapp\"\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif (!sNoteText) {\r\n\t\t\t\tthis._navToEst(sHash);\r\n\t\t\t} else {\r\n\t\t\t\tvar sMsgText = this.getModel(\"i18n\").getResourceBundle().getText(\"detail.message.warning.notetextlost\");\r\n\t\t\t\tMessageBox.confirm(sMsgText, {\r\n\t\t\t\t\tonClose: function(oAction) {\r\n\t\t\t\t\t\tif (oAction === MessageBox.Action.OK) {\r\n\t\t\t\t\t\t\tthis._navToEst(sHash);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}.bind(this)\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Private function to navigate hash\r\n\t\t * @param {string} sHash hash string\r\n\t\t */\r\n\t\t_navToEst: function(sHash) {\r\n\t\t\tvar oCrossAppNavigator = sap.ushell.Container.getService(\"CrossApplicationNavigation\");\r\n\t\t\toCrossAppNavigator.toExternal({\r\n\t\t\t\ttarget: {\r\n\t\t\t\t\tshellHash: sHash\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event Handler for deletions performed to the DDO table\r\n\t\t * @param {sap.ui.base.Event} oEvent Delete press on estimate\r\n\t\t */\r\n\t\tonDeleteEstimate: function(oEvent) {\r\n\t\t\tvar oParams = {\r\n\t\t\t\tMessage: \"detail.messageBox.delete\",\r\n\t\t\t\tsource: oEvent.getSource(),\r\n\t\t\t\taction: \"DEL_ESTMT\",\r\n\t\t\t\tguid: oEvent.getSource().getBindingContext().getObject().EstGuid\r\n\t\t\t};\r\n\t\t\tthis._onActionConfirm(this._onDeleteConfirmation.bind(this), oParams);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for pressing on Edit\r\n\t\t * @param {Event} oEvent Button press for edit mode.\r\n\t\t */\r\n\t\tonEditPress: function(oEvent) {\r\n\t\t\tvar that = this;\r\n\t\t\tvar AsNumber = that.getView().byId(\"idCode\").getValue();\r\n\t\t\tthat._getMigCheckSet();\r\n\t\t\tvar oBtn = this.getView().byId(\"asIdBtnScreenToggle\");\r\n\t\t\tthis.getModel().callFunction(\"/WrkLockEdit\", {\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t\turlParameters: {\r\n\t\t\t\t\tLockTimeStamp: new Date().getTime(),\r\n\t\t\t\t\tAction: \"LOCKCHK\",\r\n\t\t\t\t\tGuid: that.getView().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\t\tApplication: \"AS\",\r\n\t\t\t\t\tSessionGuid: jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\").SessionGuid\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function(oResponse, oTe) {\r\n\t\t\t\t\t//Updating sessionguid in browser storage data\r\n\t\t\t\t\tif (oResponse.SessionGuid) {\r\n\t\t\t\t\t\tvar oParamsBrowserStorage = jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\");\r\n\t\t\t\t\t\toParamsBrowserStorage.SessionGuid = oResponse.SessionGuid;\r\n\t\t\t\t\t\tjQuery.sap.storage(jQuery.sap.storage.Type.session).put(\"zworksBrowserStorage\", oParamsBrowserStorage);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/SessionGuid\", oResponse.SessionGuid);\r\n\t\t\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bUserCreateAS\", true);\r\n\t\t\t\t\tthat._changeFullScreenMode(true, \"detail\", \"MasterPage\", \"asIdBtnScreenToggle\");\r\n\t\t\t\t\t//\t\t\t\t\toBtn.firePress();\r\n\t\t\t\t\tthat._navToDetail.bind(that)(\"E\");\r\n\t\t\t\t\t//\t\t\t\t\tthat._allowEditOnDocument();\r\n\t\t\t\t},\r\n\t\t\t\terror: function(oError) {\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler function for display button\r\n\t\t * @param {Event} oEvent Button press for display mode.\r\n\t\t */\r\n\t\tonDisplayPress: function(oEvent) {\r\n\t\t\tvar that = this;\r\n\t\t\tvar oBtn = this.getView().byId(\"asIdBtnScreenToggle\");\r\n\t\t\tthis.getModel().callFunction(\"/WrkLockEdit\", {\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t\turlParameters: {\r\n\t\t\t\t\tLockTimeStamp: new Date().getTime(),\r\n\t\t\t\t\tAction: \"LOCKDEL\",\r\n\t\t\t\t\tGuid: oEvent.getSource().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\t\tApplication: \"AS\",\r\n\t\t\t\t\tSessionGuid: sap.ui.getCore().getModel(\"ZWRKGlobalModel\").getProperty(\"/AS/SessionGuid\")\r\n\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function(oResponse, oTe) {\r\n\t\t\t\t\t//\t\t\t\t\toBtn.firePress();\r\n\t\t\t\t\tsap.ushell.Container.setDirtyFlag(false);\r\n\t\t\t\t\tthat._changeFullScreenMode(false, \"detail\", \"MasterPage\", \"asIdBtnScreenToggle\");\r\n\t\t\t\t\tthat._notAllowEditOnDocument();\r\n\t\t\t\t\tthat._navToDetail.bind(that)(\"D\");\r\n\r\n\t\t\t\t},\r\n\t\t\t\terror: function(oError) {\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * Private function to bind \r\n\t\t * @param {*} oEvent \r\n\t\t */\r\n\t\t_updatePositionBinding: function() {\r\n\t\t\tvar oPositon = this.byId(\"idPosition\"),\r\n\t\t\t\toFilter = new Filter(\"SUBPROCESS_AREA\", FilterOperator.EQ, \"AS\"),\r\n\t\t\t\taCreatedBy = this.getView().getBindingContext().getProperty(\"UserIdCr\");\r\n\t\t\tif (!this.oPosItemTemp) {\r\n\t\t\t\tthis.oPosItemTemp = new sap.ui.core.Item({\r\n\t\t\t\t\ttext: \"{STEXT}\",\r\n\t\t\t\t\tkey: \"{position}\"\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\toPositon.bindAggregation(\"items\", {\r\n\t\t\t\tpath: \"/ZWRK_C_USER_POSITIONS(p_user='\" + aCreatedBy + \"')/Set\",\r\n\t\t\t\tfilters: [oFilter],\r\n\t\t\t\ttemplate: this.oPosItemTemp\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for Clicking on the details display for location \r\n\t\t * @param {Event} oEvent Button press on Location Details\r\n\t\t */\r\n\t\thandleLocationListDisplay: function(oEvent) {\r\n\t\t\tvar oLocationModel = this.getModel(\"location\");\r\n\t\t\tif (oLocationModel.getProperty(\"/vDistrict\")) {\r\n\t\t\t\tthis.handleDistrictListDisplay();\r\n\t\t\t} else if (oLocationModel.getProperty(\"/vMandal\")) {\r\n\t\t\t\tthis.handleMandalListDisplay();\r\n\t\t\t} else if (oLocationModel.getProperty(\"/vVillage\")) {\r\n\t\t\t\tthis.handleVillageListDisplay();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Function to handle live change on control\r\n\t\t * @param {sap.ui.base.Event} oEvent Live changes on fields\r\n\t\t */\r\n\t\thandleLiveChange: function(oEvent) {\r\n\t\t\tif (this.oSelectedObject) {\r\n\t\t\t\tthis.oSelectedObject = null;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for Clicking on the details display for constituency \r\n\t\t * @param {Event} oEvent Button press on Constituency Details\r\n\t\t */\r\n\t\thandleConstListDisplay: function(oEvent) {\r\n\t\t\tvar sCustomData = oEvent.getSource().getCustomData()[0].getValue();\r\n\t\t\t//var oLocationModel = this.getModel(\"location\");\r\n\t\t\tif (sCustomData === this.getModel(\"i18n\").getResourceBundle().getText(\"detail.ops.panel.content.label.assembly\")) {\r\n\t\t\t\tthis.handleAssemblyListDisplay();\r\n\t\t\t} else {\r\n\t\t\t\tthis.onLoksabhaListClick();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler function for Radio button select, set enabled/desabled input field\r\n\t\t * @param {Event} oEvent Selection of radio button\r\n\t\t */\r\n\t\tonRadioSelect: function(oEvent) {\r\n\t\t\tvar sLocationRBtn = oEvent.getSource().getCustomData()[0].getValue();\r\n\t\t\tswitch (sLocationRBtn) {\r\n\t\t\t\tcase \"district\":\r\n\t\t\t\t\tthis._setPropertyValue(\"location\", [\"vDistrict\"], true);\r\n\t\t\t\t\tthis._setPropertyValue(\"location\", [\"vMandal\", \"vVillage\"], false);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"mandal\":\r\n\t\t\t\t\tthis._setPropertyValue(\"location\", [\"vMandal\"], true);\r\n\t\t\t\t\tthis._setPropertyValue(\"location\", [\"vDistrict\", \"vVillage\"], false);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"village\":\r\n\t\t\t\t\tthis._setPropertyValue(\"location\", [\"vVillage\"], true);\r\n\t\t\t\t\tthis._setPropertyValue(\"location\", [\"vDistrict\", \"vMandal\"], false);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"loksabha\":\r\n\t\t\t\t\tthis._setPropertyValue(\"location\", [\"vLoksabha\"], true);\r\n\t\t\t\t\t//\tthis._setPropertyValue(\"location\", [\"vAssembly\"], false);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tthis._setPropertyValue(\"location\", [\"vAssembly\"], true);\r\n\t\t\t\t\t//\tthis._setPropertyValue(\"location\", [\"vLoksabha\"], false);\r\n\t\t\t}\r\n\t\t\tthis.getModel(\"location\").updateBindings();\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler function for note edit press\r\n\t\t * @param {Event} oEvent Button press on note edit\r\n\t\t */\r\n\t\tonNoteActionPress: function(oEvent) {\r\n\t\t\tvar sAction = oEvent.getSource().getKey();\r\n\t\t\tif (sAction === \"edit\") {\r\n\t\t\t\tvar oDetailViewModel = this.getModel(\"detailView\"),\r\n\t\t\t\t\toNotePayload = oDetailViewModel.getProperty(\"/\"),\r\n\t\t\t\t\toParentBindingContext = oEvent.getSource().getParent().getBindingContext(\"detailView\");\r\n\t\t\t\toDetailViewModel = this.getModel(\"detailView\");\r\n\t\t\t\tvar sNoteText = oDetailViewModel.getProperty(\"Notingstring\", oParentBindingContext);\r\n\t\t\t\tvar sNotingId = oDetailViewModel.getProperty(\"Notingid\", oParentBindingContext);\r\n\t\t\t\tvar sPagent = oDetailViewModel.getProperty(\"Pagent\", oParentBindingContext);\r\n\t\t\t\toNotePayload.Notingstring = sNoteText;\r\n\t\t\t\toNotePayload.Notingid = sNotingId;\r\n\t\t\t\toNotePayload.Pagent = sPagent;\r\n\t\t\t\toDetailViewModel.updateBindings();\r\n\t\t\t\tMessageToast.show(this.getResourceBundle().getText(\"detail.ObjPageSection.toast.editMessage.addedtoEditor\"));\r\n\t\t\t}\r\n\t\t},\r\n\t\t/** \r\n\t\t * Event handler on click message popover at footer\r\n\t\t * @param {Event} oEvent Button press on Error Messages display\r\n\t\t */\r\n\t\thandleMessagePopoverPress: function(oEvent) {\r\n\t\t\tthis.getOwnerComponent().oMessagePopover.toggle(oEvent.getSource());\r\n\t\t},\r\n\t\t/**\r\n\t\t * @param {*} oEvent is the onselect event\r\n\t\t */\r\n\t\tonHOADDOSelect: function(oEvent) {\r\n\t\t\tvar oSelectedItem = oEvent.getParameter(\"selectedItem\"),\r\n\t\t\t\tsCustomData = oSelectedItem.getCustomData()[1].getValue();\r\n\t\t\tvar sBindingPath,\r\n\t\t\t\tsControlId;\r\n\t\t\tif (oSelectedItem) {\r\n\t\t\t\tif (sCustomData === \"Ddo\" || sCustomData === \"SourceDdo\") {\r\n\t\t\t\t\tvar sDDO = oSelectedItem.getBindingContext().getProperty(\"fistl\");\r\n\t\t\t\t\tvar sDDODes = oSelectedItem.getBindingContext().getProperty(\"BESCHR\");\r\n\t\t\t\t\tsBindingPath = oSelectedItem.data(\"sSrcBindingPath\");\r\n\t\t\t\t\tsControlId = oSelectedItem.data(\"controlId\");\r\n\t\t\t\t\tif (sCustomData === \"Ddo\") {\r\n\t\t\t\t\t\tthis.getModel().setProperty(sBindingPath + \"/Ddo\", sDDO);\r\n\t\t\t\t\t\tthis.getModel().setProperty(sBindingPath + \"/DdoDes\", sDDODes);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.getModel().setProperty(sBindingPath + \"/SourceDdo\", sDDO);\r\n\t\t\t\t\t\tthis.getModel().setProperty(sBindingPath + \"/DdoDes\", sDDODes);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//\tthis._destroyFrag(this._oDDOVHDialog);\r\n\t\t\t\t} else if (sCustomData === \"Hoa\" || sCustomData === \"SourceHoa\") {\r\n\t\t\t\t\tvar sHOA = oSelectedItem.getBindingContext().getProperty(\"Hoa\");\r\n\t\t\t\t\t// sGsh = oSelectedItem.getBindingContext().getProperty(\"gsh\"),\r\n\t\t\t\t\t// aCells = this.oCurrentInput.getParent().getCells(),\r\n\t\t\t\t\t// oCell = aCells.filter(function(cell) {return cell.data(\"bindPath\") === \"PicCode\";})[0];\r\n\t\t\t\t\tsBindingPath = oSelectedItem.data(\"sSrcBindingPath\");\r\n\t\t\t\t\tsControlId = oSelectedItem.data(\"controlId\");\r\n\t\t\t\t\tif (sCustomData === \"Hoa\") {\r\n\t\t\t\t\t\tthis.getModel().setProperty(sBindingPath + \"/Hoa\", sHOA);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.getModel().setProperty(sBindingPath + \"/SourceHoa\", sHOA);\r\n\t\t\t\t\t\tif (this.byId(\"idBudgetCtrl\").getValue() === \"\") {\r\n\t\t\t\t\t\t\tthis.byId(\"idBudgetCtrl\").setValue(oSelectedItem.getBindingContext().getProperty(\"bcf\"));\r\n\t\t\t\t\t\t\tthis.byId(\"idBudgetCtrl\").fireChange();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// if(sGsh === \"07\") {\r\n\t\t\t\t\t\t// \toCell.setEditable(true);\r\n\t\t\t\t\t\t// } else {\r\n\t\t\t\t\t\t// \toCell.setValue();\r\n\t\t\t\t\t\t// \toCell.setEditable(false);\r\n\t\t\t\t\t\t// }\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// else if(sCustomData === \"PicCode\") {\r\n\t\t\t\t// \tvar sPicsCode = oSelectedItem.getBindingContext().getProperty(\"Pics_Code\");\r\n\t\t\t\t// \tsBindingPath = oSelectedItem.data(\"sSrcBindingPath\");\r\n\t\t\t\t// \tif(sCustomData === \"PicCode\"){\r\n\t\t\t\t// \t\tthis.getModel().setProperty( sBindingPath + \"/PicsCode\", sPicsCode);\r\n\t\t\t\t// \t}\r\n\t\t\t\t// }\r\n\r\n\t\t\t\tthis.oCurrentInput.fireChange();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for HoA Ddo search in value help\r\n\t\t * @param {sap.ui.model.Event} oEvent is the event for Search\r\n\t\t */\r\n\t\thandleHOADDOSearch: function(oEvent) {\r\n\t\t\tvar sValue = oEvent.getParameter(\"value\");\r\n\t\t\tvar aFilters = [],\r\n\t\t\t\tsCustomData = oEvent.getSource().getCustomData()[0].getValue();\r\n\t\t\tif (sCustomData === \"Ddo\" || sCustomData === \"SourceDdo\") {\r\n\t\t\t\taFilters.push(new Filter(\"fistl\", sap.ui.model.FilterOperator.Contains, sValue));\r\n\t\t\t\taFilters.push(new Filter(\"BESCHR\", sap.ui.model.FilterOperator.Contains, sValue));\r\n\t\t\t} else if (sCustomData === \"Hoa\" || sCustomData === \"SourceHoa\") {\r\n\t\t\t\taFilters.push(new Filter(\"Hoa\", sap.ui.model.FilterOperator.Contains, sValue));\r\n\t\t\t} else if (sCustomData === \"PicCode\") {\r\n\t\t\t\taFilters.push(new Filter(\"Pics_Code\", sap.ui.model.FilterOperator.Contains, sValue));\r\n\t\t\t\taFilters.push(new Filter(\"District_name\", sap.ui.model.FilterOperator.Contains, sValue));\r\n\t\t\t}\r\n\t\t\tvar oFilter = new sap.ui.model.Filter({\r\n\t\t\t\tfilters: aFilters,\r\n\t\t\t\tbAnd: false\r\n\t\t\t});\r\n\t\t\tvar oBinding = oEvent.getSource().getBinding(\"items\");\r\n\t\t\toBinding.filter(oFilter);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for closing HoA DDO\r\n\t\t * @param {sap.ui.base.Ecent} oEvent is the parameter control\r\n\t\t */\r\n\t\thandleHOADDOClose: function(oEvent) {\r\n\t\t\tvar sCustomData = oEvent.getSource().getCustomData()[0].getValue();\r\n\t\t\tif (sCustomData === \"Ddo\" || sCustomData === \"SourceDdo\") {\r\n\t\t\t\tif (this._oDDOVHDialog) {\r\n\t\t\t\t\tthis._oDDOVHDialog.destroy();\r\n\t\t\t\t\tthis._oDDOVHDialog = null;\r\n\t\t\t\t}\r\n\t\t\t} else if (sCustomData === \"Hoa\" || sCustomData === \"SourceHoa\") {\r\n\t\t\t\tif (this._oHOAVHDialog) {\r\n\t\t\t\t\tthis._oHOAVHDialog.destroy();\r\n\t\t\t\t\tthis._oHOAVHDialog = null;\r\n\t\t\t\t}\r\n\t\t\t} else if (sCustomData === \"PicCode\") {\r\n\t\t\t\tif (this._oPicCodeVHDialog) {\r\n\t\t\t\t\tthis._oPicCodeVHDialog.destroy();\r\n\t\t\t\t\tthis._oPicCodeVHDialog = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for Change Log\r\n\t\t * @param {Event} oEvent event for change log press\r\n\t\t */\r\n\t\tonChangeLogPress: function(oEvent) {\r\n\t\t\tif (!this._createChangeLogFrag) {\r\n\t\t\t\tvar fragId = this.createId(\"IdChangeLog\");\r\n\t\t\t\tthis._createChangeLogFrag = sap.ui.xmlfragment(fragId, \"com.goap.cfms.works.as.fragment.changeLog\", this);\r\n\t\t\t\tthis.getView().addDependent(this._createChangeLogFrag);\r\n\t\t\t}\r\n\t\t\tvar oChangeTable = this._getFragControlById(\"idProductsTable\", \"IdChangeLog\");\r\n\r\n\t\t\toChangeTable.bindAggregation(\"items\", {\r\n\t\t\t\tpath: \"AsDettoChangeLogs\",\r\n\t\t\t\ttemplate: this._returnChangeLogTemplate()\r\n\t\t\t});\r\n\t\t\tthis._createChangeLogFrag.open();\r\n\t\t},\r\n\t\t/**\r\n\t\t * Function to return the template for the Change Log Table\r\n\t\t * @private\r\n\t\t * @returns {Object} Template for the change log table list item\r\n\t\t */\r\n\t\t_returnChangeLogTemplate: function() {\r\n\t\t\tvar oLogTemplate = new sap.m.ColumnListItem({\r\n\t\t\t\tcells: [\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{User}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{path:'Date',type: 'sap.ui.model.odata.type.DateTime'}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{Type}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{ShortDesc}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{Estimated Value}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{GoNumber}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{path:'GoRefDate',type: 'sap.ui.model.odata.type.DateTime'}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{Category}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{LocalClass}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{StatusText}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{MainWorkNature}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{SubclassL01}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{SubclassL02}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{SubclassL03}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{InitDepartDesc}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{Scheme}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{Stage}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{ExecutingDept}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{BcRatio}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{Agency}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{RefOrdnum}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{path:'RefDate',type: 'sap.ui.model.odata.type.DateTime'}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{ValueSactioned}\"\r\n\t\t\t\t\t}), new sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{CurrencySanctioned}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{ApprovOrder}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{path:'ApprovDate',type: 'sap.ui.model.odata.type.DateTime'}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{ApprovStatus}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{District}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{Mandal}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{Village}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{Loksabha}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{RefAsType}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{FundingAgencyId}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{RefernAgency}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{RefNumber}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{DcwType}\"\r\n\t\t\t\t\t})\r\n\t\t\t\t]\r\n\t\t\t});\r\n\t\t\treturn oLogTemplate;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for closing change log dialog\r\n\t\t */\r\n\t\tonCloseChangeLogDialog: function() {\r\n\t\t\tthis._createChangeLogFrag.close();\r\n\t\t},\r\n\t\t/* =========================================================== */\r\n\t\t/* begin: internal methods                                     */\r\n\t\t/* =========================================================== */\r\n\r\n\t\t/**\r\n\t\t * Binds the view to the object path and expands the aggregated line items.\r\n\t\t * @function\r\n\t\t * @param {sap.ui.base.Event} oEvent pattern match event in route 'object'\r\n\t\t * @private\r\n\t\t */\r\n\t\t_onObjectMatched: function(oEvent) {\r\n\t\t\tif (this.getView().getModel(\"appView\").getProperty(\"/bPositionChangeLoadFC\")) {\r\n\t\t\t\tthis.getView().getModel(\"appView\").setProperty(\"/bPositionChangeLoadFC\", false);\r\n\t\t\t\tthis._callFieldControl({\r\n\t\t\t\t\taction: \"LOAD\",\r\n\t\t\t\t\tapplication: \"AS\",\r\n\t\t\t\t\tPositionid: this.getView().getModel(\"appView\").getProperty(\"/position\"),\r\n\t\t\t\t\tRole: this.getView().getModel(\"appView\").getProperty(\"/role\")\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tvar sViewState = \"\",\r\n\t\t\t\tsDraftState = \"\",\r\n\t\t\t\taViewState,\r\n\t\t\t\toDetailViewModel = this.getModel(\"detailView\"),\r\n\t\t\t\toAppViewModel = this.getModel(\"appView\"),\r\n\t\t\t\tsObjectId = oEvent.getParameter(\"arguments\").objectId,\r\n\t\t\t\tstateId = oEvent.getParameter(\"arguments\").stateId,\r\n\t\t\t\toParam = this.getOwnerComponent().getComponentData().startupParameters.Mode;\r\n\t\t\tif (oParam) {\r\n\t\t\t\toDetailViewModel.setProperty(\"/Mode\", oParam[0]);\r\n\t\t\t}\r\n\t\t\tif (stateId.indexOf(\":\") !== -1) {\r\n\t\t\t\taViewState = stateId.split(\":\");\r\n\t\t\t\tsViewState = aViewState[0];\r\n\t\t\t\tsDraftState = aViewState[1];\r\n\t\t\t} else {\r\n\t\t\t\tsViewState = stateId;\r\n\t\t\t}\r\n\t\t\t//\t\t\toDetailViewModel.setProperty(\"/stateId\", sViewState);\r\n\t\t\toDetailViewModel.setProperty(\"/DraftStatus\", sDraftState);\r\n\t\t\tthis._authorizeUser(sObjectId);\r\n\t\t\tif (sap.ui.getCore().getModel(\"ZWRKGlobalModel\").getProperty(\"/AS/bNavtoAsfromDocFlow\")) {\r\n\t\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bNavtoAsfromDocFlow\", false);\r\n\t\t\t\tthis._notAllowEditOnDocument();\r\n\t\t\t} else {\r\n\t\t\t\tif (sap.ui.getCore().getModel(\"ZWRKGlobalModel\").getProperty(\"/AS/bUserCreateAS\")) {\r\n\t\t\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bUserCreateAS\", false);\r\n\t\t\t\t\tthis._changeFullScreenMode(true, \"detail\", \"MasterPage\", \"asIdBtnScreenToggle\");\r\n\t\t\t\t\tthis._allowEditOnDocument();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis._notAllowEditOnDocument();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//\t\t\tvar bEditable = false;\r\n\t\t\t//\t\t\tif (sViewState !== \"D\") {\r\n\t\t\t//\t\t\t\tbEditable = true;\r\n\t\t\t//\t\t\t\t//Enabling/desabling the control based on Visible Mode of Detail view\r\n\t\t\t//\t\t\t\toAppViewModel.setProperty(\"/bEnabledMasterViewCtr\", false);\r\n\t\t\t//\t\t\t\toAppViewModel.setProperty(\"/sMasterListMode\", \"None\");\r\n\t\t\t//\t\t\t} else {\r\n\t\t\t//\r\n\t\t\t//\t\t\t\tbEditable = false;\r\n\t\t\t//\t\t\t\toAppViewModel.setProperty(\"/bEnabledMasterViewCtr\", true);\r\n\t\t\t//\t\t\t\toAppViewModel.setProperty(\"/sMasterListMode\", \"SingleSelectMaster\");\r\n\t\t\t//\t\t\t}\r\n\t\t\t//\t\t\toDetailViewModel.setProperty(\"/bEditable\", bEditable);\r\n\t\t\toAppViewModel.updateBindings();\r\n\t\t\toAppViewModel.setProperty(\"/layout\", \"TwoColumnsMidExpanded\");\r\n\r\n\t\t\tthis.getModel().metadataLoaded().then(function() {\r\n\t\t\t\tvar sObjectPath = this.getModel().createKey(\"WrkDetailsSet\", {\r\n\t\t\t\t\tGuid: sObjectId\r\n\t\t\t\t});\r\n\t\t\t\tthis._bindView(\"/\" + sObjectPath, sObjectId);\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\t//Migration Call\r\n\t\t\tif ($.sap.ASNUMBER === undefined) {\r\n\t\t\t\tthis._getMigCheckSet();\r\n\t\t\t} else {\r\n\t\t\t\tthis._getMigCheckSet($.sap.ASNUMBER.AsNumber);\r\n\t\t\t}\r\n\t\t\t//\t\t\tif (sap.ui.getCore().getModel(\"ZWRKGlobalModel\").getProperty(\"/AS/bFullScreen\")) {\r\n\t\t\t//\t\t\t\tthis._changeFullScreenMode(true, \"detail\", \"MasterPage\", \"asIdBtnScreenToggle\");\r\n\t\t\t//\t\t\t}\r\n\t\t},\r\n\r\n\t\t// Migration Code Start\r\n\t\t_getMigCheckSet: function(data) {\r\n\t\t\tif (data === undefined) {\r\n\t\t\t\tvar NewASNumber = this.getView().byId(\"idCode\").getValue();\r\n\t\t\t} else {\r\n\t\t\t\tvar NewASNumber = data;\r\n\t\t\t}\r\n\t\t\tvar that = this;\r\n\t\t\tvar CheckUrl = \"/WrkMigCheckSet(Code='\" + NewASNumber + \"',AppType='ZWAS')\";\r\n\t\t\tthis.getOwnerComponent().getModel().read(CheckUrl, {\r\n\t\t\t\tsuccess: function(oData, oResponse) {\r\n\t\t\t\t\tthat.NewASNumber = oData;\r\n\t\t\t\t\tif (oData.Migrated === \"X\") {\r\n\t\t\t\t\t\tthat.getView().getModel(\"detailView\").setProperty(\"/Migrated\", true);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.getView().getModel(\"detailView\").setProperty(\"/Migrated\", false);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terror: function(error) {}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tonAddMigPress: function(oEvent) {\r\n\t\t\t// this._setFormReset();\r\n\t\t\tthis.getView().setBusy(true);\r\n\t\t\tvar that = this;\r\n\t\t\tvar Url = \"/WrkMigCmmSet(Guid=guid'\" + oEvent.getSource().getBindingContext().getProperty(\"Guid\") + \"',AsNumber='\" + this.getView()\r\n\t\t\t\t.byId(\"idCode\").getValue() + \"',ApplicationName='ZWAS')\";\r\n\t\t\tthis.getOwnerComponent().getModel().read(Url, {\r\n\t\t\t\turlParameters: {\r\n\t\t\t\t\t'$expand': \"WrkOldAs_Nav\"\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function(oData, oResponse) {\r\n\t\t\t\t\tthat.SancDate = oData.SanDate;\r\n\t\t\t\t\tthat.SancAmount = oData.SanAmount;\r\n\t\t\t\t\tvar oModelTable = new sap.ui.model.json.JSONModel();\r\n\t\t\t\t\toModelTable.setData([]);\r\n\t\t\t\t\tvar aArray = [];\r\n\t\t\t\t\tfor (var i = 0; i < oData.WrkOldAs_Nav.results.length; i++) {\r\n\t\t\t\t\t\tif (that.getModel(\"detailView\").getProperty(\"/WfRole\") === \"C\" && that.getModel(\"detailView\").getProperty(\"/stateId\") === \"E\" ||\r\n\t\t\t\t\t\t\tthat.getModel(\"detailView\").getProperty(\"/WfRole\") === \"C\" && that.getModel(\"detailView\").getProperty(\"/stateId\") === \"D\" ||\r\n\t\t\t\t\t\t\tthat.getModel(\"detailView\").getProperty(\"/WfRole\") === \"A\" && that.getModel(\"detailView\").getProperty(\"/stateId\") === \"E\" ||\r\n\t\t\t\t\t\t\tthat.getModel(\"detailView\").getProperty(\"/WfRole\") === \"A\" && that.getModel(\"detailView\").getProperty(\"/stateId\") === \"D\") {\r\n\t\t\t\t\t\t\tvar Obj = {};\r\n\t\t\t\t\t\t\tObj.MigASEditNumber = oData.WrkOldAs_Nav.results[i].OldAsNumber;\r\n\t\t\t\t\t\t\tObj.SancEditAmunt = oData.WrkOldAs_Nav.results[i].SanAmount;\r\n\t\t\t\t\t\t\tObj.ASEditDescription = oData.WrkOldAs_Nav.results[i].PrjDesc;\r\n\t\t\t\t\t\t\tObj.SanctionEditRefe = oData.WrkOldAs_Nav.results[i].SanRefNo;\r\n\t\t\t\t\t\t\tObj.SanEditAmntEditable = false;\r\n\t\t\t\t\t\t\tObj.MigCDSEditable = false;\r\n\t\t\t\t\t\t} else if (that.getModel(\"detailView\").getProperty(\"/stateId\") !== \"D\") {\r\n\t\t\t\t\t\t\tvar Obj = {};\r\n\t\t\t\t\t\t\tObj.MigASEditNumber = oData.WrkOldAs_Nav.results[i].OldAsNumber;\r\n\t\t\t\t\t\t\tObj.SancEditAmunt = oData.WrkOldAs_Nav.results[i].SanAmount;\r\n\t\t\t\t\t\t\tObj.ASEditDescription = oData.WrkOldAs_Nav.results[i].PrjDesc;\r\n\t\t\t\t\t\t\tObj.SanctionEditRefe = oData.WrkOldAs_Nav.results[i].SanRefNo;\r\n\t\t\t\t\t\t\tObj.SanEditAmntEditable = true;\r\n\t\t\t\t\t\t\tObj.MigCDSEditable = true;\r\n\t\t\t\t\t\t\tObj.DelteEditable = true;\r\n\t\t\t\t\t\t} else if (that.getModel(\"detailView\").getProperty(\"/stateId\") === \"D\") {\r\n\t\t\t\t\t\t\tvar Obj = {};\r\n\t\t\t\t\t\t\tObj.MigASEditNumber = oData.WrkOldAs_Nav.results[i].OldAsNumber;\r\n\t\t\t\t\t\t\tObj.SancEditAmunt = oData.WrkOldAs_Nav.results[i].SanAmount;\r\n\t\t\t\t\t\t\tObj.ASEditDescription = oData.WrkOldAs_Nav.results[i].PrjDesc;\r\n\t\t\t\t\t\t\tObj.SanctionEditRefe = oData.WrkOldAs_Nav.results[i].SanRefNo;\r\n\t\t\t\t\t\t\tObj.SanEditAmntEditable = false;\r\n\t\t\t\t\t\t\tObj.MigCDSEditable = false;\r\n\t\t\t\t\t\t\tObj.DelteEditable = false;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\taArray.push(Obj);\r\n\t\t\t\t\t\tObj = {};\r\n\t\t\t\t\t}\r\n\t\t\t\t\taArray = {\r\n\t\t\t\t\t\t\"results\": aArray\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\toModelTable.setData([]);\r\n\t\t\t\t\toModelTable.setData(aArray);\r\n\t\t\t\t\tthat.getView().setModel(oModelTable, \"TableModel\");\r\n\t\t\t\t\tthat.getView().getModel(\"TableModel\").updateBindings();\r\n\t\t\t\t\tif (!that._EditMigratedASFrag) {\r\n\t\t\t\t\t\tvar fragId = that.createId(\"createMigratedASDialog\");\r\n\t\t\t\t\t\tthat._EditMigratedASFrag = sap.ui.xmlfragment(fragId, \"com.goap.cfms.works.as.fragment.EditMigratedASDialog\", that);\r\n\t\t\t\t\t\tthat.getView().addDependent(that._EditMigratedASFrag);\r\n\t\t\t\t\t\tjQuery.sap.syncStyleClass(\"sapUiSizeCompact\", that.getView(), that._EditMigratedASFrag);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (oData.SanType === \"\") {\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"goCategory\").setSelected(false);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"deptCategory\").setSelected(true);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"SanctionNumber2\").setVisible(true);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"SanctionNumber1\").setVisible(false);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"SanctionType\").setVisible(false);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"ASTypeId\").setVisible(false);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"ASTypeId\").setSelectedKey(oData.SanType);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"sancNo\").setValue(\"\");\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"sancNo1\").setValue(oData.SanNumber);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"goCategory\").setSelected(true);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"deptCategory\").setSelected(false);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"SanctionNumber1\").setVisible(true);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"SanctionNumber2\").setVisible(false);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"SanctionType\").setVisible(true);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"ASTypeId\").setVisible(true);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"ASTypeId\").setSelectedKey(oData.SanType);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"sancNo\").setValue(oData.SanNumber);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"sancNo1\").setValue(\"\");\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (oData.NonCfmsInd === \"X\") {\r\n\t\t\t\t\t\tthat.NonCfmsInd = oData.NonCfmsInd;\r\n\t\t\t\t\t\tif (that.getModel(\"detailView\").getProperty(\"/WfRole\") === \"C\" && that.getModel(\"detailView\").getProperty(\"/stateId\") === \"E\" ||\r\n\t\t\t\t\t\t\tthat.getModel(\"detailView\").getProperty(\"/WfRole\") === \"C\" && that.getModel(\"detailView\").getProperty(\"/stateId\") === \"D\" ||\r\n\t\t\t\t\t\t\tthat.getModel(\"detailView\").getProperty(\"/WfRole\") === \"A\" && that.getModel(\"detailView\").getProperty(\"/stateId\") === \"E\" ||\r\n\t\t\t\t\t\t\tthat.getModel(\"detailView\").getProperty(\"/WfRole\") === \"A\" && that.getModel(\"detailView\").getProperty(\"/stateId\") === \"D\" ||\r\n\t\t\t\t\t\t\tthat.getModel(\"detailView\").getProperty(\"/stateId\") === \"D\") {\r\n\t\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"sancAmount\").setEditable(false);\r\n\t\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"UpdateBtnId\").setVisible(false);\r\n\t\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"CancelBtnId\").setVisible(false);\r\n\t\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"OkBtnId\").setVisible(true);\r\n\t\t\t\t\t\t} else if (that.getModel(\"detailView\").getProperty(\"/stateId\") !== \"D\") {\r\n\t\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"sancAmount\").setEditable(true);\r\n\t\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"UpdateBtnId\").setVisible(true);\r\n\t\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"CancelBtnId\").setVisible(true);\r\n\t\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"OkBtnId\").setVisible(false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"SanctionAmountId\").setVisible(true);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"sancAmount\").setValue(oData.SanAmount);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"TableBelowForm\").setVisible(false);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.NonCfmsInd = oData.NonCfmsInd;\r\n\t\t\t\t\t\tif (that.getModel(\"detailView\").getProperty(\"/WfRole\") === \"C\" && that.getModel(\"detailView\").getProperty(\"/stateId\") === \"E\" ||\r\n\t\t\t\t\t\t\tthat.getModel(\"detailView\").getProperty(\"/WfRole\") === \"C\" && that.getModel(\"detailView\").getProperty(\"/stateId\") === \"D\" ||\r\n\t\t\t\t\t\t\tthat.getModel(\"detailView\").getProperty(\"/WfRole\") === \"A\" && that.getModel(\"detailView\").getProperty(\"/stateId\") === \"E\" ||\r\n\t\t\t\t\t\t\tthat.getModel(\"detailView\").getProperty(\"/WfRole\") === \"A\" && that.getModel(\"detailView\").getProperty(\"/stateId\") === \"D\" ||\r\n\t\t\t\t\t\t\tthat.getModel(\"detailView\").getProperty(\"/stateId\") === \"D\") {\r\n\t\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"UpdateBtnId\").setVisible(false);\r\n\t\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"CancelBtnId\").setVisible(false);\r\n\t\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"OkBtnId\").setVisible(true);\r\n\t\t\t\t\t\t} else if (that.getModel(\"detailView\").getProperty(\"/stateId\") !== \"D\") {\r\n\t\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"UpdateBtnId\").setVisible(true);\r\n\t\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"CancelBtnId\").setVisible(true);\r\n\t\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"OkBtnId\").setVisible(false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"sancAmount\").setEditable(false);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"SanctionAmountId\").setVisible(false);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"sancAmount\").setValue(\"\");\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"TableBelowForm\").setVisible(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (that.getModel(\"detailView\").getProperty(\"/stateId\") === \"D\") {\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"ASDescr\").setEditable(false);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"SanctionDescr\").setEditable(false);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"sancAmount\").setEditable(false);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"goAmount\").setEditable(false);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"goCategory\").setEditable(false);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"deptCategory\").setEditable(false);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"sancNo\").setEditable(false);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"sancNo1\").setEditable(false);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"ASTypeId\").setEditable(false);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"SanctionDate\").setEditable(false);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"SanctionDept\").setEditable(false);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"sanAuthority\").setEditable(false);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"ASDescr\").setEditable(true);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"SanctionDescr\").setEditable(true);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"sancAmount\").setEditable(true);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"goAmount\").setEditable(true);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"goCategory\").setEditable(true);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"deptCategory\").setEditable(true);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"sancNo\").setEditable(true);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"sancNo1\").setEditable(true);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"ASTypeId\").setEditable(true);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"SanctionDate\").setEditable(true);\r\n\t\t\t\t\t\tif (oData.TsFlag === true) {\r\n\t\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"SanctionDept\").setEditable(false);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"SanctionDept\").setEditable(true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"sanAuthority\").setEditable(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthat._getMigratedCreateFragControlById(\"SanctionDate\").setValue(that.dateconv(oData.SanDate));\r\n\t\t\t\t\tthat._getMigratedCreateFragControlById(\"sanAuthority\").setValue(oData.SanAuthority);\r\n\t\t\t\t\tthat._getMigratedCreateFragControlById(\"goAmount\").setValue(oData.GoAmount);\r\n\r\n\t\t\t\t\tthat._getMigratedCreateFragControlById(\"SanctionDept\").setValue(oData.SanDepartment + \"-\" + oData.Beschr);\r\n\t\t\t\t\t/*\tdate picker only select (no need enter date) - in fragment - -start cfms_ctm_npv(28_01_23)*/\r\n\t\t\t\t\tvar dateArray = [\"SanctionDate\"];\r\n\t\t\t\t\t// dateArray.forEach(date => {\r\n\t\t\t\t\t// var oDatePicker = sap.ui.getCore().byId(date);\r\n\t\t\t\t\tvar oDatePicker = that._getMigratedCreateFragControlById(\"SanctionDate\");\r\n\t\t\t\t\t// var oDatePicker = \tthis._getMigratedCreateFragControlById(\"sancDate\").getId();\r\n\t\t\t\t\t// var oDatePicker = this.getView().byId(date);\r\n\t\t\t\t\toDatePicker.addEventDelegate({\r\n\t\t\t\t\t\tonAfterRendering: function() {\r\n\t\t\t\t\t\t\tvar oDateInner = this.$().find('.sapMInputBaseInner');\r\n\t\t\t\t\t\t\t// var oDateInner = this._getMigratedCreateFragControlById(\"sancDate\").$().find('.sapMInputBaseInner');\r\n\t\t\t\t\t\t\tvar oID = oDateInner[0].id;\r\n\t\t\t\t\t\t\t$('#' + oID).attr(\"disabled\", \"disabled\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, oDatePicker);\r\n\r\n\t\t\t\t\t// sap.ui.getCore().byId(\"sancDate\").setMaxDate(new Date());\r\n\t\t\t\t\t// sap.ui.getCore().byId(\"sancDate\").setMaxDate(new Date());\r\n\t\t\t\t\t/*\t\tdate picker only select (no need enter date) - in fragment --End - cfms_ctm_npv(28_01_23)*/\r\n\t\t\t\t\tthat._EditMigratedASFrag.open();\r\n\t\t\t\t\tthat.getView().setBusy(false);\r\n\t\t\t\t},\r\n\t\t\t\terror: function(error) {}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t_getMigratedCreateFragControlById: function(sControlId) {\r\n\t\t\treturn sap.ui.core.Fragment.byId(this.createId(\"createMigratedASDialog\"), sControlId);\r\n\t\t},\r\n\r\n\t\tOnpressAddnewRow: function(oEvent) {\r\n\r\n\t\t\tvar oCreateNewASModel = this.getModel(\"createNewASModel\");\r\n\t\t\tvar Obj = {\r\n\t\t\t\tMigASEditNumber: \"\",\r\n\t\t\t\tSancEditAmunt: \"\",\r\n\t\t\t\tASEditDescription: \"\",\r\n\t\t\t\tSanctionEditRefe: \"\"\r\n\t\t\t};\r\n\t\t\tvar data = this.getView().getModel(\"TableModel\").getData().results;\r\n\t\t\tdata.push(Obj);\r\n\t\t\tthis.getView().getModel(\"TableModel\").refresh();\r\n\t\t},\r\n\r\n\t\tOnpressDelete: function(oEvent) {\r\n\r\n\t\t\tvar RowId = oEvent.getSource().getId().split(\"-\")[10];\r\n\t\t\tthis.getView().getModel(\"TableModel\").getData().results.splice(RowId, 1);\r\n\t\t\tthis.getView().getModel(\"TableModel\").refresh();\r\n\t\t},\r\n\r\n\t\tonUpdateMigratedAS: function(oEvent) {\r\n\t\t\tthis.getView().setBusy(true);\r\n\t\t\tvar that = this;\r\n\t\t\tvar sanAMount = \"0\";\r\n\t\t\tif (that.NonCfmsInd === \"\") {\r\n\t\t\t\tfor (var i = 0; i < this.getView().getModel(\"TableModel\").getData().results.length; i++) {\r\n\t\t\t\t\tvar sanAMount = Number(sanAMount) + Number(this.getView().getModel(\"TableModel\").getData().results[i].SancAmunt);\r\n\t\t\t\t\tvar RowTable = i + 1;\r\n\t\t\t\t\tif (this.getView().getModel(\"TableModel\").getData().results[i].MigASNumber === \"\") {\r\n\t\t\t\t\t\tsap.m.MessageBox.error(\"Please Enter the Old AS Number in Row '\" + RowTable + \"'. \");\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else if (this.getView().getModel(\"TableModel\").getData().results[i].SancAmunt === \"\") {\r\n\t\t\t\t\t\tsap.m.MessageBox.error(\"Please Enter the Old AS Number in Row '\" + RowTable + \"'. \");\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar category, sancno;\r\n\t\t\tif (this._getMigratedCreateFragControlById(\"goCategory\").getSelected()) {\r\n\t\t\t\tcategory = 'GO';\r\n\t\t\t\tsancno = that._getMigratedCreateFragControlById(\"sancNo\").getValue();\r\n\t\t\t} else {\r\n\t\t\t\tcategory = 'DEP';\r\n\t\t\t\tsancno = that._getMigratedCreateFragControlById(\"sancNo1\").getValue();\r\n\t\t\t}\r\n\t\t\tvar Arry = [];\r\n\t\t\tvar Obj = {};\r\n\t\t\tfor (var i = 0; i < this.getView().getModel(\"TableModel\").getData().results.length; i++) {\r\n\t\t\t\tObj.ApplicationName = \"ZWAS\";\r\n\t\t\t\tObj.OldAsNumber = this.getView().getModel(\"TableModel\").getData().results[i].MigASEditNumber;\r\n\t\t\t\tif (this.getView().getModel(\"TableModel\").getData().results[i].SancEditAmunt === \"\") {\r\n\t\t\t\t\tObj.SanAmount = \"0.00\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tObj.SanAmount = this.getView().getModel(\"TableModel\").getData().results[i].SancEditAmunt;\r\n\t\t\t\t}\r\n\t\t\t\tObj.SanRefNo = this.getView().getModel(\"TableModel\").getData().results[i].SanctionEditRefe;\r\n\t\t\t\tObj.PrjDesc = this.getView().getModel(\"TableModel\").getData().results[i].ASEditDescription;\r\n\t\t\t\tArry.push(Obj);\r\n\t\t\t\tObj = {};\r\n\t\t\t}\r\n\t\t\tvar dt = that._DateCoversion(that._getMigratedCreateFragControlById(\"SanctionDate\").getValue());\r\n\t\t\t// oEvent.getSource().getBindingContext().getProperty(\"Guid\")\r\n\t\t\tif (that._getMigratedCreateFragControlById(\"sancAmount\").getValue() === \"\") {\r\n\t\t\t\tvar Sanamnt = \"0.00\";\r\n\t\t\t} else {\r\n\t\t\t\tvar Sanamnt = that._getMigratedCreateFragControlById(\"sancAmount\").getValue();\r\n\t\t\t}\r\n\t\t\tvar SanDepartment = \"\";\r\n\t\t\tif (this.getOwnerComponent().getModel(\"migratedModel\").getData().beschr === \"\") {\r\n\t\t\t\tSanDepartment = this._getMigratedCreateFragControlById(\"SanctionDept\").getValue().split(\"-\")[0];\r\n\t\t\t} else {\r\n\t\t\t\tSanDepartment = this.getOwnerComponent().getModel(\"migratedModel\").getData().beschr;\r\n\t\t\t}\r\n\t\t\tvar migratedPayloadData = {\r\n\t\t\t\tAction: 'MIGSAVE',\r\n\t\t\t\tGuid: oEvent.getSource().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\t// OldAsNumber: that.oldASNumber,\r\n\t\t\t\tSanDate: dt,\r\n\t\t\t\tSanType: that._getMigratedCreateFragControlById(\"ASTypeId\").getSelectedKey(),\r\n\t\t\t\tSanNumber: sancno,\r\n\t\t\t\tSanAmount: Sanamnt,\r\n\t\t\t\tGoAmount: that._getMigratedCreateFragControlById(\"goAmount\").getValue(),\r\n\t\t\t\tSanAuthority: this._getMigratedCreateFragControlById(\"sanAuthority\").getValue().split(\" \")[0],\r\n\t\t\t\tSanCategory: category,\r\n\t\t\t\tSanDes: \"X\",\r\n\t\t\t\tSanDepartment: SanDepartment,\r\n\t\t\t\tBeschr: \"\",\r\n\t\t\t\tAsNumber: that.getView().byId(\"idCode\").getValue(),\r\n\t\t\t\tNonCfmsInd: that.NonCfmsInd,\r\n\t\t\t\tPosition: that.getModel(\"appView\").getProperty(\"/position\"),\r\n\t\t\t\tWrkOldAs_Nav: Arry,\r\n\t\t\t\tTsFlag: false\r\n\t\t\t};\r\n\t\t\t// below code added by SAGAR to clear the dependent field when user changes the sanction dept in mig screen\r\n\t\t\tif (SanDepartment !== this.getView().getBindingContext().getProperty(\"InitiatinDept\")) {\r\n\t\t\t\tthis.bSanctionDeptUpdateMig = true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.bSanctionDeptUpdateMig = false;\r\n\t\t\t}\r\n\t\t\tthis._saveMigratedASData(migratedPayloadData);\r\n\t\t},\r\n\r\n\t\t_DateCoversion: function(value) {\r\n\t\t\t// var d = value.split(\".\")[0];\r\n\t\t\t// var m = value.split(\".\")[1];\r\n\t\t\t// var y = value.split(\".\")[2];\r\n\t\t\t// var FullDate = m + \".\" + d + \".\" + y;\r\n\t\t\t// return FullDate;\r\n\t\t\tvar dt2 = value.split(\".\");\r\n\t\t\tif (dt2[1] === \"01\" && dt2[0] === \"31\" || dt2[1] === \"03\" && dt2[0] === \"31\" || dt2[1] === \"05\" && dt2[0] === \"31\" || dt2[1] ===\r\n\t\t\t\t\"07\" && dt2[0] === \"31\" || dt2[1] === \"08\" && dt2[0] === \"31\" || dt2[1] === \"10\" && dt2[0] === \"31\" || dt2[1] ===\r\n\t\t\t\t\"12\" && dt2[0] === \"31\") {\r\n\t\t\t\tdt2[0] = \"01\";\r\n\t\t\t\tif (dt2[1] === \"12\") {\r\n\t\t\t\t\tdt2[1] = \"01\";\r\n\t\t\t\t\tdt2[2] = parseInt(dt2[2]) + 1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdt2[1] = parseInt(dt2[1]) + 1;\r\n\t\t\t\t}\r\n\t\t\t} else if (dt2[1] === \"04\" && dt2[0] === \"30\" || dt2[1] === \"06\" && dt2[0] === \"30\" || dt2[1] === \"09\" && dt2[0] === \"30\" || dt2[1] ===\r\n\t\t\t\t\"11\" && dt2[0] === \"30\") {\r\n\t\t\t\t/* old code -start*/\r\n\t\t\t\t// dt2[1] = \"01\";\r\n\t\t\t\t// dt2[2] = parseInt(dt2[2]) + 1;\r\n\t\t\t\t/* old code -end*/\r\n\t\t\t\t/*code changed on - cfms_ctm_npv -(23_01_23) -start*/\r\n\t\t\t\tdt2[0] = \"01\";\r\n\t\t\t\tdt2[1] = parseInt(dt2[1]) + 1;\r\n\t\t\t\t/*code changed on - cfms_ctm_npv -(23_01_23) -end*/\r\n\t\t\t} else if (dt2[1] === \"02\" && dt2[0] === \"28\" || dt2[1] === \"02\" && dt2[0] === \"29\") {\r\n\t\t\t\t/* old code -start*/\r\n\t\t\t\t// dt2[0] = \"01\";\r\n\t\t\t\t// dt2[1] = parseInt(dt2[1]) + 1;\r\n\t\t\t\t/* old code -end*/\r\n\t\t\t\t/*code changed on - cfms_ctm_npv -(23_01_23) -start*/\r\n\t\t\t\tdt2[0] = \"01\";\r\n\t\t\t\tdt2[1] = parseInt(dt2[1]) + 1;\r\n\t\t\t\t/*code changed on - cfms_ctm_npv -(23_01_23) -end*/\r\n\t\t\t} else if (dt2[1] === \"01\" && dt2[0] !== \"31\" || dt2[1] === \"03\" && dt2[0] !== \"31\" || dt2[1] === \"05\" && dt2[0] !== \"31\" || dt2[1] ===\r\n\t\t\t\t\"07\" && dt2[0] !== \"31\" || dt2[1] === \"08\" && dt2[0] !== \"31\" || dt2[1] === \"10\" && dt2[0] !== \"31\" || dt2[1] ===\r\n\t\t\t\t\"12\" && dt2[0] !== \"31\") {\r\n\t\t\t\tdt2[0] = parseInt(dt2[0]) + 1;\r\n\t\t\t} else if (dt2[1] === \"04\" && dt2[0] !== \"30\" || dt2[1] === \"06\" && dt2[0] !== \"30\" || dt2[1] === \"09\" && dt2[0] !== \"30\" || dt2[1] ===\r\n\t\t\t\t\"11\" && dt2[0] !== \"30\") {\r\n\t\t\t\tdt2[0] = parseInt(dt2[0]) + 1;\r\n\t\t\t} else if (dt2[1] === \"02\" && dt2[0] !== \"28\" || dt2[1] === \"02\" && dt2[0] !== \"29\") {\r\n\t\t\t\tdt2[0] = parseInt(dt2[0]) + 1;\r\n\t\t\t}\r\n\r\n\t\t\tfunction addZero(i) {\r\n\t\t\t\tif (i < 10) {\r\n\t\t\t\t\ti = \"0\" + i;\r\n\t\t\t\t}\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t\tif (dt2[1].toString().length === 1) {\r\n\t\t\t\tdt2[1] = addZero(dt2[1]);\r\n\t\t\t}\r\n\t\t\tif (dt2[0].toString().length === 1) {\r\n\t\t\t\tdt2[0] = addZero(dt2[0]);\r\n\t\t\t}\r\n\t\t\t/*eslint-disable */\r\n\t\t\t//eslint-disable-no-implicit-coercion\r\n\t\t\tvar dt = \"\" + dt2[2] + \"\" + dt2[1] + \"\" + dt2[0] + \"\";\r\n\t\t\tvar dt1 = \"\" + dt.toString().slice(4, 6) + \".\" + dt.toString().slice(6, 8) + \".\" + dt.toString().slice(0, 4) + \"\";\r\n\t\t\tvar Fulldate = \"\\/Date(\" + new Date(dt1).getTime() + \")\\/\";\r\n\t\t\treturn Fulldate;\r\n\t\t\t/*eslint-enable */\r\n\t\t},\r\n\t\t_saveMigratedASData: function(data) {\r\n\t\t\tvar that = this;\r\n\t\t\tthis.getOwnerComponent().getModel().create(\"/WrkMigCmmSet\", data, {\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tsuccess: function(oData, oResponse) {\r\n\t\t\t\t\tthat.payloadData = oData;\r\n\t\t\t\t\t$.sap.ASNUMBER = oData;\r\n\t\t\t\t\t// below code a\r\n\t\t\t\t\tif (that.bSanctionDeptUpdateMig) {\r\n\t\t\t\t\t\tthat.getModel().setProperty(that.byId(\"idExecDept\").getBindingContext().getPath() + \"/ExecutingDept\", \"\");\r\n\t\t\t\t\t\tthat.byId(\"idWorksSrcHoA\").getBinding(\"items\").refresh(true);\r\n\t\t\t\t\t\tthat.byId(\"idWorksHoA\").getBinding(\"items\").refresh(true);\r\n\t\t\t\t\t\t// that.getView().getElementBinding().refresh();\r\n\t\t\t\t\t\t// that.byId(\"idExecDept\").fireChange();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (that._getMigratedCreateFragControlById(\"fileUpload\").getSelected()) {\r\n\t\t\t\t\t\tif (!that._poUploadFragment) {\r\n\t\t\t\t\t\t\tthat._poUploadFragment = sap.ui.xmlfragment(\"com.goap.cfms.works.as.fragment.POUpload\", that);\r\n\t\t\t\t\t\t\tthat.getView().addDependent(that._poUploadFragment);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (that.getOwnerComponent().getModel(\"uploadedItem\") != undefined) {\r\n\t\t\t\t\t\t\tthat.getOwnerComponent().getModel(\"uploadedItem\").setData([]);\r\n\t\t\t\t\t\t\tthat.getOwnerComponent().getModel(\"uploadedItem\").refresh();\r\n\t\t\t\t\t\t\tthat.getOwnerComponent().getModel(\"uploadedItem\").updateBindings();\r\n\t\t\t\t\t\t\tsap.ui.getCore().byId(\"fileUpload\").setValue(\"\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthat._poUploadFragment.open();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat._EditMigratedASFrag.close();\r\n\t\t\t\t\t\tthat.getView().setBusy(false);\r\n\t\t\t\t\t\tthat.getRouter().navTo(\"Detail\", {\r\n\t\t\t\t\t\t\tobjectId: oData.Guid,\r\n\t\t\t\t\t\t\tstateId: \"C\"\r\n\t\t\t\t\t\t}, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terror: function(error) {\r\n\t\t\t\t\t// sap.m.MessageBox.error(\"\" + JSON.parse(error.responseText).error.message.value + \"\", {\r\n\t\t\t\t\t// \tactions: [sap.m.MessageBox.Action.OK],\r\n\t\t\t\t\t// \tonClose: function (sAction) {\r\n\t\t\t\t\t// \t\tif (sAction === \"OK\" || sAction === null) {}\r\n\t\t\t\t\t// \t}\r\n\t\t\t\t\t// });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tOnPressCloseFrag: function(oEvent) {\r\n\t\t\tvar that = this;\r\n\t\t\tthat._EditMigratedASFrag.close();\r\n\t\t\t// that._EditMigratedASFrag.destroy();\r\n\t\t},\r\n\r\n\t\tOnPressOkCloseFrag: function(oEvent) {\r\n\t\t\tvar that = this;\r\n\t\t\tthat._EditMigratedASFrag.close();\r\n\t\t\t// that._EditMigratedASFrag.destroy();\r\n\t\t},\r\n\r\n\t\tdateconv: function(value) {\r\n\t\t\tvar res = String(value).slice(4, 15);\r\n\t\t\tvar m = res.slice(0, 3);\r\n\t\t\tvar d = res.slice(4, 6);\r\n\t\t\tvar y = res.slice(7, 15);\r\n\t\t\tswitch (m) {\r\n\t\t\t\tcase \"Jan\":\r\n\t\t\t\t\tm = \"01\";\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"Feb\":\r\n\t\t\t\t\tm = \"02\";\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"Mar\":\r\n\t\t\t\t\tm = \"03\";\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"Apr\":\r\n\t\t\t\t\tm = \"04\";\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"May\":\r\n\t\t\t\t\tm = \"05\";\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"Jun\":\r\n\t\t\t\t\tm = \"06\";\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"Jul\":\r\n\t\t\t\t\tm = \"07\";\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"Aug\":\r\n\t\t\t\t\tm = \"08\";\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"Sep\":\r\n\t\t\t\t\tm = \"09\";\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"Oct\":\r\n\t\t\t\t\tm = \"10\";\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"Nov\":\r\n\t\t\t\t\tm = \"11\";\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"Dec\":\r\n\t\t\t\t\tm = \"12\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tvar frmdatemil = d + \".\" + m + \".\" + y;\r\n\t\t\treturn frmdatemil;\r\n\t\t},\r\n\r\n\t\t// Migration Code Ends\r\n\t\t/**\r\n\t\t * Binds the view to the object path. Makes sure that detail view displays\r\n\t\t * a busy indicator while data for the corresponding element binding is loaded.\r\n\t\t * @function\r\n\t\t * @param {string} sObjectPath path to the object to be bound to the view.\r\n\t\t * @param {guid} sObjectId is the guid of the view to bind\r\n\t\t * @private\r\n\t\t */\r\n\t\t_bindView: function(sObjectPath, sObjectId) {\r\n\t\t\tvar that = this,\r\n\t\t\t\toLocationModel = this.getModel(\"location\");\r\n\t\t\t// Local JSON model to set visibility of location \r\n\t\t\tvar oLocationModelData = {\r\n\t\t\t\tvDistrict: false,\r\n\t\t\t\tvMandal: false,\r\n\t\t\t\tvVillage: false,\r\n\t\t\t\tvLoksabha: false,\r\n\t\t\t\tvAssembly: false,\r\n\t\t\t\tbLoc: true,\r\n\t\t\t\tbConst: true\r\n\t\t\t};\r\n\t\t\tif (!oLocationModel) {\r\n\t\t\t\toLocationModel = new JSONModel(oLocationModelData);\r\n\t\t\t\tthis.setModel(oLocationModel, \"location\");\r\n\t\t\t} else {\r\n\t\t\t\toLocationModel.setProperty(\"/\", oLocationModelData);\r\n\t\t\t}\r\n\r\n\t\t\t// Set busy indicator during view binding\r\n\t\t\tvar oViewModel = this.getModel(\"detailView\");\r\n\t\t\tthis.getModel().invalidateEntry(this.getView().getBindingContext());\r\n\t\t\tthis.getView().bindElement({\r\n\t\t\t\tpath: sObjectPath,\r\n\t\t\t\tevents: {\r\n\t\t\t\t\tdataRequested: function() {\r\n\t\t\t\t\t\toViewModel.setProperty(\"/busy\", true);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdataReceived: function(oData) {\r\n\t\t\t\t\t\tthat.getModel().resetChanges();\r\n\t\t\t\t\t\t// oViewModel.setProperty(\"/busy\", false);\r\n\t\t\t\t\t\t// \tthat.getWorkFlowLogDetails({\r\n\t\t\t\t\t\t// \t\tApplicationId : \"AS\",\r\n\t\t\t\t\t\t// \t\tGuid : sObjectId\r\n\t\t\t\t\t\t// });\r\n\t\t\t\t\t\tvar oPromiseWorkFlowLog = new Promise(function(resolve1, reject1) {\r\n\t\t\t\t\t\t\tthat.getWorkFlowLogDetails({\r\n\t\t\t\t\t\t\t\tApplicationId: \"AS\",\r\n\t\t\t\t\t\t\t\tGuid: sObjectId\r\n\t\t\t\t\t\t\t}, resolve1, reject1);\r\n\t\t\t\t\t\t}.bind(that));\r\n\t\t\t\t\t\toPromiseWorkFlowLog.then(function() {\r\n\t\t\t\t\t\t\toViewModel.setProperty(\"/busy\", false);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\toViewModel.setProperty(\"/Notingstring\", \"\");\r\n\t\t\t\t\t\toViewModel.updateBindings();\r\n\t\t\t\t\t\tthat.subClassL01Value = that.getView().getBindingContext().getProperty(\"SubclassL01\");\r\n\t\t\t\t\t\tthat.byId(\"idSubClass01\").getBinding(\"suggestionItems\").refresh();\r\n\t\t\t\t\t\tthat.byId(\"idSubClass02\").getBinding(\"suggestionItems\").refresh();\r\n\t\t\t\t\t\tthat.byId(\"idSubClass03\").getBinding(\"suggestionItems\").refresh();\r\n\r\n\t\t\t\t\t\tthat.getView().getModel(\"detailView\").setProperty(\"/CategoryKey\", that.getView().getBindingContext().getProperty(\"Category\"));\r\n\t\t\t\t\t\tthat.getView().getModel(\"detailView\").setProperty(\"/ExecutingDeptKey\", that.getView().getBindingContext().getProperty(\r\n\t\t\t\t\t\t\t\"ExecutingDept\"));\r\n\t\t\t\t\t\tthat.getView().getModel(\"detailView\").setProperty(\"/SanctioningDeptKey\", that.getView().getBindingContext().getProperty(\r\n\t\t\t\t\t\t\t\"InitiatinDept\"));\r\n\r\n\t\t\t\t\t\tthat.getUserFeedList();\r\n\t\t\t\t\t\tthat._setObjectSectionVisibility();\r\n\t\t\t\t\t\tthat._setLocationListDisplay();\r\n\t\t\t\t\t\tif (that._clearValueStates) {\r\n\t\t\t\t\t\t\tthat._clearValueStates(\"oControlModel\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthat._switchControlModel();\r\n\t\t\t\t\t\tthat._setAmendPageTitle(that.getModel(\"detailView\").getProperty(\"/stateId\"));\r\n\t\t\t\t\t\t//set the Object  Header Title\r\n\t\t\t\t\t\tthat.setPageHeaderTitle(that.getModel(\"detailView\").getProperty(\"/stateId\"));\r\n\t\t\t\t\t\t//\tthat._bindTreeTableRows();\r\n\t\t\t\t\t\tthat.byId(\"idWorksHoA\").updateAggregation(\"items\");\r\n\t\t\t\t\t\tthat._identifyHoaDdoFilters();\r\n\t\t\t\t\t\tthat._setHoaDdoFilters();\r\n\t\t\t\t\t\t//Bind Position\r\n\t\t\t\t\t\tthat._updatePositionBinding();\r\n\t\t\t\t\t\t//Clear MainworkNature\r\n\t\t\t\t\t\tthat._initControlValue();\r\n\t\t\t\t\t\t//Dynamic BindingLocal Class and catory\r\n\t\t\t\t\t\tthat._bindSelectControl();\r\n\t\t\t\t\t\t//Dynamic enable of Executing Dept if No TS is create with this AS\r\n\t\t\t\t\t\tthat._editableExectDepartment();\r\n\r\n\t\t\t\t\t\tvar aAttachFilters = new Filter({\r\n\t\t\t\t\t\t\tfilters: [\r\n\t\t\t\t\t\t\t\tnew Filter(\"DocType\", \"EQ\", 'ZWAS')\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\tand: true\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthat.byId(\"idUploadCollection\").getBinding(\"items\").filter(aAttachFilters);\r\n\r\n\t\t\t\t\t\tvar documentPosition;\r\n\t\t\t\t\t\tif (that.getView().getBindingContext().getProperty(\"Udf1\")) {\r\n\t\t\t\t\t\t\tdocumentPosition = that.getView().getBindingContext().getProperty(\"Udf1\");\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tdocumentPosition = this.getModel(\"appView\").getProperty(\"/position\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar aFilters = [];\r\n\t\t\t\t\t\tvar oFilter = new Filter(\r\n\t\t\t\t\t\t\t\"UserPosition\",\r\n\t\t\t\t\t\t\tsap.ui.model.FilterOperator.Contains, documentPosition\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\taFilters.push(oFilter);\r\n\t\t\t\t\t\t//\t\t\t            if (oData.getParameters().data.MigrationInd) {\r\n\t\t\t\t\t\tvar oFilterGuid = new Filter(\r\n\t\t\t\t\t\t\t\"ASGuid\",\r\n\t\t\t\t\t\t\tsap.ui.model.FilterOperator.EQ, oData.getParameters().data.MigrationInd === false ? \"00000000-0000-0000-0000-000000000000\" :\r\n\t\t\t\t\t\t\tsObjectId\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\taFilters.push(oFilterGuid);\r\n\t\t\t\t\t\t//\t\t\t            }\r\n\t\t\t\t\t\tthat.getView().byId(\"idInitDept\").getBinding(\"items\").filter(aFilters);\r\n\t\t\t\t\t\t//\tthat.getView().byId(\"idInitDept\").getBinding(\"items\").refresh();\r\n\r\n\t\t\t\t\t\toViewModel.setProperty(\"/busy\", false);\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * Start of Change on 27.02.2023\r\n\t\t\t\t\t\t * by Lahari\r\n\t\t\t\t\t\t **/\r\n\t\t\t\t\t\tif (!oData.getParameters().data.MigrationInd) {\r\n\t\t\t\t\t\t\tthat.getView().byId(\"idDDOMap_work\").setVisible(true);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthat.getView().byId(\"idDDOMap_work\").setVisible(false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis._bindViewDone();\r\n\t\t\tvar oChecklistTableBinding = this.byId(\"idChecklistTable\").getBinding(\"items\");\r\n\t\t\tvar sFlmFilter = sObjectPath.substring(20, sObjectPath.length - 2);\r\n\t\t\toChecklistTableBinding.filter([new Filter(\"ApplicationId\", FilterOperator.EQ, \"ZWAS\"), new Filter(\"FlmGuid\", FilterOperator.EQ,\r\n\t\t\t\tsFlmFilter)]);\r\n\t\t\t//\t\tthis.getModel().refresh(true);\r\n\r\n\t\t},\r\n\t\t/**\r\n\t\t * Internal method to return the name of the field\r\n\t\t * @param {String} sFName Name of the specific field\r\n\t\t * @returns {String} Name of the field\r\n\t\t */\r\n\t\t_getFieldName: function(sFName) {\r\n\t\t\tvar sFieldName = \"\";\r\n\t\t\tif (sFName === \"District\" || sFName === \"Mandal\" || sFName === \"Village\") {\r\n\t\t\t\tsFieldName = \"LocationDetails\";\r\n\t\t\t} else if (sFName === \"Constituency\") {\r\n\t\t\t\tsFieldName = \"AssemblyDetails\";\r\n\t\t\t} else {\r\n\t\t\t\tsFieldName = \"ConstituencyDetails\";\r\n\t\t\t}\r\n\t\t\treturn sFieldName;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Internal method to convert tokens to string and return the same with separators\r\n\t\t * @param {Event} oEvent On recieving a token in the controller\r\n\t\t * @returns {String} Value of the token as a string\r\n\t\t */\r\n\t\t_getTokensAsString: function(oEvent) {\r\n\t\t\tvar aTokenset = [],\r\n\t\t\t\tbRemovetokenAction = false,\r\n\t\t\t\tsRemoveTokenKey = \"\",\r\n\t\t\t\taTokens = oEvent.getSource().getTokens(),\r\n\t\t\t\tsCustomeControlText = oEvent.getSource().getCustomData()[0].getValue();\r\n\t\t\tif (aTokens.length > 0) {\r\n\t\t\t\tfor (var i = 0; i < aTokens.length; i++) {\r\n\t\t\t\t\tif (oEvent.getParameter(\"type\") === \"removed\") {\r\n\t\t\t\t\t\tbRemovetokenAction = true;\r\n\t\t\t\t\t\tsRemoveTokenKey = oEvent.getParameter(\"removedTokens\")[0].getKey();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (bRemovetokenAction) {\r\n\t\t\t\t\t\tif (aTokens[i].getKey() !== sRemoveTokenKey) {\r\n\t\t\t\t\t\t\taTokenset.push(aTokens[i].getKey());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\taTokenset.push(aTokens[i].getKey());\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar sTokenASString = aTokenset.join(\"$\");\r\n\t\t\tif (sTokenASString.indexOf(\"#\") === -1) {\r\n\t\t\t\tif (sCustomeControlText === \"District\") {\r\n\t\t\t\t\tsTokenASString = \"D\" + \"#\" + sTokenASString;\r\n\t\t\t\t} else if (sCustomeControlText === \"Mandal\") {\r\n\t\t\t\t\tsTokenASString = \"M\" + \"#\" + sTokenASString;\r\n\t\t\t\t} else if (sCustomeControlText === \"Village\") {\r\n\t\t\t\t\tsTokenASString = \"V\" + \"#\" + sTokenASString;\r\n\t\t\t\t} else if (sCustomeControlText === \"LokSabha\") {\r\n\t\t\t\t\tsTokenASString = \"L\" + \"#\" + sTokenASString;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsTokenASString = \"A\" + \"#\" + sTokenASString;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn sTokenASString;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Internal Method to set the Call Property for a change in the DDO table\r\n\t\t * @param {EventSource} oSource Source of the event for Property Call during saving\r\n\t\t */\r\n\t\t_setPropertyCall: function(oSource, sType, oBusyControl) {\r\n\t\t\tvar that = this,\r\n\t\t\t\toBindingContext = oSource.getBindingContext(),\r\n\t\t\t\tbNewItem = false,\r\n\t\t\t\toDetailViewModelData = this.getModel(\"detailView\").getProperty(\"/\"),\r\n\t\t\t\tsAction = \"\",\r\n\t\t\t\toHoaPayload,\r\n\t\t\t\tsUpdPath,\r\n\t\t\t\tsBindingPath = oSource.data(\"bindPath\"),\r\n\t\t\t\toHoaGuid = oBindingContext.getProperty(\"HoaGuid\"),\r\n\t\t\t\toLockTimestamp = oBindingContext.getProperty(\"LockTimestamp\");\r\n\r\n\t\t\tif (!oHoaGuid) {\r\n\t\t\t\tif (oDetailViewModelData.SubmitBtnVisibility === \"X\") {\r\n\t\t\t\t\tsAction = sType === \"TGT\" ? \"INSRI\" : \"SNSRI\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsAction = \"APPR_UPDT\";\r\n\t\t\t\t}\r\n\t\t\t\tbNewItem = true;\r\n\t\t\t\toHoaGuid = \"00000000-0000-0000-0000-000000000000\";\r\n\t\t\t\toLockTimestamp = \"\\/Date(\" + (new Date()).getTime() + \")\\/\";\r\n\t\t\t} else {\r\n\t\t\t\tif (oDetailViewModelData.SubmitBtnVisibility === \"X\") {\r\n\t\t\t\t\tsAction = sType === \"TGT\" ? \"UPDTI\" : \"UPDTS\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsAction = \"APPR_UPDT\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (sType === \"TGT\") {\r\n\t\t\t\toHoaPayload = {\r\n\t\t\t\t\tAction: sAction,\r\n\t\t\t\t\tGuid: oBindingContext.getProperty(\"Guid\"),\r\n\t\t\t\t\tHoaGuid: oHoaGuid,\r\n\t\t\t\t\tLockTimestamp: oLockTimestamp,\r\n\t\t\t\t\tItemNo: (oBindingContext.getProperty(\"ItemNo\") || \"0000\"),\r\n\t\t\t\t\tDdo: (oBindingContext.getProperty(\"Ddo\") || \"\"),\r\n\t\t\t\t\tDdoDes: (oBindingContext.getProperty(\"DdoDes\" || \"\")),\r\n\t\t\t\t\tHoa: (oBindingContext.getProperty(\"Hoa\") || \"\"),\r\n\t\t\t\t\tZshare: (oBindingContext.getProperty(\"Zshare\") || \"0\"),\r\n\t\t\t\t\tFundAgencyDesc: (oBindingContext.getProperty(\"FundAgencyDesc\") || \"\"),\r\n\t\t\t\t\tRefNumber: (oBindingContext.getProperty(\"RefNumber\") || \"0\"),\r\n\t\t\t\t\tValidFrom: (oBindingContext.getProperty(\"ValidFrom\") || new Date()),\r\n\t\t\t\t\tValidTo: (oBindingContext.getProperty(\"ValidTo\") || new Date(\"12/31/9999\"))\r\n\t\t\t\t};\r\n\t\t\t\tsUpdPath = this.getModel().createKey(\"WrkHOASet\", {\r\n\t\t\t\t\tGuid: oBindingContext.getProperty(\"Guid\"),\r\n\t\t\t\t\tHoaGuid: oHoaPayload.HoaGuid\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\toHoaPayload = {\r\n\t\t\t\t\tAction: sAction,\r\n\t\t\t\t\tGuid: oBindingContext.getProperty(\"Guid\"),\r\n\t\t\t\t\tHoaGuid: oHoaGuid,\r\n\t\t\t\t\tLockTimestamp: oLockTimestamp,\r\n\t\t\t\t\tItemNo: (oBindingContext.getProperty(\"ItemNo\") || \"0000\"),\r\n\t\t\t\t\tSourceDdo: (oBindingContext.getProperty(\"SourceDdo\") || \"\"),\r\n\t\t\t\t\tSourceHoa: (oBindingContext.getProperty(\"SourceHoa\") || \"\"),\r\n\t\t\t\t\tSourceZShare: (oBindingContext.getProperty(\"SourceZShare\") || \"0\"),\r\n\t\t\t\t\tFundAgencyDesc: (oBindingContext.getProperty(\"FundAgencyDesc\") || \"\"),\r\n\t\t\t\t\tPicsCode: (oBindingContext.getProperty(\"PicsCode\") || \"\"),\r\n\t\t\t\t\tSourceValidFrom: (oBindingContext.getProperty(\"ValidFrom\") || new Date()),\r\n\t\t\t\t\tSourceValidTo: (oBindingContext.getProperty(\"ValidTo\") || new Date(\"12/31/9999\"))\r\n\t\t\t\t};\r\n\t\t\t\tsUpdPath = this.getModel().createKey(\"WrkDcwHOADDOSet\", {\r\n\t\t\t\t\tGuid: oBindingContext.getProperty(\"Guid\"),\r\n\t\t\t\t\tHoaGuid: oHoaPayload.HoaGuid\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (bNewItem) {\r\n\t\t\t\tsUpdPath = sType === \"TGT\" ? \"/WrkHOASet\" : \"/WrkDcwHOADDOSet\";\r\n\t\t\t\tthis.getModel().create(sUpdPath, oHoaPayload, {\r\n\t\t\t\t\tsuccess: function(oData, oResponse) {\r\n\t\t\t\t\t\tthat.byId(\"idWorksHoA\").getBinding(\"items\").refresh();\r\n\t\t\t\t\t\tthat.byId(\"idWorksSrcHoA\").getBinding(\"items\").refresh();\r\n\t\t\t\t\t\tif (oBusyControl) {\r\n\t\t\t\t\t\t\toBusyControl.setBusy(false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\terror: function(oError) {\r\n\t\t\t\t\t\tif (oBusyControl) {\r\n\t\t\t\t\t\t\toBusyControl.setBusy(false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\trefreshAfterChange: false\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tsUpdPath = \"/\" + sUpdPath;\r\n\t\t\t\tthis.getModel().update(sUpdPath, oHoaPayload, {\r\n\t\t\t\t\tsuccess: function(oData, oResponse) {\r\n\t\t\t\t\t\tif (sBindingPath === \"SourceHoa\" || sBindingPath === \"Hoa\") {\r\n\t\t\t\t\t\t\tif (sBindingPath === \"SourceHoa\") {\r\n\t\t\t\t\t\t\t\tthat.byId(\"idWorksSrcHoA\").getBinding(\"items\").refresh();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthat.byId(\"idWorksHoA\").getBinding(\"items\").refresh();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (oBusyControl) {\r\n\t\t\t\t\t\t\toBusyControl.setBusy(false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\terror: function(oError) {\r\n\t\t\t\t\t\tif (oBusyControl) {\r\n\t\t\t\t\t\t\toBusyControl.setBusy(false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\trefreshAfterChange: false\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Internal Method to create a new Column List Item for the DDO Table\r\n\t\t * @private\r\n\t\t * @returns {Object} Template for items on the list\r\n\t\t */\r\n\t\t_returnListItemTemplate: function() {\r\n\t\t\tvar oListItemTemplate, that = this,\r\n\t\t\t\toDdo = new sap.m.Input({\r\n\t\t\t\t\tchange: that.onDdoChange.bind(that),\r\n\t\t\t\t\tplaceholder: \"{i18n>detail.ops.panel.content.table.column.text.PDDO}\",\r\n\t\t\t\t\tmaxLength: \"{oControlModel>/Ddo/maxLength}\",\r\n\t\t\t\t\tvalue: \"{DdoDes}\",\r\n\t\t\t\t\tshowValueHelp: true,\r\n\t\t\t\t\tvalueHelpOnly: true,\r\n\t\t\t\t\tvalueHelpRequest: that.handleDDOValueHelp.bind(that),\r\n\t\t\t\t\ttype: \"{oControlModel>/Ddo/type}\",\r\n\t\t\t\t\tvalueState: \"{oControlModel>/Ddo/valueState}\",\r\n\t\t\t\t\tvalueStateText: \"{oControlModel>/Ddo/valueStateText}\",\r\n\t\t\t\t\teditable: \"{= ${oControlModel>/Ddo/display} && ${detailView>/bEditable} ? true: false}\",\r\n\t\t\t\t\ttooltip: \"{Ddo}\"\r\n\t\t\t\t});\r\n\t\t\toDdo.data(\"bindPath\", \"Ddo\");\r\n\t\t\tvar oHoa = new sap.m.Input({\r\n\t\t\t\tchange: that.onDdoChange.bind(that),\r\n\t\t\t\tplaceholder: \"{i18n>detail.ops.panel.content.table.column.text.PHeadOfAccount}\",\r\n\t\t\t\tmaxLength: \"{oControlModel>/Hoa/maxLength}\",\r\n\t\t\t\tvalue: \"{Hoa}\",\r\n\t\t\t\tshowValueHelp: true,\r\n\t\t\t\tvalueHelpOnly: true,\r\n\t\t\t\tvalueHelpRequest: that.handleHoaValueHelp.bind(that),\r\n\t\t\t\ttype: \"{oControlModel>/Hoa/type}\",\r\n\t\t\t\tvalueState: \"{= ${oControlModel>/Hoa/valueState}}\",\r\n\t\t\t\tvalueStateText: \"{oControlModel>/Hoa/valueStateText}\",\r\n\t\t\t\teditable: \"{= ${oControlModel>/Hoa/display} && ${detailView>/bEditable} ? true: false}\",\r\n\t\t\t\ttooltip: \"{Hoa}\"\r\n\t\t\t});\r\n\t\t\toHoa.data(\"bindPath\", \"Hoa\");\r\n\t\t\tvar oValidFrom = new sap.m.DatePicker({\r\n\t\t\t\tchange: that.onDdoChange.bind(that),\r\n\t\t\t\tvalue: \"{path:'ValidFrom', type:'sap.ui.model.type.Date', formatOptions: { style: 'medium', strictParsing: true, UTC: true}}\",\r\n\t\t\t\teditable: \"{detailView>/bEditable}\"\r\n\t\t\t});\r\n\t\t\toValidFrom.data(\"bindPath\", \"ValidFrom\");\r\n\t\t\tvar oValidTo = new sap.m.DatePicker({\r\n\t\t\t\tchange: that.onDdoChange.bind(that),\r\n\t\t\t\tvalue: \"{path:'ValidTo', type:'sap.ui.model.type.Date', formatOptions: { style: 'medium', strictParsing: true, UTC: true}}\",\r\n\t\t\t\teditable: \"{detailView>/bEditable}\"\r\n\t\t\t});\r\n\t\t\toValidTo.data(\"bindPath\", \"ValidTo\");\r\n\r\n\t\t\toListItemTemplate = new sap.m.ColumnListItem({\r\n\t\t\t\tcells: [\r\n\t\t\t\t\t// add created controls to item\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttype: \"Text\",\r\n\t\t\t\t\t\tvalue: \"{HoaGuid}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Input({\r\n\t\t\t\t\t\tvalue: \"{ItemNo}\",\r\n\t\t\t\t\t\teditable: false,\r\n\t\t\t\t\t\ttextDirection: \"RTL\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\toDdo,\r\n\t\t\t\t\toHoa,\r\n\t\t\t\t\tnew sap.m.Input({\r\n\t\t\t\t\t\tchange: that.onDdoShareChange.bind(that),\r\n\t\t\t\t\t\tplaceholder: \"{i18n>detail.ops.panel.content.table.column.text.PShare}\",\r\n\t\t\t\t\t\tvalue: \"{Zshare}\",\r\n\t\t\t\t\t\tenabled: \"{detailView>/bEditable}\",\r\n\t\t\t\t\t\teditable: \"{detailView>/bEditable}\",\r\n\t\t\t\t\t\ttextDirection: \"LTR\",\r\n\t\t\t\t\t\ttextAlign: \"Right\"\r\n\t\t\t\t\t}),\r\n\r\n\t\t\t\t\tnew sap.m.Input({\r\n\t\t\t\t\t\tchange: that.onDdoChange.bind(that),\r\n\t\t\t\t\t\tvalue: \"{RefNumber}\",\r\n\t\t\t\t\t\tenabled: \"{detailView>/bEditable}\",\r\n\t\t\t\t\t\teditable: \"{detailView>/bEditable}\",\r\n\t\t\t\t\t\ttextDirection: \"LTR\",\r\n\t\t\t\t\t\tvisible: false\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Input({\r\n\t\t\t\t\t\tvalue: \"{FundAgencyDesc}\",\r\n\t\t\t\t\t\teditable: false,\r\n\t\t\t\t\t\ttooltip: \"{FundAgencyDesc}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\toValidFrom,\r\n\t\t\t\t\toValidTo,\r\n\t\t\t\t\tnew sap.m.Button({\r\n\t\t\t\t\t\ticon: \"sap-icon://delete\",\r\n\t\t\t\t\t\ttype: \"Transparent\",\r\n\t\t\t\t\t\tpress: that.onDeleteDDO.bind(that),\r\n\t\t\t\t\t\tvisible: \"{= ${detailView>/bEditable} ? true: false}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"\",\r\n\t\t\t\t\t\tvisible: false,\r\n\t\t\t\t\t\ttextDirection: \"LTR\"\r\n\t\t\t\t\t})\r\n\t\t\t\t]\r\n\t\t\t});\r\n\t\t\treturn oListItemTemplate;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Internal Method to create a new Column List Item for the DDO Table\r\n\t\t * @private\r\n\t\t * @returns {Object} Template for items on the list\r\n\t\t */\r\n\t\t_returnSrcListItemTemplate: function() {\r\n\t\t\tvar oListItemTemplate,\r\n\t\t\t\tthat = this;\r\n\t\t\t//Setting Control for DDO VH\r\n\t\t\tvar oSrcDdo = new sap.m.Input({\r\n\t\t\t\tchange: that.onSrcDdoChange.bind(that),\r\n\t\t\t\tplaceholder: \"{i18n>detail.ops.panel.content.table.column.text.PsrcDDO}\",\r\n\t\t\t\tmaxLength: \"{oControlModel>/SourceDdo/maxLength}\",\r\n\t\t\t\tvalue: \"{DdoDes}\",\r\n\t\t\t\tshowValueHelp: true,\r\n\t\t\t\tvalueHelpOnly: true,\r\n\t\t\t\tvalueHelpRequest: that.handleDDOValueHelp.bind(that),\r\n\t\t\t\ttype: \"{oControlModel>/Ddo/type}\",\r\n\t\t\t\tvalueState: \"{oControlModel>/SourceDdo/valueState}\",\r\n\t\t\t\tvalueStateText: \"{oControlModel>/SourceDdo/valueStateText}\",\r\n\t\t\t\teditable: \"{= ${oControlModel>/SourceDdo/display} && ${detailView>/bEditable} && (${detailView>/SubmitBtnVisibility} === 'X' ? true: false)}\",\r\n\t\t\t\ttooltip: \"{SourceDdo}\"\r\n\t\t\t});\r\n\t\t\toSrcDdo.data(\"bindPath\", \"SourceDdo\");\r\n\t\t\t//Setting Control for HOA VH\r\n\t\t\tvar oSrcHoa = new sap.m.Input({\r\n\t\t\t\tchange: that.onSrcDdoChange.bind(that),\r\n\t\t\t\tplaceholder: \"{i18n>detail.ops.panel.content.table.column.text.PsrcHOA}\",\r\n\t\t\t\tmaxLength: \"{oControlModel>/SourceHoa/maxLength}\",\r\n\t\t\t\tvalue: \"{SourceHoa}\",\r\n\t\t\t\tshowValueHelp: true,\r\n\t\t\t\tvalueHelpOnly: true,\r\n\t\t\t\tvalueHelpRequest: that.handleHoaValueHelp.bind(that),\r\n\t\t\t\ttype: \"{oControlModel>/SourceHoa/type}\",\r\n\t\t\t\tvalueState: \"{= ${oControlModel>/SourceHoa/valueState}}\",\r\n\t\t\t\tvalueStateText: \"{oControlModel>/SourceHoa/valueStateText}\",\r\n\t\t\t\teditable: \"{= ${oControlModel>/SourceHoa/display} && ${detailView>/bEditable} && (${detailView>/SubmitBtnVisibility} === 'X' ? true: false)}\",\r\n\t\t\t\ttooltip: \"{SourceHoa}\"\r\n\t\t\t});\r\n\t\t\toSrcHoa.data(\"bindPath\", \"SourceHoa\");\r\n\r\n\t\t\t//Setting Control for Pic Code VH\r\n\t\t\t// var oPicsCode = new sap.m.Input({\r\n\t\t\t// \tchange:that.onSrcDdoChange.bind(that),\r\n\t\t\t// \tvalue:\"{PicsCode}\",\r\n\t\t\t// \trequired:\"{= ${oControlModel>/PicsCode/mandatory}}\",\r\n\t\t\t// \tshowValueHelp:true,\r\n\t\t\t// \tvalueHelpRequest:that.handlePicCodeValueHelp.bind(that),\r\n\t\t\t// \teditable:\"{= ${oControlModel>/PicsCode/display} && ${detailView>/bEditable} && (${detailView>/SubmitBtnVisibility} === 'X' ? true: false) && (${PicsCode} !== '' ? true : false)}\",\r\n\t\t\t// \tvalueState:\"{oControlModel>/PicsCode/valueState}\",\r\n\t\t\t// \tvalueStateText:\"{oControlModel>/PicsCode/valueStateText}\" ,\r\n\t\t\t// \tmaxLength:\"{oControlModel>/PicsCode/maxLength}\" ,\r\n\t\t\t// \ttype:\"{oControlModel>/PicsCode/type}\",\r\n\t\t\t// \ttooltip:\"{PicsCode}\"\r\n\t\t\t// });\r\n\t\t\t// oPicsCode.data(\"bindPath\", \"PicCode\");\r\n\r\n\t\t\t//Setting Control for Date\r\n\t\t\tvar oSrcValidFrom = new sap.m.DatePicker({\r\n\t\t\t\tchange: that.onSrcDdoChange.bind(that),\r\n\t\t\t\tplaceholder: \"{i18n>detail.ops.panel.content.table.column.text.PvalidFrom}\",\r\n\t\t\t\tvalue: \"{path:'SourceValidFrom', type:'sap.ui.model.type.Date', formatOptions: { style: 'medium', strictParsing: true, UTC: true}}\",\r\n\t\t\t\teditable: \"{detailView>/bEditable}\"\r\n\t\t\t});\r\n\t\t\toSrcValidFrom.data(\"bindPath\", \"SourceValidFrom\");\r\n\r\n\t\t\t//Setting Control for Date\r\n\t\t\tvar oSrcValidTo = new sap.m.DatePicker({\r\n\t\t\t\tchange: that.onSrcDdoChange.bind(that),\r\n\t\t\t\tplaceholder: \"{i18n>detail.ops.panel.content.table.column.text.PvalidTo}\",\r\n\t\t\t\tvalue: \"{path:'SourceValidTo', type:'sap.ui.model.type.Date', formatOptions: { style: 'medium', strictParsing: true, UTC: true}}\",\r\n\t\t\t\teditable: \"{detailView>/bEditable}\"\r\n\t\t\t});\r\n\t\t\toSrcValidTo.data(\"bindPath\", \"SourceValidTo\");\r\n\r\n\t\t\toListItemTemplate = new sap.m.ColumnListItem({\r\n\t\t\t\tcells: [\r\n\t\t\t\t\t// add created controls to item\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttype: \"Text\",\r\n\t\t\t\t\t\tvalue: \"{HoaGuid}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Input({\r\n\t\t\t\t\t\tvalue: \"{ItemNo}\",\r\n\t\t\t\t\t\teditable: false,\r\n\t\t\t\t\t\ttextDirection: \"RTL\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\toSrcDdo,\r\n\t\t\t\t\toSrcHoa,\r\n\t\t\t\t\tnew sap.m.Input({\r\n\t\t\t\t\t\tvalue: \"{FundAgencyDesc}\",\r\n\t\t\t\t\t\teditable: false,\r\n\t\t\t\t\t\ttooltip: \"{FundAgencyDesc}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\t// new sap.m.Input({\r\n\t\t\t\t\t// \tchange:that.onDdoShareChange.bind(that),\r\n\t\t\t\t\t// \tvalue:\"{SourceZshare}\",\r\n\t\t\t\t\t// \tenabled:\"{detailView>/bEditable}\",\r\n\t\t\t\t\t// \teditable:\"{detailView>/bEditable}\", \r\n\t\t\t\t\t// \ttextDirection:\"RTL\"\r\n\t\t\t\t\t// }),\r\n\t\t\t\t\t// oPicsCode,\r\n\t\t\t\t\toSrcValidFrom,\r\n\t\t\t\t\toSrcValidTo,\r\n\t\t\t\t\tnew sap.m.Button({\r\n\t\t\t\t\t\ticon: \"sap-icon://delete\",\r\n\t\t\t\t\t\ttype: \"Transparent\",\r\n\t\t\t\t\t\tpress: that.onDeleteDDO.bind(that),\r\n\t\t\t\t\t\tvisible: \"{= ${detailView>/bEditable} && (${detailView>/SubmitBtnVisibility} === 'X' ? true: false)}\"\r\n\t\t\t\t\t})\r\n\t\t\t\t]\r\n\t\t\t});\r\n\t\t\treturn oListItemTemplate;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Function for calling _bindSuggestionItems function for binding suggestion Items\r\n\t\t * @param {object} oInputSource \r\n\t\t */\r\n\t\t_callingBindingParams: function(oInputSource) {\r\n\t\t\tvar oEntityInfo = oInputSource.data(\"entityInfo\"),\r\n\t\t\t\toParams = {\r\n\t\t\t\t\toInputSource: oInputSource,\r\n\t\t\t\t\tsProperty: oInputSource.data(\"text\"),\r\n\t\t\t\t\tsKey: oInputSource.data(\"key\"),\r\n\t\t\t\t\toVHData: this._getVHEntityDetail(oEntityInfo)\r\n\t\t\t\t};\r\n\t\t\tthis._bindSuggestionItems(oParams, function() {\r\n\t\t\t\tvar oObject = oInputSource.getBindingContext().getObject(),\r\n\t\t\t\t\tsPropertyKey = oObject[oInputSource.data(\"bindPath\")];\r\n\r\n\t\t\t\t//edit mode AS Document go to estimate come back subClassL01 property value changing \r\n\t\t\t\t//so we did some patch up\r\n\t\t\t\tif (oInputSource.data(\"bindPath\") === \"SubclassL01\") {\r\n\t\t\t\t\toInputSource.setSelectedKey(this.subClassL01Value);\r\n\t\t\t\t} else {\r\n\t\t\t\t\toInputSource.setSelectedKey(sPropertyKey);\r\n\t\t\t\t}\r\n\t\t\t\t// oInputSource.setSelectedKey(sPropertyKey);\r\n\t\t\t\tthis.byId(\"idCode\").focus();\r\n\t\t\t\toInputSource.getBinding(\"suggestionItems\").attachEvent(\"dataReceived\", this.onSuggestDataReceived.bind(this));\r\n\t\t\t}.bind(this));\r\n\t\t\tthis.oHandleDDOMappingUpdateStarted();\r\n\t\t},\r\n\t\t/**\r\n\t\t * Internal method for confirming delete action\r\n\t\t * @param {sap.ui.base.Event} oParams \r\n\t\t */\r\n\t\t_onDeleteConfirmation: function(oParams) {\r\n\t\t\tvar oSource = oParams.source,\r\n\t\t\t\toBindingContext = oSource.getBindingContext(),\r\n\t\t\t\tsPath = oBindingContext.getPath();\r\n\t\t\tif (oParams.guid) {\r\n\t\t\t\tvar oDeleteItem = new Promise(function(resolve, reject) {\r\n\t\t\t\t\tthis.getOwnerComponent().oDraft.whenDeleteLine({\r\n\t\t\t\t\t\tpath: sPath,\r\n\t\t\t\t\t\tbusyControl: this.getView(),\r\n\t\t\t\t\t\turlParameters: {\r\n\t\t\t\t\t\t\tAction: oParams.action\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, resolve, reject);\r\n\t\t\t\t}.bind(this));\r\n\t\t\t\toDeleteItem.then(function(oResult) {\r\n\t\t\t\t\tthis.getModel().refresh(true);\r\n\t\t\t\t\t//\tthis.getView().getElementBinding().refresh(true);\r\n\t\t\t\t\tMessageToast.show(this.getResourceBundle().getText(\"detail.message.delete.success\"));\r\n\t\t\t\t}.bind(this));\r\n\t\t\t} else {\r\n\t\t\t\tvar oItem = oSource.getParent(),\r\n\t\t\t\t\toTable = oItem.getParent();\r\n\t\t\t\toTable.removeItem(oItem);\r\n\t\t\t\tMessageToast.show(this.getResourceBundle().getText(\"detail.message.delete.success\"));\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Private function to make location list display button editable\r\n\t\t */\r\n\t\t_setLocationListDisplay: function() {\r\n\t\t\tvar oLocationModel = this.getModel(\"location\"),\r\n\t\t\t\toBindingContext = this.getView().getBindingContext(),\r\n\t\t\t\tlocDetailSX = oBindingContext.getProperty(\"LocationDetailsx\"),\r\n\t\t\t\tlocConstDetailSX = oBindingContext.getProperty(\"ConstituencyDetailsx\");\r\n\t\t\tif (locDetailSX === \"D\") {\r\n\t\t\t\toLocationModel.setProperty(\"/vDistrict\", true);\r\n\t\t\t\toLocationModel.setProperty(\"/bLoc\", true);\r\n\t\t\t} else if (locDetailSX === \"M\") {\r\n\t\t\t\toLocationModel.setProperty(\"/vMandal\", true);\r\n\t\t\t\toLocationModel.setProperty(\"/bLoc\", true);\r\n\t\t\t} else if (locDetailSX === \"V\") {\r\n\t\t\t\toLocationModel.setProperty(\"/vVillage\", true);\r\n\t\t\t\toLocationModel.setProperty(\"/bLoc\", true);\r\n\t\t\t} else {\r\n\t\t\t\toLocationModel.setProperty(\"/vVillage\", false);\r\n\t\t\t\toLocationModel.setProperty(\"/vMandal\", false);\r\n\t\t\t\toLocationModel.setProperty(\"/vDistrict\", false);\r\n\t\t\t\toLocationModel.setProperty(\"/bLoc\", false);\r\n\t\t\t}\r\n\t\t\tif (locConstDetailSX === \"L\") {\r\n\t\t\t\toLocationModel.setProperty(\"/vLoksabha\", true);\r\n\t\t\t\toLocationModel.setProperty(\"/bConst\", true);\r\n\t\t\t} else if (locConstDetailSX === \"A\") {\r\n\t\t\t\toLocationModel.setProperty(\"/vAssembly\", true);\r\n\t\t\t\toLocationModel.setProperty(\"/bConst\", true);\r\n\t\t\t} else {\r\n\t\t\t\toLocationModel.setProperty(\"/vAssembly\", false);\r\n\t\t\t\toLocationModel.setProperty(\"/vLoksabha\", false);\r\n\t\t\t\toLocationModel.setProperty(\"/bConst\", false);\r\n\t\t\t}\r\n\t\t\toLocationModel.updateBindings();\r\n\t\t},\r\n\t\t/**\r\n\t\t * Internal function for change in the Detail View binding\r\n\t\t */\r\n\t\t_onBindingChange: function() {\r\n\t\t\tvar oView = this.getView(),\r\n\t\t\t\toElementBinding = oView.getElementBinding();\r\n\t\t\t// No data for the binding\r\n\t\t\tif (!oElementBinding.getBoundContext()) {\r\n\t\t\t\tthis.getRouter().getTargets().display(\"detailObjectNotFound\");\r\n\t\t\t\t// if object could not be found, the selection in the master list\r\n\t\t\t\t// does not make sense anymore.\r\n\t\t\t\t/*eslint-disable */\r\n\t\t\t\t//eslint-disable-no-useless-return\r\n\t\t\t\treturn;\r\n\t\t\t\t/*eslint-enable */\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Internal method for binding with metadata once detail view is loaded.\r\n\t\t */\r\n\t\t_onMetadataLoaded: function() {\r\n\t\t\t// Store original busy indicator delay for the detail view\r\n\t\t\tvar oViewModel = this.getModel(\"detailView\");\r\n\t\t\t// Make sure busy indicator is displayed immediately when\r\n\t\t\t// detail view is displayed for the first time\r\n\t\t\toViewModel.setProperty(\"/delay\", 0);\r\n\t\t\toViewModel.setProperty(\"/lineItemTableDelay\", 0);\r\n\r\n\t\t},\r\n\t\toHandleDDOMappingUpdateStarted: function() {\r\n\t\t\tif (this.getView().getBindingContext()) {\r\n\t\t\t\tthis.DDOMappingWorksTbl = this.getView().byId(\"idWorksDDOMapping_work\");\r\n\t\t\t\tvar sValue = this.getView().getBindingContext().getProperty(\"Code\");\r\n\t\t\t\tvar oFilter = new Filter(\r\n\t\t\t\t\t\"AS_Num\",\r\n\t\t\t\t\tsap.ui.model.FilterOperator.EQ, sValue\r\n\t\t\t\t);\r\n\t\t\t\tthis.DDOMappingWorksTbl.getBinding(\"items\").filter([oFilter]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Set the full screen mode to false and navigate to master page\r\n\t\t */\r\n\t\tonCloseDetailPress: function() {\r\n\t\t\tthis.getModel(\"appView\").setProperty(\"/actionButtonsInfo/midColumn/fullScreen\", false);\r\n\t\t\t// No item should be selected on master after detail page is closed\r\n\t\t\tthis.getOwnerComponent().oListSelector.clearMasterListSelection();\r\n\t\t\tthis.getRouter().navTo(\"master\");\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Toggle between full and non full screen mode.\r\n\t\t */\r\n\t\ttoggleFullScreen: function() {\r\n\t\t\tvar bFullScreen = this.getModel(\"appView\").getProperty(\"/actionButtonsInfo/midColumn/fullScreen\");\r\n\t\t\tthis.getModel(\"appView\").setProperty(\"/actionButtonsInfo/midColumn/fullScreen\", !bFullScreen);\r\n\t\t\tif (!bFullScreen) {\r\n\t\t\t\t// store current layout and go full screen\r\n\t\t\t\tthis.getModel(\"appView\").setProperty(\"/previousLayout\", this.getModel(\"appView\").getProperty(\"/layout\"));\r\n\t\t\t\tthis.getModel(\"appView\").setProperty(\"/layout\", \"MidColumnFullScreen\");\r\n\t\t\t} else {\r\n\t\t\t\t// reset to previous layout\r\n\t\t\t\tthis.getModel(\"appView\").setProperty(\"/layout\", this.getModel(\"appView\").getProperty(\"/previousLayout\"));\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * function to set the Header title\r\n\t\t * @param {string} sStateId Identifier for the editability state of the document\r\n\t\t */\r\n\t\tsetPageHeaderTitle: function(sStateId) {\r\n\t\t\tvar oResourceBundle = this.getResourceBundle(),\r\n\t\t\t\tsStatus = this.getView().getBindingContext().getProperty(\"Status\");\r\n\t\t\tif (sStateId === \"D\") {\r\n\t\t\t\tif (sStatus !== \"E0006\") {\r\n\t\t\t\t\tthis.getModel(\"detailView\").setProperty(\"/ObjectTitle\", oResourceBundle.getText(\"detail.page.header.title.displayP\"));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.getModel(\"detailView\").setProperty(\"/ObjectTitle\", oResourceBundle.getText(\"detail.page.header.title.display\"));\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if (sStateId === \"C\") {\r\n\t\t\t\tthis.getModel(\"detailView\").setProperty(\"/ObjectTitle\", oResourceBundle.getText(\"detail.page.header.title.create\"));\r\n\t\t\t} else if (sStateId === \"E\") {\r\n\t\t\t\tthis.getModel(\"detailView\").setProperty(\"/ObjectTitle\", oResourceBundle.getText(\"detail.page.header.title.edit\"));\r\n\t\t\t}\r\n\t\t\tthis.getModel().updateBindings();\r\n\t\t},\r\n\t\t/**\r\n\t\t * Private function used for naviagation after success to detail\r\n\t\t * @param {String} sState Identifier for the state of the document.\r\n\t\t * @private\r\n\t\t */\r\n\t\t_navToDetail: function(sState) {\r\n\t\t\tvar sGuid = this.getView().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\tsViewState = this._getViewState(sState);\r\n\t\t\tthis.getRouter().navTo(\"Detail\", {\r\n\t\t\t\tobjectId: sGuid,\r\n\t\t\t\tstateId: sViewState\r\n\t\t\t}, true);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Private function to get State of view\r\n\t\t * @param {String} sViewState Initial View state determination\r\n\t\t * @returns {String} Current State of the document\r\n\t\t */\r\n\t\t_getViewState: function(sViewState) {\r\n\t\t\tvar sState, sDraftStatus = this.getModel(\"detailView\").getProperty(\"/DraftStatus\");\r\n\t\t\tif (sDraftStatus) {\r\n\t\t\t\tsState = sViewState + \":\" + sDraftStatus;\r\n\t\t\t} else {\r\n\t\t\t\tsState = sViewState;\r\n\t\t\t}\r\n\t\t\treturn sState;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Private function to get the instance of ValueHelp fragment\r\n\t\t * @private\r\n\t\t * @returns {Object} value help dialog control\r\n\t\t */\r\n\t\t_getHoaVH: function(oEvent, sCustomData) {\r\n\t\t\tif (this._oHOAVHDialog) {\r\n\t\t\t\tthis._oHOAVHDialog.destroy();\r\n\t\t\t\tthis._oHOAVHDialog = null;\r\n\t\t\t}\r\n\t\t\tif (this.oVHTemplate) {\r\n\t\t\t\tthis.oVHTemplate.destroy();\r\n\t\t\t\tthis.oVHTemplate = null;\r\n\t\t\t}\r\n\t\t\tvar oBindingContext = this.getView().getBindingContext(),\r\n\t\t\t\tsExecDept = oBindingContext.getProperty(\"ExecutingDept\"),\r\n\t\t\t\tsCategory = oBindingContext.getProperty(\"Category\"),\r\n\t\t\t\tsBudgetCtrl = oBindingContext.getProperty(\"BudgetCtrl\"),\r\n\t\t\t\tsSancDept = oBindingContext.getProperty(\"InitiatinDept\"),\r\n\t\t\t\tisMigration = oBindingContext.getProperty(\"MigrationInd\");\r\n\r\n\t\t\tif (!this._oHOAVHDialog) {\r\n\t\t\t\tthis._oHOAVHDialog = this._createFragment(this.createId(\"idHoaVH\"), \"com.goap.cfms.works.as.fragment.hoaVH\");\r\n\t\t\t\tthis.getView().addDependent(this._oHOAVHDialog);\r\n\t\t\t}\r\n\t\t\t// create a filter for the binding\r\n\t\t\tvar oSrcBindingPath = oEvent.getSource().getBindingContext().getPath();\r\n\t\t\tvar sControlId = oEvent.getSource().getId();\r\n\t\t\tthis.oVHTemplate = this._templateForHOADDOVH(\"idHOAVHList\", oSrcBindingPath, sCustomData, sControlId);\r\n\r\n\t\t\tif (sCustomData === \"SourceHoa\") {\r\n\t\t\t\tthis._oHOAVHDialog.bindAggregation(\"items\", \"/ZWRK_C_HOA_DCW(p_budget_ctrl='\" + sBudgetCtrl + \"',p_sancdept='\" + sSancDept +\r\n\t\t\t\t\t\"')/Set\", this.oVHTemplate);\r\n\t\t\t} else {\r\n\t\t\t\tvar aFilter = [];\r\n\r\n\t\t\t\tif (!sCategory) {\r\n\t\t\t\t\tvar sMsgText = this.getModel(\"i18n\").getResourceBundle().getText(\"detail.message.error.mandatory.hoa\");\r\n\t\t\t\t\tMessageBox.show(sMsgText, {\r\n\t\t\t\t\t\ticon: MessageBox.Icon.WARNING,\r\n\t\t\t\t\t\ttitle: this.getModel(\"i18n\").getResourceBundle().getText(\"warning.title\"),\r\n\t\t\t\t\t\taction: MessageBox.Action.OK\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (oBindingContext.getProperty(\"Category\") === \"02\" && oBindingContext.getProperty(\"DcwType\") === \"02\") {\r\n\t\t\t\t\tif (!sBudgetCtrl) {\r\n\t\t\t\t\t\tvar sMsgText = this.getModel(\"i18n\").getResourceBundle().getText(\"detail.message.error.mandatory.sourceHoa\");\r\n\t\t\t\t\t\tMessageBox.show(sMsgText, {\r\n\t\t\t\t\t\t\ticon: MessageBox.Icon.WARNING,\r\n\t\t\t\t\t\t\ttitle: this.getModel(\"i18n\").getResourceBundle().getText(\"warning.title\"),\r\n\t\t\t\t\t\t\taction: MessageBox.Action.OK\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (oBindingContext.getProperty(\"Category\") === \"04\") {\r\n\t\t\t\t\tvar sDDO = oEvent.getSource().getBindingContext().getProperty(\"Ddo\");\r\n\t\t\t\t\taFilter.push(new Filter(\"ddo\", FilterOperator.EQ, sDDO));\r\n\t\t\t\t}\r\n\t\t\t\tvar oBindingInfo = {\r\n\t\t\t\t\tpath: \"/ZWRK_C_HOA_V(p_category='\" + sCategory + \"',p_dept='\" + sSancDept + \"',p_budget_ctrl='\" + sBudgetCtrl +\r\n\t\t\t\t\t\t\"',p_exec_dept='\" + sExecDept + \"',p_migration=\" + isMigration + \")/Set\",\r\n\t\t\t\t\ttemplate: this.oVHTemplate,\r\n\t\t\t\t\tfilters: aFilter\r\n\t\t\t\t};\r\n\t\t\t\tthis._oHOAVHDialog.bindAggregation(\"items\", oBindingInfo);\r\n\t\t\t}\r\n\r\n\t\t\tthis._oHOAVHDialog.data(\"CustomData\", sCustomData);\r\n\t\t\t// open value help dialog filtered by the input value\r\n\t\t\t//this._valueHelpDialog.open();\r\n\t\t\treturn this._oHOAVHDialog;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Private function to get the instance of ValueHelp fragment\r\n\t\t * @private\r\n\t\t * @returns {Object} value help dialog control\r\n\t\t */\r\n\t\t_getDdoVH: function(oEvent, sCustomData) {\r\n\t\t\tif (this._oDDOVHDialog) {\r\n\t\t\t\tthis._oDDOVHDialog.destroy();\r\n\t\t\t\tthis._oDDOVHDialog = null;\r\n\t\t\t}\r\n\t\t\tif (this.oVHTemplate) {\r\n\t\t\t\tthis.oVHTemplate.destroy();\r\n\t\t\t\tthis.oVHTemplate = null;\r\n\t\t\t}\r\n\t\t\tvar oBindingContext = this.getView().getBindingContext(),\r\n\t\t\t\tsSancDept = oBindingContext.getProperty(\"InitiatinDept\"),\r\n\t\t\t\tsExecDept = oBindingContext.getProperty(\"ExecutingDept\"),\r\n\t\t\t\tsUserCr = oBindingContext.getProperty(\"UserIdCr\"),\r\n\t\t\t\tsDcwType = oBindingContext.getProperty(\"DcwType\");\r\n\t\t\tif (!(sSancDept && sExecDept)) {\r\n\t\t\t\tvar sMsgText = this.getModel(\"i18n\").getResourceBundle().getText(\"detail.message.error.mandatory.ddo\");\r\n\t\t\t\tMessageBox.show(sMsgText, {\r\n\t\t\t\t\ticon: MessageBox.Icon.WARNING,\r\n\t\t\t\t\ttitle: this.getModel(\"i18n\").getResourceBundle().getText(\"warning.title\"),\r\n\t\t\t\t\taction: MessageBox.Action.OK\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._oDDOVHDialog = this._createFragment(this.createId(\"idDDOVH\"), \"com.goap.cfms.works.as.fragment.ddoVH\");\r\n\t\t\tthis.getView().addDependent(this._oDDOVHDialog);\r\n\t\t\t// create a filter for the binding\r\n\t\t\tvar oSrcBindingPath = oEvent.getSource().getBindingContext().getPath();\r\n\t\t\tvar sControlId = oEvent.getSource().getId();\r\n\t\t\tthis.oVHTemplate = this._templateForHOADDOVH(\"idDDOVHList\", oSrcBindingPath, sCustomData, sControlId);\r\n\t\t\tif (sCustomData === \"SourceDdo\") {\r\n\t\t\t\tthis._oDDOVHDialog.bindAggregation(\"items\", \"/ZWRK_C_SDDO_V(p_execdept='\" + sExecDept + \"',p_sancdept='\" + sSancDept +\r\n\t\t\t\t\t\"',p_uname='\" + sUserCr + \"',p_DcwType='\" + sDcwType + \"')/Set\", this.oVHTemplate);\r\n\t\t\t} else {\r\n\t\t\t\tthis._oDDOVHDialog.bindAggregation(\"items\", \"/ZWRK_C_DDO_V(p_execdept='\" + sExecDept + \"',p_sancdept='\" + sSancDept +\r\n\t\t\t\t\t\"',p_uname='\" + sUserCr + \"',p_DcwType='\" + sDcwType + \"',p_SUBPROCESS_AREA='AS\" + \"')/Set\", this.oVHTemplate);\r\n\t\t\t}\r\n\t\t\tthis._oDDOVHDialog.data(\"CustomData\", sCustomData);\r\n\t\t\t// open value help dialog filtered by the input value\r\n\t\t\treturn this._oDDOVHDialog;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Private function to get the instance of ValueHelp fragment\r\n\t\t * @private\r\n\t\t * @returns {Object} value help dialog control\r\n\t\t */\r\n\t\t_getPicCodeVH: function(oEvent, sCustomData) {\r\n\t\t\tif (this._oPicCodeVHDialog) {\r\n\t\t\t\tthis._oPicCodeVHDialog.destroy();\r\n\t\t\t\tthis._oPicCodeVHDialog = null;\r\n\t\t\t}\r\n\t\t\tvar oBindingContext = this.getView().getBindingContext();\r\n\r\n\t\t\tthis._oPicCodeVHDialog = this._createFragment(this.createId(\"idPicCodeVH\"), \"com.goap.cfms.works.as.fragment.picCodeVH\");\r\n\t\t\tthis.getView().addDependent(this._oPicCodeVHDialog);\r\n\t\t\t// create a filter for the binding\r\n\t\t\tvar oSrcBindingPath = oEvent.getSource().getBindingContext().getPath();\r\n\t\t\tvar oVHTemplate = this._templateForHOADDOVH(\"idPicCodeVHList\", oSrcBindingPath, sCustomData);\r\n\r\n\t\t\tthis._oPicCodeVHDialog.bindAggregation(\"items\", \"/ZWRK_C_PICCODE\", oVHTemplate);\r\n\t\t\tthis._oPicCodeVHDialog.data(\"CustomData\", sCustomData);\r\n\r\n\t\t\t// open value help dialog filtered by the input value\r\n\t\t\treturn this._oPicCodeVHDialog;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Private function to get the instance of ValueHelp fragment\r\n\t\t * @private\r\n\t\t * @returns {Object} value help dialog control\r\n\t\t */\r\n\t\tgetASHoaVH: function() {\r\n\t\t\tif (!this.oASHoaVH) {\r\n\t\t\t\tthis.oASHoaVH = new VHDialog({\r\n\t\t\t\t\tcomponent: this.getOwnerComponent(),\r\n\t\t\t\t\tid: \"vhHoaAS\",\r\n\t\t\t\t\tcontentDensity: this.contentDensity,\r\n\t\t\t\t\ttitleKey: \"detail.ops.panel.content.table.column.vh.title.hoa\",\r\n\t\t\t\t\tentitySet: \"/ZWRK_C_HOA\",\r\n\t\t\t\t\tsorter: new Sorter(\"hoa\", false),\r\n\t\t\t\t\tbMultiSelect: false,\r\n\t\t\t\t\tkey: \"hoa\",\r\n\t\t\t\t\tdescriptionKey: \"hoa\",\r\n\t\t\t\t\tfields: [{\r\n\t\t\t\t\t\tkey: \"hoa\",\r\n\t\t\t\t\t\tlabel: \"{i18n>detail.table.ddo.hoa}\",\r\n\t\t\t\t\t\tvalue: \"{hoa}\"\r\n\t\t\t\t\t}]\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn this.oASHoaVH;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Private function to get the instance of ValueHelp fragment\r\n\t\t * @private\r\n\t\t * @returns {Object} value help dialog control\r\n\t\t */\r\n\t\tgetASCurrVH: function() {\r\n\t\t\tif (!this.oASCurrVH) {\r\n\t\t\t\tthis.oASCurrVH = new VHDialog({\r\n\t\t\t\t\tcomponent: this.getOwnerComponent(),\r\n\t\t\t\t\tid: \"vhCurrAS\",\r\n\t\t\t\t\tcontentDensity: this.contentDensity,\r\n\t\t\t\t\ttitleKey: \"detail.ops.panel.content.table.column.vh.title.curr\",\r\n\t\t\t\t\tentitySet: \"/ZWRK_C_CURRNKEY\",\r\n\t\t\t\t\tsorter: new Sorter(\"waers\", false),\r\n\t\t\t\t\tbMultiSelect: false,\r\n\t\t\t\t\tkey: \"waers\",\r\n\t\t\t\t\tdescriptionKey: \"ktext\",\r\n\t\t\t\t\tfields: [{\r\n\t\t\t\t\t\tkey: \"waers\",\r\n\t\t\t\t\t\tlabel: \"{/ZWRK_C_CURRNKEY/waers/#@sap:label}\",\r\n\t\t\t\t\t\tvalue: \"{waers}\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tkey: \"ktext\",\r\n\t\t\t\t\t\tlabel: \"{/ZWRK_C_CURRNKEY/ktext/#@sap:label}\",\r\n\t\t\t\t\t\tvalue: \"{ktext}\"\r\n\t\t\t\t\t}]\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn this.oASCurrVH;\r\n\t\t},\r\n\t\t/**\r\n\t\t * To handle OK press in Location Value Help\r\n\t\t * @param {object} oSource the control which triggered\r\n\t\t * @param {sap.ui.base.event} oEvent object\r\n\t\t * @returns {boolean} Whether ok or not.\r\n\t\t */\r\n\t\t_handleOk: function(oSource, oEvent) {\r\n\t\t\tvar oControl = oSource.getCustomData()[0].getValue(),\r\n\t\t\t\toTable = this._getFragControlById(\"idSmartTable\", \"idVHDialog\"),\r\n\t\t\t\toSelectedItemContext = oTable.getTable().getSelectedContexts(),\r\n\t\t\t\toModel = this.getModel(),\r\n\t\t\t\ti;\r\n\t\t\tif (oSelectedItemContext.length === 0) {\r\n\t\t\t\tMessageToast.show(this.getResourceBundle().getText(\"ymsg.smartvh.noselect\"));\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tswitch (oControl) {\r\n\t\t\t\tcase \"District\":\r\n\t\t\t\t\tthis._removeAllToken([\"idSelectVillage\", \"idSelectMandal\"]);\r\n\t\t\t\t\tthis._removeAllToken([\"idSelectVillage\", \"idSelectMandal\"]);\r\n\t\t\t\t\tthis.getModel().getProperty(\"district\", oTable.getTable().getSelectedContexts()[0]);\r\n\t\t\t\t\tfor (i = 0; i < oSelectedItemContext.length; i++) {\r\n\t\t\t\t\t\tvar oSelectedTokenKey = oModel.getProperty(\"district\", oSelectedItemContext[i]),\r\n\t\t\t\t\t\t\tbDuplicateExist = this._checkTokenDuplicate(oSelectedTokenKey, oSource);\r\n\t\t\t\t\t\tif (!bDuplicateExist) {\r\n\t\t\t\t\t\t\toSource.addToken(new Token({\r\n\t\t\t\t\t\t\t\tkey: oSelectedTokenKey,\r\n\t\t\t\t\t\t\t\ttext: oModel.getProperty(\"name\", oSelectedItemContext[i])\r\n\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\toSource.fireTokenUpdate();\r\n\t\t\t\t\tthis._handleExit();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"Mandal\":\r\n\t\t\t\t\tthis._removeAllToken([\"idSelectDistrict\", \"idSelectVillage\"]);\r\n\t\t\t\t\tfor (i = 0; i < oSelectedItemContext.length; i++) {\r\n\t\t\t\t\t\tvar oSelectedTokenKey = oModel.getProperty(\"district\", oSelectedItemContext[i]) + \":\" + oModel.getProperty(\"mandal\",\r\n\t\t\t\t\t\t\t\toSelectedItemContext[i]),\r\n\t\t\t\t\t\t\tbDuplicateExist = this._checkTokenDuplicate(oSelectedTokenKey, oSource);\r\n\t\t\t\t\t\tif (!bDuplicateExist) {\r\n\t\t\t\t\t\t\toSource.addToken(new Token({\r\n\t\t\t\t\t\t\t\tkey: oSelectedTokenKey,\r\n\t\t\t\t\t\t\t\ttext: oModel.getProperty(\"mandalx\", oSelectedItemContext[i])\r\n\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\toSource.fireTokenUpdate();\r\n\t\t\t\t\tthis._handleExit();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"Village\":\r\n\t\t\t\t\tthis._removeAllToken([\"idSelectDistrict\", \"idSelectMandal\"]);\r\n\r\n\t\t\t\t\tfor (i = 0; i < oSelectedItemContext.length; i++) {\r\n\t\t\t\t\t\tvar oSelectedTokenKey = oModel.getProperty(\"district\", oSelectedItemContext[i]) + \":\" + oModel.getProperty(\"mandal\",\r\n\t\t\t\t\t\t\t\toSelectedItemContext[i]) + \":\" + oModel.getProperty(\"village\", oSelectedItemContext[i]),\r\n\t\t\t\t\t\t\tbDuplicateExist = this._checkTokenDuplicate(oSelectedTokenKey, oSource);\r\n\t\t\t\t\t\tif (!bDuplicateExist) {\r\n\t\t\t\t\t\t\toSource.addToken(new Token({\r\n\t\t\t\t\t\t\t\tkey: oSelectedTokenKey,\r\n\t\t\t\t\t\t\t\ttext: oModel.getProperty(\"villagex\", oSelectedItemContext[i])\r\n\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\toSource.fireTokenUpdate();\r\n\t\t\t\t\tthis._handleExit();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"LokSabha\":\r\n\t\t\t\t\t//this._removeAllToken([\"idMultiInputAssembly\"]);\r\n\t\t\t\t\tfor (i = 0; i < oSelectedItemContext.length; i++) {\r\n\t\t\t\t\t\tvar oSelectedTokenKey = oModel.getProperty(\"loksabha\", oSelectedItemContext[i]),\r\n\t\t\t\t\t\t\tbDuplicateExist = this._checkTokenDuplicate(oSelectedTokenKey, oSource);\r\n\t\t\t\t\t\tif (!bDuplicateExist) {\r\n\t\t\t\t\t\t\toSource.addToken(new Token({\r\n\t\t\t\t\t\t\t\tkey: oSelectedTokenKey,\r\n\t\t\t\t\t\t\t\ttext: oModel.getProperty(\"loksabha_name\", oSelectedItemContext[i])\r\n\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\toSource.fireTokenUpdate();\r\n\t\t\t\t\tthis._handleExit();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"project_id\":\r\n\t\t\t\t\tvar aArray = [];\r\n\t\t\t\t\tvar Obj = {};\r\n\t\t\t\t\tvar LstRsultRow = this.getView().getModel(\"TableModel\").getData().results.length - 1;\r\n\t\t\t\t\tif (this.getView().getModel(\"TableModel\").getData().results.length > 0 && this.getView().getModel(\"TableModel\").getData().results[\r\n\t\t\t\t\t\t\tLstRsultRow].MigASEditNumber === \"\") {\r\n\t\t\t\t\t\tthis.getView().getModel(\"TableModel\").getData().results.splice(LstRsultRow, 1);\r\n\t\t\t\t\t\tthis.getView().getModel(\"TableModel\").refresh();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (var k = 0; k < this.getView().getModel(\"TableModel\").getData().results.length; k++) {\r\n\t\t\t\t\t\tObj.MigASEditNumber = this.getView().getModel(\"TableModel\").getData().results[k].MigASEditNumber;\r\n\t\t\t\t\t\tObj.SancEditAmunt = this.getView().getModel(\"TableModel\").getData().results[k].SancEditAmunt;\r\n\t\t\t\t\t\tObj.ASEditDescription = this.getView().getModel(\"TableModel\").getData().results[k].ASEditDescription;\r\n\t\t\t\t\t\tObj.SanctionEditRefe = this.getView().getModel(\"TableModel\").getData().results[k].SanctionEditRefe;\r\n\t\t\t\t\t\taArray.push(Obj);\r\n\t\t\t\t\t\tObj = {};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (var i = 0; i < oSelectedItemContext.length; i++) {\r\n\t\t\t\t\t\tObj.MigASEditNumber = oSelectedItemContext[i].getObject().project_id;\r\n\t\t\t\t\t\tObj.SancEditAmunt = oSelectedItemContext[i].getObject().san_amt;\r\n\t\t\t\t\t\tObj.ASEditDescription = oSelectedItemContext[i].getObject().prj_desc;\r\n\t\t\t\t\t\tObj.SanctionEditRefe = oSelectedItemContext[i].getObject().san_ref_no;\r\n\t\t\t\t\t\taArray.push(Obj);\r\n\t\t\t\t\t\tObj = {};\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\taArray = {\r\n\t\t\t\t\t\t\"results\": aArray\r\n\t\t\t\t\t};\r\n\t\t\t\t\tvar oModel = new sap.ui.model.json.JSONModel();\r\n\t\t\t\t\toModel.setData(aArray);\r\n\r\n\t\t\t\t\tthis.getView().setModel(oModel, \"TableModel\");\r\n\t\t\t\t\tthis.getView().getModel(\"TableModel\").refresh();\r\n\t\t\t\t\tthis._handleExit();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\t//this._removeAllToken([\"idMultiInputLoksabha\"]);\r\n\t\t\t\t\tfor (i = 0; i < oSelectedItemContext.length; i++) {\r\n\t\t\t\t\t\tvar oSelectedTokenKey = oModel.getProperty(\"constutuency\", oSelectedItemContext[i]),\r\n\t\t\t\t\t\t\tbDuplicateExist = this._checkTokenDuplicate(oSelectedTokenKey, oSource);\r\n\t\t\t\t\t\tif (!bDuplicateExist) {\r\n\t\t\t\t\t\t\toSource.addToken(new Token({\r\n\t\t\t\t\t\t\t\tkey: oSelectedTokenKey,\r\n\t\t\t\t\t\t\t\ttext: oModel.getProperty(\"assembly\", oSelectedItemContext[i])\r\n\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\toSource.fireTokenUpdate();\r\n\t\t\t\t\tthis._handleExit();\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Private function used to remove all token from multi-input\r\n\t\t * @private\r\n\t\t * @param {Array} aControlId Array of IDs of controls\r\n\t\t */\r\n\t\t_removeAllToken: function(aControlId) {\r\n\t\t\tvar aEmpArray = [];\r\n\t\t\tfor (var i = 0; i < aControlId.length; i++) {\r\n\t\t\t\tvar oControl = this.byId(aControlId[i]);\r\n\t\t\t\toControl.setTokens(aEmpArray);\r\n\t\t\t\t//\toControl.fireTokenUpdate();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Private function used for Setting the token based on user selection\r\n\t\t * @private\r\n\t\t * @param {Source} oSource Source of Event\r\n\t\t * @param {Array} aSelectedObjects Array of all selected objects in the suggestions\r\n\t\t * @param {String} textProperty Corresponding Text of the selections\r\n\t\t * @param {String} keyProperty Key of the Selections\r\n\t\t */\r\n\t\t_setTokens: function(oSource, aSelectedObjects, textProperty, keyProperty) {\r\n\t\t\tvar aTokens = oSource.getTokens();\r\n\t\t\tvar that = this;\r\n\t\t\tjQuery.each(aSelectedObjects, function(index, oSelectedObject) {\r\n\t\t\t\tvar oNewToken = that._createNewTokens(oSelectedObject, textProperty, keyProperty);\r\n\t\t\t\tvar bNewToken = true;\r\n\t\t\t\tjQuery.each(aTokens, function(i, oToken) {\r\n\t\t\t\t\tif (oToken.getKey() === oNewToken.getKey()) {\r\n\t\t\t\t\t\tbNewToken = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif (bNewToken) {\r\n\t\t\t\t\taTokens.push(oNewToken);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\toSource.setTokens(aTokens);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Private function to create a token\r\n\t\t * @private\r\n\t\t * @param {Object} oSelectedObject Parameters of new Token\r\n\t\t * @param {String} text Corresponding Text of selection\r\n\t\t * @param {String} key Key of Selection\r\n\t\t * @returns {Object} Token for selected keys and corresponding texts\r\n\t\t */\r\n\t\t_createNewTokens: function(oSelectedObject, text, key) {\r\n\t\t\treturn new Token({\r\n\t\t\t\ttext: oSelectedObject[text],\r\n\t\t\t\tkey: oSelectedObject[key]\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Private function to get instance of value help for district\r\n\t\t * @private\r\n\t\t * @returns {Object} Control for Location value help\r\n\t\t */\r\n\t\t_getASDistrictVH: function() {\r\n\t\t\tif (!this.oASDistVH) {\r\n\t\t\t\tthis.oASDistVH = new VHDialog({\r\n\t\t\t\t\tcomponent: this.getOwnerComponent(),\r\n\t\t\t\t\tid: \"vhDistrictAS\",\r\n\t\t\t\t\tcontentDensity: this.contentDensity,\r\n\t\t\t\t\ttitleKey: \"detail.ops.panel.content.table.column.vh.title.district\",\r\n\t\t\t\t\tentitySet: \"/ZWRK_C_DISTRICTS\",\r\n\t\t\t\t\tsorter: new Sorter(\"district\", false),\r\n\t\t\t\t\tbMultiSelect: false,\r\n\t\t\t\t\tkey: \"district\",\r\n\t\t\t\t\tdescriptionKey: \"name\",\r\n\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t// {\r\n\t\t\t\t\t\t//     key: \"district\",\r\n\t\t\t\t\t\t//     label: \"{i18n>detail.location.popup.districtId}\",\r\n\t\t\t\t\t\t//     value: \"{district}\"\r\n\t\t\t\t\t\t// },\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tkey: \"name\",\r\n\t\t\t\t\t\t\tlabel: \"{i18n>detail.location.popup.districtName}\",\r\n\t\t\t\t\t\t\tvalue: \"{name}\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn this.oASDistVH;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Private function to get instance of value help for mandal\r\n\t\t * @private\r\n\t\t * @returns {Object} Control for Location value help\r\n\t\t */\r\n\t\t_getASMandalVH: function() {\r\n\t\t\tif (!this.oASMandalVH) {\r\n\t\t\t\tthis.oASMandalVH = new VHDialog({\r\n\t\t\t\t\tcomponent: this.getOwnerComponent(),\r\n\t\t\t\t\tid: \"vhMandalAS\",\r\n\t\t\t\t\tcontentDensity: this.contentDensity,\r\n\t\t\t\t\ttitleKey: \"detail.ops.panel.content.table.column.vh.title.mandal\",\r\n\t\t\t\t\tentitySet: \"/ZWRK_C_MANDAL_LIST\",\r\n\t\t\t\t\tsorter: new Sorter(\"mandal\", false),\r\n\t\t\t\t\tbMultiSelect: false,\r\n\t\t\t\t\tkey: \"mandal\",\r\n\t\t\t\t\tdescriptionKey: \"name\",\r\n\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t// {\r\n\t\t\t\t\t\t//     key: \"district\",\r\n\t\t\t\t\t\t//     label: \"{i18n>detail.location.popup.districtId}\",\r\n\t\t\t\t\t\t//     value: \"{district}\"\r\n\t\t\t\t\t\t// },\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tkey: \"districtx\",\r\n\t\t\t\t\t\t\tlabel: \"{i18n>detail.location.popup.districtName}\",\r\n\t\t\t\t\t\t\tvalue: \"{districtx}\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// {\r\n\t\t\t\t\t\t//     key: \"mandal\",\r\n\t\t\t\t\t\t//     label: \"{i18n>detail.location.popup.mandalId}\",\r\n\t\t\t\t\t\t//     value: \"{mandal}\"\r\n\t\t\t\t\t\t// },\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tkey: \"mandalx\",\r\n\t\t\t\t\t\t\tlabel: \"{i18n>detail.location.popup.mandalName}\",\r\n\t\t\t\t\t\t\tvalue: \"{mandalx}\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn this.oASMandalVH;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Private function to get instance of value help for village\r\n\t\t * @private\r\n\t\t * @returns {Object} Control for Location value help\r\n\t\t */\r\n\t\t_getASVillageVH: function() {\r\n\t\t\tif (!this.oASVillageVH) {\r\n\t\t\t\tthis.oASVillageVH = new VHDialog({\r\n\t\t\t\t\tcomponent: this.getOwnerComponent(),\r\n\t\t\t\t\tid: \"vhVillageAS\",\r\n\t\t\t\t\tcontentDensity: this.contentDensity,\r\n\t\t\t\t\ttitleKey: \"detail.ops.panel.content.table.column.vh.title.village\",\r\n\t\t\t\t\tentitySet: \"/ZWRK_C_VILLAGES_LIST\",\r\n\t\t\t\t\tsorter: new Sorter(\"village\", false),\r\n\t\t\t\t\tbMultiSelect: false,\r\n\t\t\t\t\tkey: \"village\",\r\n\t\t\t\t\tdescriptionKey: \"villagename\",\r\n\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t// {\r\n\t\t\t\t\t\t//     key: \"district\",\r\n\t\t\t\t\t\t//     label: \"{i18n>detail.location.popup.districtId}\",\r\n\t\t\t\t\t\t//     value: \"{district}\"\r\n\t\t\t\t\t\t// },\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tkey: \"districtx\",\r\n\t\t\t\t\t\t\tlabel: \"{i18n>detail.location.popup.districtName}\",\r\n\t\t\t\t\t\t\tvalue: \"{districtx}\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// {\r\n\t\t\t\t\t\t//     key: \"mandal\",\r\n\t\t\t\t\t\t//     label: \"{i18n>detail.location.popup.mandalId}\",\r\n\t\t\t\t\t\t//     value: \"{mandal}\"\r\n\t\t\t\t\t\t// },\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tkey: \"mandalx\",\r\n\t\t\t\t\t\t\tlabel: \"{i18n>detail.location.popup.mandalName}\",\r\n\t\t\t\t\t\t\tvalue: \"{mandalx}\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// {\r\n\t\t\t\t\t\t//     key: \"village\",\r\n\t\t\t\t\t\t//     label: \"{i18n>detail.location.popup.villageId}\",\r\n\t\t\t\t\t\t//     value: \"{village}\"\r\n\t\t\t\t\t\t// },\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tkey: \"villagex\",\r\n\t\t\t\t\t\t\tlabel: \"{i18n>detail.location.popup.villageName}\",\r\n\t\t\t\t\t\t\tvalue: \"{villagex}\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn this.oASVillageVH;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Private function to get instance of value help for lok sabha\r\n\t\t * @private\r\n\t\t * @returns {Object} Control for Location value help\r\n\t\t */\r\n\t\t_getASLoksabhaVH: function() {\r\n\t\t\tif (!this.oASLoksabhaVH) {\r\n\t\t\t\tthis.oASLoksabhaVH = new VHDialog({\r\n\t\t\t\t\tcomponent: this.getOwnerComponent(),\r\n\t\t\t\t\tid: \"vhLoksabhaAS\",\r\n\t\t\t\t\tcontentDensity: this.contentDensity,\r\n\t\t\t\t\ttitleKey: \"detail.ops.panel.content.table.column.vh.title.loksabha\",\r\n\t\t\t\t\tentitySet: \"/ZWRK_C_LOKSABHA\",\r\n\t\t\t\t\tsorter: new Sorter(\"loksabha\", false),\r\n\t\t\t\t\tbMultiSelect: false,\r\n\t\t\t\t\tkey: \"loksabha\",\r\n\t\t\t\t\tdescriptionKey: \"loksabha_name\",\r\n\t\t\t\t\tfields: [{\r\n\t\t\t\t\t\tkey: \"District_name\",\r\n\t\t\t\t\t\tlabel: \"{/ZWRK_C_LOKSABHA/District_name/#@sap:label}\",\r\n\t\t\t\t\t\tvalue: \"{District_name}\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tkey: \"loksabha_name\",\r\n\t\t\t\t\t\tlabel: \"{/ZWRK_C_LOKSABHA/loksabha_name/#@sap:label}\",\r\n\t\t\t\t\t\tvalue: \"{loksabha_name}\"\r\n\t\t\t\t\t}]\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn this.oASLoksabhaVH;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Private function to get instance of value help for assembly\r\n\t\t * @private\r\n\t\t * @returns {Object} Control for Location value help\r\n\t\t */\r\n\t\t_getASAssemblyVH: function() {\r\n\t\t\tif (!this.oASAssemblyVH) {\r\n\t\t\t\tthis.oASAssemblyVH = new VHDialog({\r\n\t\t\t\t\tcomponent: this.getOwnerComponent(),\r\n\t\t\t\t\tid: \"vhAssemblyAS\",\r\n\t\t\t\t\tcontentDensity: this.contentDensity,\r\n\t\t\t\t\ttitleKey: \"detail.ops.panel.content.table.column.vh.title.assembly\",\r\n\t\t\t\t\tentitySet: \"/ZWRK_C_CONSTITUENCIES\",\r\n\t\t\t\t\tsorter: new Sorter(\"constutuency\", false),\r\n\t\t\t\t\tbMultiSelect: false,\r\n\t\t\t\t\tkey: \"constutuency\",\r\n\t\t\t\t\tdescriptionKey: \"assembly\",\r\n\t\t\t\t\tfields: [{\r\n\t\t\t\t\t\tkey: \"distx\",\r\n\t\t\t\t\t\tlabel: \"{/ZWRK_C_CONSTITUENCIES/distx/#@sap:label}\",\r\n\t\t\t\t\t\tvalue: \"{distx}\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tkey: \"assembly\",\r\n\t\t\t\t\t\tlabel: \"{/ZWRK_C_CONSTITUENCIES/assembly/#@sap:label}\",\r\n\t\t\t\t\t\tvalue: \"{assembly}\"\r\n\t\t\t\t\t}]\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn this.oASAssemblyVH;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Private function to return the getBinding Context\r\n\t\t * @param {Array} aControlId Array of Controls for IDs\r\n\t\t * @param {String} sFilterItems String of filter items\r\n\t\t * @param {String} sSelectedKey String of Selected record key\r\n\t\t */\r\n\t\t_setFilterOnBindings: function(aControlId, sFilterItems, sSelectedKey) {\r\n\t\t\tvar aFilter = [];\r\n\t\t\tif (sFilterItems.length) {\r\n\t\t\t\tfor (var j = 0; j < sFilterItems.length; j++) {\r\n\t\t\t\t\taFilter.push(new Filter(sFilterItems[j], FilterOperator.EQ, sSelectedKey));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (aControlId.length > 0) {\r\n\t\t\t\tfor (var i = 0; i < aControlId.length; i++) {\r\n\t\t\t\t\tthis.byId(aControlId[i]).setSelectedKey(\"\");\r\n\t\t\t\t\tthis.byId(aControlId[i]).getBinding(\"items\").filter(aFilter);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Private function to return the filter of selected token\r\n\t\t * @private\r\n\t\t * @param {String} sMultiInputCId Identifier for Multi Input Property\r\n\t\t * @param {String} sFilterProperty Identifier for Filter Property\r\n\t\t * @returns {aTokenFilters} Array of filtering tokens\r\n\t\t */\r\n\t\t_getTokenFilter: function(sMultiInputCId, sFilterProperty) {\r\n\t\t\tvar aTokenFilters = [],\r\n\t\t\t\taTokens = this.byId(sMultiInputCId).getTokens();\r\n\t\t\tif (aTokens.length > 0) {\r\n\t\t\t\tfor (var i = 0; i < aTokens.length; i++) {\r\n\t\t\t\t\tvar sKey = aTokens[i].getKey();\r\n\t\t\t\t\tif (sKey) {\r\n\t\t\t\t\t\taTokenFilters.push(new Filter(sFilterProperty, FilterOperator.EQ, sKey));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\taTokenFilters.push(new Filter(sFilterProperty, FilterOperator.EQ, \"\"));\r\n\t\t\t}\r\n\t\t\treturn aTokenFilters;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler function for MultiInput value help for District\r\n\t\t * @private\r\n\t\t * @param {Event} oEvent Displaying list of Districts\r\n\t\t */\r\n\t\thandleDistrictListDisplay: function(oEvent) {\r\n\t\t\tvar aTokenFilters = this._getTokenFilter(\"idSelectDistrict\", \"district\");\r\n\t\t\tthis._getASDistrictVH().open({\r\n\t\t\t\tfilters: aTokenFilters,\r\n\t\t\t\tmode: \"None\",\r\n\t\t\t\thideFilter: true,\r\n\t\t\t\tdisplayTitle: \"detail.ops.panel.content.table.column.vh.title.sdistrict\",\r\n\t\t\t\tmultiSelect: function(oSelectedObject) {\r\n\r\n\t\t\t\t},\r\n\t\t\t\tselect: function(oSelectedObject) {\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler function for MultiInput value help for Mandals\r\n\t\t * @private\r\n\t\t * @param {Event} oEvent Displaying list of Mandals\r\n\t\t */\r\n\t\thandleMandalListDisplay: function(oEvent) {\r\n\t\t\tvar aTokenFilters = this._getTokenFilter(\"idSelectMandal\", \"filter\");\r\n\t\t\tthis._getASMandalVH().open({\r\n\t\t\t\tfilters: aTokenFilters,\r\n\t\t\t\tmode: \"None\",\r\n\t\t\t\thideFilter: true,\r\n\t\t\t\tdisplayTitle: \"detail.ops.panel.content.table.column.vh.title.smandal\",\r\n\t\t\t\tselect: function(oSelectedObject) {\r\n\r\n\t\t\t\t},\r\n\t\t\t\tmultiSelect: function(oSelectedObject) {\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler function for MultiInput value help for Villages\r\n\t\t * @private\r\n\t\t * @param {Event} oEvent Displaying list of Villages\r\n\t\t */\r\n\t\thandleVillageListDisplay: function(oEvent) {\r\n\t\t\tvar aTokenFilters = this._getTokenFilter(\"idSelectVillage\", \"filter\");\r\n\t\t\tthis._getASVillageVH().open({\r\n\t\t\t\tfilters: aTokenFilters,\r\n\t\t\t\tmode: \"None\",\r\n\t\t\t\thideFilter: true,\r\n\t\t\t\tdisplayTitle: \"detail.ops.panel.content.table.column.vh.title.svillage\",\r\n\t\t\t\tmultiSelect: function(oSelectedObject) {\r\n\r\n\t\t\t\t},\r\n\t\t\t\tselect: function(oSelectedObject) {\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler function for MultiInput value help for Lok Sabhas\r\n\t\t * @private\r\n\t\t * @param {Event} oEvent Displaying list of Lok Sabhas\r\n\t\t */\r\n\t\tonLoksabhaListClick: function(oEvent) {\r\n\t\t\tvar aTokenFilters = this._getTokenFilter(\"idMultiInputLoksabha\", \"loksabha\");\r\n\t\t\tthis._getASLoksabhaVH().open({\r\n\t\t\t\tfilters: aTokenFilters,\r\n\t\t\t\tmode: \"None\",\r\n\t\t\t\thideFilter: true,\r\n\t\t\t\tdisplayTitle: \"detail.ops.panel.content.table.column.vh.title.sloksabha\",\r\n\t\t\t\tselect: function(oSelectedObject) {\r\n\r\n\t\t\t\t},\r\n\t\t\t\tmultiSelect: function(oSelectedObject) {\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler function for MultiInput value help for Assemblies\r\n\t\t * @private\r\n\t\t * @param {Event} oEvent Displaying list of Assemblies\r\n\t\t */\r\n\t\thandleAssemblyListDisplay: function(oEvent) {\r\n\t\t\tvar aTokenFilters = this._getTokenFilter(\"idMultiInputAssembly\", \"constutuency\");\r\n\t\t\tthis._getASAssemblyVH().open({\r\n\t\t\t\tfilters: aTokenFilters,\r\n\t\t\t\tmode: \"None\",\r\n\t\t\t\thideFilter: true,\r\n\t\t\t\tdisplayTitle: \"detail.ops.panel.content.table.column.vh.title.sassembly\",\r\n\t\t\t\tselect: function(oSelectedObject) {\r\n\r\n\t\t\t\t},\r\n\t\t\t\tmultiSelect: function(oSelectedObject) {\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * private function to set value for multiple fields\r\n\t\t * @param {string} sModelName Model Identifier\r\n\t\t * @param {array} aProp1  Array of properties\r\n\t\t * @param {string} sPropV Array of properties\r\n\t\t */\r\n\t\t_setPropertyValue: function(sModelName, aProp1, sPropV) {\r\n\t\t\tfor (var i = 0; i < aProp1.length; i++) {\r\n\t\t\t\tvar sProperty = \"/\" + aProp1[i];\r\n\t\t\t\tthis.getModel(sModelName).setProperty(sProperty, sPropV);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * private function to authorize a user\r\n\t\t * @param {string} sObjectId Object Identifier\r\n\t\t */\r\n\t\t_authorizeUser: function(sObjectId) {\r\n\t\t\tvar that = this,\r\n\t\t\t\tsPositionId = this.getModel(\"appView\").getProperty(\"/position\"),\r\n\t\t\t\toAppViewModel = this.getModel(\"appView\"),\r\n\t\t\t\toResourceBundle = this.getResourceBundle(),\r\n\t\t\t\toDetailViewModel = this.getModel(\"detailView\");\r\n\t\t\tvar oAuth = new Promise(function(resolve, reject) {\r\n\t\t\t\tthis.getOwnerComponent().oDraft.getAuthorization({\r\n\t\t\t\t\tfName: \"/GetOpenItems\",\r\n\t\t\t\t\tApplicationId: \"AS\",\r\n\t\t\t\t\tGuid: sObjectId,\r\n\t\t\t\t\tPositionId: sPositionId\r\n\t\t\t\t}, resolve, reject);\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\toAuth.then(function(oResult) {\r\n\t\t\t\tvar oOpenItems = oResult.data.GetOpenItems;\r\n\t\t\t\tthis.getModel(\"detailView\").setProperty(\"/WfRole\", oOpenItems.Wfrole);\r\n\t\t\t\tif (oOpenItems.ApproveBt === \"X\" || oOpenItems.NextBt === \"X\" || oOpenItems.SubmitBt === \"X\") {\r\n\t\t\t\t\tthis.getModel(\"detailView\").setProperty(\"/authorized\", true);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.getModel(\"detailView\").setProperty(\"/authorized\", false);\r\n\t\t\t\t\t//\t\t\t\t\toDetailViewModel.setProperty(\"/stateId\", \"D\");\r\n\t\t\t\t\t//\t\t\t\t\toDetailViewModel.setProperty(\"/bEditable\", false);\r\n\t\t\t\t\t//\t\t\t\t\toAppViewModel.setProperty(\"/bEnabledMasterViewCtr\", true);\r\n\t\t\t\t\t//\t\t\t\t\toAppViewModel.setProperty(\"/sMasterListMode\", \"SingleSelectMaster\");\r\n\t\t\t\t\t//\t\t\t\t\tthis.getModel(\"detailView\").setProperty(\"/ObjectTitle\", oResourceBundle.getText(\"detail.page.header.title.display\"));\r\n\t\t\t\t}\r\n\t\t\t\tthis._setFooterButtonsVisibility(oOpenItems);\r\n\t\t\t\tif (oOpenItems.ApproveBt === \"X\") {\r\n\t\t\t\t\tthis.getModel().callFunction(\"/User_Is_Secratary\", {\r\n\t\t\t\t\t\tmethod: \"GET\",\r\n\t\t\t\t\t\turlParameters: {\r\n\t\t\t\t\t\t\tGuid: sObjectId,\r\n\t\t\t\t\t\t\tPosition: this.getModel(\"appView\").getProperty(\"/position\")\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: function(oResponse, oTe) {\r\n\t\t\t\t\t\t\tif (oResponse.User_Is_Secratary.IsSecratary === \"X\") {\r\n\t\t\t\t\t\t\t\tthat.getModel(\"detailView\").setProperty(\"/bIsSecratary\", true);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthat.getModel(\"detailView\").setProperty(\"/bIsSecratary\", false);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\terror: function(oError) {\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}.bind(this));\r\n\t\t},\r\n\t\t/**\r\n\t\t * private function to update buttons visibility\r\n\t\t * @param {object} oOpenItems Object containing accessibility options for the footer buttons\r\n\t\t */\r\n\t\t_setFooterButtonsVisibility: function(oOpenItems) {\r\n\t\t\tthis.getModel(\"detailView\").setProperty(\"/ApproveBtnVisibility\", oOpenItems.ApproveBt);\r\n\t\t\tthis.getModel(\"detailView\").setProperty(\"/NextBtnVisibility\", oOpenItems.NextBt);\r\n\t\t\tthis.getModel(\"detailView\").setProperty(\"/OnholdBtnVisibility\", oOpenItems.OnholdBt);\r\n\t\t\tthis.getModel(\"detailView\").setProperty(\"/ReturnBtnVisibility\", oOpenItems.ReturnBt);\r\n\t\t\tthis.getModel(\"detailView\").setProperty(\"/SubmitBtnVisibility\", oOpenItems.SubmitBt);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Function to get the User Feed list and Add action button in it\r\n\t\t * @private\r\n\t\t */\r\n\t\tgetUserFeedList: function() {\r\n\t\t\tvar that = this,\r\n\t\t\t\taFilters = [],\r\n\t\t\t\tsGuid = this.getView().getBindingContext().getProperty(\"Guid\");\r\n\t\t\taFilters.push(new Filter(\"Tabtype\", FilterOperator.EQ, \"CREATE\"));\r\n\t\t\taFilters.push(new Filter(\"Caseguid\", FilterOperator.EQ, sGuid));\r\n\t\t\taFilters.push(new Filter(\"Wiid\", FilterOperator.EQ, \"\"));\r\n\t\t\taFilters.push(new Filter(\"Wfinfo\", FilterOperator.EQ, \"\"));\r\n\t\t\taFilters.push(new Filter(\"Application\", FilterOperator.EQ, \"AS\"));\r\n\t\t\tthis._getMigCheckSet();\r\n\t\t\tthis.getView().setBusy(true);\r\n\t\t\tthis.getModel().read(\"/WrkNoteSet\", {\r\n\t\t\t\tfilters: aFilters,\r\n\t\t\t\tsuccess: function(oData) {\r\n\t\t\t\t\tfor (var i = 0; i < oData.results.length; i++) {\r\n\t\t\t\t\t\toData.results[i].Notingstring = decodeURIComponent(oData.results[i].Notingstring);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthat.getModel(\"detailView\").setProperty(\"/UserNotes\", oData.results);\r\n\t\t\t\t\tthat.getView().setBusy(false);\r\n\t\t\t\t},\r\n\t\t\t\terror: function(oError) {\r\n\t\t\t\t\tthat.getView().setBusy(false);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * Private function to assign the action Item on Comments\r\n\t\t * @param {Array} aNoteList Array containing all notes of the document \r\n\t\t */\r\n\t\t_setActionItemOnFeedListItem: function(aNoteList) {\r\n\t\t\tif (this.getModel(\"detailView\").getProperty(\"/stateId\") !== \"D\") {\r\n\t\t\t\tif (aNoteList.length > 0) {\r\n\t\t\t\t\tfor (var i = 0; i < aNoteList.length; i++) {\r\n\t\t\t\t\t\tvar Actions = [];\r\n\t\t\t\t\t\tif (aNoteList[i].Noteflag) {\r\n\t\t\t\t\t\t\tActions.push({\r\n\t\t\t\t\t\t\t\t\"Text\": \"Edit\",\r\n\t\t\t\t\t\t\t\t\"Icon\": \"sap-icon://edit\",\r\n\t\t\t\t\t\t\t\t\"Key\": \"edit\"\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\taNoteList[i].Actions = Actions;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Private function to fire the update for Message Popover message update\r\n\t\t * @param {Event} oEvent Click on message popover\r\n\t\t */\r\n\t\t_updateMessage: function(oEvent) {\r\n\t\t\tif (this.getView().byId(\"idMessagePopover\")) {\r\n\t\t\t\tthis.getView().byId(\"idMessagePopover\").setText(sap.ui.getCore().getMessageManager().getMessageModel().getData().length);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Private function to set visibility of components of the View\r\n\t\t * @private\r\n\t\t */\r\n\t\t_setObjectSectionVisibility: function() {\r\n\t\t\tvar oBindingContext = this.getView().getBindingContext();\r\n\t\t\tif (oBindingContext) {\r\n\t\t\t\tvar sCategory = oBindingContext.getProperty(\"Category\"),\r\n\t\t\t\t\toDetailViewModel = this.getModel(\"detailView\");\r\n\t\t\t\tif (sCategory === \"02\") {\r\n\t\t\t\t\toDetailViewModel.setProperty(\"/bUAVisible\", true);\r\n\t\t\t\t\tvar sDcwType = oBindingContext.getProperty(\"DcwType\");\r\n\t\t\t\t\tif (sDcwType === \"02\") {\r\n\t\t\t\t\t\toDetailViewModel.setProperty(\"/bOwnDCW\", false);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\toDetailViewModel.setProperty(\"/bOwnDCW\", true);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\toDetailViewModel.setProperty(\"/bUAVisible\", false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Private function to create Params for Post Note\r\n\t\t * @param {String} sAction Action specifier String\r\n\t\t * @returns {Object} Note attributes to be saved\r\n\t\t */\r\n\t\t_createPostCallParam: function(sAction) {\r\n\t\t\tvar oDetailViewModelData = this.getModel(\"detailView\").getProperty(\"/\");\r\n\t\t\treturn {\r\n\t\t\t\tnotePath: \"WrkNoteSet\",\r\n\t\t\t\tpath: \"WrkSave\",\r\n\t\t\t\taction: sAction,\r\n\t\t\t\tAppID: \"AS\",\r\n\t\t\t\tFPositionid: this.getModel(\"appView\").getProperty(\"/position\"),\r\n\t\t\t\tFUserid: \"\",\r\n\t\t\t\tRole: \"\",\r\n\t\t\t\tFFlag: \"\",\r\n\t\t\t\tNotingid: oDetailViewModelData.Notingid,\r\n\t\t\t\tPagent: oDetailViewModelData.Pagent,\r\n\t\t\t\tNotingstring: oDetailViewModelData.Notingstring,\r\n\t\t\t\tGuid: this.getView().getBindingContext().getProperty(\"Guid\")\r\n\t\t\t};\r\n\t\t},\r\n\t\t// /**\r\n\t\t//  * Private function for submit/return/approve\r\n\t\t//  * @private\r\n\t\t//  * @param {Object} oParams Object containing save parameters\r\n\t\t//  */\r\n\t\t// _workFlowCall: function(oParams){\r\n\t\t// \tvar that = this;\r\n\t\t// \tthis.oProcessActionPromise = new Promise(function(resolve, reject){\r\n\t\t// \t\tthat._postCall(oParams, resolve, reject);\r\n\t\t// \t});\r\n\t\t// \tthis.oProcessActionPromise.then(function(oData){\r\n\t\t// \t\tthat.getModel(\"detailView\").setProperty(\"/Notingstring\", \"\");\r\n\t\t// \t\tthat.oProcessActionPromise = null;\r\n\t\t// \t\tthat.getModel(\"detailView\").setProperty(\"/DraftStatus\", \"X\");\r\n\t\t// \t\tthat._successToastMsgDisplay(oParams.action);\r\n\t\t// \t\tthat._navToDetail.bind(that)(\"D\");\r\n\t\t// \t});\r\n\t\t// },\r\n\t\t/**\r\n\t\t * Private function for submit/return/approve\r\n\t\t * @private\r\n\t\t * @param {Object} oParams Object containing save parameters\r\n\t\t */\r\n\t\t_workFlowCall: function(oParams) {\r\n\t\t\tvar that = this,\r\n\t\t\t\tsUser = \"\",\r\n\t\t\t\tsPath = \"\";\r\n\t\t\tif (sap.ushell) {\r\n\t\t\t\tsUser = sap.ushell.Container.getService(\"UserInfo\").getId();\r\n\t\t\t}\r\n\t\t\tsPath = this.getModel().createKey(\"User_DetailsSet\", {\r\n\t\t\t\tUser_ID: sUser,\r\n\t\t\t\tApplication: \"AS\",\r\n\t\t\t\tRole: this.getModel(\"detailView\").getProperty(\"/WfRole\")\r\n\t\t\t});\r\n\t\t\tvar params = {\r\n\t\t\t\tpath: \"/\" + sPath,\r\n\t\t\t\tbusyControl: that.getView()\r\n\t\t\t};\r\n\t\t\tif (oParams.action !== \"SAVE\") {\r\n\t\t\t\t// this.oValidateBio = new Promise(function(resolve, reject) {\r\n\t\t\t\t// \tthis._getBioValidation(params, resolve, reject);\r\n\t\t\t\t// }.bind(this));\r\n\t\t\t\t// this.oValidateBio.then(function(oData) {\r\n\t\t\t\t// \tthat._postWorkFlowCall(oParams);\r\n\t\t\t\t// }, function(oError) {\r\n\t\t\t\t// \tthat._postWorkFlowCall(oParams);\r\n\t\t\t\t// });\r\n\t\t\t\t//changes start - 15-02-2023 - cfms_ctm_lpp\r\n\t\t\t\tthis.oBioMetrixdata = new Promise(function(resolve1, reject1) {\r\n\t\t\t\t\tthis._getBiometricData(params, resolve1, reject1);\r\n\t\t\t\t}.bind(this));\r\n\t\t\t\tthis.oBioMetrixdata.then(function(oData) {\r\n\t\t\t\t\tif (oData.data.IsBiometricReq) {\r\n\t\t\t\t\t\tif (oData.data.deviceType === \"I\") {\r\n\t\t\t\t\t\t\t// this.oValidateBioMetrixIris = null;\r\n\t\t\t\t\t\t\tthis.oValidateBioMetrixIris = new Promise(function(resolveIris, rejectIris) {\r\n\t\t\t\t\t\t\t\tthis.oValidateBioMetrixIris({\r\n\t\t\t\t\t\t\t\t\tuId: oData.data.AdhrNo,\r\n\t\t\t\t\t\t\t\t\tdevice: oData.data.Bio_ID\r\n\t\t\t\t\t\t\t\t}, resolveIris, rejectIris);\r\n\t\t\t\t\t\t\t}.bind(this));\r\n\t\t\t\t\t\t\tthis.oValidateBioMetrixIris.then(function(oData) {\r\n\t\t\t\t\t\t\t\t//success\r\n\t\t\t\t\t\t\t\tthat._postWorkFlowCall(oParams);\r\n\t\t\t\t\t\t\t\t// resolve();\r\n\t\t\t\t\t\t\t}.bind(this));\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// this.oValidateBioMetrix = null;\r\n\t\t\t\t\t\t\tthis.getBiometricValidated({\r\n\t\t\t\t\t\t\t\tuId: oData.data.AdhrNo,\r\n\t\t\t\t\t\t\t\tdevice: oData.data.Bio_ID\r\n\t\t\t\t\t\t\t}, oParams);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat._postWorkFlowCall(oParams);\r\n\t\t\t\t\t\t// reject();\r\n\t\t\t\t\t}\r\n\t\t\t\t}.bind(this));\r\n\t\t\t} else {\r\n\t\t\t\tthat._postWorkFlowCall(oParams);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tgetBiometricValidated: function(params, oParams) {\r\n\t\t\tvar that = this;\r\n\t\t\tif (!params.uId) {\r\n\t\t\t\tthis._displayWarnMessge(\"Please provide Aadhar Number\");\r\n\t\t\t\tthrow new Error(\"Please provide Aadhar Number\");\r\n\t\t\t}\r\n\t\t\tif (!params.device) {\r\n\t\t\t\tthis._displayWarnMessge(\"Please register the Device\");\r\n\t\t\t\tthrow new Error(\"Please register the Device\");\r\n\t\t\t}\r\n\t\t\t/*eslint-disable */\r\n\t\t\t//eslint-disable-sap-no-hardcoded-url\r\n\t\t\tvar srcURL = \"https://aadhar.apcfss.in/verifyAadhar.do?mode=aadhaarAutendicate&device=\" + params.device + \"&uId=\" + params.uId;\r\n\t\t\t/*eslint-enable */\r\n\t\t\tif (!this.bioMetricDialog) {\r\n\t\t\t\tthis.bioMetricDialog = new sap.m.Dialog({\r\n\t\t\t\t\ttitle: 'Biometric Validation',\r\n\t\t\t\t\tverticalScrolling: false,\r\n\t\t\t\t\thorizontalScrolling: false,\r\n\t\t\t\t\tcontent: new sap.ui.core.HTML(\"idHtml\"),\r\n\t\t\t\t\tendButton: new sap.m.Button({\r\n\t\t\t\t\t\ttext: 'Cancel',\r\n\t\t\t\t\t\tpress: function() {\r\n\t\t\t\t\t\t\tthat.bioMetricDialog.close();\r\n\t\t\t\t\t\t\tvar frame = $(\"#ifrmReportViewer\");\r\n\t\t\t\t\t\t\tframe.remove();\r\n\t\t\t\t\t\t\tframe.detach();\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t\tthis.getView().addDependent(this.bioMetricDialog);\r\n\t\t\t}\r\n\t\t\tthis.bioMetricDialog.open();\r\n\t\t\tvar eventMethod = window.addEventListener ? \"addEventListener\" : \"attachEvent\";\r\n\t\t\tvar eventer = window[eventMethod];\r\n\t\t\tvar messageEvent = eventMethod === \"attachEvent\" ? \"onmessage\" : \"message\";\r\n\t\t\tsap.ui.getCore().byId(\"idHtml\").setContent(\"<iframe id='ifrmReportViewer' src='\" + srcURL + \"'></iframe>\");\r\n\t\t\tvar frame = $(\"#ifrmReportViewer\");\r\n\t\t\tthis.EventFlag = 0;\r\n\t\t\teventer(messageEvent, function(event) {\r\n\t\t\t\t/*eslint-disable */\r\n\t\t\t\t//eslint-disable-sap-no-hardcoded-url\t \r\n\t\t\t\tif (event.origin === \"https://aadhar.apcfss.in\")\r\n\t\t\t\t/*eslint-enable */\r\n\t\t\t\t{\r\n\t\t\t\t\tif (this.EventFlag === 0) {\r\n\t\t\t\t\t\tif (event.data.indexOf(\"Device Not Found ( OR ) Change Selected Device\") !== -1) {\r\n\t\t\t\t\t\t\tthis.bioActionFlag = \"\";\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.EventFlag++;\r\n\t\t\t\t\t//if(this.bioMetricDialog)\r\n\t\t\t\t\t//this.bioMetricDialog.close();\r\n\t\t\t\t\tframe.remove();\r\n\t\t\t\t\tframe.detach();\r\n\t\t\t\t\tif (this.bioMetricDialog) {\r\n\t\t\t\t\t\tthis.bioMetricDialog.close();\r\n\t\t\t\t\t\tthis.bioMetricDialog.destroy();\r\n\t\t\t\t\t\tthis.bioMetricDialog = undefined;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (this.EventFlag === 1) {\r\n\t\t\t\t\t\tvar message = event.data.trim(); // \r\n\t\t\t\t\t\tif (message === \"Success\") {\r\n\t\t\t\t\t\t\tthat._postWorkFlowCall(oParams);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis._displayWarnMessge(this.getModel(\"i18n-reuse\").getResourceBundle().getText(\"message.register.Biometric.device\"));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.bioActionFlag = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t} else //If origin is not Aadhar\r\n\t\t\t\t{\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}.bind(this), false);\r\n\t\t},\r\n\t\t//changes end - 15-02-2023\r\n\t\t/**\r\n\t\t * function for submit/return/approve\r\n\t\t * @private\r\n\t\t * @param {Object} oParams Object containing save parameters\r\n\t\t */\r\n\t\t_postWorkFlowCall: function(oParams) {\r\n\t\t\tvar that = this,\r\n\t\t\t\toDetailViewModel = this.getModel(\"detailView\"),\r\n\t\t\t\toViewModel = this.getModel(\"detailView\"),\r\n\t\t\t\taWorkFlowLogData = oDetailViewModel.getProperty(\"/Worklog\"),\r\n\t\t\t\tbWorkFlowDefined = true;\r\n\t\t\t//to determine the freeworkflow\r\n\t\t\tif (oParams.action === \"SUBMIT\" || oParams.action === \"NEXT\") {\r\n\t\t\t\tvar sUserId = sap.ushell.Container.getService(\"UserInfo\").getId();\r\n\t\t\t\tif (aWorkFlowLogData.length === 0) {\r\n\t\t\t\t\tvar oPromiseWorkFlowLog = new Promise(function(resolve1, reject1) {\r\n\t\t\t\t\t\tthat.getWorkFlowLogDetails({\r\n\t\t\t\t\t\t\tApplicationId: \"AS\",\r\n\t\t\t\t\t\t\tGuid: that.getView().getBindingContext().getProperty(\"Guid\")\r\n\t\t\t\t\t\t}, resolve1, reject1);\r\n\t\t\t\t\t}.bind(that));\r\n\t\t\t\t\toPromiseWorkFlowLog.then(function() {\r\n\t\t\t\t\t\toViewModel.setProperty(\"/busy\", false);\r\n\t\t\t\t\t\tvar aWrkFLogData = oDetailViewModel.getProperty(\"/Worklog\");\r\n\t\t\t\t\t\tfor (var i = 0; i < aWrkFLogData.length; i++) {\r\n\t\t\t\t\t\t\tif ((sUserId === aWrkFLogData[i].Pernr) && (aWrkFLogData[i].Wfrole === oDetailViewModel.getProperty(\"/WfRole\")) && (\r\n\t\t\t\t\t\t\t\t\taWrkFLogData.length - 1) === i) {\r\n\t\t\t\t\t\t\t\tbWorkFlowDefined = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (aWrkFLogData.length >= 1) {\r\n\t\t\t\t\t\t\tthat._postSubmitCall(bWorkFlowDefined, oParams);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if (aWorkFlowLogData.length >= 1) {\r\n\t\t\t\t\tfor (var i = 0; i < aWorkFlowLogData.length; i++) {\r\n\t\t\t\t\t\tif ((sUserId === aWorkFlowLogData[i].Pernr) && (aWorkFlowLogData[i].Wfrole === oDetailViewModel.getProperty(\"/WfRole\")) && (\r\n\t\t\t\t\t\t\t\taWorkFlowLogData.length - 1) === i) {\r\n\t\t\t\t\t\t\tbWorkFlowDefined = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthat._postSubmitCall(bWorkFlowDefined, oParams);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (aWorkFlowLogData.length >= 1) {\r\n\t\t\t\t\tthis._postSubmitCall(bWorkFlowDefined, oParams);\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tvar oPromiseWorkFlowLogOnSave = new Promise(function(resolve1, reject1) {\r\n\t\t\t\t\t\tthat.getWorkFlowLogDetails({\r\n\t\t\t\t\t\t\tApplicationId: \"AS\",\r\n\t\t\t\t\t\t\tGuid: that.getView().getBindingContext().getProperty(\"Guid\")\r\n\t\t\t\t\t\t}, resolve1, reject1);\r\n\t\t\t\t\t}.bind(that));\r\n\t\t\t\t\toPromiseWorkFlowLogOnSave.then(function() {\r\n\t\t\t\t\t\toViewModel.setProperty(\"/busy\", false);\r\n\t\t\t\t\t\tvar aWrkFLogData = oDetailViewModel.getProperty(\"/Worklog\");\r\n\t\t\t\t\t\tif (aWrkFLogData.length >= 1) {\r\n\t\t\t\t\t\t\tthat._postSubmitCall(bWorkFlowDefined, oParams);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tsap.m.MessageBox.error(\"Maker Role in Workflow not maintain\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * internal function to determine \r\n\t\t */\r\n\t\t_postSubmitCall: function(bWorkFlowDefined, oParams) {\r\n\t\t\tvar that = this;\r\n\t\t\tif (bWorkFlowDefined) {\r\n\t\t\t\tthis.oProcessActionPromise = new Promise(function(resolve, reject) {\r\n\t\t\t\t\t//\tthat.getView().getModel().resetChanges();   27JUL20\r\n\t\t\t\t\t//\t\t\t\t\tthat._postCall(oParams, resolve, reject);\r\n\t\t\t\t\tthat._postCallNew(oParams, resolve, reject);\r\n\t\t\t\t});\r\n\t\t\t\tthis.oProcessActionPromise.then(function(oData) {\r\n\t\t\t\t\tsap.ushell.Container.setDirtyFlag(false);\r\n\t\t\t\t\tthat.getView().getElementBinding().refresh();\r\n\t\t\t\t\tthat.getModel().refresh(true);\r\n\t\t\t\t\tthat._bindViewDone();\r\n\r\n\t\t\t\t\tif (oParams.action === \"APPROVE\" && oData.data.DmsUrl) {\r\n\t\t\t\t\t\tthat._handleDigitalSing(oData.data.DmsUrl, oData.data.FioriLink);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.getModel(\"detailView\").setProperty(\"/Notingstring\", \"\");\r\n\t\t\t\t\t\tthat.oProcessActionPromise = null;\r\n\t\t\t\t\t\tthat.getModel(\"detailView\").setProperty(\"/DraftStatus\", \"X\");\r\n\t\t\t\t\t\tthat._successToastMsgDisplay(oParams.action);\r\n\t\t\t\t\t\tthat._changeFullScreenMode(false, \"detail\", \"MasterPage\", \"asIdBtnScreenToggle\");\r\n\t\t\t\t\t\tthat._navToDetail.bind(that)(\"D\");\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t/*\tthis.oProcessActionPromise.catch(function(oError){\r\n\t\t\t\t\t\tthat.getView().getElementBinding().refresh();\r\n\t\t\t\t\t});*/\r\n\r\n\t\t\t} else {\r\n\t\t\t\tthis.getModel(\"appView\").setProperty(\"/busy\", false);\r\n\t\t\t\tMessageBox.alert(this.getResourceBundle().getText(\"detail.error.msg.wrkflowRoleNotMaint\"), {\r\n\t\t\t\t\tactions: [sap.m.MessageBox.Action.YES, sap.m.MessageBox.Action.NO],\r\n\t\t\t\t\tonClose: function(sAction) {\r\n\t\t\t\t\t\tif (sAction === \"YES\") {\r\n\t\t\t\t\t\t\tthis._reusePositionValueHelp(oParams);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}.bind(this)\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Internal function called for free workflow\r\n\t\t */\r\n\t\tworkflowProcess: function() {\r\n\t\t\tvar that = this,\r\n\t\t\t\toWFCModel = this.getModel(\"WFCModel\"),\r\n\t\t\t\toParams = oWFCModel.getProperty(\"/oParams\");\r\n\t\t\toParams.Role = \"C\";\r\n\t\t\toParams.FFlag = \"X\";\r\n\t\t\toParams.FPositionid = oWFCModel.getProperty(\"/nextPositionID\");\r\n\t\t\toParams.FUserid = oWFCModel.getProperty(\"/nextUserID\");\r\n\t\t\tthis.oProcessActionPromise = new Promise(function(resolve, reject) {\r\n\t\t\t\t//\t\t\t\tthat._postCall(oParams, resolve, reject);\r\n\t\t\t\tthat._postCallNew(oParams, resolve, reject);\r\n\t\t\t});\r\n\t\t\tthis.oProcessActionPromise.then(function(oData) {\r\n\t\t\t\tsap.ushell.Container.setDirtyFlag(false);\r\n\t\t\t\tthat._changeFullScreenMode(false, \"detail\", \"MasterPage\", \"asIdBtnScreenToggle\");\r\n\t\t\t\tthat.getView().getElementBinding().refresh();\r\n\t\t\t\tthat.getModel().refresh(true);\r\n\t\t\t\tthat._bindViewDone();\r\n\t\t\t\tthat.getModel(\"detailView\").setProperty(\"/Notingstring\", \"\");\r\n\t\t\t\tthat.oProcessActionPromise = null;\r\n\t\t\t\tthat.getModel(\"detailView\").setProperty(\"/DraftStatus\", \"X\");\r\n\t\t\t\tthat._successToastMsgDisplay(oParams.action);\r\n\t\t\t\tthat._navToDetail.bind(that)(\"D\");\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * Private function to create the process flow bar\r\n\t\t * @private\r\n\t\t */\r\n\t\t_makeProcessFlow: function() {\r\n\t\t\tthis.createFlowBar(\"idProcessFlowBox\");\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Private function to get the I18n text\r\n\t\t * @private\r\n\t\t * @param {String} sText text value from i18n resource\r\n\t\t * @returns {Object} Text contained in i18n Resources\r\n\t\t */\r\n\t\t_getI18nText: function(sText) {\r\n\t\t\treturn this.getResourceBundle().getText(sText);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Private function to post the Note and AS\r\n\t\t * @private\r\n\t\t * @param {Object} oParams Saving parameters\r\n\t\t */\r\n\t\t_postAS: function(oParams) {\r\n\t\t\tvar oParamsTemp = this._createPostCallParam(oParams.action);\r\n\t\t\tthis._workFlowCall(oParamsTemp);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Function to check the Note before any workflow action\r\n\t\t * @private\r\n\t\t * @returns {String} Body of the note\r\n\t\t */\r\n\t\t_checkNote: function() {\r\n\t\t\tvar bNotingString = false,\r\n\t\t\t\tsDetailModel = this.getModel(\"detailView\"),\r\n\t\t\t\tsLogInUser = sap.ushell.Container.getService(\"UserInfo\").getId(),\r\n\t\t\t\tsNotingString = sDetailModel.getProperty(\"/Notingstring\"),\r\n\t\t\t\tsNotes = sDetailModel.getProperty(\"/UserNotes\");\r\n\t\t\tif (sNotes.length > 0 && sLogInUser === sNotes[0].Createdby) {\r\n\t\t\t\tbNotingString = true;\r\n\t\t\t} else if (sNotingString) {\r\n\t\t\t\t//bNotingString = true;\r\n\t\t\t\tthis._displayWarnMessge(this.getModel(\"i18n\").getResourceBundle().getText(\"detail.message.note.savebefore\")); // return is as false beacuse on submit we are not saving the notes as per new change\r\n\t\t\t} else {\r\n\t\t\t\tthis._displayWarnMessge(this.getModel(\"i18n\").getResourceBundle().getText(\"detail.message.note.empty\"));\r\n\t\t\t}\r\n\t\t\treturn bNotingString;\r\n\t\t},\r\n\r\n\t\t_switchControlModel: function() {\r\n\t\t\tif (this.getView().getBindingContext()) {\r\n\t\t\t\tvar sAsType = this.getView().getBindingContext().getProperty(\"RefAsType\");\r\n\t\t\t\tswitch (sAsType) {\r\n\t\t\t\t\tcase \"03\":\r\n\t\t\t\t\t\tthis.controlModelSwitch(this.oAmendControlModel);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t//\t\tthis.controlModelSwitch(this.oDefaultControlModel);\r\n\t\t\t\t\t\tthis._getOpenItemRole();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Private function to set the header title for Amend Page\r\n\t\t * @param {String} sStateId State Identifier of the Document\r\n\t\t */\r\n\t\t_setAmendPageTitle: function(sStateId) {\r\n\t\t\tif (this.getView().getBindingContext()) {\r\n\t\t\t\tvar sAsType = this.getView().getBindingContext().getProperty(\"RefAsType\"),\r\n\t\t\t\t\tsStatus = this.getView().getBindingContext().getProperty(\"Status\");\r\n\t\t\t\tif (sAsType === \"03\") {\r\n\t\t\t\t\tvar oResourceBundle = this.getResourceBundle();\r\n\t\t\t\t\tif (sStateId === \"D\") {\r\n\t\t\t\t\t\tif (sStatus !== \"E0006\") {\r\n\t\t\t\t\t\t\tthis.getModel(\"detailView\").setProperty(\"/ObjectTitle\", oResourceBundle.getText(\"detail.page.header.amend.title.displayP\"));\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.getModel(\"detailView\").setProperty(\"/ObjectTitle\", oResourceBundle.getText(\"detail.page.header.amend.title.display\"));\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if (sStateId === \"C\") {\r\n\t\t\t\t\t\tthis.getModel(\"detailView\").setProperty(\"/ObjectTitle\", oResourceBundle.getText(\"detail.page.header.amend.title.create\"));\r\n\t\t\t\t\t} else if (sStateId === \"E\") {\r\n\t\t\t\t\t\tthis.getModel(\"detailView\").setProperty(\"/ObjectTitle\", oResourceBundle.getText(\"detail.page.header.amend.title.edit\"));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.getModel().updateBindings();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t_identifyHoaDdoFilters: function() {\r\n\t\t\tvar bUAVisible = this.getModel(\"detailView\").getProperty(\"/bUAVisible\"),\r\n\t\t\t\tbOwnDCW = this.getModel(\"detailView\").getProperty(\"/bOwnDCW\");\r\n\t\t\t// var oHoaFilterNonDCW = {filter:[\r\n\t\t\t// \t{id: \"idCategory\", key: \"category\", value: \"Category\"}, \r\n\t\t\t// \t{id: \"idInitDept\", key: \"dept\", value: \"InitiatinDept\"}\r\n\t\t\t// ]};\r\n\t\t\t// var oDdoFilterNonDCW = {filter:[\r\n\t\t\t// \t{id: 'idExecDept', key: 'fictr', value: 'ExecutingDept'}\r\n\t\t\t// ]};\r\n\t\t\t// var oHoaFilterOwnDCW = {filter: []};\r\n\t\t\t// var oDdoFilterOwnDCW = oDdoFilterNonDCW;\r\n\t\t\t// var oHoaFilterSource = oHoaFilterNonDCW;\r\n\t\t\t// var oDdoFilterSource = {filter: [\r\n\t\t\t// \t{id: \"idInitDept\", key: \"dept\", value: \"InitiatinDept\"}\r\n\t\t\t// ]};\r\n\t\t\t// var oHoaFilterTarget = {filter:[\r\n\t\t\t// \t{id: \"idCategory\", key: \"category\", value: \"Category\"}\r\n\t\t\t// ]};\r\n\t\t\t// var oDdoFilterTarget = {filter: []};\r\n\t\t\tif (!bUAVisible) {\r\n\t\t\t\tthis.oHoaFilter = this.getModel(\"hoaDdoFilters\").getProperty(\"/oHoaFilterNonDCW\");\r\n\t\t\t\tthis.oDdoFilter = this.getModel(\"hoaDdoFilters\").getProperty(\"/oDdoFilterNonDCW\");\r\n\t\t\t} else if (bUAVisible && bOwnDCW) {\r\n\t\t\t\tthis.oHoaFilter = this.getModel(\"hoaDdoFilters\").getProperty(\"/oHoaFilterOwnDCW\");\r\n\t\t\t\tthis.oDdoFilter = this.getModel(\"hoaDdoFilters\").getProperty(\"/oDdoFilterOwnDCW\");\r\n\t\t\t} else if (bUAVisible && !bOwnDCW) {\r\n\t\t\t\tthis.oHoaFilter = this.getModel(\"hoaDdoFilters\").getProperty(\"/oHoaFilterTarget\");\r\n\t\t\t\tthis.oDdoFilter = this.getModel(\"hoaDdoFilters\").getProperty(\"/oDdoFilterTarget\");\r\n\t\t\t\tthis.oHoaSourceFilter = this.getModel(\"hoaDdoFilters\").getProperty(\"/oHoaFilterSource\");\r\n\t\t\t\tthis.oDdoSourceFilter = this.getModel(\"hoaDdoFilters\").getProperty(\"/oDdoFilterSource\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t_setHoaDdoFilters: function() {\r\n\t\t\tvar aItems = this.byId(\"idWorksHoA\").getItems(),\r\n\t\t\t\taSourceItems = this.byId(\"idWorksSrcHoA\").getItems();\r\n\t\t\tif (aItems) {\r\n\t\t\t\tfor (var i = 0; i < aItems.length; i++) {\r\n\t\t\t\t\tvar aCells = aItems[i].getCells();\r\n\t\t\t\t\tfor (var j = 0; j < aCells.length; j++) {\r\n\t\t\t\t\t\tif (aCells[j].getId().indexOf(\"Hoa\") !== -1) {\r\n\t\t\t\t\t\t\taCells[j].data(\"filterArray\", this.oHoaFilter);\r\n\t\t\t\t\t\t} else if (aCells[j].getId().indexOf(\"Ddo\") !== -1) {\r\n\t\t\t\t\t\t\taCells[j].data(\"filterArray\", this.oDdoFilter);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (aSourceItems) {\r\n\t\t\t\tfor (var i = 0; i < aSourceItems.length; i++) {\r\n\t\t\t\t\tvar aCells = aSourceItems[i].getCells();\r\n\t\t\t\t\tfor (var j = 0; j < aCells.length; j++) {\r\n\t\t\t\t\t\tif (aCells[j].getId().indexOf(\"SourceHoa\") !== -1) {\r\n\t\t\t\t\t\t\taCells[j].data(\"filterArray\", this.oHoaSourceFilter);\r\n\t\t\t\t\t\t} else if (aCells[j].getId().indexOf(\"SourceDdo\") !== -1) {\r\n\t\t\t\t\t\t\taCells[j].data(\"filterArray\", this.oDdoSourceFilter);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * @private\r\n\t\t * @param {*} sId is the id of the template to be generated\r\n\t\t * @param {*} sSrcBindingPath is the binding path of the control\r\n\t\t */\r\n\t\t_templateForHOADDOVH: function(sId, sSrcBindingPath, sCustomData, sControlId) {\r\n\t\t\tvar oTemplate = \"\";\r\n\t\t\tif (sCustomData === \"Ddo\" || sCustomData === \"SourceDdo\") {\r\n\t\t\t\toTemplate = new sap.m.StandardListItem(this.createId(sId), {\r\n\t\t\t\t\ttitle: \"{fistl}\",\r\n\t\t\t\t\tdescription: \"{BESCHR}\",\r\n\t\t\t\t\ttype: \"Active\"\r\n\t\t\t\t});\r\n\t\t\t} else if (sCustomData === \"Hoa\" || sCustomData === \"SourceHoa\") {\r\n\t\t\t\toTemplate = new sap.m.StandardListItem(this.createId(sId), {\r\n\t\t\t\t\ttitle: \"{Hoa}\",\r\n\t\t\t\t\tinfo: \"{bcf}\",\r\n\t\t\t\t\t// description : \"{Hoa}\",\r\n\t\t\t\t\ttype: \"Active\"\r\n\t\t\t\t});\r\n\t\t\t} else if (sCustomData === \"PicCode\") {\r\n\t\t\t\toTemplate = new sap.m.StandardListItem(this.createId(sId), {\r\n\t\t\t\t\ttitle: \"{Pics_Code}\",\r\n\t\t\t\t\tdescription: \"{District_name}\",\r\n\t\t\t\t\ttype: \"Active\"\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\toTemplate.data(\"sSrcBindingPath\", sSrcBindingPath);\r\n\t\t\toTemplate.data(\"CustomData\", sCustomData);\r\n\t\t\t// oTemplate.data(\"controlId\", sControlId);\r\n\t\t\treturn oTemplate;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Validate the User Input\r\n\t\t */\r\n\t\t_validateShare: function(oSource) {\r\n\t\t\tvar zShare = parseFloat(oSource.getValue());\r\n\t\t\tif (zShare > 100 || zShare < 0) {\r\n\t\t\t\toSource.setValueState(\"Error\");\r\n\t\t\t} else {\r\n\t\t\t\toSource.setValueState(\"None\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Check the duplicate Token \r\n\t\t * @param{string} sTokenKey\r\n\t\t * @param{Object} oSource\r\n\t\t * @returns {boolean}\r\n\t\t */\r\n\t\t_checkTokenDuplicate: function(sTokenKey, oSource) {\r\n\t\t\tvar bDuplicateExist = false,\r\n\t\t\t\taTokens = oSource.getTokens();\r\n\t\t\tfor (var i = 0; i < aTokens.length; i++) {\r\n\t\t\t\tif (aTokens[i].getKey() === sTokenKey) {\r\n\t\t\t\t\tbDuplicateExist = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn bDuplicateExist;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Private function to clear the Pre-existing value\r\n\t\t */\r\n\t\t_initControlValue: function() {\r\n\t\t\tvar sState = this.getModel(\"detailView\").getProperty(\"/stateId\"),\r\n\t\t\t\toBindingcontext = this.getView().getBindingContext();\r\n\t\t\tvar oAppViewModel = this.getModel(\"appView\"),\r\n\t\t\t\toModel = this.getModel();\r\n\t\t\tif (!oBindingcontext.getProperty(\"DepartDesc\") && oAppViewModel.getProperty(\"/DepartDesc\")) {\r\n\t\t\t\toModel.setProperty(\"DepartDesc\", oAppViewModel.getProperty(\"/DepartDesc\"), oBindingcontext);\r\n\t\t\t}\r\n\t\t\tif (!oBindingcontext.getProperty(\"InitiatinDept\") && oAppViewModel.getProperty(\"/InitiatinDept\")) {\r\n\t\t\t\toModel.setProperty(\"InitiatinDept\", oAppViewModel.getProperty(\"/InitiatinDept\"), oBindingcontext);\r\n\t\t\t}\r\n\t\t\tif (!oBindingcontext.getProperty(\"MainWorkNature\")) {\r\n\t\t\t\tthis.byId(\"idMainNatureWork\").setValue(\"\");\r\n\t\t\t}\r\n\t\t\tif (!oBindingcontext.getProperty(\"SubclassL03\")) {\r\n\t\t\t\tthis.byId(\"idSubClass03\").setValue(\"\");\r\n\t\t\t}\r\n\t\t\tif (!oBindingcontext.getProperty(\"SubclassL01\")) {\r\n\t\t\t\tthis.byId(\"idSubClass01\").setValue(\"\");\r\n\t\t\t}\r\n\t\t\tif (!oBindingcontext.getProperty(\"SubclassL02\")) {\r\n\t\t\t\tthis.byId(\"idSubClass02\").setValue(\"\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * bind select control\r\n\t\t * @param {*} url \r\n\t\t */\r\n\t\t_bindSelectControl: function() {\r\n\t\t\tvar oBindingContext = this.getView().getBindingContext(),\r\n\t\t\t\tsCrUser = oBindingContext.getProperty(\"UserIdCr\"),\r\n\t\t\t\tsSecDept = oBindingContext.getProperty(\"SecDept\"),\r\n\t\t\t\taFilterP = [{\r\n\t\t\t\t\tname: \"SUBPROCESS_AREA\",\r\n\t\t\t\t\tvalue: \"AS\"\r\n\t\t\t\t}],\r\n\t\t\t\toParamLocalClass = {\r\n\t\t\t\t\tsPath: \"/ZWRK_C_LOCATIONLIST(p_user='\" + sCrUser + \"')/Set\",\r\n\t\t\t\t\tsControlId: \"idLocationClass\",\r\n\t\t\t\t\tsKey: \"{location_id}\",\r\n\t\t\t\t\tsDesc: \"{location_text}\",\r\n\t\t\t\t\taFilterParam: aFilterP\r\n\t\t\t\t},\r\n\t\t\t\toParamLocalClass1 = {\r\n\t\t\t\t\tsPath: \"/ZWRK_C_CATEGORYLIST(p_user='\" + sCrUser + \"')/Set\",\r\n\t\t\t\t\tsControlId: \"idCategory\",\r\n\t\t\t\t\tsKey: \"{category}\",\r\n\t\t\t\t\tsDesc: \"{categorytext}\",\r\n\t\t\t\t\taFilterParam: aFilterP\r\n\t\t\t\t},\r\n\t\t\t\toParamLocalClass2 = {\r\n\t\t\t\t\tsPath: \"/ZWRK_C_GOSECTIONS(p_hdept='\" + sSecDept + \"',p_app='AS')/Set\",\r\n\t\t\t\t\tsControlId: \"idSecCode\",\r\n\t\t\t\t\tsKey: \"{sectioncode}\",\r\n\t\t\t\t\tsDesc: \"{sectioncode}\",\r\n\t\t\t\t\taFilterParam: []\r\n\t\t\t\t};\r\n\t\t\tthis._bindSelectItems([oParamLocalClass, oParamLocalClass1, oParamLocalClass2]);\r\n\t\t},\r\n\t\t/*---------------------------------------------DIGITAL SIGNATURE PROCESS --------------------------------------------------*/\r\n\t\t_handleDigitalSing: function(url, fioriLink) {\r\n\t\t\tthis.url = url;\r\n\t\t\tthis.fioriLink = fioriLink;\r\n\t\t\t//var pdf_data = this.oObj.Content;\r\n\t\t\tthis.getView().setBusy(true);\r\n\t\t\tthis.getView().setBusyIndicatorDelay(0);\r\n\t\t\tmyObj.SignDataInMemoryEx(pdf_data, \"\", true, true, 0, \"\", \"\", \"\", \"\", false, 0, resellerCode);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Callback function \r\n\t\t * @param {string} apiName \r\n\t\t * @param {string} status \r\n\t\t * @param {object} params \r\n\t\t */\r\n\t\tmycallback: function(apiName, status, params) {\r\n\t\t\tthat = this;\r\n\t\t\tvar retVal = \"\";\r\n\t\t\tthis.getView().setBusy(false);\r\n\t\t\tif (apiName === \"SignDataInMemoryEx\") {\r\n\t\t\t\t//console.log(params);\r\n\t\t\t\tif (typeof params.sig === \"undefined\" || params.sig === \"\") {\r\n\r\n\t\t\t\t\tretVal = \"\";\r\n\t\t\t\t\t// alert(\"Certificate operation failed: \" + status);\r\n\t\t\t\t\tvar Errordialog = new sap.m.Dialog({\r\n\t\t\t\t\t\ttitle: \"Error\",\r\n\t\t\t\t\t\ttype: \"Message\",\r\n\t\t\t\t\t\tstate: \"Error\",\r\n\t\t\t\t\t\tcontent: new sap.m.Text({\r\n\t\t\t\t\t\t\ttext: \"Certificate operation failed: \" + status\r\n\t\t\t\t\t\t}),\r\n\t\t\t\t\t\tbeginButton: new sap.m.Button({\r\n\t\t\t\t\t\t\ttext: \"OK\",\r\n\t\t\t\t\t\t\tpress: function() {\r\n\t\t\t\t\t\t\t\t// window.history.go(-1);\r\n\t\t\t\t\t\t\t\tErrordialog.close();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}),\r\n\t\t\t\t\t\tafterClose: function() {\r\n\t\t\t\t\t\t\tErrordialog.destroy();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tErrordialog.open();\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tvar signValue = params.sig;\r\n\t\t\t\t\tvar fileURL = this.url;\r\n\t\t\t\t\tvar oParameters = {\r\n\t\t\t\t\t\t\"sig\": signValue,\r\n\t\t\t\t\t\t// \"MyReason\": that.SingData.REASON,\r\n\t\t\t\t\t\t// \"MyLocation\": that.SingData.LOCATION,\r\n\t\t\t\t\t\t//\"PageNumber\": that.SingData.PAGENUMBER,\r\n\t\t\t\t\t\t\"PageNumber\": \"1\",\r\n\t\t\t\t\t\t// \"SigBlockTitle\": that.SingData.SIGN_TITLE,\r\n\t\t\t\t\t\t//\"SigPosition\": that.SingData.SIGN_POSITION,\r\n\t\t\t\t\t\t\"SigPosition\": \"4\",\r\n\t\t\t\t\t\t\"filetosign\": fileURL\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t// var getCertificateAPIUrl = serverUrl + \"/getcert.jsp\";\r\n\t\t\t\t\t//var getCertificateAPIUrl = that.SingData.URL;\r\n\t\t\t\t\t//var getCertificateAPIUrl = \"https://devdigicert.apcfss.in:8443/sign/getcert.jsp\";\r\n\t\t\t\t\tvar getCertificateAPIUrl = that.fioriLink.toLowerCase();\r\n\t\t\t\t\t// oModel.loadData(getCertificateAPIUrl, oParameters, true, 'POST');\r\n\t\t\t\t\t$.ajax({\r\n\t\t\t\t\t\turl: getCertificateAPIUrl,\r\n\t\t\t\t\t\tdata: oParameters,\r\n\t\t\t\t\t\ttype: \"POST\",\r\n\t\t\t\t\t\tsuccess: function(result) {\r\n\t\t\t\t\t\t\t// console.log(result);\r\n\t\t\t\t\t\t\tvar html = $.parseHTML(result);\r\n\r\n\t\t\t\t\t\t\tstrHash = html[5].value;\r\n\t\t\t\t\t\t\tsignerName = html[7].value;\r\n\t\t\t\t\t\t\toffset = html[9].value;\r\n\t\t\t\t\t\t\tsignerCert = html[11].value;\r\n\t\t\t\t\t\t\toutfile = html[13].value;\r\n\r\n\t\t\t\t\t\t\tvar oError = html[15];\r\n\t\t\t\t\t\t\tif (oError !== undefined) {\r\n\t\t\t\t\t\t\t\tif (oError.value !== undefined && oError.value !== \"\") {\r\n\t\t\t\t\t\t\t\t\tvar Errordialog = new sap.m.Dialog({\r\n\t\t\t\t\t\t\t\t\t\ttitle: \"Error\",\r\n\t\t\t\t\t\t\t\t\t\ttype: \"Message\",\r\n\t\t\t\t\t\t\t\t\t\tstate: \"Error\",\r\n\t\t\t\t\t\t\t\t\t\tcontent: new sap.m.Text({\r\n\t\t\t\t\t\t\t\t\t\t\ttext: oError.value\r\n\t\t\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\t\t\tbeginButton: new sap.m.Button({\r\n\t\t\t\t\t\t\t\t\t\t\ttext: \"OK\",\r\n\t\t\t\t\t\t\t\t\t\t\tpress: function() {\r\n\t\t\t\t\t\t\t\t\t\t\t\t// window.history.go(-1);\r\n\t\t\t\t\t\t\t\t\t\t\t\tErrordialog.close();\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\t\t\tafterClose: function() {\r\n\t\t\t\t\t\t\t\t\t\t\tErrordialog.destroy();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tErrordialog.open();\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tvar signerSubjectDN = signerName;\r\n\t\t\t\t\t\t\t\t\tmyObj.SignEncodedDataInBatch(strHash, 1, 0, 0, signerSubjectDN, \"\", \"\", \"\", 1, 0, resellerCode);\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t// return;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tvar signerSubjectDN = signerName;\r\n\t\t\t\t\t\t\t\tmyObj.SignEncodedDataInBatch(strHash, 1, 0, 0, signerSubjectDN, \"\", \"\", \"\", 1, 0, resellerCode);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\terror: function(oError) {\r\n\t\t\t\t\t\t\tvar Errordialog = new sap.m.Dialog({\r\n\t\t\t\t\t\t\t\ttitle: \"Error\",\r\n\t\t\t\t\t\t\t\ttype: \"Message\",\r\n\t\t\t\t\t\t\t\tstate: \"Error\",\r\n\t\t\t\t\t\t\t\tcontent: new sap.m.Text({\r\n\t\t\t\t\t\t\t\t\ttext: \"Error while signing the document\"\r\n\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\tbeginButton: new sap.m.Button({\r\n\t\t\t\t\t\t\t\t\ttext: \"OK\",\r\n\t\t\t\t\t\t\t\t\tpress: function() {\r\n\t\t\t\t\t\t\t\t\t\t// window.history.go(-1);\r\n\t\t\t\t\t\t\t\t\t\tErrordialog.close();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\tafterClose: function() {\r\n\t\t\t\t\t\t\t\t\tErrordialog.destroy();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tErrordialog.open();\r\n\t\t\t\t\t\t\t/*eslint-disable */\r\n\t\t\t\t\t\t\t//eslint-disable-no-useless-return\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t/*eslint-enable */\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else if (apiName === \"SignEncodedDataInBatch\") {\r\n\t\t\t\tif (typeof params.sig === \"undefined\") {\r\n\t\t\t\t\tretVal = \"\";\r\n\t\t\t\t\t/*eslint-disable */\r\n\t\t\t\t\t//eslint-disable-no-alert\r\n\t\t\t\t\talert(\"Certificate operation failed: \" + status);\r\n\t\t\t\t\t/*eslint-enable */\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tvar obj = {};\r\n\t\t\t\t\tretVal = params.sig;\r\n\t\t\t\t\tobj.Signername = retVal;\r\n\t\t\t\t\tobj.Offset = offset;\r\n\t\t\t\t\tobj.Strhash = strHash;\r\n\t\t\t\t\tobj.Signercert = signerCert;\r\n\t\t\t\t\tobj.Outfile = outfile;\r\n\t\t\t\t\t// obj.DocNo = this.WorkItemID;\r\n\t\t\t\t\tobj.Docyear = \"\";\r\n\t\t\t\t\tobj.PrintDocnr = \"\";\r\n\t\t\t\t\tobj.Docno = \"\";\r\n\t\t\t\t\tobj.Publaw = \"\";\r\n\t\t\t\t\tobj.Mandt = \"\";\r\n\t\t\t\t\tobj.Sysid = \"\";\r\n\t\t\t\t\tvar oDigiModel = null;\r\n\t\t\t\t\tobj.Guid = this.getView().getBindingContext().getProperty(\"Guid\");\r\n\t\t\t\t\tobj.Version = this.getView().getBindingContext().getProperty(\"Version\");\r\n\t\t\t\t\tif (this.oAmendment === \"X\") {\r\n\t\t\t\t\t\tvar oServiceULR = \"/sap/opu/odata/sap/ZGW_BD_GO_AMD_SRV\";\r\n\t\t\t\t\t\toDigiModel = new sap.ui.model.odata.ODataModel(oServiceULR, true);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\toDigiModel = this.getModel();\r\n\t\t\t\t\t}\r\n\t\t\t\t\toDigiModel.create(\"/SendPdfSet\", obj, {\r\n\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\tthat.getView().setBusy(false);\r\n\t\t\t\t\t\t\tthat.getModel(\"detailView\").setProperty(\"/Notingstring\", \"\");\r\n\t\t\t\t\t\t\tthat.oProcessActionPromise = null;\r\n\t\t\t\t\t\t\tthat.getModel(\"detailView\").setProperty(\"/DraftStatus\", \"X\");\r\n\t\t\t\t\t\t\tthat._successToastMsgDisplay(\"APPROVE\");\r\n\t\t\t\t\t\t\tthat._navToDetail.bind(that)(\"D\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\terror: function(E) {\r\n\t\t\t\t\t\t\tthat.getView().setBusy(false);\r\n\t\t\t\t\t\t\t// sap.m.MessageBox.show(JSON.parse(E.responseText).error.message.value, {\r\n\t\t\t\t\t\t\t// \ticon: sap.m.MessageBox.Icon.ERROR,\r\n\t\t\t\t\t\t\t// \ttitle: \"Error\",\r\n\t\t\t\t\t\t\t// \tactions: [sap.m.MessageBox.Action.CLOSE]\r\n\t\t\t\t\t\t\t// });\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tasync: false\r\n\t\t\t\t\t});\r\n\t\t\t\t\t/*eslint-disable */\r\n\t\t\t\t\t//eslint-disable-no-alert\r\n\t\t\t\t\tconsole.log(retVal);\r\n\t\t\t\t\t/*eslint-enable */\r\n\t\t\t\t\t//\tvar signAPIUrl = \"https://332d4937.ngrok.io/signhash.jsp\";\r\n\t\t\t\t\tvar signAPIUrl = serverUrl + \"/signhash.jsp\";\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\t/**\r\n\t\t * Function to validate \r\n\t\t * @param {*} oEvent \r\n\t\t */\r\n\t\t_checkSecrataryMand: function() {\r\n\t\t\tvar bValidAS = true,\r\n\t\t\t\toResourceBundle = this.getResourceBundle(),\r\n\t\t\t\toBindingContext = this.getView().getBindingContext(),\r\n\t\t\t\toDetailViewModel = this.getModel(\"detailView\"),\r\n\t\t\t\tbIsSecratary = oDetailViewModel.getProperty(\"/bIsSecratary\");\r\n\t\t\tif (bIsSecratary) {\r\n\t\t\t\tvar sSectionCode = oBindingContext.getProperty(\"SecDode\");\r\n\t\t\t\tif (!sSectionCode) {\r\n\t\t\t\t\tbValidAS = false;\r\n\t\t\t\t\toDetailViewModel.setProperty(\"/secCodeValueState\", \"Error\");\r\n\t\t\t\t\toDetailViewModel.setProperty(\"/secCodeValueStateText\", oResourceBundle.getText(\"detail.message.error.mandatory\"));\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar sGoNum = oBindingContext.getProperty(\"GoNumber\"),\r\n\t\t\t\t\toGoDate = oBindingContext.getProperty(\"GoRefDate\");\r\n\t\t\t\tif (!sGoNum || !oGoDate) {\r\n\t\t\t\t\tbValidAS = false;\r\n\t\t\t\t\tif (!sGoNum) {\r\n\t\t\t\t\t\toDetailViewModel.setProperty(\"/GoNumValueState\", \"Error\");\r\n\t\t\t\t\t\toDetailViewModel.setProperty(\"/GoNumValueStateText\", oResourceBundle.getText(\"detail.message.error.mandatory\"));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!oGoDate) {\r\n\t\t\t\t\t\toDetailViewModel.setProperty(\"/goDateValueState\", \"Error\");\r\n\t\t\t\t\t\toDetailViewModel.setProperty(\"/goDateValueStateText\", oResourceBundle.getText(\"detail.message.error.mandatory\"));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn bValidAS;\r\n\t\t},\r\n\t\t_notAllowEditOnDocument: function() {\r\n\t\t\tvar bEditable = false,\r\n\t\t\t\toDetailViewModel = this.getModel(\"detailView\"),\r\n\t\t\t\toResourceBundle = this.getResourceBundle(),\r\n\t\t\t\toAppViewModel = this.getModel(\"appView\");\r\n\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bUserCanEdit\", false);\r\n\t\t\toDetailViewModel.setProperty(\"/stateId\", \"D\");\r\n\t\t\toAppViewModel.setProperty(\"/bEnabledMasterViewCtr\", true);\r\n\t\t\toAppViewModel.setProperty(\"/sMasterListMode\", \"SingleSelectMaster\");\r\n\t\t\toDetailViewModel.setProperty(\"/bEditable\", bEditable);\r\n\t\t\tsap.ushell.Container.setDirtyFlag(false);\r\n\t\t},\r\n\t\t_allowEditOnDocument: function() {\r\n\t\t\tvar bEditable = true,\r\n\t\t\t\toDetailViewModel = this.getModel(\"detailView\"),\r\n\t\t\t\toResourceBundle = this.getResourceBundle(),\r\n\t\t\t\toAppViewModel = this.getModel(\"appView\");\r\n\r\n\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bUserCanEdit\", true);\r\n\t\t\toDetailViewModel.setProperty(\"/stateId\", \"E\");\r\n\t\t\toAppViewModel.setProperty(\"/bEnabledMasterViewCtr\", false);\r\n\t\t\toAppViewModel.setProperty(\"/sMasterListMode\", \"None\");\r\n\t\t\toDetailViewModel.setProperty(\"/bEditable\", bEditable);\r\n\t\t\tsap.ushell.Container.setDirtyFlag(false);\r\n\t\t},\r\n\r\n\t\t_bindViewDone: function() {\r\n\t\t\tvar that = this;\r\n\t\t\tvar oViewModel = this.getModel(\"detailView\");\r\n\r\n\t\t\tif (this.getView().getBindingContext()) {\r\n\t\t\t\toViewModel.setProperty(\"/busy\", true);\r\n\t\t\t\tvar oPromiseWorkFlowLog = new Promise(function(resolve1, reject1) {\r\n\t\t\t\t\tthat.getWorkFlowLogDetails({\r\n\t\t\t\t\t\tApplicationId: \"AS\",\r\n\t\t\t\t\t\tGuid: that.getView().getBindingContext().getProperty(\"Guid\")\r\n\t\t\t\t\t}, resolve1, reject1);\r\n\t\t\t\t}.bind(that));\r\n\t\t\t\toPromiseWorkFlowLog.then(function() {\r\n\t\t\t\t\toViewModel.setProperty(\"/busy\", false);\r\n\t\t\t\t});\r\n\t\t\t\toViewModel.setProperty(\"/Notingstring\", \"\");\r\n\t\t\t\toViewModel.updateBindings();\r\n\t\t\t\tthat.subClassL01Value = that.getView().getBindingContext().getProperty(\"SubclassL01\");\r\n\t\t\t\tthat.byId(\"idSubClass01\").getBinding(\"suggestionItems\").refresh();\r\n\t\t\t\tthat.byId(\"idSubClass02\").getBinding(\"suggestionItems\").refresh();\r\n\t\t\t\tthat.byId(\"idSubClass03\").getBinding(\"suggestionItems\").refresh();\r\n\r\n\t\t\t\tthat.getView().getModel(\"detailView\").setProperty(\"/CategoryKey\", that.getView().getBindingContext().getProperty(\"Category\"));\r\n\t\t\t\tthat.getView().getModel(\"detailView\").setProperty(\"/ExecutingDeptKey\", that.getView().getBindingContext().getProperty(\r\n\t\t\t\t\t\"ExecutingDept\"));\r\n\t\t\t\tthat.getView().getModel(\"detailView\").setProperty(\"/SanctioningDeptKey\", that.getView().getBindingContext().getProperty(\r\n\t\t\t\t\t\"InitiatinDept\"));\r\n\r\n\t\t\t\tthat.getUserFeedList();\r\n\t\t\t\tthat._setObjectSectionVisibility();\r\n\t\t\t\tthat._setLocationListDisplay();\r\n\t\t\t\tif (that._clearValueStates) {\r\n\t\t\t\t\tthat._clearValueStates(\"oControlModel\");\r\n\t\t\t\t}\r\n\t\t\t\tthat._switchControlModel();\r\n\t\t\t\tthat._setAmendPageTitle(that.getModel(\"detailView\").getProperty(\"/stateId\"));\r\n\t\t\t\t//set the Object  Header Title\r\n\t\t\t\tthat.setPageHeaderTitle(that.getModel(\"detailView\").getProperty(\"/stateId\"));\r\n\t\t\t\t//\tthat._bindTreeTableRows();\r\n\t\t\t\tthat.byId(\"idWorksHoA\").updateAggregation(\"items\");\r\n\t\t\t\tthat._identifyHoaDdoFilters();\r\n\t\t\t\tthat._setHoaDdoFilters();\r\n\t\t\t\t//Bind Position\r\n\t\t\t\tthat._updatePositionBinding();\r\n\t\t\t\t//Clear MainworkNature\r\n\t\t\t\tthat._initControlValue();\r\n\t\t\t\t//Dynamic BindingLocal Class and catory\r\n\t\t\t\tthat._bindSelectControl();\r\n\t\t\t\t//Dynamic enable of Executing Dept if No TS is create with this AS\r\n\t\t\t\tthat._editableExectDepartment();\r\n\r\n\t\t\t\tvar documentPosition;\r\n\t\t\t\tif (that.getView().getBindingContext().getProperty(\"Udf1\")) {\r\n\t\t\t\t\tdocumentPosition = that.getView().getBindingContext().getProperty(\"Udf1\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdocumentPosition = this.getModel(\"appView\").getProperty(\"/position\");\r\n\t\t\t\t}\r\n\t\t\t\tvar aFilters = [];\r\n\t\t\t\tvar oFilter = new Filter(\r\n\t\t\t\t\t\"UserPosition\",\r\n\t\t\t\t\tsap.ui.model.FilterOperator.Contains, documentPosition\r\n\t\t\t\t);\r\n\t\t\t\taFilters.push(oFilter);\r\n\t\t\t\t//\t\t\t            if (that.getView().getBindingContext().getProperty(\"MigrationInd\")) {\r\n\t\t\t\tvar oFilterGuid = new Filter(\r\n\t\t\t\t\t\"ASGuid\",\r\n\t\t\t\t\tsap.ui.model.FilterOperator.EQ, that.getView().getBindingContext().getProperty(\"MigrationInd\") === false ?\r\n\t\t\t\t\t\"00000000-0000-0000-0000-000000000000\" : that.getView().getBindingContext().getProperty(\"Guid\")\r\n\t\t\t\t);\r\n\t\t\t\taFilters.push(oFilterGuid);\r\n\t\t\t\t//\t\t\t            }\r\n\t\t\t\tthat.getView().byId(\"idInitDept\").getBinding(\"items\").filter(aFilters);\r\n\t\t\t\t//\t\tthat.getView().byId(\"idInitDept\").getBinding(\"items\").refresh();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_navBackPreventDefault: function(sMainAction, sWarningMsg) {\r\n\t\t\tif (sap.ui.getCore().getModel(\"ZWRKGlobalModel\").getProperty(\"/AS/SessionGuid\")) {\r\n\t\t\t\tif (this.getModel(\"detailView\").getProperty(\"/bEditable\")) {\r\n\t\t\t\t\tvar sMsgText = this.getModel(\"i18n\").getResourceBundle().getText(sWarningMsg);\r\n\t\t\t\t\tMessageBox.warning(sMsgText, {\r\n\t\t\t\t\t\tactions: [MessageBox.Action.YES, MessageBox.Action.NO],\r\n\t\t\t\t\t\tonClose: function(oAction) {\r\n\t\t\t\t\t\t\tif (oAction === MessageBox.Action.YES) {\r\n\t\t\t\t\t\t\t\tvar oParam = {\r\n\t\t\t\t\t\t\t\t\tApplication: \"AS\",\r\n\t\t\t\t\t\t\t\t\tGuid: this.getView().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\t\t\t\t\t\tSessionGuid: sap.ui.getCore().getModel(\"ZWRKGlobalModel\").getProperty(\"/AS/SessionGuid\")\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tsap.ushell.Container.setDirtyFlag(false);\r\n\t\t\t\t\t\t\t\tthis._deleteLockAndNavBack(\"LOCKDEL\", oParam.Guid, oParam.Application, oParam.SessionGuid, sMainAction);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}.bind(this)\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (sMainAction === \"BackBtnAction\") {\r\n\t\t\t\t\t\twindow.history.go(-1);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis._navToShellHome();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tonSelectChangeCategory: function(oEvent) {\r\n\t\t\tvar sFValue = \"\",\r\n\t\t\t\tsKey = oEvent.getSource().data(\"clearKey\");\r\n\t\t\tif (sKey) {\r\n\t\t\t\tvar oParams = {\r\n\t\t\t\t\tsProperty: sKey\r\n\t\t\t\t};\r\n\t\t\t\tthis._clearDependentField(oParams);\r\n\t\t\t}\r\n\t\t\tif (oEvent.getSource().getMetadata().getElementName() === \"sap.m.DatePicker\") {\r\n\t\t\t\tsFValue = sap.ui.model.odata.ODataUtils.formatValue(oEvent.getSource().getDateValue(), \"Edm.DateTime\");\r\n\t\t\t} else {\r\n\t\t\t\tsFValue = oEvent.getSource().getSelectedKey();\r\n\t\t\t}\r\n\t\t\tif (sFValue || !oEvent.getSource().getValue()) {\r\n\t\t\t\toEvent.getSource().setValueState();\r\n\t\t\t\tif (this.getModel(\"oControlModel\")) {\r\n\t\t\t\t\tthis.getModel(\"oControlModel\").setProperty(\"/\" + oEvent.getSource().getCustomData()[0].getProperty(\"value\") + \"/\" + \"/valueState\",\r\n\t\t\t\t\t\t\"None\");\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\t\t\t\toEvent.getSource().setValueState(\"Error\");\r\n\t\t\t}\r\n\r\n\t\t\tvar sorceHoATable = this.getView().byId(\"idWorksHoA\").getItems();\r\n\t\t\tvar Fnam = oEvent.getSource().getCustomData()[0].getProperty(\"value\");\r\n\t\t\tvar previousCategory = this.getView().getModel(\"detailView\").getProperty(\"/CategoryKey\");\r\n\t\t\tvar sMsgText = this.getModel(\"i18n\").getResourceBundle().getText(\"detail.message.warning.changeCategory\");\r\n\t\t\tif (previousCategory) {\r\n\t\t\t\tif (previousCategory !== sFValue && sorceHoATable.length > 0) {\r\n\t\t\t\t\tMessageBox.confirm(sMsgText, {\r\n\t\t\t\t\t\tonClose: function(oAction) {\r\n\t\t\t\t\t\t\tif (oAction !== MessageBox.Action.OK) {\r\n\t\t\t\t\t\t\t\tthis.getView().byId(\"idCategory\").setSelectedKey(previousCategory);\r\n\t\t\t\t\t\t\t\t//return;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis._changeCategorySuccessful(Fnam, sFValue);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}.bind(this)\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis._changeCategorySuccessful(Fnam, sFValue);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis._changeCategorySuccessful(Fnam, sFValue);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_changeCategorySuccessful: function(Fnam, sFValue) {\r\n\t\t\tvar oDetailViewModel = this.getModel(\"detailView\");\r\n\t\t\tif (sFValue === \"02\") {\r\n\t\t\t\toDetailViewModel.setProperty(\"/bUAVisible\", true);\r\n\t\t\t\toDetailViewModel.setProperty(\"/bOwnDCW\", true);\r\n\t\t\t} else {\r\n\t\t\t\toDetailViewModel.setProperty(\"/bUAVisible\", false);\r\n\t\t\t\toDetailViewModel.setProperty(\"/bOwnDCW\", false);\r\n\t\t\t}\r\n\r\n\t\t\tthis.bRefreshDDoTable = true;\r\n\t\t\tthis._identifyHoaDdoFilters();\r\n\t\t\tthis._setHoaDdoFilters();\r\n\t\t\tthis._updateCallForCategoryandExeDeptandSancDept(Fnam, sFValue);\r\n\t\t\tthis.getView().getModel(\"detailView\").setProperty(\"/CategoryKey\", sFValue);\r\n\t\t},\r\n\r\n\t\tonSelectChangeExectDept: function(oEvent) {\r\n\t\t\tvar sPreviousExetDept = this.getView().getModel(\"detailView\").getProperty(\"/ExecutingDeptKey\");\r\n\t\t\tvar sFValue = oEvent.getSource().getSelectedKey();\r\n\t\t\tvar Fnam = oEvent.getSource().getCustomData()[0].getProperty(\"value\");\r\n\t\t\tvar sorceHoATable = this.getView().byId(\"idWorksHoA\").getItems();\r\n\t\t\tvar sMsgText = this.getModel(\"i18n\").getResourceBundle().getText(\"detail.message.warning.changeExectDept\");\r\n\t\t\tif (sPreviousExetDept) {\r\n\t\t\t\tif (sPreviousExetDept !== sFValue && sorceHoATable.length > 0) {\r\n\t\t\t\t\tMessageBox.confirm(sMsgText, {\r\n\t\t\t\t\t\tonClose: function(oAction) {\r\n\t\t\t\t\t\t\tif (oAction !== MessageBox.Action.OK) {\r\n\t\t\t\t\t\t\t\tthis.getView().byId(\"idExecDept\").setSelectedKey(sPreviousExetDept);\r\n\t\t\t\t\t\t\t\t//\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis._changeExectDeptSuccessful(Fnam, sFValue);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}.bind(this)\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis._changeExectDeptSuccessful(Fnam, sFValue);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis._changeExectDeptSuccessful(Fnam, sFValue);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_changeExectDeptSuccessful: function(Fnam, sFValue) {\r\n\t\t\tthis.bRefreshDDoTable = true;\r\n\t\t\tif (this.getView().getBindingContext().getProperty(\"Status\") === \"E0003\") {\r\n\t\t\t\tthis.bRefreshDDoTable = false;\r\n\t\t\t}\r\n\t\t\tthis._identifyHoaDdoFilters();\r\n\t\t\tthis._setHoaDdoFilters();\r\n\t\t\tthis._updateCallForCategoryandExeDeptandSancDept(Fnam, sFValue);\r\n\t\t\tthis.getView().getModel(\"detailView\").setProperty(\"/ExecutingDeptKey\", sFValue);\r\n\t\t},\r\n\r\n\t\t_updateCallForCategoryandExeDeptandSancDept: function(Fnam, sFValue) {\r\n\t\t\tvar oASUpdatePayload = {\r\n\t\t\t\tAction: \"UPHDR\",\r\n\t\t\t\tGuid: this.getView().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\tLockTimestamp: \"\\/Date(\" + (new Date()).getTime() + \")\\/\",\r\n\t\t\t\tFnam: Fnam,\r\n\t\t\t\tFval: sFValue,\r\n\t\t\t\tCode: \"\",\r\n\t\t\t\tPosition: this.getModel(\"appView\").getProperty(\"/position\"),\r\n\t\t\t\tInitiatinDept: \"\",\r\n\t\t\t\tDepartDesc: \"\",\r\n\t\t\t\tSessionGuid: sap.ui.getCore().getModel(\"ZWRKGlobalModel\").getProperty(\"/AS/SessionGuid\")\r\n\t\t\t};\r\n\t\t\t/*if (oEvent.getSource().data(\"apprField\") && (oEvent.getSource().getBindingContext().getProperty(\"Status\") === \"E0003\")) {\r\n\t\t\t\toASUpdatePayload.Action = \"APPR_UPDT\";\r\n\t\t\t}\r\n\t\t\tif (oEvent.getSource().getCustomData() && oEvent.getSource().getCustomData()[0].getValue() === \"Scheme\" && (oEvent.getSource().getBindingContext()\r\n\t\t\t\t\t.getProperty(\"Status\") === \"E0003\")) {\r\n\t\t\t\toASUpdatePayload.Action = \"APPR_UPDT\";\r\n\t\t\t}*/\r\n\t\t\t//var sUpdPath = \"/WrkASDetailsDraftSet(Guid=guid'\" + oEvent.getSource().getBindingContext().getProperty(\"Guid\") + \"'),LockTimestamp=\\/Date(\" +  ( new Date()).getTime() + \")\\/ )\";\r\n\r\n\t\t\tif (this.getView().getBindingContext().getProperty(\"Status\") === \"E0003\") {\r\n\t\t\t\toASUpdatePayload.Action = \"APPR_UPDT\";\r\n\t\t\t}\r\n\r\n\t\t\tvar sUpdPath = this.getModel().createKey(\"WrkASDetailsDraftSet\", {\r\n\t\t\t\tGuid: this.getView().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\tLockTimestamp: new Date().getTime()\r\n\t\t\t});\r\n\r\n\t\t\tsUpdPath = \"/\" + sUpdPath;\r\n\t\t\tthis.getModel().update(sUpdPath, oASUpdatePayload, {\r\n\t\t\t\tsuccess: function(oData, oResponse) {\r\n\t\t\t\t\tthis.getModel().setProperty(oASUpdatePayload.Fnam, oASUpdatePayload.Fval, this.getView().getElementBinding());\r\n\t\t\t\t\tif (this.bRefreshDDoTable) {\r\n\t\t\t\t\t\tthis.byId(\"idWorksSrcHoA\").getBinding(\"items\").refresh(true);\r\n\t\t\t\t\t\tthis.byId(\"idWorksHoA\").getBinding(\"items\").refresh(true);\r\n\t\t\t\t\t\tthis.byId(\"idBudgetCtrl\").setValue(\"\");\r\n\t\t\t\t\t\tthis.byId(\"idBudgetCtrl\").fireChange();\r\n\t\t\t\t\t\tthis.bRefreshDDoTable = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ((Fnam === \"ExecutingDept\" || Fnam === \"InitiatinDept\") && this.getView().getBindingContext().getProperty(\"Status\") ===\r\n\t\t\t\t\t\t\"E0003\") {\r\n\t\t\t\t\t\tthis._deleteDDOforCheckerandApprover();\r\n\t\t\t\t\t}\r\n\t\t\t\t}.bind(this),\r\n\t\t\t\terror: function(oError) {\r\n\r\n\t\t\t\t},\r\n\t\t\t\trefreshAfterChange: false\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t_deleteDDOforCheckerandApprover: function() {\r\n\t\t\tvar sGetPath = this.getModel().createKey(\"WrkHOASet\", {\r\n\t\t\t\tGuid: this.getView().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\tHoaGuid: \"00000000-0000-0000-0000-000000000000\"\r\n\t\t\t});\r\n\r\n\t\t\tthis.getView().getModel().remove(\"/\" + sGetPath, {\r\n\t\t\t\turlParameters: {\r\n\t\t\t\t\tAction: \"APPR_DELI\"\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function(oData, oResponse) {\r\n\t\t\t\t\tthis.byId(\"idWorksSrcHoA\").getBinding(\"items\").refresh(true);\r\n\t\t\t\t\tthis.byId(\"idWorksHoA\").getBinding(\"items\").refresh(true);\r\n\t\t\t\t\tthis.byId(\"idBudgetCtrl\").setValue(\"\");\r\n\t\t\t\t\tthis.byId(\"idBudgetCtrl\").fireChange();\r\n\t\t\t\t\tthis.bRefreshDDoTable = false;\r\n\t\t\t\t}.bind(this),\r\n\t\t\t\terror: function(oError) {\r\n\r\n\t\t\t\t}.bind(this)\r\n\r\n\t\t\t});\r\n\r\n\t\t},\r\n\r\n\t\t_editableExectDepartment: function() {\r\n\t\t\tvar bFieldControlOfExectDept = false;\r\n\t\t\t/*if(this.getView().getModel(\"oControlModel\")){\r\n\t\t\t\tbFieldControlOfExectDept  = this.getView().getModel(\"oControlModel\").getProperty(\"/\").ExecutingDept.display;\r\n\t\t\t}*/\r\n\r\n\t\t\t//New create AS only guid is available\r\n\t\t\t//else call _editableExectDepartment after\r\n\t\t\t// _callFieldControlBasedOnRole where we have updated\r\n\t\t\t// field control\r\n\t\t\tif (!this.getView().getBindingContext().getProperty(\"Code\")) {\r\n\t\t\t\tthis.getView().getModel(\"detailView\").setProperty(\"/bEditExectDept\", true);\r\n\t\t\t} else {\r\n\t\t\t\tthis._checkAvailableTSforASCode(bFieldControlOfExectDept);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\t_checkAvailableTSforASCode: function(bFieldControlOfExectDept) {\r\n\t\t\tvar sPath = \"/ZWRK_C_TSHDR_DETAILS_C\",\r\n\t\t\t\taFilters = [];\r\n\t\t\taFilters.push(new Filter(\"as_refcode\", FilterOperator.EQ, this.getView().getBindingContext().getProperty(\"Code\")));\r\n\t\t\tthis.getView().getModel().read(sPath, {\r\n\t\t\t\tfilters: aFilters,\r\n\t\t\t\tsuccess: function(oData) {\r\n\t\t\t\t\tif (oData.results.length > 0) {\r\n\t\t\t\t\t\tthis.getView().getModel(\"detailView\").setProperty(\"/bEditExectDept\", false);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.getView().getModel(\"detailView\").setProperty(\"/bEditExectDept\", true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}.bind(this),\r\n\t\t\t\terror: function() {\r\n\t\t\t\t\tthis.getView().getModel(\"detailView\").setProperty(\"/bEditExectDept\", false);\r\n\t\t\t\t}.bind(this)\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t *Checking Document Role if role is same then don't call fieldControl\r\n\t\t */\r\n\t\t_getOpenItemRole: function() {\r\n\t\t\tvar oDynamicBusyIndicator = new DynamicBusyIndicator(this);\r\n\t\t\toDynamicBusyIndicator.startBusy();\r\n\t\t\tvar that = this,\r\n\t\t\t\tsPositionId = this.getModel(\"appView\").getProperty(\"/position\"),\r\n\t\t\t\tsObjectId = this.getView().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\toAppViewModel = this.getModel(\"appView\"),\r\n\t\t\t\toResourceBundle = this.getResourceBundle(),\r\n\t\t\t\toDetailViewModel = this.getModel(\"detailView\");\r\n\r\n\t\t\tvar oAuth = new Promise(function(resolve, reject) {\r\n\t\t\t\tthis.getOwnerComponent().oDraft.getAuthorization({\r\n\t\t\t\t\tfName: \"/GetOpenItems\",\r\n\t\t\t\t\tApplicationId: \"AS\",\r\n\t\t\t\t\tGuid: sObjectId,\r\n\t\t\t\t\tPositionId: sPositionId\r\n\t\t\t\t}, resolve, reject);\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\toAuth.then(function(oResult) {\r\n\t\t\t\toDynamicBusyIndicator.endBusy();\r\n\t\t\t\tvar oOpenItems = oResult.data.GetOpenItems;\r\n\t\t\t\tthis.getModel(\"detailView\").setProperty(\"/WfRole\", oOpenItems.Wfrole);\r\n\t\t\t\tthis._callFieldControlBasedOnRole();\r\n\t\t\t}.bind(this));\r\n\t\t},\r\n\r\n\t\t_callFieldControlBasedOnRole: function() {\r\n\t\t\tvar oDynamicBusyIndicator = new DynamicBusyIndicator(this);\r\n\t\t\toDynamicBusyIndicator.startBusy();\r\n\t\t\tvar sStorePosition = jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\").PositionId;\r\n\t\t\tvar sStorageRole = jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\").Role;\r\n\t\t\tvar oViewAppModel = this.getOwnerComponent().getModel(\"appView\");\r\n\t\t\toViewAppModel.setProperty(\"/position\", sStorePosition);\r\n\t\t\toViewAppModel.setProperty(\"/role\", sStorageRole);\r\n\t\t\tif ((this.getModel(\"detailView\").getProperty(\"/WfRole\") !== this.getModel(\"detailView\").getProperty(\"/sFiledControlRole\")) && (\r\n\t\t\t\t\tsStorageRole !== this.getModel(\"detailView\").getProperty(\"/WfRole\"))) {\r\n\t\t\t\tvar fieldControlCall = new Promise(function(resolve1, reject1) {\r\n\t\t\t\t\tthis._callFieldControl({\r\n\t\t\t\t\t\taction: \"LOAD\",\r\n\t\t\t\t\t\tapplication: \"AS\",\r\n\t\t\t\t\t\tPositionid: sStorePosition,\r\n\t\t\t\t\t\tRole: this.getModel(\"detailView\").getProperty(\"/WfRole\") ? this.getModel(\"detailView\").getProperty(\"/WfRole\") : sStorageRole\r\n\t\t\t\t\t}, resolve1, reject1);\r\n\t\t\t\t}.bind(this));\r\n\r\n\t\t\t\tfieldControlCall.then(function(oData) {\r\n\t\t\t\t\toDynamicBusyIndicator.endBusy();\r\n\t\t\t\t}.bind(this));\r\n\t\t\t\tthis.getModel(\"detailView\").setProperty(\"/sFiledControlRole\", this.getModel(\"detailView\").getProperty(\"/WfRole\"));\r\n\t\t\t\t//              \r\n\t\t\t} else if (this.getModel(\"detailView\").getProperty(\"/sFiledControlRole\")) {\r\n\t\t\t\tif (sStorageRole !== this.getModel(\"detailView\").getProperty(\"/sFiledControlRole\") && (this.getModel(\"detailView\").getProperty(\r\n\t\t\t\t\t\t\"/WfRole\") !== this.getModel(\"detailView\").getProperty(\"/sFiledControlRole\"))) {\r\n\t\t\t\t\tvar fieldControlCall = new Promise(function(resolve1, reject1) {\r\n\t\t\t\t\t\tthis._callFieldControl({\r\n\t\t\t\t\t\t\taction: \"LOAD\",\r\n\t\t\t\t\t\t\tapplication: \"AS\",\r\n\t\t\t\t\t\t\tPositionid: sStorePosition,\r\n\t\t\t\t\t\t\tRole: this.getModel(\"detailView\").getProperty(\"/WfRole\") ? this.getModel(\"detailView\").getProperty(\"/WfRole\") : sStorageRole\r\n\t\t\t\t\t\t}, resolve1, reject1);\r\n\t\t\t\t\t}.bind(this));\r\n\r\n\t\t\t\t\tfieldControlCall.then(function(oData) {\r\n\t\t\t\t\t\toDynamicBusyIndicator.endBusy();\r\n\t\t\t\t\t}.bind(this));\r\n\t\t\t\t\tthis.getModel(\"detailView\").setProperty(\"/sFiledControlRole\", this.getModel(\"detailView\").getProperty(\"/WfRole\"));\r\n\t\t\t\t} else {\r\n\t\t\t\t\toDynamicBusyIndicator.endBusy();\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.controlModelSwitch(this.oDefaultControlModel);\r\n\t\t\t\toDynamicBusyIndicator.endBusy();\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * @param {sap.ui.base.Event} oEvent event raised on start of checklist attachment upload\r\n\t\t */\r\n\t\tonBeforeChecklistUploadStarts: function(oEvent) {\r\n\t\t\tvar sFileName = oEvent.getParameter(\"fileName\"),\r\n\t\t\t\tsReason = this.byId(\"idTextAreaReason\").getValue(),\r\n\t\t\t\tHGuid = this.getView().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\tsLongitude = \"\",\r\n\t\t\t\tsLatitude = \"\",\r\n\t\t\t\tsDocCategory = sap.ui.core.Fragment.byId(this.createId(\"idCheckList\"), \"idDocCategory\").getValue();\r\n\t\t\tvar oCustomerHeaderSlug = new UploadCollectionParameter({\r\n\t\t\t\tname: \"slug\",\r\n\t\t\t\tvalue: HGuid + \";\" + sFileName + \";\" + sDocCategory + \";ChecList;\" + sLongitude + \";\" + sLatitude + \";\" + \"ZWAS\"\r\n\t\t\t});\r\n\t\t\toEvent.getParameters().addHeaderParameter(oCustomerHeaderSlug);\r\n\t\t},\r\n\t\t/**\tfor pdf virer pupose added  -cfms_ctm_npv (9_3_23) */\r\n\t\tonAttachPdfVewer: function(oEvent) {\r\n\t\t\tthis._pdfViewer = new sap.m.PDFViewer();\r\n\t\t\tthis.getView().addDependent(this._pdfViewer);\r\n\t\t\tvar sSource = oEvent.getSource().getCustomData()[0].getValue();\r\n\t\t\t// oEvent.getSource().getThumbnailUrl();\r\n\t\t\t/*\tvar sSource = oEvent.getSource().getModel().getData().Source;*/\r\n\t\t\tthis._pdfViewer.setSource(sSource);\r\n\t\t\tthis._pdfViewer.setTitle(\"View as PDF\");\r\n\t\t\tthis._pdfViewer.open();\r\n\t\t},\r\n\t\t/**\tfor pdf virer pupose added  -cfms_ctm_npv (9_3_23) */\r\n\t\t/**\r\n\t\t * \r\n\t\t * \r\n\t\t * @param {sap.ui.base.Event} oEvent event raised before upload starts\r\n\t\t */\r\n\t\tonBeforeUploadStarts: function(oEvent) {\r\n\t\t\tvar sFileName = oEvent.getParameter(\"fileName\"),\r\n\t\t\t\tsReason = this.byId(\"idTextAreaReason\").getValue(),\r\n\t\t\t\tsLongitude = \"\",\r\n\t\t\t\tsLatitude = \"\",\r\n\t\t\t\tHGuid = this.getView().getBindingContext().getProperty(\"Guid\");\r\n\t\t\tthis.byId(\"idTextAreaReason\").setValue(\"\");\r\n\t\t\tvar oCustomerHeaderSlug = new UploadCollectionParameter({\r\n\t\t\t\tname: \"slug\",\r\n\t\t\t\tvalue: HGuid + \";\" + sFileName + \";;\" + sReason + \";\" + sLongitude + \";\" + sLatitude + \";\" + \"ZWAS\"\r\n\t\t\t});\r\n\t\t\toEvent.getParameters().addHeaderParameter(oCustomerHeaderSlug);\r\n\t\t},\r\n\t\t/**\r\n\t\t * @param {sap.ui.base.Event} oEvent event raised on change of checklist\r\n\t\t */\r\n\r\n\t\tonChecklistButtonPress: function(oEvent) {\r\n\t\t\tif (!this._checklistFrag) {\r\n\t\t\t\tvar fragId = this.createId(\"idCheckList\");\r\n\t\t\t\tthis._checklistFrag = sap.ui.xmlfragment(fragId, \"com.goap.cfms.works.as.fragment.checkListAttachment\", this);\r\n\t\t\t\tthis.getView().addDependent(this._checklistFrag);\r\n\t\t\t\tjQuery.sap.syncStyleClass(\"sapUiSizeCompact\", this.getView(), this._checklistFrag);\r\n\t\t\t}\r\n\t\t\tthis._checklistFrag.open();\r\n\t\t\tvar aFilter = [];\r\n\t\t\taFilter.push(new Filter(\"DocCategory\", FilterOperator.EQ, oEvent.getSource().getBindingContext().getProperty(\"ChkId\")));\r\n\t\t\taFilter.push(new Filter(\"DocGuid\", FilterOperator.EQ, this.getView().getBindingContext().getProperty(\"Guid\")));\r\n\t\t\taFilter.push(new Filter(\"DocType\", FilterOperator.EQ, \"ZWAS\"));\r\n\t\t\tsap.ui.core.Fragment.byId(this.createId(\"idCheckList\"), \"idChecklistUploadCollection\").getBinding(\"items\").filter(aFilter);\r\n\t\t\tsap.ui.core.Fragment.byId(this.createId(\"idCheckList\"), \"idDocCategory\").setValue(oEvent.getSource().getBindingContext().getProperty(\r\n\t\t\t\t\"ChkId\"));\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * @param {sap.ui.base.Event} oEvent event raised after upload completes\r\n\t\t */\r\n\t\tonUploadComplete: function(oEvent) {\r\n\r\n\t\t\tvar aAttachFilters = new Filter({\r\n\t\t\t\tfilters: [\r\n\t\t\t\t\tnew Filter(\"DocType\", \"EQ\", \"ZWAS\")\r\n\t\t\t\t],\r\n\t\t\t\tand: true\r\n\t\t\t});\r\n\t\t\toEvent.getSource().getBinding(\"items\").filter(aAttachFilters);\r\n\t\t},\r\n\r\n\t\tonUploadCompleteCheckList: function(oEvent) {\r\n\t\t\tvar aFilter = [];\r\n\t\t\tvar sDocCategory = sap.ui.core.Fragment.byId(this.createId(\"idCheckList\"), \"idDocCategory\").getValue();\r\n\t\t\taFilter.push(new Filter(\"DocCategory\", FilterOperator.EQ, sDocCategory));\r\n\t\t\taFilter.push(new Filter(\"DocGuid\", FilterOperator.EQ, this.getView().getBindingContext().getProperty(\"Guid\")));\r\n\t\t\taFilter.push(new Filter(\"DocType\", FilterOperator.EQ, \"ZWAS\"));\r\n\t\t\tsap.ui.core.Fragment.byId(this.createId(\"idCheckList\"), \"idChecklistUploadCollection\").getBinding(\"items\").filter(aFilter);\r\n\r\n\t\t},\r\n\r\n\t\tonSelectChangeSanctDept: function(oEvent) {\r\n\t\t\tvar sPreviousExetDept = this.getView().getModel(\"detailView\").getProperty(\"/SanctioningDeptKey\");\r\n\t\t\tvar sFValue = oEvent.getSource().getSelectedKey();\r\n\t\t\tvar Fnam = \"InitiatinDept\";\r\n\t\t\tvar sorceHoATable = this.getView().byId(\"idWorksHoA\").getItems();\r\n\t\t\tvar sMsgText = this.getModel(\"i18n\").getResourceBundle().getText(\"detail.message.warning.changeSancDept\");\r\n\r\n\t\t\tvar sPath = oEvent.getSource().getSelectedItem().getBindingContext().getPath();\r\n\t\t\tvar sDepartDesc = this.getView().getModel().getProperty(sPath).Depart_name;\r\n\t\t\tif (sPreviousExetDept) {\r\n\t\t\t\tif (sPreviousExetDept !== sFValue && sorceHoATable.length > 0) {\r\n\t\t\t\t\tMessageBox.confirm(sMsgText, {\r\n\t\t\t\t\t\tonClose: function(oAction) {\r\n\t\t\t\t\t\t\tif (oAction !== MessageBox.Action.OK) {\r\n\t\t\t\t\t\t\t\tthis.getView().byId(\"idInitDept\").setSelectedKey(sPreviousExetDept);\r\n\t\t\t\t\t\t\t\t//\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis._changeSanctDeptSuccessful(Fnam, sFValue);\r\n\t\t\t\t\t\t\t\tthis._updateSanctDesc(sDepartDesc);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}.bind(this)\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis._changeSanctDeptSuccessful(Fnam, sFValue);\r\n\t\t\t\t\tthis._updateSanctDesc(sDepartDesc);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis._changeSanctDeptSuccessful(Fnam, sFValue);\r\n\t\t\t\tthis._updateSanctDesc(sDepartDesc);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_changeSanctDeptSuccessful: function(Fnam, sFValue) {\r\n\t\t\tthis.bRefreshDDoTable = true;\r\n\t\t\tif (this.getView().getBindingContext().getProperty(\"Status\") === \"E0003\") {\r\n\t\t\t\tthis.bRefreshDDoTable = false;\r\n\t\t\t}\r\n\t\t\tthis._identifyHoaDdoFilters();\r\n\t\t\tthis._setHoaDdoFilters();\r\n\t\t\tthis._updateCallForCategoryandExeDeptandSancDept(Fnam, sFValue);\r\n\t\t\tthis.getView().getModel(\"detailView\").setProperty(\"/SanctioningDeptKey\", sFValue);\r\n\t\t},\r\n\r\n\t\t_updateSanctDesc: function(sDepartDesc) {\r\n\t\t\tvar oASUpdatePayload = {\r\n\t\t\t\tAction: \"UPHDR\",\r\n\t\t\t\tGuid: this.getView().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\tLockTimestamp: \"\\/Date(\" + (new Date()).getTime() + \")\\/\",\r\n\t\t\t\tFnam: \"InitDepartDesc\",\r\n\t\t\t\tFval: sDepartDesc,\r\n\t\t\t\tCode: \"\",\r\n\t\t\t\tPosition: this.getModel(\"appView\").getProperty(\"/position\"),\r\n\t\t\t\tInitiatinDept: \"\",\r\n\t\t\t\tDepartDesc: \"\",\r\n\t\t\t\tSessionGuid: jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\").SessionGuid\r\n\t\t\t};\r\n\r\n\t\t\tvar sUpdPath = this.getModel().createKey(\"WrkASDetailsDraftSet\", {\r\n\t\t\t\tGuid: this.getView().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\tLockTimestamp: new Date().getTime()\r\n\t\t\t});\r\n\t\t\tsUpdPath = \"/\" + sUpdPath;\r\n\t\t\tthis.getModel().update(sUpdPath, oASUpdatePayload, {\r\n\t\t\t\tsuccess: function(oData, oResponse) {\r\n\r\n\t\t\t\t}.bind(this),\r\n\t\t\t\terror: function(oError) {\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tcheckBackendValidation: function(resolve, reject) {\r\n\t\t\tvar that = this,\r\n\t\t\t\toDetailViewModel = this.getModel(\"detailView\"),\r\n\t\t\t\toViewModel = this.getModel(\"detailView\"),\r\n\t\t\t\taWorkFlowLogData = oDetailViewModel.getProperty(\"/Worklog\"),\r\n\t\t\t\tbWorkFlowDefined = true;\r\n\t\t\tif (aWorkFlowLogData.length >= 1) {\r\n\t\t\t\tthis.getModel(\"appView\").setProperty(\"/busy\", true);\r\n\t\t\t\tthis.getView().getModel().callFunction(\"/WrkSave\", {\r\n\t\t\t\t\tmethod: \"POST\",\r\n\t\t\t\t\turlParameters: {\r\n\t\t\t\t\t\tAction: \"SAVE\",\r\n\t\t\t\t\t\tGuid: this.getView().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\t\t\tRole: \"\",\r\n\t\t\t\t\t\tFPositionid: \"\",\r\n\t\t\t\t\t\tFFlag: \"\",\r\n\t\t\t\t\t\tAppID: \"AS\",\r\n\t\t\t\t\t\tFUserid: \"\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: function(oResponse) {\r\n\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\t//\t\t\t\t\t\tthis.getView().getElementBinding().refresh();\r\n\t\t\t\t\t}.bind(this),\r\n\t\t\t\t\terror: function(oResponse) {\r\n\t\t\t\t\t\tthis.getModel(\"appView\").setProperty(\"/busy\", false);\r\n\t\t\t\t\t}.bind(this)\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tvar oPromiseWorkFlowLogOnSave = new Promise(function(resolve1, reject1) {\r\n\t\t\t\t\tthat.getWorkFlowLogDetails({\r\n\t\t\t\t\t\tApplicationId: \"AS\",\r\n\t\t\t\t\t\tGuid: that.getView().getBindingContext().getProperty(\"Guid\")\r\n\t\t\t\t\t}, resolve1, reject1);\r\n\t\t\t\t}.bind(that));\r\n\t\t\t\toPromiseWorkFlowLogOnSave.then(function() {\r\n\t\t\t\t\toViewModel.setProperty(\"/busy\", false);\r\n\t\t\t\t\tvar aWrkFLogData = oDetailViewModel.getProperty(\"/Worklog\");\r\n\t\t\t\t\tif (aWrkFLogData.length >= 1) {\r\n\t\t\t\t\t\tthat._postSubmitCall(bWorkFlowDefined, oParams);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsap.m.MessageBox.error(\"Maker Role in Workflow not maintain\");\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tonWrkDocFlowAs: function(oEvent) {\r\n\t\t\tif (this.getModel(\"detailView\").getProperty(\"/stateId\") === \"E\" && oEvent.getSource().getBindingContext().getProperty(\"AppName\") !==\r\n\t\t\t\t\"AS\") {\r\n\t\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bUserCreateAS\", true);\r\n\t\t\t} else if (this.getModel(\"detailView\").getProperty(\"/stateId\") === \"E\" && oEvent.getSource().getBindingContext().getProperty(\r\n\t\t\t\t\t\"AppName\") === \"AS\") {\r\n\t\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bNavtoAsfromDocFlow\", true);\r\n\t\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bUserCreateAS\", true);\r\n\t\t\t}\r\n\t\t\tthis.onWrkDocFlow(oEvent);\r\n\t\t},\r\n\t\t_handleSaveNotes: function(oEvent) {\r\n\t\t\tif (this._checkNoteforSave()) {\r\n\t\t\t\tvar oParamsTemp = this._createPostCallParam(\"SUBMIT\");\r\n\t\t\t\tvar bNotesSave = new Promise(function(resolve, reject) {\r\n\t\t\t\t\tthis._postCallforNotes(oParamsTemp, resolve, reject);\r\n\t\t\t\t}.bind(this));\r\n\r\n\t\t\t\tbNotesSave.then(function() {\r\n\t\t\t\t\tsap.m.MessageToast.show(this.getModel(\"i18n\").getResourceBundle().getText(\"detail.message.note.saved\"));\r\n\t\t\t\t\tvar oDetailViewModel = this.getModel(\"detailView\");\r\n\t\t\t\t\tif (oDetailViewModel) {\r\n\t\t\t\t\t\toDetailViewModel.setProperty(\"/Notingstring\", \"\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.getUserFeedList();\r\n\t\t\t\t}.bind(this));\r\n\t\t\t}\r\n\t\t},\r\n\t\t_checkNoteforSave: function() {\r\n\t\t\tvar bNotingString = false,\r\n\t\t\t\tsDetailModel = this.getModel(\"detailView\"),\r\n\t\t\t\tsLogInUser = sap.ushell.Container.getService(\"UserInfo\").getId(),\r\n\t\t\t\tsNotingString = sDetailModel.getProperty(\"/Notingstring\"),\r\n\t\t\t\tsNotes = sDetailModel.getProperty(\"/UserNotes\");\r\n\t\t\tif (sNotingString === \"\" || !sNotingString) {\r\n\t\t\t\tthis._displayWarnMessge(this.getModel(\"i18n\").getResourceBundle().getText(\"detail.message.note.enter\"));\r\n\t\t\t}\r\n\t\t\t//\t\t\telse if (sNotes.length > 0 && sLogInUser === sNotes[0].Createdby) {\r\n\t\t\t//\t\t\t\tsap.m.MessageBox.alert(this.getModel(\"i18n\").getResourceBundle().getText(\"detail.message.note.present\"));\r\n\t\t\t//\t\t\t} \r\n\t\t\telse {\r\n\t\t\t\tbNotingString = true;\r\n\t\t\t}\r\n\t\t\treturn bNotingString;\r\n\t\t},\r\n\t\t_handleClearNote: function(oEvent) {\r\n\t\t\tvar oDetailViewModel = this.getModel(\"detailView\");\r\n\t\t\tif (oDetailViewModel) {\r\n\t\t\t\toDetailViewModel.setProperty(\"/Notingstring\", \"\");\r\n\t\t\t\tsap.m.MessageToast.show(this.getModel(\"i18n\").getResourceBundle().getText(\"detail.message.note.cleared\"));\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Create new scheme code\r\n\t\t * @param {Object} oEvent Event Object\r\n\t\t */\r\n\t\t_handlePressAddNewScheme: function(oEvent) {\r\n\t\t\t// create value help dialog\r\n\t\t\tif (!this._valueHelpSchemeDialog) {\r\n\t\t\t\tthis._valueHelpSchemeDialog = sap.ui.xmlfragment(\r\n\t\t\t\t\t\"com.goap.cfms.works.as.fragment.createScheme\",\r\n\t\t\t\t\tthis\r\n\t\t\t\t);\r\n\t\t\t\tthis.getView().addDependent(this._valueHelpSchemeDialog);\r\n\t\t\t}\r\n\t\t\t// open value help dialog filtered by the input value\r\n\t\t\tthis._valueHelpSchemeDialog.open();\r\n\t\t},\r\n\t\t_handleSaveSchemeCreate: function() {\r\n\t\t\tvar oParams = this._getParamsForScheme();\r\n\t\t\tif (oParams.SchemeAbbr === \"\") {\r\n\t\t\t\tsap.m.MessageBox.error(this.getModel(\"i18n\").getResourceBundle().getText(\"detail.ops.panel.content.label.Schme.Error\"));\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._valueHelpSchemeDialog.setBusy(true);\r\n\t\t\tvar sUpdPath = \"/\" + \"WrkSchemesSet\";\r\n\t\t\tthis.getModel().create(sUpdPath, oParams, {\r\n\t\t\t\tsuccess: function() {\r\n\t\t\t\t\tMessageToast.show(this.getResourceBundle().getText(\"detail.message.create.success\"));\r\n\t\t\t\t\tthis._valueHelpSchemeDialog.setBusy(false);\r\n\t\t\t\t\tthis.byId(\"idSchemeCode\").getBinding(\"items\").refresh(true);\r\n\t\t\t\t\tthis._handleCancelSchemeCreate();\r\n\t\t\t\t}.bind(this),\r\n\t\t\t\terror: function(oError) {\r\n\t\t\t\t\tthis._valueHelpSchemeDialog.setBusy(false);\r\n\t\t\t\t}.bind(this)\r\n\t\t\t});\r\n\t\t},\r\n\t\t_handleCancelSchemeCreate: function() {\r\n\t\t\tif (this._valueHelpSchemeDialog) {\r\n\t\t\t\tthis.getView().getModel(\"detailView\").setProperty(\"/schemeDesc\", \"\");\r\n\t\t\t\tthis._valueHelpSchemeDialog.close();\r\n\t\t\t\tthis._valueHelpSchemeDialog.destroy();\r\n\t\t\t\tdelete this._valueHelpSchemeDialog;\r\n\t\t\t}\r\n\t\t},\r\n\t\t_getParamsForScheme: function() {\r\n\t\t\tvar SchemDesc = this.getView().getModel(\"detailView\").getProperty(\"/schemeDesc\");\r\n\t\t\treturn {\r\n\t\t\t\tAction: \"INS_SCHEME\",\r\n\t\t\t\tSchemeId: \"\",\r\n\t\t\t\tSchemeAbbr: this._handleGetJsFirstAlphaString(SchemDesc),\r\n\t\t\t\tSchemeDesc: SchemDesc.toUpperCase()\r\n\t\t\t};\r\n\t\t},\r\n\t\t_handleGetJsFirstAlphaString: function(sValue) {\r\n\t\t\tvar matches = sValue.match(/\\b(\\w)/g);\r\n\t\t\treturn matches.join('').toUpperCase();\r\n\t\t},\r\n\t\tupdateControlModel: function(oModel) {\r\n\t\t\tvar sCatagory = this.getView().getBindingContext().getProperty(\"Category\"),\r\n\t\t\t\tsDcWType = this.getView().getBindingContext().getProperty(\"DcwType\");\r\n\t\t\tif (sDcWType === \"02\" && sCatagory === \"02\") {\r\n\t\t\t\tthis.getModel(\"oControlModel\").setProperty(\"/SourceDdo/mandatory\",\r\n\t\t\t\t\ttrue);\r\n\t\t\t\tthis.getModel(\"oControlModel\").setProperty(\"/SourceHoa/mandatory\",\r\n\t\t\t\t\ttrue);\r\n\t\t\t\tthis.getModel(\"oControlModel\").setProperty(\"/SourceDdo/valueState\", \"Error\");\r\n\t\t\t\tthis.getModel(\"oControlModel\").setProperty(\"/SourceHoa/valueState\", \"Error\");\r\n\t\t\t} else {\r\n\t\t\t\tthis.getModel(\"oControlModel\").setProperty(\"/SourceDdo/mandatory\",\r\n\t\t\t\t\tfalse);\r\n\t\t\t\tthis.getModel(\"oControlModel\").setProperty(\"/SourceHoa/mandatory\",\r\n\t\t\t\t\tfalse);\r\n\t\t\t\tthis.getModel(\"oControlModel\").setProperty(\"/SourceDdo/valueState\", \"None\");\r\n\t\t\t\tthis.getModel(\"oControlModel\").setProperty(\"/SourceHoa/valueState\", \"None\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t//changes by Lahari\r\n\t\toHandelHOAF4Help: function(state) {\r\n\r\n\t\t\tvar oBusyDialog = new sap.m.BusyDialog({});\r\n\t\t\toBusyDialog.open();\r\n\t\t\tthis.hoasInput = state.getSource();\r\n\t\t\t// var Flag = \"HOA\";\r\n\t\t\tvar that = this;\r\n\t\t\t// var oModel = this.getView().getModel(\"rawb\");\r\n\t\t\tthis.GSTinputSrc = state.getSource();\r\n\t\t\t// var oEntity = \"/DDO_F4?$filter=Flag eq '\" + Flag + \"'\";\r\n\t\t\t// var oEntity = \"/DataSet\";\r\n\t\t\tvar oViewModel = this.getModel(\"detailView\");\r\n\t\t\toViewModel.read(\"/DDO_F4\", {\r\n\t\t\t\t// filters: oFilters,\r\n\t\t\t\tsuccess: function(oData) {\r\n\t\t\t\t\toBusyDialog.close();\r\n\t\t\t\t\tvar jsonModel = new sap.ui.model.json.JSONModel(oData.results);\r\n\r\n\t\t\t\t\tvar dataLen = oData.results.length;\r\n\t\t\t\t\tif (dataLen === 1) {\r\n\t\t\t\t\t\tvar obj = oData.results[0].DDO_Code;\r\n\t\t\t\t\t\tthat.getView().byId(\"idDDO_Mapping\").setValue(obj);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.RoleF4 = new sap.m.SelectDialog({\r\n\t\t\t\t\t\t\ttitle: \"idddo Offices\",\r\n\t\t\t\t\t\t\tclass: \"sapUiSizeCompact\",\r\n\t\t\t\t\t\t\tgrowingThreshold: 15,\r\n\t\t\t\t\t\t\tcontentWidth: \"250px\",\r\n\t\t\t\t\t\t\titems: {\r\n\t\t\t\t\t\t\t\tpath: \"/\",\r\n\t\t\t\t\t\t\t\ttemplate: new sap.m.ObjectListItem({\r\n\t\t\t\t\t\t\t\t\ttitle: \"{DDO_Code}\"\r\n\t\t\t\t\t\t\t\t\t\t// attributes: [\r\n\t\t\t\t\t\t\t\t\t\t// \tnew sap.m.ObjectAttribute({\r\n\t\t\t\t\t\t\t\t\t\t// \t\ttext: \"{Dist}\"\r\n\t\t\t\t\t\t\t\t\t\t// \t}).addStyleClass(\"textNoWrap\")\r\n\t\t\t\t\t\t\t\t\t\t// ]\r\n\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t},\r\n\r\n\t\t\t\t\t\t\tliveChange: [that.searchDDOMapping, that],\r\n\t\t\t\t\t\t\tconfirm: [that.confirmDDOMapping, that]\r\n\t\t\t\t\t\t\t\t// multiSelect: true\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tthat.RoleF4.setModel(jsonModel);\r\n\r\n\t\t\t\t\t\tif (state !== \"handleSelectionChange\") {\r\n\t\t\t\t\t\t\tthat.RoleF4.open();\r\n\t\t\t\t\t\t\tthat.RoleF4.setTitle(\"DDO  ( \" + oData.results.length + \" )\");\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t},\r\n\t\t\t\terror: function(oError) {\r\n\t\t\t\t\toBusyDialog.close();\r\n\t\t\t\t\tvar errmessage = JSON.parse(oError.response.body).error.message.value;\r\n\t\t\t\t\tsap.m.MessageBox.error(errmessage);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t},\r\n\t\tsearchDDOMapping: function(e) {\r\n\t\t\tvar oFils = [];\r\n\t\t\tvar t = e.getParameter(\"value\");\r\n\t\t\tvar fil = new Filter(\"Hoa\", FilterOperator.Contains, t);\r\n\t\t\toFils.push(fil);\r\n\t\t\te.getSource().getBinding(\"items\").filter(oFils);\r\n\t\t},\r\n\t\tconfirmDDOMapping: function(evt) {\r\n\r\n\t\t\t\tvar title = evt.getParameters(\"listItem\").selectedItem.getTitle();\r\n\t\t\t\t// this.DistText = evt.getParameter(\"selectedItem\").getAttributes()[0].getText();\r\n\t\t\t\tthis.getView().byId(\"idDDO_Mapping\").setValue(title);\r\n\t\t\t\tthis.getView().byId(\"idDDO_Mapping\").setProperty(\"valueState\", \"None\");\r\n\t\t\t\tthis.getView().byId(\"idDDO_Mapping\").setProperty(\"valueStateText\", \"\");\r\n\t\t\t\t// this.getView().byId(\"idHOA\").setValueState(\"Success\");\r\n\r\n\t\t\t}\r\n\t\t\t//changes ended by lahari\r\n\r\n\t});\r\n});",
		"com/goap/cfms/works/as/controller/App.controller.js": "sap.ui.define([\r\n        \"com/goap/cfms/works/reuselib/BaseViewController\",\r\n        \"sap/ui/model/json/JSONModel\"\r\n    ], function (BaseController, JSONModel) {\r\n        \"use strict\";\r\n\r\n        return BaseController.extend(\"com.goap.cfms.works.as.controller.App\", {\r\n\r\n            onInit: function () {\r\n                BaseController.prototype.onInit.apply(this, arguments);\r\n                var oViewModel,\r\n                    fnSetAppNotBusy,\r\n                    iOriginalBusyDelay = this.getView().getBusyIndicatorDelay();\r\n\r\n                oViewModel = new JSONModel({\r\n                    busy: true,\r\n                    delay: 0,\r\n                    position: \"00000000\",\r\n                    DepartDesc: \"\",\r\n                    InitiatinDept:\"\"\r\n                });\r\n                this.getView().setModel(oViewModel, \"appView\");\r\n                this.component.setModel(oViewModel, \"appView\");\r\n                 fnSetAppNotBusy = function () {\r\n                     oViewModel.setProperty(\"/busy\", false);\r\n                     oViewModel.setProperty(\"/delay\", iOriginalBusyDelay);\r\n                 };\r\n\r\n                this.model.metadataLoaded().then(fnSetAppNotBusy);\r\n                //this._checkRole();\r\n               \r\n                 //this.contentDensity = \"sapUiSizeCompact\";\r\n                // apply content density mode to root view\r\n                //this.getView().addStyleClass(this.contentDensity);\r\n            },\r\n\r\n\t\t/* =========================================================== */\r\n\t\t/* private functions                                              */\r\n\t\t/* =========================================================== */\r\n\r\n\t\t/**\r\n\t\t * Call to Identify the role of the User\r\n\t\t * \r\n\t\t * @public\r\n\t\t */            \r\n\r\n            /**\r\n            * Private function to check workflow role\r\n             */\r\n            _checkRole: function(){\r\n                var that = this;\r\n                this.component.getModel().callFunction(\"/GetRole\",{\r\n                    method: \"GET\",\r\n                    urlParameters: {\r\n                        ApplicationId: \"AS\"\r\n                    },\r\n                    success: function(oResponse, oTe){\r\n                       that.component.getModel(\"appView\").setProperty(\"/role\", oResponse.GetRole.Role);\r\n                    },\r\n                    error: function(oError){\r\n    \r\n                    }\r\n                });\r\n            }\r\n        });\r\n    }\r\n);",
		"com/goap/cfms/works/as/controller/App-dbg.controller.js": "sap.ui.define([\r\n        \"com/goap/cfms/works/reuselib/BaseViewController\",\r\n        \"sap/ui/model/json/JSONModel\"\r\n    ], function (BaseController, JSONModel) {\r\n        \"use strict\";\r\n\r\n        return BaseController.extend(\"com.goap.cfms.works.as.controller.App\", {\r\n\r\n            onInit: function () {\r\n                BaseController.prototype.onInit.apply(this, arguments);\r\n                var oViewModel,\r\n                    fnSetAppNotBusy,\r\n                    iOriginalBusyDelay = this.getView().getBusyIndicatorDelay();\r\n\r\n                oViewModel = new JSONModel({\r\n                    busy: true,\r\n                    delay: 0,\r\n                    position: \"00000000\",\r\n                    DepartDesc: \"\",\r\n                    InitiatinDept:\"\"\r\n                });\r\n                this.getView().setModel(oViewModel, \"appView\");\r\n                this.component.setModel(oViewModel, \"appView\");\r\n                 fnSetAppNotBusy = function () {\r\n                     oViewModel.setProperty(\"/busy\", false);\r\n                     oViewModel.setProperty(\"/delay\", iOriginalBusyDelay);\r\n                 };\r\n\r\n                this.model.metadataLoaded().then(fnSetAppNotBusy);\r\n                //this._checkRole();\r\n               \r\n                 //this.contentDensity = \"sapUiSizeCompact\";\r\n                // apply content density mode to root view\r\n                //this.getView().addStyleClass(this.contentDensity);\r\n            },\r\n\r\n\t\t/* =========================================================== */\r\n\t\t/* private functions                                              */\r\n\t\t/* =========================================================== */\r\n\r\n\t\t/**\r\n\t\t * Call to Identify the role of the User\r\n\t\t * \r\n\t\t * @public\r\n\t\t */            \r\n\r\n            /**\r\n            * Private function to check workflow role\r\n             */\r\n            _checkRole: function(){\r\n                var that = this;\r\n                this.component.getModel().callFunction(\"/GetRole\",{\r\n                    method: \"GET\",\r\n                    urlParameters: {\r\n                        ApplicationId: \"AS\"\r\n                    },\r\n                    success: function(oResponse, oTe){\r\n                       that.component.getModel(\"appView\").setProperty(\"/role\", oResponse.GetRole.Role);\r\n                    },\r\n                    error: function(oError){\r\n    \r\n                    }\r\n                });\r\n            }\r\n        });\r\n    }\r\n);",
		"com/goap/cfms/works/as/controller/Master.controller.js": "sap.ui.define([\r\n\t\"com/goap/cfms/works/reuselib/WorksBaseController\",\r\n\t\"sap/ui/model/json/JSONModel\",\r\n\t\"sap/ui/core/routing/History\",\r\n\t\"sap/ui/model/Filter\",\r\n\t\"sap/ui/model/Sorter\",\r\n\t\"sap/ui/model/FilterOperator\",\r\n\t\"sap/m/GroupHeaderListItem\",\r\n\t\"sap/ui/Device\",\r\n\t\"com/goap/cfms/works/as/model/formatter\",\r\n\t\"com/goap/cfms/works/reuselib/VHDialog.controller\",\r\n\t\"com/goap/cfms/works/as/util/Constants\",\r\n\t\"sap/m/MessageBox\",\r\n\t\"com/goap/cfms/works/reuselib/DynamicBusyIndicator\"\r\n\t//\"as/sap/DemoApp/model/formatter\"\r\n], function(BaseController, JSONModel, History, Filter, Sorter, FilterOperator, GroupHeaderListItem, Device, Formatter, VHDialog,\r\n\tConstants, MessageBox, DynamicBusyIndicator) {\r\n\t\"use strict\";\r\n\r\n\treturn BaseController.extend(\"com.goap.cfms.works.as.controller.Master\", {\r\n\r\n\t\tformatter: Formatter,\r\n\r\n\t\t/* =========================================================== */\r\n\t\t/* lifecycle methods                                           */\r\n\t\t/* =========================================================== */\r\n\r\n\t\t/**\r\n\t\t * Called when the master list controller is instantiated. It sets up the event handling for the master/detail communication and other lifecycle tasks.\r\n\t\t * @public\r\n\t\t */\r\n\t\tonInit: function() {\r\n\t\t\t// Control state model\r\n\t\t\tvar oList = this.byId(\"ItemsST\"),\r\n\t\t\t\toViewModel = this._createViewModel();\r\n\t\t\t// Put down master list's original value for busy indicator delay,\r\n\t\t\t// so it can be restored later on. Busy handling on the master list is\r\n\t\t\t// taken care of by the master list itself.\r\n\t\t\tvar iOriginalBusyDelay = oList.getBusyIndicatorDelay();\r\n\t\t\tthis._oList = oList;\r\n\t\t\t// keeps the filter and search state\r\n\t\t\tthis._oListFilterState = {\r\n\t\t\t\taFilter: [],\r\n\t\t\t\taSearch: []\r\n\t\t\t};\r\n\t\t\tthis.setModel(oViewModel, \"masterView\");\r\n\r\n\t\t\tthis.setModel(new JSONModel({\r\n\t\t\t\tamendEditable: false,\r\n\t\t\t\tcopyEditable: false\r\n\t\t\t}), \"createNewASModel\");\r\n\r\n\t\t\t// Make sure, busy indication is showing immediately so there is no\r\n\t\t\t// break after the busy indication for loading the view's meta data is\r\n\t\t\t// ended (see promise 'oWhenMetadataIsLoaded' in AppController)\r\n\t\t\toList.attachEventOnce(\"updateFinished\", function() {\r\n\t\t\t\t// Restore original busy indicator delay for the list\r\n\t\t\t\toViewModel.setProperty(\"/delay\", iOriginalBusyDelay);\r\n\t\t\t});\r\n\r\n\t\t\tvar sCreatedBy = sap.ushell.Container.getService(\"UserInfo\").getId();\r\n\r\n\t\t\tif (!jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\")) {\r\n\t\t\t\tvar oParamsBrowserStorage = {\r\n\t\t\t\t\tUserId: sCreatedBy,\r\n\t\t\t\t\tPositionId: \"00000000\",\r\n\t\t\t\t\tRole: \"\",\r\n\t\t\t\t\tSessionGuid: \"00000000-0000-0000-0000-000000000000\"\r\n\t\t\t\t};\r\n\t\t\t\tjQuery.sap.storage(jQuery.sap.storage.Type.session).put(\"zworksBrowserStorage\", oParamsBrowserStorage);\r\n\t\t\t} else {\r\n\t\t\t\tvar sStorageUser = jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\").UserId;\r\n\t\t\t\tif (sStorageUser !== sCreatedBy) {\r\n\t\t\t\t\tvar oParamsBrowserStorage = {\r\n\t\t\t\t\t\tUserId: sCreatedBy,\r\n\t\t\t\t\t\tPositionId: \"00000000\",\r\n\t\t\t\t\t\tRole: \"\",\r\n\t\t\t\t\t\tSessionGuid: \"00000000-0000-0000-0000-000000000000\"\r\n\t\t\t\t\t};\r\n\t\t\t\t\tjQuery.sap.storage(jQuery.sap.storage.Type.session).put(\"zworksBrowserStorage\", oParamsBrowserStorage);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar sStorePosition = jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\").PositionId;\r\n\t\t\tvar oViewAppModel = this.getOwnerComponent().getModel(\"appView\");\r\n\t\t\toViewAppModel.setProperty(\"/position\", sStorePosition);\r\n\t\t\toViewAppModel.setProperty(\"/role\", jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\").Role);\r\n\t\t\t//\t\t\toViewAppModel.setProperty(\"/bPositionChangeLoadFC\", true);\r\n\t\t\tif (!sStorePosition) {\r\n\t\t\t\tsStorePosition = \"00000000\";\r\n\t\t\t}\r\n\t\t\tthis._getUserRole(sStorePosition);\r\n\r\n\t\t\tthis.getRouter().getRoute(\"default\").attachPatternMatched(this._onMasterMatched, this);\r\n\t\t\tthis.getRouter().getRoute(\"Detail\").attachPatternMatched(this._onDetailRouteMatch, this);\r\n\t\t\tthis.getRouter().attachRouteMatched(function(oEvent) {\r\n\r\n\t\t\t\tvar sRouteName;\r\n\t\t\t\tsRouteName = oEvent.getParameter(\"name\");\r\n\t\t\t\tif (sRouteName === \"default\") {\r\n\t\t\t\t\t//Select first item from list\r\n\t\t\t\t\t/*eslint-disable */\r\n\t\t\t\t\t//eslint-disable-invalid-this\r\n\t\t\t\t\tthis._oListLoaded = new Promise(function(resolve, reject) {\r\n\t\t\t\t\t\tthis.onListLoaded = resolve;\r\n\t\t\t\t\t}.bind(this));\r\n\t\t\t\t\tthis._oListLoaded.then(function() {\r\n\t\t\t\t\t\tthis._selectMasterListItem();\r\n\t\t\t\t\t}.bind(this));\r\n\t\t\t\t\t/*eslint-enable */\r\n\t\t\t\t}\r\n\t\t\t}, this);\r\n\t\t\tthis.getRouter().attachBypassed(this.onBypassed, this);\r\n\t\t\tvar oSmartFilterBar = this.byId(\"smartFilterBar\");\r\n\t\t\tthis.oMicBtn = this.byId(\"idMicBtn\");\r\n\t\t\tif (!this.SpeechRecognition && this.oMicBtn) {\r\n\t\t\t\t/*eslint-disable */\r\n\t\t\t\t//eslint-disable-no-undef\r\n\t\t\t\tthis.SpeechRecognition = new SpeechRecognizer(this);\r\n\t\t\t\t/*eslint-enable */\r\n\t\t\t}\r\n\t\t\tif (this.SpeechRecognition) {\r\n\t\t\t\tthis.SpeechRecognition.registerTriggerButton(this.oMicBtn, function(sText) {\r\n\t\t\t\t\tvar innerSearchBar = oSmartFilterBar.getBasicSearchControl();\r\n\t\t\t\t\tif (sText.length !== 0) {\r\n\t\t\t\t\t\tinnerSearchBar.setValue(sText);\r\n\t\t\t\t\t\tinnerSearchBar.fireSearch();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t//Migrated Code\r\n\t\t\tvar model = new sap.ui.model.json.JSONModel();\r\n\t\t\tmodel.setData([]);\r\n\t\t\tvar data = {\r\n\t\t\t\tdate: \"\",\r\n\t\t\t\tauthority: \"\",\r\n\t\t\t\tdept: \"\",\r\n\t\t\t\tbeschr: \"\",\r\n\t\t\t\tnumber: \"\",\r\n\t\t\t\treNumber: \"\",\r\n\t\t\t\ttype: \"\",\r\n\t\t\t\tgoAmount: \"\",\r\n\t\t\t\tsancAmount: \"\",\r\n\t\t\t\tddo: \"\",\r\n\t\t\t\thoa: \"\",\r\n\t\t\t\tdesc: \"\",\r\n\t\t\t\toldasnumber: \"\",\r\n\t\t\t\tasnumber: \"\",\r\n\t\t\t\tguid: \"\"\r\n\t\t\t};\r\n\t\t\tmodel.setData([]);\r\n\t\t\tmodel.setData(data);\r\n\t\t\tthis.getOwnerComponent().setModel(model, \"migratedModel\");\r\n\t\t\tthis.getOwnerComponent().getModel(\"migratedModel\").updateBindings();\r\n\t\t},\r\n\r\n\t\t/* =========================================================== */\r\n\t\t/* event handlers                                              */\r\n\t\t/* =========================================================== */\r\n\t\t/**\r\n\t\t * Event handler function \r\n\t\t * Hide the master view on Mode display\r\n\t\t * @param {*} oEvent \r\n\t\t */\r\n\t\tonBeforeRendering: function(oEvent) {\r\n\t\t\tvar oParam = this.getOwnerComponent().getComponentData().startupParameters.Mode;\r\n\t\t\t//var oParam = undefined;\r\n\t\t\tif (oParam) {\r\n\t\t\t\tvar param = {\r\n\t\t\t\t\ttarget: \"detail\",\r\n\t\t\t\t\tmasterPage: \"MasterPage\",\r\n\t\t\t\t\tdetailPage: \"DetailPage\"\r\n\t\t\t\t};\r\n\t\t\t\tthis._setScreenSize(param);\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * After list data is available, this handler method updates the\r\n\t\t * master list counter\r\n\t\t * @param {sap.ui.base.Event} oEvent the update finished event\r\n\t\t * @public\r\n\t\t */\r\n\t\tonUpdateFinished: function(oEvent) {\r\n\t\t\t// update the master list object counter after new data is loaded\r\n\t\t\tthis._updateListItemCount(oEvent.getParameter(\"total\"));\r\n\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for the value help to select Position\r\n\t\t * @param {sap.ui.base.Event} oEvent is the event raised by the control\r\n\t\t */\r\n\t\tonChangePosition: function(oEvent) {\r\n\t\t\t//var sCreatedBy = \"14482503\";\r\n\t\t\tvar sCreatedBy = sap.ushell.Container.getService(\"UserInfo\").getId();\r\n\t\t\tif (!this._opositionVHDialog) {\r\n\t\t\t\tthis._opositionVHDialog = this._createFragment(this.createId(\"idPositionVH\"), \"com.goap.cfms.works.as.fragment.positionVH\");\r\n\t\t\t\tthis.getView().addDependent(this._opositionVHDialog);\r\n\t\t\t}\r\n\t\t\tif (!this.oTemplate) {\r\n\t\t\t\tvar sId = \"idPositionTemp\";\r\n\t\t\t\tthis.oTemplate = new sap.m.StandardListItem(this.createId(sId), {\r\n\t\t\t\t\ttitle: \"{position}\",\r\n\t\t\t\t\tdescription: \"{STEXT}\",\r\n\t\t\t\t\ttype: \"Active\"\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tvar filter = new Filter(\"SUBPROCESS_AREA\", FilterOperator.EQ, \"AS\");\r\n\t\t\tthis._opositionVHDialog.bindAggregation(\"items\", {\r\n\t\t\t\tpath: \"/ZWRK_C_USER_POSITIONS(p_user='\" + sCreatedBy + \"')/Set\",\r\n\t\t\t\tfilters: [filter],\r\n\t\t\t\ttemplate: this.oTemplate\r\n\t\t\t});\r\n\t\t\tthis._opositionVHDialog.open();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Event handler for HoA Ddo search in value help\r\n\t\t * @param {sap.ui.model.Event} oEvent is the event for Search\r\n\t\t */\r\n\t\thandlePositionSearch: function(oEvent) {\r\n\t\t\tvar oFilter,\r\n\t\t\t\taFilters = [],\r\n\t\t\t\tsValue = oEvent.getParameter(\"value\");\r\n\t\t\taFilters.push(new Filter(\"position\", sap.ui.model.FilterOperator.Contains, sValue));\r\n\t\t\toFilter = new Filter({\r\n\t\t\t\tfilters: aFilters,\r\n\t\t\t\tbAnd: false\r\n\t\t\t});\r\n\t\t\toEvent.getSource().getBinding(\"items\").filter(oFilter);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler function for Position selection\r\n\t\t * \r\n\t\t */\r\n\t\tOnPositionSelect: function(oEvent) {\r\n\t\t\tvar oSelectedItem = oEvent.getParameter(\"selectedItem\"),\r\n\t\t\t\tsPosition = oSelectedItem.getTitle(),\r\n\t\t\t\tsDescription = oSelectedItem.getDescription();\r\n\t\t\tif (sPosition) {\r\n\t\t\t\tthis.getModel(\"appView\").setProperty(\"/position\", sPosition);\r\n\t\t\t\tthis.getModel(\"appView\").setProperty(\"/positionText\", sDescription);\r\n\t\t\t\tthis.getModel(\"appView\").setProperty(\"/bPositionChangeLoadFC\", true);\r\n\t\t\t\tthis.getModel(\"masterView\").setProperty(\"/bPositionSelected\", true);\r\n\t\t\t\tthis._getUserRole(sPosition);\r\n\t\t\t\tthis.byId(\"ItemsST\").rebindList();\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Event handler for clicking Cancel on the Fragment to create AS\r\n\t\t * @param {Event} oEvent of the cancel\r\n\t\t */\r\n\t\tonCancelAS: function(oEvent) {\r\n\t\t\t//Migrated Code Starts\r\n\t\t\tthis._createASFrag.close();\r\n\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bUserCreateAS\", false);\r\n\t\t\tvar oCreateNewASModel = this.getModel(\"createNewASModel\");\r\n\t\t\tthis._getCreateFragControlById(\"idNewRadioBtn\").setSelected(false);\r\n\t\t\tthis._getCreateFragControlById(\"idAmendRadioBtn\").setSelected(true);\r\n\t\t\toCreateNewASModel.setProperty(\"/amendEditable\", true);\r\n\t\t\toCreateNewASModel.setProperty(\"/copyEditable\", false);\r\n\t\t\toCreateNewASModel.setProperty(\"/migratedASRadioButtons\", false);\r\n\t\t\tthis._getCreateFragControlById(\"idMigratedASCode\").resetProperty(\"value\");\r\n\t\t\tthis._getCreateFragControlById(\"idMigratedRadioBtnNonCfms\").resetProperty(\"value\");\r\n\t\t\tthis._getCreateFragControlById(\"idMigratedASCode\").resetProperty(\"valueState\");\r\n\t\t\tthis._getCreateFragControlById(\"idMigratedRadioBtnNonCfms\").resetProperty(\"valueState\");\r\n\r\n\t\t\toCreateNewASModel.setProperty(\"/NewASRadioButtons\", false);\r\n\t\t\tthis._getCreateFragControlById(\"idNewRadioBtn\").resetProperty(\"value\");\r\n\t\t\tthis._getCreateFragControlById(\"idNewRadioBtnGO\").resetProperty(\"value\");\r\n\t\t\tthis._getCreateFragControlById(\"idNewRadioBtn\").resetProperty(\"valueState\");\r\n\t\t\tthis._getCreateFragControlById(\"idNewRadioBtnProceeding\").resetProperty(\"valueState\");\r\n\r\n\t\t\tthis._getCreateFragControlById(\"idCopyFromASCode\").resetProperty(\"value\");\r\n\t\t\tthis._getCreateFragControlById(\"idAmendASCode\").resetProperty(\"value\");\r\n\t\t\tthis._getCreateFragControlById(\"idCopyFromASCode\").resetProperty(\"valueState\");\r\n\t\t\tthis._getCreateFragControlById(\"idAmendASCode\").resetProperty(\"valueState\");\r\n\t\t\tthis.getModel(\"masterView\").setProperty(\"bCreateBtnEnable\", true);\r\n\t\t\tif (this.getModel(\"oBundleCodeModel\")) {\r\n\t\t\t\tthis.getModel(\"oBundleCodeModel\").setData(null);\r\n\t\t\t}\r\n\t\t\tthis.oSelectedObject = null;\r\n\t\t\t//Migrated Code Ends\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * function to create migrated as.\r\n\t\t * @public\r\n\t\t */\r\n\t\t_CreatePayLoadDupli: function() {\r\n\t\t\tvar that = this;\r\n\t\t\tvar sPosition = this.getModel(\"appView\").getProperty(\"/position\"),\r\n\t\t\t\toPayload1 = {\r\n\t\t\t\t\tAction: \"AMEND\",\r\n\t\t\t\t\tGuid: $.sap.GUID,\r\n\t\t\t\t\tLockTimestamp: \"\\/Date(\" + (new Date()).getTime() + \")\\/\",\r\n\t\t\t\t\tFnam: \"\",\r\n\t\t\t\t\tFval: \"\",\r\n\t\t\t\t\tCode: $.sap.ASNUMBER,\r\n\t\t\t\t\tPosition: sPosition,\r\n\t\t\t\t\tInitiatinDept: \"\",\r\n\t\t\t\t\tDepartDesc: \"\"\r\n\t\t\t\t};\r\n\r\n\t\t\t//Migrated Code Starts\r\n\t\t\t// if (that._getCreateFragControlById(\"idMigratedRadioBtnPhaseOne\").getSelected()) {\r\n\t\t\t// \toPayload1.Action = \"AMEND\";\r\n\t\t\t// \toPayload1.Guid = that.oSelectedObject.guid;\r\n\t\t\t// \toPayload1.Code = that._getCreateFragControlById(\"idMigratedASCode\").getValue();\r\n\t\t\t// }\r\n\t\t\treturn oPayload1;\r\n\t\t\t//Migrated Code Ends\r\n\t\t},\r\n\t\t_SaveAmendActionDupli: function() {\r\n\t\t\tvar that = this;\r\n\t\t\tvar oCreateASDupli = new Promise(function(resolve, reject) {\r\n\t\t\t\tthat.getOwnerComponent().oDraft.whenHdrCreate({\r\n\t\t\t\t\tpath: \"/WrkASDetailsDraftSet\",\r\n\t\t\t\t\tdata: that._CreatePayLoadDupli(),\r\n\t\t\t\t\tbusyControl: that._createASFrag\r\n\t\t\t\t}, resolve, reject);\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\toCreateASDupli.then(function(oResult) {\r\n\t\t\t\tthat._createASFrag.close();\r\n\t\t\t\tif (oResult.data.Action === \"NEW\") {\r\n\t\t\t\t\tthat.getModel(\"appView\").setProperty(\"/DepartDesc\", oResult.data.DepartDesc);\r\n\t\t\t\t\tthat.getModel(\"appView\").setProperty(\"/InitiatinDept\", oResult.data.InitiatinDept);\r\n\t\t\t\t} else if (oResult.data.Action === \"COPY\") {\r\n\t\t\t\t\tthat._getCreateFragControlById(\"idCopyFromASCode\").resetProperty(\"value\");\r\n\t\t\t\t\tthat.oSelectedObject = null;\r\n\t\t\t\t\tvar oCreateNewASModel = that.getModel(\"createNewASModel\");\r\n\t\t\t\t\toCreateNewASModel.setProperty(\"/amendEditable\", false);\r\n\t\t\t\t\toCreateNewASModel.setProperty(\"/copyEditable\", false);\r\n\t\t\t\t} else if (oResult.data.Action === \"AMEND\") {\r\n\t\t\t\t\tthat._getCreateFragControlById(\"idAmendASCode\").resetProperty(\"value\");\r\n\t\t\t\t\tthat.oSelectedObject = null;\r\n\t\t\t\t\tvar oCreateNewASModel = that.getModel(\"createNewASModel\");\r\n\t\t\t\t\toCreateNewASModel.setProperty(\"/amendEditable\", false);\r\n\t\t\t\t\toCreateNewASModel.setProperty(\"/copyEditable\", false);\r\n\t\t\t\t}\r\n\t\t\t\tthat.getRouter().navTo(\"Detail\", {\r\n\t\t\t\t\tobjectId: oResult.data.Guid,\r\n\t\t\t\t\tstateId: \"C\"\r\n\t\t\t\t}, true);\r\n\t\t\t}.bind(this));\r\n\t\t},\r\n\t\t//Migrated Code Starts\r\n\t\tonCreateMigratedAS: function(oEvent) {\r\n\t\t\tvar that = this;\r\n\r\n\t\t\tvar sanAMount = \"0\";\r\n\t\t\tif (this._getMigratedCreateFragControlById(\"goCategory\").getSelected() === true) {\r\n\t\t\t\tif (this._getMigratedCreateFragControlById(\"sancNo\").getValue() === \"\") {\r\n\t\t\t\t\tsap.m.MessageBox.error(\"Please Enter the Sanction Number First!\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (this._getMigratedCreateFragControlById(\"idMigratedASType\").getSelectedItem() === null) {\r\n\t\t\t\t\tsap.m.MessageBox.error(\"Please Select Sanction Type First!\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this._getMigratedCreateFragControlById(\"goCategory\").getSelected() === false) {\r\n\t\t\t\tif (this._getMigratedCreateFragControlById(\"sancNo1\").getValue() === \"\") {\r\n\t\t\t\t\tsap.m.MessageBox.error(\"Please Enter the Sanction Number First!\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this._getMigratedCreateFragControlById(\"sancDate\").getValue() === \"\") {\r\n\t\t\t\tsap.m.MessageBox.error(\"Please Select Sanction Date First!\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this._getMigratedCreateFragControlById(\"sancDept\").getSelectedItem() === null) {\r\n\t\t\t\tsap.m.MessageBox.error(\"Please Select Sanction Department First!\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this._getMigratedCreateFragControlById(\"sanAuthority\").getValue() === \"\") {\r\n\t\t\t\tsap.m.MessageBox.error(\"Please Select Sanction Authority First!\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (that.getModel(\"createNewASModel\").getData().migratedPhaseOneEditable === false) {\r\n\t\t\t\tif (this._getMigratedCreateFragControlById(\"sancAmount\").getValue() === \"\") {\r\n\t\t\t\t\tsap.m.MessageBox.error(\"Please Select Sanction Amount First!\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this._getMigratedCreateFragControlById(\"goAmount\").getValue() === \"\") {\r\n\t\t\t\tsap.m.MessageBox.error(\"Please Select Go Amount First!\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (that.getModel(\"createNewASModel\").getData().migratedPhaseOneEditable === true) {\r\n\t\t\t\tfor (var i = 0; i < this.getView().getModel(\"modelName\").getData().results.length; i++) {\r\n\t\t\t\t\tvar sanAMount = Number(sanAMount) + Number(this.getView().getModel(\"modelName\").getData().results[i].SancAmunt);\r\n\t\t\t\t\tvar RowTable = i + 1;\r\n\t\t\t\t\tif (this.getView().getModel(\"modelName\").getData().results[i].MigASNumber === \"\") {\r\n\t\t\t\t\t\tsap.m.MessageBox.error(\"Please Enter the Old AS Number in Row '\" + RowTable + \"'. \");\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else if (this.getView().getModel(\"modelName\").getData().results[i].SancAmunt === \"\") {\r\n\t\t\t\t\t\tsap.m.MessageBox.error(\"Please Enter the Old AS Number in Row '\" + RowTable + \"'. \");\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tsanAMount = that._getMigratedCreateFragControlById(\"sancAmount\").getValue();\r\n\t\t\t\tif (parseInt(this._getMigratedCreateFragControlById(\"goAmount\").getValue()) < sanAMount) {\r\n\t\t\t\t\tsap.m.MessageBox.error(\"GO Amount sholud be greater than Sanction Amount!\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar category, sancno;\r\n\t\t\tif (this._getMigratedCreateFragControlById(\"goCategory\").getSelected()) {\r\n\t\t\t\tcategory = 'GO';\r\n\t\t\t\tsancno = that._getMigratedCreateFragControlById(\"sancNo\").getValue();\r\n\t\t\t} else {\r\n\t\t\t\tcategory = 'DEP';\r\n\t\t\t\tsancno = that._getMigratedCreateFragControlById(\"sancNo1\").getValue();\r\n\t\t\t}\r\n\t\t\tvar Arry = [];\r\n\t\t\tvar Obj = {};\r\n\t\t\tfor (var i = 0; i < this.getView().getModel(\"modelName\").getData().results.length; i++) {\r\n\t\t\t\tObj.ApplicationName = \"ZWAS\";\r\n\t\t\t\tObj.OldAsNumber = this.getView().getModel(\"modelName\").getData().results[i].MigASNumber;\r\n\t\t\t\tif (this.getView().getModel(\"modelName\").getData().results[i].SancAmunt === \"\") {\r\n\t\t\t\t\tObj.SanAmount = \"0.00\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tObj.SanAmount = this.getView().getModel(\"modelName\").getData().results[i].SancAmunt;\r\n\t\t\t\t}\r\n\t\t\t\tObj.SanRefNo = this.getView().getModel(\"modelName\").getData().results[i].SanctionRefe;\r\n\t\t\t\tObj.PrjDesc = this.getView().getModel(\"modelName\").getData().results[i].ASDescription;\r\n\t\t\t\tArry.push(Obj);\r\n\t\t\t\tObj = {};\r\n\t\t\t}\r\n\t\t\tvar dt = this._DateCoversion(that.getOwnerComponent().getModel(\"migratedModel\").getData().date);\r\n\t\t\tif (that.getModel(\"createNewASModel\").getData().migratedPhaseOneEditable === true) {\r\n\t\t\t\tvar migratedPayloadData = {\r\n\t\t\t\t\tAction: 'MIGDUPLI',\r\n\t\t\t\t\tGuid: \"00000000-0000-0000-0000-000000000000\",\r\n\t\t\t\t\tSessionguid: \"00000000-0000-0000-0000-000000000000\",\r\n\t\t\t\t\t// OldAsNumber: that.oldASNumber,\r\n\t\t\t\t\tSanDate: dt,\r\n\t\t\t\t\tSanType: that.getOwnerComponent().getModel(\"migratedModel\").getData().type,\r\n\t\t\t\t\tSanNumber: sancno,\r\n\t\t\t\t\tSanAmount: \"0.00\",\r\n\t\t\t\t\tGoAmount: that._getMigratedCreateFragControlById(\"goAmount\").getValue(),\r\n\t\t\t\t\tSanAuthority: this._getMigratedCreateFragControlById(\"sanAuthority\").getValue().split(\" \")[0],\r\n\t\t\t\t\tSanCategory: category,\r\n\t\t\t\t\tSanDes: \"\",\r\n\t\t\t\t\tSanDepartment: that.getOwnerComponent().getModel(\"migratedModel\").getData().beschr,\r\n\t\t\t\t\tBeschr: \"\",\r\n\t\t\t\t\tAsNumber: \"\",\r\n\t\t\t\t\tNonCfmsInd: that.getModel(\"createNewASModel\").getProperty(\"/nonCfms\"),\r\n\t\t\t\t\tPosition: that.getModel(\"appView\").getProperty(\"/position\"),\r\n\t\t\t\t\tWrkOldAs_Nav: Arry\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tvar migratedPayloadData = {\r\n\t\t\t\t\tAction: 'MIGDUPLI',\r\n\t\t\t\t\tGuid: \"00000000-0000-0000-0000-000000000000\",\r\n\t\t\t\t\tSessionguid: \"00000000-0000-0000-0000-000000000000\",\r\n\t\t\t\t\t// OldAsNumber: that.oldASNumber,\r\n\t\t\t\t\tSanDate: dt,\r\n\t\t\t\t\tSanType: that.getOwnerComponent().getModel(\"migratedModel\").getData().type,\r\n\t\t\t\t\tSanNumber: sancno,\r\n\t\t\t\t\tSanAmount: that._getMigratedCreateFragControlById(\"sancAmount\").getValue(),\r\n\t\t\t\t\tGoAmount: that._getMigratedCreateFragControlById(\"goAmount\").getValue(),\r\n\t\t\t\t\tSanAuthority: this._getMigratedCreateFragControlById(\"sanAuthority\").getValue().split(\" \")[0],\r\n\t\t\t\t\tSanCategory: category,\r\n\t\t\t\t\tSanDes: \"\",\r\n\t\t\t\t\tSanDepartment: that.getOwnerComponent().getModel(\"migratedModel\").getData().beschr,\r\n\t\t\t\t\tBeschr: \"\",\r\n\t\t\t\t\tAsNumber: \"\",\r\n\t\t\t\t\tNonCfmsInd: that.getModel(\"createNewASModel\").getProperty(\"/nonCfms\"),\r\n\t\t\t\t\tPosition: that.getModel(\"appView\").getProperty(\"/position\"),\r\n\t\t\t\t\tWrkOldAs_Nav: Arry,\r\n\t\t\t\t\tTsFlag: false\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tthis.getOwnerComponent().getModel().create(\"/WrkMigCmmSet\", migratedPayloadData, {\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tsuccess: function(oData, oResponse) {\r\n\t\t\t\t\t$.sap.GUID = oData.Guid;\r\n\t\t\t\t\t$.sap.ASNUMBER = oData.AsNumber;\r\n\t\t\t\t\t// var this.AmendGuid = oData.Guid;\r\n\t\t\t\t\t// var this.AmendAsNumber = oData.AsNumber;\r\n\t\t\t\t\tthat.getModel(\"appView\").setProperty(\"/DepartDesc\", oData.Beschr);\r\n\t\t\t\t\tthat.getModel(\"appView\").setProperty(\"/InitiatinDept\", oData.SanDepartment);\r\n\t\t\t\t\tif (that.getOwnerComponent().getModel(\"uploadedItem\") != undefined) {\r\n\t\t\t\t\t\tthat.getOwnerComponent().getModel(\"uploadedItem\").setData([]);\r\n\t\t\t\t\t\tthat.getOwnerComponent().getModel(\"uploadedItem\").refresh();\r\n\t\t\t\t\t\tthat.getOwnerComponent().getModel(\"uploadedItem\").updateBindings();\r\n\t\t\t\t\t\tsap.ui.getCore().byId(\"fileUpload\").setValue(\"\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (oData.MessageType == 'W') {\r\n\t\t\t\t\t\tsap.m.MessageBox.warning(oData.Message, {\r\n\t\t\t\t\t\t\tactions: ['OK', 'Cancel'],\r\n\t\t\t\t\t\t\tonClose: function(sAction) {\r\n\r\n\t\t\t\t\t\t\t\tif (sAction == 'OK') {\r\n\t\t\t\t\t\t\t\t\tthat._saveMigratedASData(migratedPayloadData);\r\n\t\t\t\t\t\t\t\t\t// that._SaveAmendActionDupli();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat._saveMigratedASData(migratedPayloadData);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terror: function(error) {\r\n\t\t\t\t\t// debugger;\r\n\t\t\t\t\t// sap.m.MessageBox.error(\"\" + JSON.parse(error.responseText).error.message.value + \"\", {\r\n\t\t\t\t\t// \tactions: [sap.m.MessageBox.Action.OK],\r\n\t\t\t\t\t// \tonClose: function (sAction) {\r\n\t\t\t\t\t// \t\tif (sAction === \"OK\" || sAction === null) {}\r\n\t\t\t\t\t// \t}\r\n\t\t\t\t\t// });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// dateFormatForMasterList: function (sValue) {\r\n\t\t// \tvar dDate = new Date();\r\n\t\t// \tif (sValue) {\r\n\t\t// \t\tdDate = new Date(sValue);\r\n\t\t// \t\tvar oDateFormat = sap.ui.core.format.DateFormat.getDateInstance({\r\n\t\t// \t\t\tstyle: \"medium\",\r\n\t\t// \t\t\tstrictParsing: \"true\",\r\n\t\t// \t\t\tUTC: \"true\"\r\n\t\t// \t\t});\r\n\t\t// \t\treturn oDateFormat.format(dDate);\r\n\t\t// \t}\r\n\t\t// },\r\n\r\n\t\t_DateCoversion: function(value) {\r\n\t\t\t// var d = value.split(\".\")[0];\r\n\t\t\t// var m = value.split(\".\")[1];\r\n\t\t\t// var y = value.split(\".\")[2];\r\n\t\t\t// var FullDate = m + \".\" + d + \".\" + y;\r\n\t\t\t// return FullDate;\r\n\t\t\tvar dt2 = value.split(\".\");\r\n\t\t\tif (dt2[1] === \"01\" && dt2[0] === \"31\" || dt2[1] === \"03\" && dt2[0] === \"31\" || dt2[1] === \"05\" && dt2[0] === \"31\" || dt2[1] ===\r\n\t\t\t\t\"07\" && dt2[0] === \"31\" || dt2[1] === \"08\" && dt2[0] === \"31\" || dt2[1] === \"10\" && dt2[0] === \"31\" || dt2[1] ===\r\n\t\t\t\t\"12\" && dt2[0] === \"31\") {\r\n\t\t\t\tdt2[0] = \"01\";\r\n\t\t\t\tif (dt2[1] === \"12\") {\r\n\t\t\t\t\tdt2[1] = \"01\";\r\n\t\t\t\t\tdt2[2] = parseInt(dt2[2]) + 1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdt2[1] = parseInt(dt2[1]) + 1;\r\n\t\t\t\t}\r\n\t\t\t} else if (dt2[1] === \"04\" && dt2[0] === \"30\" || dt2[1] === \"06\" && dt2[0] === \"30\" || dt2[1] === \"09\" && dt2[0] === \"30\" || dt2[1] ===\r\n\t\t\t\t\"11\" && dt2[0] === \"30\") {\r\n\t\t\t\t/* old code -start*/\r\n\t\t\t\t// dt2[1] = \"01\";\r\n\t\t\t\t// dt2[2] = parseInt(dt2[2]) + 1;\r\n\t\t\t\t/*code changed on - cfms_ctm_npv -(27_01_23) -start*/\r\n\t\t\t\t/* old code -end*/\r\n\t\t\t\tdt2[0] = \"01\";\r\n\t\t\t\tdt2[1] = parseInt(dt2[1]) + 1;\r\n\t\t\t\t/*code changed on - cfms_ctm_npv -(27_01_23) -end*/\r\n\t\t\t} else if (dt2[1] === \"02\" && dt2[0] === \"28\" || dt2[1] === \"02\" && dt2[0] === \"29\") {\r\n\t\t\t\t/* old code -start*/\r\n\t\t\t\t// dt2[0] = \"01\";\r\n\t\t\t\t// dt2[1] = parseInt(dt2[1]) + 1;\r\n\t\t\t\t/* old code -end*/\r\n\t\t\t\t/*code changed on - cfms_ctm_npv -(27_01_23) -start*/\r\n\t\t\t\t/* old code -end*/\r\n\t\t\t\tdt2[0] = \"01\";\r\n\t\t\t\tdt2[1] = parseInt(dt2[1]) + 1;\r\n\t\t\t\t/*code changed on - cfms_ctm_npv -(27_01_23) -end*/\r\n\t\t\t} else if (dt2[1] === \"01\" && dt2[0] !== \"31\" || dt2[1] === \"03\" && dt2[0] !== \"31\" || dt2[1] === \"05\" && dt2[0] !== \"31\" || dt2[1] ===\r\n\t\t\t\t\"07\" && dt2[0] !== \"31\" || dt2[1] === \"08\" && dt2[0] !== \"31\" || dt2[1] === \"10\" && dt2[0] !== \"31\" || dt2[1] ===\r\n\t\t\t\t\"12\" && dt2[0] !== \"31\") {\r\n\t\t\t\tdt2[0] = parseInt(dt2[0]) + 1;\r\n\t\t\t} else if (dt2[1] === \"04\" && dt2[0] !== \"30\" || dt2[1] === \"06\" && dt2[0] !== \"30\" || dt2[1] === \"09\" && dt2[0] !== \"30\" || dt2[1] ===\r\n\t\t\t\t\"11\" && dt2[0] !== \"30\") {\r\n\t\t\t\tdt2[0] = parseInt(dt2[0]) + 1;\r\n\t\t\t} else if (dt2[1] === \"02\" && dt2[0] !== \"28\" || dt2[1] === \"02\" && dt2[0] !== \"29\") {\r\n\t\t\t\tdt2[0] = parseInt(dt2[0]) + 1;\r\n\t\t\t}\r\n\r\n\t\t\tfunction addZero(i) {\r\n\t\t\t\tif (i < 10) {\r\n\t\t\t\t\ti = \"0\" + i;\r\n\t\t\t\t}\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t\tif (dt2[1].toString().length === 1) {\r\n\t\t\t\tdt2[1] = addZero(dt2[1]);\r\n\t\t\t}\r\n\t\t\tif (dt2[0].toString().length === 1) {\r\n\t\t\t\tdt2[0] = addZero(dt2[0]);\r\n\t\t\t}\r\n\t\t\t/*eslint-disable */\r\n\t\t\t//eslint-disable-no-implicit-coercion\r\n\t\t\tvar dt = \"\" + dt2[2] + \"\" + dt2[1] + \"\" + dt2[0] + \"\";\r\n\t\t\tvar dt1 = \"\" + dt.toString().slice(4, 6) + \".\" + dt.toString().slice(6, 8) + \".\" + dt.toString().slice(0, 4) + \"\";\r\n\t\t\tvar Fulldate = \"\\/Date(\" + new Date(dt1).getTime() + \")\\/\";\r\n\t\t\treturn Fulldate;\r\n\t\t\t/*eslint-enable */\r\n\t\t},\r\n\r\n\t\t_handleOk: function(oSource) {\r\n\t\t\tvar oControl = oSource.getCustomData()[0].getValue(),\r\n\t\t\t\toTable = this._getFragControlById(\"idSmartTable\", \"idVHDialog\"),\r\n\t\t\t\toSelectedObject = oTable.getTable().getSelectedContexts(),\r\n\t\t\t\toModel = this.getModel();\r\n\t\t\tvar aArray = [];\r\n\t\t\tvar Obj = {};\r\n\t\t\tvar LstRsultRow = this.getView().getModel(\"modelName\").getData().results.length - 1;\r\n\t\t\tif (this.getView().getModel(\"modelName\").getData().results.length > 0) {\r\n\t\t\t\tif (this.getView().getModel(\"modelName\").getData().results.length > 0 && this.getView().getModel(\"modelName\").getData().results[\r\n\t\t\t\t\t\tLstRsultRow].MigASNumber === \"\") {\r\n\t\t\t\t\tthis.getView().getModel(\"modelName\").getData().results.splice(LstRsultRow, 1);\r\n\t\t\t\t\tthis.getView().getModel(\"modelName\").refresh();\r\n\t\t\t\t}\r\n\t\t\t\tfor (var k = 0; k < this.getView().getModel(\"modelName\").getData().results.length; k++) {\r\n\t\t\t\t\tObj.MigASNumber = this.getView().getModel(\"modelName\").getData().results[k].MigASNumber;\r\n\t\t\t\t\tObj.SancAmunt = this.getView().getModel(\"modelName\").getData().results[k].SancAmunt;\r\n\t\t\t\t\tObj.ASDescription = this.getView().getModel(\"modelName\").getData().results[k].ASDescription;\r\n\t\t\t\t\tObj.SanctionRefe = this.getView().getModel(\"modelName\").getData().results[k].SanctionRefe;\r\n\t\t\t\t\taArray.push(Obj);\r\n\t\t\t\t\tObj = {};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (var i = 0; i < oSelectedObject.length; i++) {\r\n\t\t\t\tObj.MigASNumber = oSelectedObject[i].getObject().project_id;\r\n\t\t\t\tObj.SancAmunt = oSelectedObject[i].getObject().san_amt;\r\n\t\t\t\tObj.ASDescription = oSelectedObject[i].getObject().prj_desc;\r\n\t\t\t\tObj.SanctionRefe = oSelectedObject[i].getObject().san_ref_no;\r\n\t\t\t\taArray.push(Obj);\r\n\t\t\t\tObj = {};\r\n\t\t\t}\r\n\t\t\taArray = {\r\n\t\t\t\t\"results\": aArray\r\n\t\t\t};\r\n\t\t\tvar oModel = new sap.ui.model.json.JSONModel();\r\n\t\t\toModel.setData(aArray);\r\n\r\n\t\t\tthis.getView().setModel(oModel, \"modelName\");\r\n\t\t\tthis.getView().getModel(\"modelName\").refresh();\r\n\t\t\tthis._handleExit();\r\n\t\t},\r\n\t\t//Migrated Code Ends\r\n\r\n\t\t/**\r\n\t\t * function to close Migrated AS frag\r\n\t\t * @public\r\n\t\t */\r\n\r\n\t\t//Migrated Code Starts\r\n\t\tonCancelMigratedAS: function(oEvent) {\r\n\t\t\tvar that = this;\r\n\t\t\t// var url = \"/WrkAsMigSet(Guid=guid'\" + this.getOwnerComponent().getModel(\"migratedModel\").getData().guid + \"',OldAsNumber='\" + this.getOwnerComponent()\r\n\t\t\t// \t.getModel(\"migratedModel\").getData().oldasnumber + \"')\";\r\n\r\n\t\t\t// this.getOwnerComponent().getModel().remove(url, {\r\n\t\t\t// \tmethod: 'DELETE',\r\n\t\t\t// \tasync: true,\r\n\t\t\t// \tsuccess: function (oData, oResponse) {\r\n\t\t\t// \t\tdebugger;\r\n\t\t\tthat._createMigratedASFrag.close();\r\n\t\t\tvar oCreateNewASModel = that.getModel(\"createNewASModel\");\r\n\t\t\toCreateNewASModel.setProperty(\"/refVisible\", false);\r\n\t\t\toCreateNewASModel.setProperty(\"/typeVisible\", true);\r\n\t\t\toCreateNewASModel.updateBindings();\r\n\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bUserCreateAS\", false);\r\n\t\t\t// \t},\r\n\t\t\t// \terror: function (e) {\r\n\r\n\t\t\t// \t}\r\n\t\t\t// });\r\n\r\n\t\t},\r\n\t\t//Migrated Code Ends\r\n\r\n\t\t/**\r\n\t\t * Event handler for Radio button selection\r\n\t\t * @param {sap.ui.base.Event} oEvent Event for selecting radio button on Create Fragment\r\n\t\t */\r\n\r\n\t\t//Migrated Code Starts\r\n\t\tonSelectRadioButton: function(oEvent) {\r\n\t\t\tvar sControlId = oEvent.getSource().getId(),\r\n\t\t\t\toCreateNewASModel = this.getModel(\"createNewASModel\");\r\n\t\t\tif (sControlId === this._getCreateFragControlById(\"idMigratedRadioBtnPhaseOne\").getId()) {\r\n\t\t\t\toCreateNewASModel.setProperty(\"/nonCfms\", \"\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idCopyFromASCode\").setValue(\"\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idCopyFromASCode\").resetProperty(\"valueState\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idAmendASCode\").setValue(\"\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idAmendASCode\").resetProperty(\"valueState\");\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedPhaseOneEditable\", true);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedRadioBtnPhaseOneSelected\", true);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedRadioBtnNonCfmsSelected\", false);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedNonCfmsEditable\", false);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedSanctionVisible\", false);\r\n\t\t\t\t// oCreateNewASModel.setProperty(\"/migratedPhaseOneTabelVisible\", false);\r\n\t\t\t} else {\r\n\t\t\t\toCreateNewASModel.setProperty(\"/nonCfms\", \"X\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idCopyFromASCode\").setValue(\"\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idCopyFromASCode\").resetProperty(\"valueState\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idAmendASCode\").setValue(\"\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idAmendASCode\").resetProperty(\"valueState\");\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedPhaseOneEditable\", false);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedNonCfmsEditable\", true);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedRadioBtnPhaseOneSelected\", false);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedRadioBtnNonCfmsSelected\", true);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedSanctionVisible\", true);\r\n\t\t\t\t// oCreateNewASModel.setProperty(\"/migratedPhaseOneTabelVisible\", true);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonSelectNewRadioButton: function(oEvent) {\r\n\t\t\tvar sControlId = oEvent.getSource().getId(),\r\n\t\t\t\toCreateNewASModel = this.getModel(\"createNewASModel\");\r\n\t\t\tif (sControlId === this._getCreateFragControlById(\"idNewRadioBtnGO\").getId()) {\r\n\t\t\t\toCreateNewASModel.setProperty(\"/nonCfms\", \"\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idCopyFromASCode\").setValue(\"\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idCopyFromASCode\").resetProperty(\"valueState\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idAmendASCode\").setValue(\"\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idAmendASCode\").resetProperty(\"valueState\");\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedPhaseOneEditable\", true);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/NewRadioBtnPhaseOneSelected\", true);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/NewRadioBtnNonCfmsSelected\", false);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedNonCfmsEditable\", false);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedSanctionVisible\", false);\r\n\t\t\t\t// DetailControl.getView().byId(\"idNEWGO\").setVisible(true);\r\n\t\t\t\t// \t\t\tDetailControl.getView().byId(\"idNEWPROCEEDING\").setVisible(false);\r\n\t\t\t\t// \t\t\t\t\t\t var detailPageController = sap.ui.getCore().byId(\"DetailPage\").getView(\r\n\t\t\t\t// var detailPageController = sap.ui.getCore().byId(\"DetailPage\").getController();\r\n\t\t\t\t// var newGO = detailPageController.rediobtnGO();\r\n\t\t\t\t// newGO.setVisible(\"true\");\r\n\t\t\t\t// this.getView().byId(\"idNEWPROCEEDING\").setVisible(\"false\");\r\n\t\t\t\t// oCreateNewASModel.setProperty(\"/migratedPhaseOneTabelVisible\", false);\r\n\t\t\t\t// DetailControl.getView().byId(\"idNEWGO\");\r\n\r\n\t\t\t} else {\r\n\t\t\t\toCreateNewASModel.setProperty(\"/nonCfms\", \"X\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idCopyFromASCode\").setValue(\"\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idCopyFromASCode\").resetProperty(\"valueState\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idAmendASCode\").setValue(\"\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idAmendASCode\").resetProperty(\"valueState\");\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedPhaseOneEditable\", false);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedNonCfmsEditable\", true);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/NewRadioBtnPhaseOneSelected\", false);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/NewRadioBtnNonCfmsSelected\", true);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedSanctionVisible\", true);\r\n\t\t\t\tDetailControl.getView().byId(\"idNEWPROCEEDING\").setVisible(true);\r\n\t\t\t\tDetailControl.getView().byId(\"idNEWGO\").setVisible(false);\r\n\t\t\t\t// \tthis.getView().byId(\"idNEWPROCEEDING\").setVisible(\"true\");\r\n\t\t\t\t// this.getView().byId(\"idNEWGO\").setVisible(\"false\");\r\n\t\t\t\t// oCreateNewASModel.setProperty(\"/migratedPhaseOneTabelVisible\", true);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tOnPressAddNewMigNumber: function(oEvent) {\r\n\t\t\tvar oCreateNewASModel = this.getModel(\"createNewASModel\");\r\n\t\t\tvar Obj = {\r\n\t\t\t\tMigASNumber: \"\",\r\n\t\t\t\tSancAmunt: \"\",\r\n\t\t\t\tASDescription: \"\",\r\n\t\t\t\tSanctionRefe: \"\"\r\n\t\t\t};\r\n\t\t\tvar data = this.getView().getModel(\"modelName\").getData().results;\r\n\t\t\tdata.push(Obj);\r\n\t\t\tthis.getView().getModel(\"modelName\").refresh();\r\n\t\t},\r\n\r\n\t\tonPressDeleteRowForSanction: function(oEvent) {\r\n\t\t\tvar RowId = oEvent.getSource().getId().split(\"-\")[6];\r\n\t\t\tthis.getView().getModel(\"modelName\").getData().results.splice(RowId, 1);\r\n\t\t\tthis.getView().getModel(\"modelName\").refresh();\r\n\t\t},\r\n\r\n\t\tonMigratedDialogDateChange: function(oEvent) {\r\n\t\t\tvar Sandate = oEvent.getSource().getValue();\r\n\t\t\tthis.getOwnerComponent().getModel(\"migratedModel\").getData().date = Sandate;\r\n\t\t\tthis.getOwnerComponent().getModel(\"migratedModel\").refresh();\r\n\t\t},\r\n\t\t//Migrated Code Ends\r\n\r\n\t\t//Migrated Code Starts\r\n\t\t_createMigAS: function(Code) {\r\n\t\t\tvar Obj = {\r\n\t\t\t\tMigASNumber: \"\",\r\n\t\t\t\tSancAmunt: \"\",\r\n\t\t\t\tASDescription: \"\",\r\n\t\t\t\tSanctionRefe: \"\"\r\n\t\t\t};\r\n\t\t\tvar oModel = new sap.ui.model.json.JSONModel({\r\n\t\t\t\tresults: []\r\n\t\t\t});\r\n\t\t\toModel.getData().results.push(Obj);\r\n\r\n\t\t\tthis.getView().setModel(oModel, \"modelName\");\r\n\t\t\tthis.getView().getModel(\"modelName\").refresh();\r\n\t\t\t$.sap.CreateNewASModel = this.getModel(\"createNewASModel\");\r\n\t\t\tvar oCreateNewASModel = this.getModel(\"createNewASModel\");\r\n\t\t\tvar model = new sap.ui.model.json.JSONModel();\r\n\t\t\tmodel.setData([]);\r\n\t\t\tvar data = {\r\n\t\t\t\tEditableField: true\r\n\t\t\t};\r\n\t\t\tmodel.setData([]);\r\n\t\t\tmodel.setData(data);\r\n\t\t\tthis.getOwnerComponent().setModel(model, \"migratedModel\");\r\n\t\t\tthis.getOwnerComponent().getModel(\"migratedModel\").updateBindings();\r\n\t\t\tif (oCreateNewASModel.getProperty(\"/migratedRadioBtnPhaseOneSelected\") === true) {\r\n\t\t\t\toCreateNewASModel.setProperty(\"/nonCfms\", \"\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idCopyFromASCode\").setValue(\"\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idCopyFromASCode\").resetProperty(\"valueState\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idAmendASCode\").setValue(\"\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idAmendASCode\").resetProperty(\"valueState\");\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedPhaseOneEditable\", true);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedRadioBtnPhaseOneSelected\", true);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedRadioBtnNonCfmsSelected\", false);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedNonCfmsEditable\", false);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedSanctionVisible\", false);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedPhaseOneTabelVisible\", true);\r\n\t\t\t} else {\r\n\t\t\t\toCreateNewASModel.setProperty(\"/nonCfms\", \"X\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idCopyFromASCode\").setValue(\"\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idCopyFromASCode\").resetProperty(\"valueState\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idAmendASCode\").setValue(\"\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idAmendASCode\").resetProperty(\"valueState\");\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedPhaseOneEditable\", false);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedNonCfmsEditable\", true);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedRadioBtnPhaseOneSelected\", false);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedRadioBtnNonCfmsSelected\", true);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedSanctionVisible\", true);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedPhaseOneTabelVisible\", false);\r\n\t\t\t}\r\n\t\t\tthis._createASFrag.close();\r\n\t\t\t// this._getCreateFragControlById(\"idMigratedASCode\").resetProperty(\"value\");\r\n\t\t\tthis.oSelectedObject = null;\r\n\t\t\toCreateNewASModel.setProperty(\"/amendEditable\", false);\r\n\t\t\toCreateNewASModel.setProperty(\"/copyEditable\", false);\r\n\t\t\toCreateNewASModel.setProperty(\"/refVisible\", false);\r\n\t\t\toCreateNewASModel.setProperty(\"/typeVisible\", true);\r\n\t\t\t// oCreateNewASModel.setProperty(\"/creatBtnVisible\", false);\r\n\t\t\toCreateNewASModel.setProperty(\"/backBtnVisible\", false);\r\n\t\t\toCreateNewASModel.setProperty(\"/nextBtnVisible\", true);\r\n\t\t\toCreateNewASModel.setProperty(\"/sancno1\", true);\r\n\t\t\toCreateNewASModel.setProperty(\"/sancno2\", false);\r\n\t\t\tif (!this._createMigratedASFrag) {\r\n\t\t\t\tvar fragId = this.createId(\"createMigratedASDialog\");\r\n\t\t\t\tthis._createMigratedASFrag = sap.ui.xmlfragment(fragId, \"com.goap.cfms.works.as.fragment.createMigratedASDialog\", this);\r\n\t\t\t\tthis.getView().addDependent(this._createMigratedASFrag);\r\n\t\t\t\tjQuery.sap.syncStyleClass(\"sapUiSizeCompact\", this.getView(), this._createMigratedASFrag);\r\n\t\t\t}\r\n\r\n\t\t\t/*\tdate picker only select (no need enter date) - in fragment - -start cfms_ctm_npv(27_01_23)*/\r\n\t\t\tvar dateArray = [\"sancDate\"];\r\n\t\t\t// dateArray.forEach(date => {\r\n\t\t\t// var oDatePicker = sap.ui.getCore().byId(date);\r\n\t\t\tvar oDatePicker = this._getMigratedCreateFragControlById(\"sancDate\");\r\n\t\t\t// var oDatePicker = \tthis._getMigratedCreateFragControlById(\"sancDate\").getId();\r\n\t\t\t// var oDatePicker = this.getView().byId(date);\r\n\t\t\toDatePicker.addEventDelegate({\r\n\t\t\t\tonAfterRendering: function() {\r\n\t\t\t\t\tvar oDateInner = this.$().find('.sapMInputBaseInner');\r\n\t\t\t\t\t// var oDateInner = this._getMigratedCreateFragControlById(\"sancDate\").$().find('.sapMInputBaseInner');\r\n\t\t\t\t\tvar oID = oDateInner[0].id;\r\n\t\t\t\t\t$('#' + oID).attr(\"disabled\", \"disabled\");\r\n\t\t\t\t}\r\n\t\t\t}, oDatePicker);\r\n\r\n\t\t\t// sap.ui.getCore().byId(\"sancDate\").setMaxDate(new Date());\r\n\t\t\t// sap.ui.getCore().byId(\"sancDate\").setMaxDate(new Date());\r\n\t\t\t/*\t\tdate picker only select (no need enter date) - in fragment --End - cfms_ctm_npv(27_01_23)*/\r\n\t\t\tthis._createMigratedASFrag.open();\r\n\t\t\tthis._getMigratedCreateFragControlById(\"fileUpload\").setSelected(false);\r\n\t\t\tthis._setInputFieldsNumberOnly(this._getMigratedCreateFragControlById(\"sancAmount\"));\r\n\t\t\tthis._setInputFieldsNumberOnly(this._getMigratedCreateFragControlById(\"goAmount\"));\r\n\t\t\tthis._getMigratedCreateFragControlById(\"goCategory\").setSelected(true);\r\n\t\t\toCreateNewASModel.setProperty(\"/sancno1\", true);\r\n\t\t\toCreateNewASModel.setProperty(\"/sancno2\", false);\r\n\t\t\toCreateNewASModel.updateBindings();\r\n\t\t\tthis._setInputFieldsNumberOnly(this._getMigratedCreateFragControlById(\"sancNo\"));\r\n\t\t\tthis._setFormReset();\r\n\t\t\t//old code -start\r\n\t\t\t// this._manuallyDisabledDatePicker(this._getMigratedCreateFragControlById(\"sancDate\"));\r\n\t\t\t// old code - end\r\n\r\n\t\t},\r\n\t\t//Migrated Code Ends\r\n\r\n\t\t//Migrated Code Starts\r\n\t\t_setFormReset: function() {\r\n\t\t\tvar goSanctionForm = this._getMigratedCreateFragControlById(\"goSanctionForm\");\r\n\t\t\tfor (var i = 0; i < goSanctionForm.getFormContainers().length; i++) {\r\n\t\t\t\tgoSanctionForm.getFormContainers()[i].getFormElements()[0].getFields()[0].setValueState(sap.ui.core.ValueState.None);\r\n\t\t\t\tgoSanctionForm.getFormContainers()[i].getFormElements()[0].getFields()[0].setValueStateText(\"\");\r\n\t\t\t\tgoSanctionForm.getFormContainers()[i].getFormElements()[0].getFields()[0].setValue(\"\");\r\n\t\t\t}\r\n\t\t\tvar goSanctionForm1 = this._getMigratedCreateFragControlById(\"goSanctionFormRight\");\r\n\t\t\tfor (var j = 0; j < goSanctionForm1.getFormContainers().length; j++) {\r\n\t\t\t\tif (goSanctionForm1.getFormContainers()[j].getFormElements()[0].getFields()[0].getMetadata()._sClassName != 'sap.m.CheckBox') {\r\n\t\t\t\t\tgoSanctionForm1.getFormContainers()[j].getFormElements()[0].getFields()[0].setValueStateText(\"\");\r\n\t\t\t\t\tgoSanctionForm1.getFormContainers()[j].getFormElements()[0].getFields()[0].setValue(\"\");\r\n\t\t\t\t}\r\n\t\t\t\tgoSanctionForm1.getFormContainers()[j].getFormElements()[0].getFields()[0].setValueState(sap.ui.core.ValueState.None);\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\t//Migrated Code Ends\r\n\r\n\t\t/**\r\n\t\t * function to close po upload dialog.\r\n\t\t * @public\r\n\t\t */\r\n\r\n\t\t//Migrated Code Starts\r\n\t\tonOKPOUploadDialog: function() {\r\n\t\t\tvar that = this;\r\n\t\t\tvar oCreateNewASModel = this.getModel(\"createNewASModel\");\r\n\t\t\tthis._poUploadFragment.close();\r\n\t\t\tthis._createMigratedASFrag.close();\r\n\t\t\toCreateNewASModel.setProperty(\"/backBtnVisible\", false);\r\n\t\t\toCreateNewASModel.setProperty(\"/nextBtnVisible\", true);\r\n\t\t\toCreateNewASModel.updateBindings();\r\n\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bUserCreateAS\", true);\r\n\t\t\tthis.getRouter().navTo(\"Detail\", {\r\n\t\t\t\tobjectId: that.payloadData.Guid,\r\n\t\t\t\tstateId: \"C\"\r\n\t\t\t}, true);\r\n\t\t},\r\n\t\t//Migrated Code Ends\r\n\r\n\t\t// onClosePOUploadDialog: function (oEvent) {\r\n\t\t// \tthis.closeEventForDialog = oEvent.getSource();\r\n\t\t// \tthis._poUploadFragment.close();\r\n\t\t// },\r\n\t\t/**\r\n\t\t * event handler for upload button.\r\n\t\t * @public\r\n\t\t */\r\n\r\n\t\t//Migrated Code Starts\r\n\t\tonPOUpload: function() {\r\n\t\t\tvar that = this;\r\n\t\t\tvar poFile;\r\n\t\t\tif (this.poFile) {\r\n\t\t\t\tpoFile = this.poFile;\r\n\t\t\t} else {\r\n\t\t\t\tpoFile = [];\r\n\t\t\t}\r\n\t\t\tif (poFile.length > 0) {\r\n\t\t\t\tvar payload = {\r\n\t\t\t\t\tAppType: \"ZWAS\",\r\n\t\t\t\t\tGuid: that.payloadData.Guid,\r\n\t\t\t\t\tWrkAppType_Nav: poFile,\r\n\t\t\t\t\tWrkUplRet_Nav: []\r\n\t\t\t\t};\r\n\t\t\t\tthis.getOwnerComponent().getModel().create(\"/WrkAppTypeSet\", payload, {\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tsuccess: function(oData, oResponse) {\r\n\t\t\t\t\t\tvar model = new sap.ui.model.json.JSONModel();\r\n\t\t\t\t\t\tmodel.setData([]);\r\n\t\t\t\t\t\tif (oData.WrkUplRet_Nav.results.length > 0) {\r\n\t\t\t\t\t\t\tmodel.setData(oData.WrkUplRet_Nav.results);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthat.getOwnerComponent().setModel(model, \"uploadedItem\");\r\n\t\t\t\t\t\tthat.getOwnerComponent().getModel(\"uploadedItem\").refresh();\r\n\t\t\t\t\t\tthat.getOwnerComponent().getModel(\"uploadedItem\").updateBindings();\r\n\t\t\t\t\t},\r\n\t\t\t\t\terror: function(e) {}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tsap.m.MessageBox.error(\"Please select a file First!\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t//Migrated Code Ends\r\n\r\n\t\t/**\r\n\t\t * Method to restrict user numbers only.\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\t//Migrated Code Starts\r\n\t\t_setInputFieldsNumberOnly: function(id) {\r\n\t\t\tid.attachBrowserEvent(\"keydown\", function(e) {\r\n\t\t\t\tvar isModifierkeyPressed = e.metaKey || e.ctrlKey || e.shiftKey;\r\n\t\t\t\tvar isCursorMoveOrDeleteAction = [46, 8, 37, 38, 39, 40, 9].indexOf(e.keyCode) !== -1;\r\n\t\t\t\tvar isNumKeyPressed = e.keyCode >= 48 && e.keyCode <= 58 || e.keyCode >= 96 && e.keyCode <= 105;\r\n\t\t\t\tvar vKey = 86,\r\n\t\t\t\t\tcKey = 67,\r\n\t\t\t\t\taKey = 65;\r\n\r\n\t\t\t\tswitch (true) {\r\n\t\t\t\t\tcase isCursorMoveOrDeleteAction:\r\n\t\t\t\t\tcase isModifierkeyPressed === false && isNumKeyPressed:\r\n\t\t\t\t\tcase (e.metaKey || e.ctrlKey) && [vKey, cKey, aKey].indexOf(e.keyCode) !== -1:\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t//Migrated Code Ends\r\n\t\t/**\r\n\t\t * Method to fetch csrf token.\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\t//Migrated Code Starts\r\n\t\tgetResponse: function getResponse(serverUrl, token) {\r\n\t\t\tvar oResp;\r\n\t\t\t$.ajax(encodeURI(serverUrl), {\r\n\t\t\t\ttype: \"GET\",\r\n\t\t\t\tasync: false,\r\n\t\t\t\tbeforeSend: function beforeSend(xhr) {\r\n\t\t\t\t\txhr.setRequestHeader('Accept', 'application/json');\r\n\t\t\t\t\txhr.setRequestHeader('Content-Type', 'application/json');\r\n\t\t\t\t\txhr.setRequestHeader('X-CSRF-Token', token);\r\n\t\t\t\t}\r\n\t\t\t}).fail(function() {}).complete(function(response) {\r\n\t\t\t\toResp = response;\r\n\t\t\t});\r\n\t\t\treturn oResp;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Method to feed csv file to a file uploader.\r\n\t\t * @private\r\n\t\t */\r\n\t\t_import: function(file) {\r\n\t\t\tif (file && window.FileReader) {\r\n\t\t\t\tvar reader = new FileReader();\r\n\t\t\t\tvar that = this;\r\n\t\t\t\treader.onload = function(evt) {\r\n\t\t\t\t\tvar strCSV = evt.target.result;\r\n\t\t\t\t\tthat.csvJSON(strCSV);\r\n\t\t\t\t};\r\n\t\t\t\treader.readAsText(file);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Method to convert csv to json.\r\n\t\t * @private\r\n\t\t */\r\n\t\tcsvJSON: function(csv) {\r\n\t\t\tvar lines = csv.split(\"\\n\");\r\n\t\t\t// for (var i = 0; i < lines.length; i++) {\r\n\t\t\t// \tlines[i] = lines[i] + \",zzz\";\r\n\t\t\t// }\r\n\t\t\tlines.splice(0, 1);\r\n\t\t\tlines.unshift(\r\n\t\t\t\t\"Item,Shorttext,Specification,Quantity,Grossprice\"\r\n\t\t\t\t// \"Purchdoc,Item,Shorttext,Doctype,Cocd,Plnt,Purorg,Purgrp,Matlgrp,Vendor,Itemcat,Acctasmt,Docdate,Specification,Shortxt,Quantity,BaseUnit,PriceUnit,Grossprice,Userfield1,Userfield2,Glaccount,Busienessarea,Wbs,Hoa,Ddo,Treasuryoffice,TsNumber\"\r\n\t\t\t);\r\n\t\t\tvar result = [];\r\n\t\t\tvar headers = lines[0].split(\",\");\r\n\t\t\tlines.map(function(line, indexLine) {\r\n\t\t\t\tif (indexLine < 1) return; // Jump header line\r\n\r\n\t\t\t\tvar obj = {};\r\n\t\t\t\tvar currentline = line.split(\",\");\r\n\r\n\t\t\t\theaders.map(function(header, indexHeader) {\r\n\t\t\t\t\tif (header == \"Docdate\") {\r\n\t\t\t\t\t\tobj[header] = \"\\/Date(\" + new Date().getTime() + \")\\/\";\r\n\t\t\t\t\t} else if (header == \"Treasuryoffice\\r\") {\r\n\t\t\t\t\t\tobj[\"Treasuryoffice\"] = currentline[indexHeader];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tobj[header] = currentline[indexHeader];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t});\r\n\t\t\t\tresult.push(obj);\r\n\t\t\t});\r\n\t\t\tthis.poFile = result;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event Handler - when a file is being uploaded.\r\n\t\t * @public\r\n\t\t */\r\n\t\t/*eslint-disable */\r\n\t\t//eslint-disable-func-name-matching\r\n\t\tonFileUploaderChange: function onChange(oEvent) {\r\n\t\t\tthis._import(oEvent.getParameter(\"files\")[0]);\r\n\t\t},\r\n\t\t/*eslint-enable */\r\n\t\t/**\r\n\t\t * Event Handler - to control file size.\r\n\t\t * @public\r\n\t\t */\r\n\t\tonFileSizeExceed: function onFileSizeExceed() {\r\n\t\t\tsap.m.MessageToast.show(\"File Size Exceed, File should be less than 2 mb\");\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event Handler - to maintain file type.\r\n\t\t * @public\r\n\t\t */\r\n\t\tonTypeMissmatch: function onTypeMissmatch(oEvent) {\r\n\t\t\tsap.m.MessageToast.show(\"File type should be CSV only.\");\r\n\t\t},\r\n\t\t//Migrated Code Starts\r\n\r\n\t\tonSelectChange: function(oEvent) {\r\n\t\t\t// var value =\r\n\t\t\tif (oEvent.getSource().getName() == 'SanDepartment') {\r\n\t\t\t\tthis.SanCDepart = oEvent.getSource().getSelectedItem().getText();\r\n\t\t\t\tthis.getOwnerComponent().getModel(\"migratedModel\").getData().dept = oEvent.getParameter(\"selectedItem\").getProperty(\"key\");\r\n\t\t\t} else if (oEvent.getSource().getName() == 'SanType') {\r\n\t\t\t\tthis.getOwnerComponent().getModel(\"migratedModel\").getData().type = oEvent.getParameter(\"selectedItem\").getProperty(\"key\");\r\n\t\t\t}\r\n\t\t\tthis.getOwnerComponent().getModel(\"migratedModel\").updateBindings();\r\n\t\t},\r\n\t\t//Migrated Code Ends\r\n\r\n\t\t//Migrated Code Starts\r\n\t\tdateconv: function(value) {\r\n\t\t\t// var res = String(value).slice(4, 15);\r\n\t\t\t// var m = res.slice(0, 3);\r\n\t\t\t// var d = res.slice(4, 6);\r\n\t\t\t// var y = res.slice(7, 15);\r\n\t\t\t// switch (m) {\r\n\t\t\t// case \"Jan\":\r\n\t\t\t// \tm = \"01\";\r\n\t\t\t// \tbreak;\r\n\r\n\t\t\t// case \"Feb\":\r\n\t\t\t// \tm = \"02\";\r\n\t\t\t// \tbreak;\r\n\r\n\t\t\t// case \"Mar\":\r\n\t\t\t// \tm = \"03\";\r\n\t\t\t// \tbreak;\r\n\r\n\t\t\t// case \"Apr\":\r\n\t\t\t// \tm = \"04\";\r\n\t\t\t// \tbreak;\r\n\r\n\t\t\t// case \"May\":\r\n\t\t\t// \tm = \"05\";\r\n\t\t\t// \tbreak;\r\n\r\n\t\t\t// case \"Jun\":\r\n\t\t\t// \tm = \"06\";\r\n\t\t\t// \tbreak;\r\n\r\n\t\t\t// case \"Jul\":\r\n\t\t\t// \tm = \"07\";\r\n\t\t\t// \tbreak;\r\n\r\n\t\t\t// case \"Aug\":\r\n\t\t\t// \tm = \"08\";\r\n\t\t\t// \tbreak;\r\n\r\n\t\t\t// case \"Sep\":\r\n\t\t\t// \tm = \"09\";\r\n\t\t\t// \tbreak;\r\n\r\n\t\t\t// case \"Oct\":\r\n\t\t\t// \tm = \"10\";\r\n\t\t\t// \tbreak;\r\n\r\n\t\t\t// case \"Nov\":\r\n\t\t\t// \tm = \"11\";\r\n\t\t\t// \tbreak;\r\n\r\n\t\t\t// case \"Dec\":\r\n\t\t\t// \tm = \"12\";\r\n\t\t\t// \tbreak;\r\n\t\t\t// }\r\n\t\t\tvar y = value.split(\".\")[2];\r\n\t\t\tvar m = value.split(\".\")[1];\r\n\t\t\tvar d1 = value.split(\".\")[0];\r\n\t\t\t/*eslint-disable */\r\n\t\t\t//eslint-disable-no-implicit-coercion\r\n\t\t\tvar frmdatemil = y + \"\" + m + \"\" + d1;\r\n\t\t\t/*eslint-enable */\r\n\t\t\treturn frmdatemil;\r\n\t\t},\r\n\t\t//Migrated Code Ends\r\n\r\n\t\t//Migrated Code Starts\r\n\t\tonhandleSanctionAuthority: function(oEvent) {\r\n\t\t\tthis.getView().setBusy(true);\r\n\t\t\tthis.sourcesancauth = oEvent.getSource();\r\n\t\t\tif (!this.sacauthority) {\r\n\t\t\t\tthis.sacauthority = sap.ui.xmlfragment(\"com.goap.cfms.works.as.fragment.sacauthority\", this);\r\n\t\t\t\tthis.getView().addDependent(this.sacauthority);\r\n\t\t\t}\r\n\t\t\tvar that = this;\r\n\t\t\tif (this.getOwnerComponent().getModel(\"migratedModel\").getData().date === \"\" || this.getOwnerComponent().getModel(\"migratedModel\").getData()\r\n\t\t\t\t.date === null || this.getOwnerComponent().getModel(\"migratedModel\").getData().date === undefined) {\r\n\t\t\t\tsap.m.MessageBox.error(\"Please Select Sacntion Date\");\r\n\t\t\t} else if (this.getOwnerComponent().getModel(\"migratedModel\").getData().dept === \"\") {\r\n\t\t\t\tsap.m.MessageBox.error(\"Please Select Sacntion Department\");\r\n\t\t\t} else {\r\n\t\t\t\tvar sacdt = this.dateconv(this.getOwnerComponent().getModel(\"migratedModel\").getData().date);\r\n\t\t\t\tvar sacdept = this.getOwnerComponent().getModel(\"migratedModel\").getData().beschr;\r\n\t\t\t\tvar sactype = this.getOwnerComponent().getModel(\"migratedModel\").getData().type;\r\n\t\t\t\tvar selfilter = [];\r\n\t\t\t\tselfilter.push(new sap.ui.model.Filter(\"Auth_Type\", sap.ui.model.FilterOperator.EQ, \"AS\"));\r\n\t\t\t\tselfilter.push(new sap.ui.model.Filter(\"DeptCode\", sap.ui.model.FilterOperator.EQ, sacdept));\r\n\t\t\t\tselfilter.push(new sap.ui.model.Filter(\"SanDate\", sap.ui.model.FilterOperator.EQ, sacdt));\r\n\t\t\t\t//selfilter.push(new sap.ui.model.Filter(\"Cat_Work\", sap.ui.model.FilterOperator.EQ, \"DCW\"));\r\n\t\t\t\tthat.getOwnerComponent().getModel().read(\"/AuthPositionSet\", {\r\n\t\t\t\t\tasync: true,\r\n\t\t\t\t\tfilters: selfilter,\r\n\t\t\t\t\tsuccess: function(oData) {\r\n\t\t\t\t\t\tthat.getView().setBusy(false);\r\n\t\t\t\t\t\tthat.sacauth = oData.results;\r\n\t\t\t\t\t\tvar sacauthmodel = new sap.ui.model.json.JSONModel({\r\n\t\t\t\t\t\t\tresults: that.sacauth\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthat.getOwnerComponent().setModel(sacauthmodel, \"sacauthmodel\");\r\n\t\t\t\t\t\tthat.getOwnerComponent().getModel(\"sacauthmodel\").refresh();\r\n\t\t\t\t\t\tthat.sacauthority.setTitle(\"Sanction Authority (\" + oData.results.length + \")\");\r\n\t\t\t\t\t\tthat.sacauthority.open();\r\n\t\t\t\t\t},\r\n\t\t\t\t\terror: function(error) {\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t//Migrated Code Ends\r\n\r\n\t\t//Migrated Code Starts\r\n\t\tsacauthorityConfirm: function(oEvent) {\r\n\t\t\tvar oSelectedItem = oEvent.getParameter(\"selectedItem\");\r\n\t\t\tif (oSelectedItem) {\r\n\t\t\t\tthis.desc = oSelectedItem.getDescription();\r\n\t\t\t\tthis.id = oSelectedItem.getTitle();\r\n\t\t\t\tthis.sourcesancauth.setValue(this.id + \" \" + \"(\" + this.desc + \")\");\r\n\t\t\t}\r\n\t\t\tif (oEvent.getSource().getBinding(\"items\") !== undefined) {\r\n\t\t\t\toEvent.getSource().getBinding(\"items\").filter([]);\r\n\t\t\t}\r\n\t\t\tthis.getOwnerComponent().getModel(\"migratedModel\").getData().authority = this.id + \" \" + \"(\" + this.desc + \")\";\r\n\t\t\tthis.getOwnerComponent().getModel(\"migratedModel\").updateBindings();\r\n\t\t\tthis.sacauthority.destroy();\r\n\t\t\tthis.sacauthority = undefined;\r\n\t\t},\r\n\r\n\t\tsacauthoritySearch: function(oEvent) {\r\n\t\t\tvar sValue = oEvent.getParameter(\"value\");\r\n\t\t\tvar filters = new Array();\r\n\t\t\tvar oFilter = new sap.ui.model.Filter([\r\n\t\t\t\tnew sap.ui.model.Filter(\"Auth_Pos\", sap.ui.model.FilterOperator.Contains, sValue),\r\n\t\t\t\tnew sap.ui.model.Filter(\"Name_Pos\", sap.ui.model.FilterOperator.Contains, sValue)\r\n\t\t\t]);\r\n\t\t\tfilters.push(oFilter);\r\n\t\t\toEvent.getSource().getBinding(\"items\").filter([oFilter]);\r\n\t\t},\r\n\t\t//Migrated Code Ends\r\n\r\n\t\t/**\r\n\t\t * @param {*} oEvent is the onselect event\r\n\t\t */\r\n\r\n\t\t//Migrated Code Starts\r\n\t\tonSancTypeSelect: function(oEvent) {\r\n\t\t\tvar oSelectedItem = oEvent.getParameter(\"selectedItem\");\r\n\t\t\tif (oSelectedItem) {\r\n\t\t\t\tthis.getOwnerComponent().getModel(\"migratedModel\").getData().type = oSelectedItem.getTitle();\r\n\t\t\t\tthis.getOwnerComponent().getModel(\"migratedModel\").updateBindings();\r\n\t\t\t}\r\n\t\t},\r\n\t\t//Migrated Code Ends\r\n\r\n\t\t/**\r\n\t\t * function to return the Control \r\n\t\t * @param {string} sControlId Identifier for the Control Structure of Create Migrated Fragment\r\n\t\t * @returns {Object} Control inside the fragment\r\n\t\t */\r\n\r\n\t\t//Migrated Code Starts\r\n\t\t_getMigratedCreateFragControlById: function(sControlId) {\r\n\t\t\treturn sap.ui.core.Fragment.byId(this.createId(\"createMigratedASDialog\"), sControlId);\r\n\t\t},\r\n\t\t//Migrated Code Ends\r\n\r\n\t\t/**\r\n\t\t * function to save migrated as data.\r\n\t\t * @public\r\n\t\t */\r\n\r\n\t\t//Migrated Code Starts\r\n\t\t_saveMigratedASData: function(data) {\r\n\t\t\tvar that = this;\r\n\t\t\tdata.Action = \"MIGSAVE\";\r\n\t\t\tthis.getOwnerComponent().getModel().create(\"/WrkMigCmmSet\", data, {\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tsuccess: function(oData, oResponse) {\r\n\r\n\t\t\t\t\t//Updating sessionguid to browser storage\r\n\t\t\t\t\tvar oParamsBrowserStorage = jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\");\r\n\t\t\t\t\toParamsBrowserStorage.SessionGuid = oData.Sessionguid;\r\n\t\t\t\t\tjQuery.sap.storage(jQuery.sap.storage.Type.session).put(\"zworksBrowserStorage\", oParamsBrowserStorage);\r\n\r\n\t\t\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/SessionGuid\", oData.Sessionguid);\r\n\t\t\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bUserCreateAS\", true);\r\n\r\n\t\t\t\t\tthat.payloadData = oData;\r\n\t\t\t\t\t$.sap.ASNUMBER = oData;\r\n\t\t\t\t\tif (that._getMigratedCreateFragControlById(\"fileUpload\").getSelected()) {\r\n\t\t\t\t\t\tif (!that._poUploadFragment) {\r\n\t\t\t\t\t\t\tthat._poUploadFragment = sap.ui.xmlfragment(\"com.goap.cfms.works.as.fragment.POUpload\", that);\r\n\t\t\t\t\t\t\tthat.getView().addDependent(that._poUploadFragment);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (that.getOwnerComponent().getModel(\"uploadedItem\") != undefined) {\r\n\t\t\t\t\t\t\tthat.getOwnerComponent().getModel(\"uploadedItem\").setData([]);\r\n\t\t\t\t\t\t\tthat.getOwnerComponent().getModel(\"uploadedItem\").refresh();\r\n\t\t\t\t\t\t\tthat.getOwnerComponent().getModel(\"uploadedItem\").updateBindings();\r\n\t\t\t\t\t\t\tsap.ui.getCore().byId(\"fileUpload\").setValue(\"\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthat._poUploadFragment.open();\r\n\t\t\t\t\t\t// sap.ui.getCore(\"fileUpload\").setValue(\"\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat._createMigratedASFrag.close();\r\n\t\t\t\t\t\tvar oCreateNewASModel = that.getModel(\"createNewASModel\");\r\n\t\t\t\t\t\toCreateNewASModel.setProperty(\"/backBtnVisible\", false);\r\n\t\t\t\t\t\toCreateNewASModel.setProperty(\"/nextBtnVisible\", true);\r\n\t\t\t\t\t\toCreateNewASModel.updateBindings();\r\n\t\t\t\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bUserCreateAS\", true);\r\n\t\t\t\t\t\tthat.getRouter().navTo(\"Detail\", {\r\n\t\t\t\t\t\t\tobjectId: oData.Guid,\r\n\t\t\t\t\t\t\tstateId: \"C\"\r\n\t\t\t\t\t\t}, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terror: function(error) {\r\n\t\t\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bUserCreateAS\", false);\r\n\t\t\t\t\t// debugger;\r\n\t\t\t\t\t// sap.m.MessageBox.error(\"\" + JSON.parse(error.responseText).error.message.value + \"\", {\r\n\t\t\t\t\t// \tactions: [sap.m.MessageBox.Action.OK],\r\n\t\t\t\t\t// \tonClose: function (sAction) {\r\n\t\t\t\t\t// \t\tif (sAction === \"OK\" || sAction === null) {}\r\n\t\t\t\t\t// \t}\r\n\t\t\t\t\t// });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t//Migrated Code Ends\r\n\r\n\t\t/**\r\n\t\t * Event handler for Multiprocess \r\n\t\t * @param {*} oEvent \r\n\t\t */\r\n\t\tonMultiProcessBtnPress: function(oEvent) {\r\n\t\t\tvar oSource = oEvent.getSource();\r\n\t\t\tthis._setMultiPosition(oSource.getIcon());\r\n\t\t},\r\n\t\t/**\r\n\t\t * Private function to set Multi-Position \r\n\t\t * @param {string} sBtnTxt Button Icon text \r\n\t\t */\r\n\t\t_setMultiPosition: function(sBtnTxt) {\r\n\t\t\tvar oMasterViewModel = this.getModel(\"masterView\");\r\n\t\t\tif (sBtnTxt === \"sap-icon://activate\") {\r\n\t\t\t\tthis.getModel(\"appView\").setProperty(\"/sMasterListMode\", \"MultiSelect\");\r\n\t\t\t\toMasterViewModel.setProperty(\"/bMultiSelectVisible\", true);\r\n\t\t\t\tthis.byId(\"idMultiSelectBtn\").setIcon(\"sap-icon://sys-cancel\");\r\n\t\t\t\tthis.byId(\"idStatusTab\").setBusy(true);\r\n\t\t\t} else {\r\n\t\t\t\tthis.getModel(\"appView\").setProperty(\"/sMasterListMode\", \"SingleSelectMaster\");\r\n\t\t\t\toMasterViewModel.setProperty(\"/bMultiSelectVisible\", false);\r\n\t\t\t\tthis.byId(\"idMultiSelectBtn\").setIcon(\"sap-icon://activate\");\r\n\t\t\t\tthis.byId(\"idStatusTab\").setBusy(false);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event Handler function for Process Multiple AS\r\n\t\t * @param {*} oEvent \r\n\t\t */\r\n\t\tonProcessPress: function(oEvent) {\r\n\t\t\tif (!this._massProcessFrag) {\r\n\t\t\t\tvar fragId = this.createId(\"fragMassProcess\");\r\n\t\t\t\tthis._massProcessFrag = sap.ui.xmlfragment(fragId, \"com.goap.cfms.works.as.fragment.massProcessNote\", this);\r\n\t\t\t\tthis.getView().addDependent(this._massProcessFrag);\r\n\t\t\t\tjQuery.sap.syncStyleClass(\"sapUiSizeCompact\", this.getView(), this._massProcessFrag);\r\n\t\t\t}\r\n\t\t\tthis._massProcessFrag.open();\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler function to post selected AS\r\n\t\t * @param {*} oEvent \r\n\t\t */\r\n\t\tonMultiProcess: function(oEvent) {\r\n\t\t\tvar that = this,\r\n\t\t\t\tsUser = \"\",\r\n\t\t\t\tsPath = \"\";\r\n\t\t\tif (sap.ushell) {\r\n\t\t\t\tsUser = sap.ushell.Container.getService(\"UserInfo\").getId();\r\n\t\t\t}\r\n\t\t\tsPath = this.getModel().createKey(\"User_DetailsSet\", {\r\n\t\t\t\tUser_ID: sUser,\r\n\t\t\t\tApplication: 'AS',\r\n\t\t\t\tRole: this.getView().getModel(\"appView\").getProperty(\"/role\")\r\n\t\t\t});\r\n\t\t\tvar params = {\r\n\t\t\t\tpath: \"/\" + sPath,\r\n\t\t\t\tbusyControl: that.getView()\r\n\t\t\t};\r\n\t\t\tif (this.getModel(\"masterView\").getProperty(\"/Notingstring\")) {\r\n\t\t\t\t// this.oValidateBio = new Promise(function(resolve, reject) {\r\n\t\t\t\t// \tthis._getBioValidation(params, resolve, reject);\r\n\t\t\t\t// }.bind(this));\r\n\t\t\t\t// this.oValidateBio.then(function(oData) {\r\n\t\t\t\t// \tthat._bioCheckSuccessful({});\r\n\t\t\t\t// }, function(oError) {\r\n\t\t\t\t// \tthat._bioCheckSuccessful({});\r\n\t\t\t\t// });\r\n\t\t\t\t//changes start - 15-02-2023 - cfms_ctm_lpp\r\n\t\t\t\tthis.oBioMetrixdata = new Promise(function(resolve1, reject1) {\r\n\t\t\t\t\tthis._getBiometricData(params, resolve1, reject1);\r\n\t\t\t\t}.bind(this));\r\n\t\t\t\tthis.oBioMetrixdata.then(function(oData) {\r\n\t\t\t\t\tif (oData.data.IsBiometricReq) {\r\n\t\t\t\t\t\tif (oData.data.deviceType === \"I\") {\r\n\t\t\t\t\t\t\t// this.oValidateBioMetrixIris = null;\r\n\t\t\t\t\t\t\tthis.oValidateBioMetrixIris = new Promise(function(resolveIris, rejectIris) {\r\n\t\t\t\t\t\t\t\tthis.oValidateBioMetrixIris({\r\n\t\t\t\t\t\t\t\t\tuId: oData.data.AdhrNo,\r\n\t\t\t\t\t\t\t\t\tdevice: oData.data.Bio_ID\r\n\t\t\t\t\t\t\t\t}, resolveIris, rejectIris);\r\n\t\t\t\t\t\t\t}.bind(this));\r\n\t\t\t\t\t\t\tthis.oValidateBioMetrixIris.then(function(oData) {\r\n\t\t\t\t\t\t\t\t//success\r\n\t\t\t\t\t\t\t\tthat._bioCheckSuccessful({});\r\n\t\t\t\t\t\t\t\t// resolve();\r\n\t\t\t\t\t\t\t}.bind(this));\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// this.oValidateBioMetrix = null;\r\n\t\t\t\t\t\t\tthis.getBiometricValidated({\r\n\t\t\t\t\t\t\t\tuId: oData.data.AdhrNo,\r\n\t\t\t\t\t\t\t\tdevice: oData.data.Bio_ID\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat._bioCheckSuccessful({});\r\n\t\t\t\t\t\t// reject();\r\n\t\t\t\t\t}\r\n\t\t\t\t}.bind(this));\r\n\t\t\t} else {\r\n\t\t\t\tthis._displayWarnMessge(this.getModel(\"i18n\").getResourceBundle().getText(\"detail.message.note.empty\"));\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetBiometricValidated: function(params) {\r\n\t\t\tvar that = this;\r\n\t\t\tif (!params.uId) {\r\n\t\t\t\tthis._displayWarnMessge(\"Please provide Aadhar Number\");\r\n\t\t\t\tthrow new Error(\"Please provide Aadhar Number\");\r\n\t\t\t}\r\n\t\t\tif (!params.device) {\r\n\t\t\t\tthis._displayWarnMessge(\"Please register the Device\");\r\n\t\t\t\tthrow new Error(\"Please register the Device\");\r\n\t\t\t}\r\n\t\t\t/*eslint-disable */\r\n\t\t\t//eslint-disable-sap-no-hardcoded-url\r\n\t\t\tvar srcURL = \"https://aadhar.apcfss.in/verifyAadhar.do?mode=aadhaarAutendicate&device=\" + params.device + \"&uId=\" + params.uId;\r\n\t\t\t/*eslint-enable */\r\n\t\t\tif (!this.bioMetricDialog) {\r\n\t\t\t\tthis.bioMetricDialog = new sap.m.Dialog({\r\n\t\t\t\t\ttitle: 'Biometric Validation',\r\n\t\t\t\t\tverticalScrolling: false,\r\n\t\t\t\t\thorizontalScrolling: false,\r\n\t\t\t\t\tcontent: new sap.ui.core.HTML(\"idHtml\"),\r\n\t\t\t\t\tendButton: new sap.m.Button({\r\n\t\t\t\t\t\ttext: 'Cancel',\r\n\t\t\t\t\t\tpress: function() {\r\n\t\t\t\t\t\t\tthat.bioMetricDialog.close();\r\n\t\t\t\t\t\t\tvar frame = $(\"#ifrmReportViewer\");\r\n\t\t\t\t\t\t\tframe.remove();\r\n\t\t\t\t\t\t\tframe.detach();\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t\tthis.getView().addDependent(this.bioMetricDialog);\r\n\t\t\t}\r\n\t\t\tthis.bioMetricDialog.open();\r\n\t\t\tvar eventMethod = window.addEventListener ? \"addEventListener\" : \"attachEvent\";\r\n\t\t\tvar eventer = window[eventMethod];\r\n\t\t\tvar messageEvent = eventMethod === \"attachEvent\" ? \"onmessage\" : \"message\";\r\n\t\t\tsap.ui.getCore().byId(\"idHtml\").setContent(\"<iframe id='ifrmReportViewer' src='\" + srcURL + \"'></iframe>\");\r\n\t\t\tvar frame = $(\"#ifrmReportViewer\");\r\n\t\t\tthis.EventFlag = 0;\r\n\t\t\teventer(messageEvent, function(event) {\r\n\t\t\t\t/*eslint-disable */\r\n\t\t\t\t//eslint-disable-sap-no-hardcoded-url\t \r\n\t\t\t\tif (event.origin === \"https://aadhar.apcfss.in\")\r\n\t\t\t\t/*eslint-enable */\r\n\t\t\t\t{\r\n\t\t\t\t\tif (this.EventFlag === 0) {\r\n\t\t\t\t\t\tif (event.data.indexOf(\"Device Not Found ( OR ) Change Selected Device\") !== -1) {\r\n\t\t\t\t\t\t\tthis.bioActionFlag = \"\";\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.EventFlag++;\r\n\t\t\t\t\t//if(this.bioMetricDialog)\r\n\t\t\t\t\t//this.bioMetricDialog.close();\r\n\t\t\t\t\tframe.remove();\r\n\t\t\t\t\tframe.detach();\r\n\t\t\t\t\tif (this.bioMetricDialog) {\r\n\t\t\t\t\t\tthis.bioMetricDialog.close();\r\n\t\t\t\t\t\tthis.bioMetricDialog.destroy();\r\n\t\t\t\t\t\tthis.bioMetricDialog = undefined;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (this.EventFlag === 1) {\r\n\t\t\t\t\t\tvar message = event.data.trim(); // \r\n\t\t\t\t\t\tif (message === \"Success\") {\r\n\t\t\t\t\t\t\t// resolve3();\r\n\t\t\t\t\t\t\tthat._bioCheckSuccessful({});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis._displayWarnMessge(this.getModel(\"i18n-reuse\").getResourceBundle().getText(\"message.register.Biometric.device\"));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.bioActionFlag = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t} else //If origin is not Aadhar\r\n\t\t\t\t{\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}.bind(this), false);\r\n\t\t},\r\n\t\t//changes end - 15-02-2023 cfms_ctm_lpp\r\n\r\n\t\t_bioCheckSuccessful: function(oParams) {\r\n\t\t\tvar bWorkFlowDefined = true,\r\n\t\t\t\toMultiProcessNoteDialog = sap.ui.core.Fragment.byId(this.createId(\"fragMassProcess\"), \"idMassProcessNoteDialog\"),\r\n\t\t\t\toMassPayload = this._getMassPayload();\r\n\t\t\toMultiProcessNoteDialog.setBusy(true);\r\n\t\t\tif (oMassPayload.MassHeaderItems[0].Guid) {\r\n\t\t\t\tvar sUserId = sap.ushell.Container.getService(\"UserInfo\").getId();\r\n\t\t\t\tvar oWorkFlow = new Promise(function(resolve, reject) {\r\n\t\t\t\t\tthis.getOwnerComponent().oDraft.getWorkflow({\r\n\t\t\t\t\t\tmethod: \"GET\",\r\n\t\t\t\t\t\tfName: \"/GetWorkFlowLog\",\r\n\t\t\t\t\t\turlParameters: {\r\n\t\t\t\t\t\t\tApplicationId: \"AS\",\r\n\t\t\t\t\t\t\tGuid: oMassPayload.MassHeaderItems[0].Guid,\r\n\t\t\t\t\t\t\tbusyControl: this.getView()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, resolve, reject);\r\n\t\t\t\t}.bind(this));\r\n\t\t\t\toWorkFlow.then(function(oResult) {\r\n\t\t\t\t\tvar aWorkFlowLogData = oResult.data.results;\r\n\t\t\t\t\tif (aWorkFlowLogData.length >= 1) {\r\n\t\t\t\t\t\tfor (var i = 0; i < aWorkFlowLogData.length; i++) {\r\n\t\t\t\t\t\t\tif ((sUserId === aWorkFlowLogData[i].Pernr) && (aWorkFlowLogData.length - 1) === i) {\r\n\t\t\t\t\t\t\t\tbWorkFlowDefined = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (bWorkFlowDefined) {\r\n\t\t\t\t\t\tthis.workflowProcess();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.getModel(\"appView\").setProperty(\"/busy\", false);\r\n\t\t\t\t\t\tMessageBox.alert(this.getResourceBundle().getText(\"detail.error.msg.wrkflowRoleNotMaint\"), {\r\n\t\t\t\t\t\t\tactions: [sap.m.MessageBox.Action.YES, sap.m.MessageBox.Action.NO],\r\n\t\t\t\t\t\t\tonClose: function(sAction) {\r\n\t\t\t\t\t\t\t\tif (sAction === \"YES\") {\r\n\t\t\t\t\t\t\t\t\tthis._reusePositionValueHelp(oMassPayload);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}.bind(this)\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}.bind(this));\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * multi-Process of AS document\r\n\t\t */\r\n\t\tworkflowProcess: function() {\r\n\t\t\tvar oWFCModel = this.getModel(\"WFCModel\"),\r\n\t\t\t\toMultiProcessNoteDialog = sap.ui.core.Fragment.byId(this.createId(\"fragMassProcess\"), \"idMassProcessNoteDialog\"),\r\n\t\t\t\toMassPayload = this._getMassPayload();\r\n\t\t\toMassPayload.Fflag = \"X\";\r\n\t\t\toMassPayload.Fposition = oWFCModel.getProperty(\"/nextPositionID\");\r\n\t\t\toMassPayload.Fuserid = oWFCModel.getProperty(\"/nextUserID\");\r\n\t\t\tvar oMultiProcess = new Promise(function(resolve, reject) {\r\n\t\t\t\tthis.getOwnerComponent().oDraft.whenHdrCreate({\r\n\t\t\t\t\tpath: \"/ZWRK_MASS_HEADERSet\",\r\n\t\t\t\t\tdata: oMassPayload,\r\n\t\t\t\t\tbusyControl: this.getView()\r\n\t\t\t\t}, resolve, reject);\r\n\t\t\t}.bind(this));\r\n\t\t\toMultiProcess.then(function(oResult) {\r\n\t\t\t\toMultiProcessNoteDialog.setBusy(false);\r\n\t\t\t\tthis._massProcessFrag.close();\r\n\t\t\t\tthis.getModel(\"masterView\").setProperty(\"/Notingstring\", \"\");\r\n\t\t\t\tthis.getModel(\"appView\").setProperty(\"/sMasterListMode\", \"SingleSelectMaster\");\r\n\t\t\t\tthis.getModel(\"masterView\").setProperty(\"/bMultiSelectVisible\", false);\r\n\t\t\t\tthis.byId(\"idMultiSelectBtn\").setIcon(\"sap-icon://activate\");\r\n\t\t\t\tthis.byId(\"idStatusTab\").setBusy(false);\r\n\t\t\t\tthis.getModel().refresh();\r\n\t\t\t}.bind(this));\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler to close the Note fragment\r\n\t\t * @param {*} oEvent \r\n\t\t */\r\n\t\tonCancelMultiProcess: function() {\r\n\t\t\tthis._massProcessFrag.close();\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for the master search field. Applies current\r\n\t\t * filter value and triggers a new search. If the search field's\r\n\t\t * 'refresh' button has been pressed, no new search is triggered\r\n\t\t * and the list binding is refresh instead.\r\n\t\t * @param {sap.ui.base.Event} oEvent the search event\r\n\t\t * @public\r\n\t\t */\r\n\t\tonSearch: function(oEvent) {\r\n\t\t\tif (oEvent.getParameters().refreshButtonPressed) {\r\n\t\t\t\t// Search field's 'refresh' button has been pressed.\r\n\t\t\t\t// This is visible if you select any master list item.\r\n\t\t\t\t// In this case no new search is triggered, we only\r\n\t\t\t\t// refresh the list binding.\r\n\t\t\t\tthis.onRefresh();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar sQuery = oEvent.getParameter(\"query\");\r\n\r\n\t\t\tif (sQuery) {\r\n\t\t\t\tthis._oListFilterState.aSearch = [new Filter(\"ShortDesc\", FilterOperator.Contains, sQuery)];\r\n\t\t\t} else {\r\n\t\t\t\tthis._oListFilterState.aSearch = [];\r\n\t\t\t}\r\n\t\t\tthis._applyFilterSearch();\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event Handler function to Open Create AS frag\r\n\t\t * @param {Event} oEvent is the event\r\n\t\t */\r\n\t\tonCreateNewAS: function(oEvent) {\r\n\t\t\tvar oCreateNewASModel = this.getModel(\"createNewASModel\");\r\n\t\t\tif (!this._createASFrag) {\r\n\t\t\t\tvar fragId = this.createId(\"fragCreateFrag\");\r\n\t\t\t\tthis._createASFrag = sap.ui.xmlfragment(fragId, \"com.goap.cfms.works.as.fragment.createAS\", this);\r\n\t\t\t\tthis.getView().addDependent(this._createASFrag);\r\n\t\t\t\tjQuery.sap.syncStyleClass(\"sapUiSizeCompact\", this.getView(), this._createASFrag);\r\n\t\t\t}\r\n\t\t\t// this._getCreateFragControlById(\"idNewRadioBtn\").setSelected(false);\r\n\t\t\tthis._getCreateFragControlById(\"idAmendRadioBtn\").setSelected(true);\r\n\t\t\toCreateNewASModel.setProperty(\"/amendEditable\", true);\r\n\t\t\tthis._getCreateFragControlById(\"idAmendASCode\").resetProperty(\"value\");\r\n\t\t\tthis._getCreateFragControlById(\"idNewRadioBtn\").setSelected(false);\r\n\t\t\t// oCreateNewASModel.setProperty(\"/migratedPhaseOneEditable\", true);\r\n\r\n\t\t\t// oCreateNewASModel.setProperty(\"/amendEditable\", false);\r\n\t\t\toCreateNewASModel.setProperty(\"/copyEditable\", false);\r\n\t\t\t//Migrated Code Starts\r\n\t\t\toCreateNewASModel.setProperty(\"/migratedASRadioButtons\", false);\r\n\t\t\toCreateNewASModel.setProperty(\"/NewASRadioButtons\", false);\r\n\t\t\t//Migrated Code Ends\r\n\t\t\tif (this.getModel(\"oBundleCodeModel\")) {\r\n\t\t\t\tthis.getModel(\"oBundleCodeModel\").setData(null);\r\n\t\t\t}\r\n\t\t\toCreateNewASModel.updateBindings();\r\n\t\t\tthis._createASFrag.open();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Event Handler function to Create New Admin Sanction\r\n\t\t * @param {Event} oEvent is the event handler\r\n\t\t */\r\n\t\tonCreateAS: function(oEvent) {\r\n\t\t\tvar oASPayload;\r\n\t\t\tif (this._validateCreate()) {\r\n\t\t\t\t//Migrated Code Starts\r\n\t\t\t\t/*if (this._getCreateFragControlById(\"idMigratedRadioBtnPhaseOne\").getSelected() || this._getCreateFragControlById(\r\n\t\t\t\t\t\t\"idMigratedRadioBtnNonCfms\").getSelected()) {*/\r\n\t\t\t\tif (this._getCreateFragControlById(\"idMigratedRadioBtn\").getSelected()) {\r\n\t\t\t\t\tif (this._getCreateFragControlById(\"idMigratedRadioBtnPhaseOne\").getSelected()) {\r\n\t\t\t\t\t\tvar code = \"0000000001\";\r\n\t\t\t\t\t\tthis._createMigAS(code);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this._getCreateFragControlById(\"idMigratedRadioBtnNonCfms\").getSelected()) {\r\n\t\t\t\t\t\tvar code = \"0000000001\";\r\n\t\t\t\t\t\tthis._createMigAS(code);\r\n\t\t\t\t\t\t// this._createMigAS(oASPayload.Code);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//Migrated Code Ends\r\n\t\t\t\t}\r\n\t\t\t\t// else if  (this._getCreateFragControlById(\"idNewRadioBtn\").getSelected()) {\r\n\t\t\t\t// \tif (this._getCreateFragControlById(\"idNewRadioBtnGO\").getSelected()) {\r\n\t\t\t\t// \t\tvar code = \"0000000001\";\r\n\t\t\t\t// \t\tthis._createMigAS(code);\r\n\t\t\t\t// \t}\r\n\t\t\t\t// \tif (this._getCreateFragControlById(\"idNewRadioBtnProceeding\").getSelected()) {\r\n\t\t\t\t// \t\tvar code = \"0000000001\";\r\n\t\t\t\t// \t\tthis._createMigAS(code);\r\n\t\t\t\t// \t\t// this._createMigAS(oASPayload.Code);\r\n\t\t\t\t// \t}\r\n\t\t\t\t// \t//Migrated Code Ends\r\n\t\t\t\t// }\r\n\t\t\t\telse {\r\n\t\t\t\t\t//\t\t\t\t\tthis._createASFrag.setBusy(true);\r\n\t\t\t\t\tvar oDynamicBusyIndicator = new DynamicBusyIndicator(this);\r\n\t\t\t\t\toDynamicBusyIndicator.startBusy();\r\n\t\t\t\t\tthis.getModel(\"masterView\").setProperty(\"bCreateBtnEnable\", false);\r\n\t\t\t\t\toASPayload = this._createPayload();\r\n\t\t\t\t\tthis.oldASNumber = oASPayload.Code;\r\n\t\t\t\t\tvar oCreateAS = new Promise(function(resolve, reject) {\r\n\t\t\t\t\t\tthis.getOwnerComponent().oDraft.whenHdrCreate({\r\n\t\t\t\t\t\t\tpath: \"/WrkASDetailsDraftSet\",\r\n\t\t\t\t\t\t\tdata: oASPayload,\r\n\t\t\t\t\t\t\tbusyControl: this._createASFrag\r\n\t\t\t\t\t\t}, resolve, reject);\r\n\t\t\t\t\t}.bind(this));\r\n\r\n\t\t\t\t\toCreateAS.then(function(oResult) {\r\n\t\t\t\t\t\t//\t\t\t\t\t\tthis._createASFrag.setBusy(false);\r\n\t\t\t\t\t\toDynamicBusyIndicator.endBusy();\r\n\t\t\t\t\t\tthis._createASFrag.close();\r\n\t\t\t\t\t\tif (oResult.data.Action === \"NEW\") {\r\n\t\t\t\t\t\t\tthis.getModel(\"appView\").setProperty(\"/DepartDesc\", oResult.data.DepartDesc);\r\n\t\t\t\t\t\t\tthis.getModel(\"appView\").setProperty(\"/InitiatinDept\", oResult.data.InitiatinDept);\r\n\t\t\t\t\t\t\tvar action = this._getCreateFragControlById(\"idNewRadioBtnGO\").getSelected();\r\n\t\t\t\t\t\t\tif (action === true) {\r\n\t\t\t\t\t\t\t\tDetailControl.getView().byId(\"idNEWGO\").setVisible(true);\r\n\t\t\t\t\t\t\t\tDetailControl.getView().byId(\"idNEWPROCEEDING\").setVisible(false);\r\n\t\t\t\t\t\t\t\tDetailControl.getView().byId(\"idWFCO1\").setVisible(true);\r\n\t\t\t\t\t\t\t\tDetailControl.getView().byId(\"idWFCO2\").setVisible(true);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tDetailControl.getView().byId(\"idNEWGO\").setVisible(false);\r\n\t\t\t\t\t\t\t\tDetailControl.getView().byId(\"idNEWPROCEEDING\").setVisible(true);\r\n\t\t\t\t\t\t\t\tDetailControl.getView().byId(\"idWFCO1\").setVisible(false);\r\n\t\t\t\t\t\t\t\tDetailControl.getView().byId(\"idWFCO2\").setVisible(false);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// \t\t\t\t\t\t var detailPageController = sap.ui.getCore().byId(\"DetailPage\").getView();\r\n\t\t\t\t\t\t\t//var newproceeding = detailPageController.rediobtnProceeding();\r\n\t\t\t\t\t\t\t// newproceeding.setVisible(\"true\");\r\n\t\t\t\t\t\t} else if (oResult.data.Action === \"COPY\") {\r\n\t\t\t\t\t\t\tthis._getCreateFragControlById(\"idCopyFromASCode\").resetProperty(\"value\");\r\n\t\t\t\t\t\t\tthis.oSelectedObject = null;\r\n\t\t\t\t\t\t\tvar oCreateNewASModel = this.getModel(\"createNewASModel\");\r\n\t\t\t\t\t\t\toCreateNewASModel.setProperty(\"/amendEditable\", false);\r\n\t\t\t\t\t\t\toCreateNewASModel.setProperty(\"/copyEditable\", false);\r\n\t\t\t\t\t\t} else if (oResult.data.Action === \"AMEND\") {\r\n\t\t\t\t\t\t\tthis._getCreateFragControlById(\"idAmendASCode\").resetProperty(\"value\");\r\n\t\t\t\t\t\t\tthis.oSelectedObject = null;\r\n\t\t\t\t\t\t\tvar oCreateNewASModel = this.getModel(\"createNewASModel\");\r\n\t\t\t\t\t\t\toCreateNewASModel.setProperty(\"/amendEditable\", false);\r\n\t\t\t\t\t\t\toCreateNewASModel.setProperty(\"/copyEditable\", false);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t//Updating sessionguid to browser storage\r\n\t\t\t\t\t\tvar oParamsBrowserStorage = jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\");\r\n\t\t\t\t\t\toParamsBrowserStorage.SessionGuid = oResult.data.SessionGuid;\r\n\t\t\t\t\t\tjQuery.sap.storage(jQuery.sap.storage.Type.session).put(\"zworksBrowserStorage\", oParamsBrowserStorage);\r\n\r\n\t\t\t\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/SessionGuid\", oResult.data.SessionGuid);\r\n\t\t\t\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bUserCreateAS\", true);\r\n\t\t\t\t\t\tthis.getModel(\"masterView\").setProperty(\"bCreateBtnEnable\", true);\r\n\t\t\t\t\t\tthis.getRouter().navTo(\"Detail\", {\r\n\t\t\t\t\t\t\tobjectId: oResult.data.Guid,\r\n\t\t\t\t\t\t\tstateId: \"C\"\r\n\t\t\t\t\t\t}, true);\r\n\t\t\t\t\t}.bind(this));\r\n\t\t\t\t\toCreateAS.catch(function(oError) {\r\n\t\t\t\t\t\toDynamicBusyIndicator.endBusy();\r\n\t\t\t\t\t\tthis.getModel(\"masterView\").setProperty(\"bCreateBtnEnable\", true);\r\n\t\t\t\t\t}.bind(this));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Function to call for check validation for mandatory feilds\r\n\t\t */\r\n\r\n\t\t_validateInputs: function() {\r\n\t\t\tvar ainputs;\r\n\t\t\tif (this._getMigratedCreateFragControlById(\"goCategory\").getSelected()) {\r\n\t\t\t\t//Migrated Code Starts\r\n\t\t\t\tainputs = Constants.userInputControls.inputsForMigratedAgrFrag;\r\n\t\t\t\t//Migrated Code Ends\r\n\t\t\t} else {\r\n\t\t\t\tainputs = Constants.userInputControls.inputs;\r\n\t\t\t}\r\n\t\t\tfor (var i = 0; i < ainputs.length; i++) {\r\n\t\t\t\t//Migrated Code Starts\r\n\t\t\t\tvar aControls = this._getMigratedCreateFragControlById(ainputs[i]);\r\n\t\t\t\t//Migrated Code Ends\r\n\t\t\t\tvar oElementName = aControls.getMetadata().getElementName();\r\n\t\t\t\tswitch (oElementName) {\r\n\t\t\t\t\tcase \"sap.m.Input\":\r\n\t\t\t\t\t\tvar svalue = aControls.getValue();\r\n\t\t\t\t\t\tif (svalue === \"\") {\r\n\t\t\t\t\t\t\taControls.setValueState(\"Error\");\r\n\t\t\t\t\t\t\taControls.setValueStateText(\"Enter Mandatory Fields\");\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\taControls.setValueState(\"None\");\r\n\t\t\t\t\t\t\taControls.setValueStateText(\"\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"sap.m.DatePicker\":\r\n\t\t\t\t\t\tvar svalue = aControls.getDateValue();\r\n\t\t\t\t\t\tif (svalue === null) {\r\n\t\t\t\t\t\t\taControls.setValueState(\"Error\");\r\n\t\t\t\t\t\t\taControls.setValueStateText(\"Enter Mandatory Fields\");\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\taControls.setValueState(\"None\");\r\n\t\t\t\t\t\t\taControls.setValueStateText(\"\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"sap.m.Select\":\r\n\t\t\t\t\t\tvar svalue = aControls.getSelectedKey();\r\n\t\t\t\t\t\tif (svalue === \"\") {\r\n\t\t\t\t\t\t\taControls.setValueState(\"Error\");\r\n\t\t\t\t\t\t\taControls.setValueStateText(\"Enter Mandatory Fields\");\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\taControls.setValueState(\"None\");\r\n\t\t\t\t\t\t\taControls.setValueStateText(\"\");\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Event handler for refresh event. Keeps filter, sort\r\n\t\t * and group settings and refreshes the list binding.\r\n\t\t * @public\r\n\t\t */\r\n\t\tonRefresh: function() {\r\n\t\t\tthis._oList.getBinding(\"items\").refresh();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Event handler for the filter, sort and group buttons to open the ViewSettingsDialog.\r\n\t\t * @param {sap.ui.base.Event} oEvent the button press event\r\n\t\t * @public\r\n\t\t */\r\n\t\tonOpenViewSettings: function(oEvent) {\r\n\t\t\tif (!this._oViewSettingsDialog) {\r\n\t\t\t\tthis._oViewSettingsDialog = sap.ui.xmlfragment(\"as.sap.DemoApp.view.ViewSettingsDialog\", this);\r\n\t\t\t\tthis.getView().addDependent(this._oViewSettingsDialog);\r\n\t\t\t\t// forward compact/cozy style into Dialog\r\n\t\t\t\tthis._oViewSettingsDialog.addStyleClass(this.getOwnerComponent().getContentDensityClass());\r\n\t\t\t}\r\n\t\t\tvar sDialogTab = \"sort\";\r\n\r\n\t\t\tthis._oViewSettingsDialog.open(sDialogTab);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Event handler called when ViewSettingsDialog has been confirmed, i.e.\r\n\t\t * has been closed with 'OK'. In the case, the currently chosen filters, sorters or groupers\r\n\t\t * are applied to the master list, which can also mean that they\r\n\t\t * are removed from the master list, in case they are\r\n\t\t * removed in the ViewSettingsDialog.\r\n\t\t * @param {sap.ui.base.Event} oEvent the confirm event\r\n\t\t * @public\r\n\t\t */\r\n\t\tonConfirmViewSettingsDialog: function(oEvent) {\r\n\r\n\t\t\tthis._applySortGroup(oEvent);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Event handler for the list selection event\r\n\t\t * @param {sap.ui.base.Event} oEvent the list selectionChange event\r\n\t\t * @public\r\n\t\t */\r\n\t\tonSelectionChange: function(oEvent) {\r\n\t\t\tvar oList = oEvent.getSource(),\r\n\t\t\t\tbSelected = oEvent.getParameter(\"selected\");\r\n\r\n\t\t\t// skip navigation when deselecting an item in multi selection mode\r\n\t\t\t// if (!(oList.getMode() === \"MultiSelect\" && !bSelected)) {\r\n\t\t\tif (!(oList.getMode() === \"MultiSelect\")) {\r\n\t\t\t\t// get the list item, either from the listItem parameter or from the event's source itself (will depend on the device-dependent mode).\r\n\t\t\t\tthis.getView().byId(\"ItemsST\").getList().setSelectedItem(oList);\r\n\t\t\t\tthis._showDetail(oEvent.getParameter(\"listItem\") || oEvent.getSource());\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Event handler for the bypassed event, which is fired when no routing pattern matched.\r\n\t\t * If there was an object selected in the master list, that selection is removed.\r\n\t\t * @public\r\n\t\t */\r\n\t\tonBypassed: function() {\r\n\t\t\tthis._oList.removeSelections(true);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Used to create GroupHeaders with non-capitalized caption.\r\n\t\t * These headers are inserted into the master list to\r\n\t\t * group the master list's items.\r\n\t\t * @param {Object} oGroup group whose text is to be displayed\r\n\t\t * @public\r\n\t\t * @returns {sap.m.GroupHeaderListItem} group header with non-capitalized caption.\r\n\t\t */\r\n\t\tcreateGroupHeader: function(oGroup) {\r\n\t\t\treturn new GroupHeaderListItem({\r\n\t\t\t\ttitle: oGroup.text,\r\n\t\t\t\tupperCase: false\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Event handler for navigating back.\r\n\t\t * It there is a history entry or an previous app-to-app navigation we go one step back in the browser history\r\n\t\t * If not, it will navigate to the shell home\r\n\t\t * @public\r\n\t\t */\r\n\t\tonNavBack: function() {\r\n\t\t\tvar sPreviousHash = History.getInstance().getPreviousHash(),\r\n\t\t\t\toCrossAppNavigator = sap.ushell.Container.getService(\"CrossApplicationNavigation\");\r\n\r\n\t\t\tif (sPreviousHash !== undefined || !oCrossAppNavigator.isInitialNavigation()) {\r\n\t\t\t\thistory.go(-1);\r\n\t\t\t} else {\r\n\t\t\t\toCrossAppNavigator.toExternal({\r\n\t\t\t\t\ttarget: {\r\n\t\t\t\t\t\tshellHash: \"#Shell-home\"\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Private function for selected Item based on Position select\r\n\t\t * @param {*} oEvent \r\n\t\t */\r\n\t\t_applyPositionSelect: function() {\r\n\t\t\tvar oMasterModel = this.getModel(\"masterView\"),\r\n\t\t\t\tbPositionSelected = oMasterModel.getProperty(\"/bPositionSelected\");\r\n\t\t\tif (bPositionSelected) {\r\n\t\t\t\tthis._selectMasterListItem();\r\n\t\t\t\toMasterModel.setProperty(\"/bPositionSelected\", false);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event Handler for numbers of records under each type of document status - Draft, In Process & Approved\r\n\t\t * @param {Event}\r\n\t\t */\r\n\t\tonDataReceived: function(oEvent) {\r\n\t\t\tif (this.onListLoaded) {\r\n\t\t\t\tthis.onListLoaded();\r\n\t\t\t}\r\n\r\n\t\t\tvar sStorePosition = jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\").PositionId;\r\n\t\t\tvar sPosition = this.getModel(\"appView\").getProperty(\"/position\");\r\n\t\t\tvar Udf1;\r\n\t\t\tif (sStorePosition === sPosition) {\r\n\t\t\t\tUdf1 = sPosition;\r\n\t\t\t} else {\r\n\t\t\t\tUdf1 = sStorePosition;\r\n\t\t\t}\r\n\r\n\t\t\tvar oFilter1 = new Filter(\"udf1\", FilterOperator.EQ, Udf1);\r\n\t\t\tthis._applyPositionSelect();\r\n\t\t\tvar oStatusControl = this.getView().byId(\"idStatusTab\");\r\n\t\t\tvar sSearchTerm = this._concatStarToSearchValue(this.byId(oEvent.getSource().getSmartFilter()).getBasicSearchControl().getValue());\r\n\t\t\tvar aSmartFilter = [];\r\n\t\t\tif (this.byId(oEvent.getSource().getSmartFilter()).getFilters().length > 0) {\r\n\t\t\t\t$(this.byId(oEvent.getSource().getSmartFilter()).getFilters()[0].aFilters).each(function(index, value) {\r\n\t\t\t\t\taSmartFilter.push(value);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tvar oDraftCount = new Promise(function(resolve, reject) {\r\n\t\t\t\tvar aStatusFilter = aSmartFilter.slice();\r\n\t\t\t\taStatusFilter.push(new Filter(\"status\", FilterOperator.EQ, \"E0001\"), oFilter1);\r\n\t\t\t\tthis.getOwnerComponent().oDraft.getCount({\r\n\t\t\t\t\tpath: \"/ZWRK_C_ASHDR_DETAILS_C\",\r\n\t\t\t\t\turlParameters: {\r\n\t\t\t\t\t\tsearch: sSearchTerm\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilters: aStatusFilter,\r\n\t\t\t\t\tbusyControl: oStatusControl\r\n\t\t\t\t}, resolve, reject);\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\toDraftCount.then(function(oResult) {\r\n\t\t\t\tthis.getModel(\"masterView\").setProperty(\"/dCount\", oResult.data);\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\tvar oInpCount = new Promise(function(resolve, reject) {\r\n\t\t\t\tvar aStatusFilter = aSmartFilter.slice();\r\n\t\t\t\taStatusFilter.push(new Filter(\"status\", FilterOperator.EQ, \"E0003\"), oFilter1);\r\n\t\t\t\tthis.getOwnerComponent().oDraft.getCount({\r\n\t\t\t\t\tpath: \"/ZWRK_C_ASHDR_DETAILS_C\",\r\n\t\t\t\t\turlParameters: {\r\n\t\t\t\t\t\tsearch: sSearchTerm\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilters: aStatusFilter,\r\n\t\t\t\t\tbusyControl: oStatusControl\r\n\t\t\t\t}, resolve, reject);\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\toInpCount.then(function(oResult) {\r\n\t\t\t\tthis.getModel(\"masterView\").setProperty(\"/inPCount\", oResult.data);\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\tvar oApprCount = new Promise(function(resolve, reject) {\r\n\t\t\t\tvar aStatusFilter = aSmartFilter.slice();\r\n\t\t\t\taStatusFilter.push(new Filter(\"status\", FilterOperator.EQ, \"E0006\"), oFilter1);\r\n\t\t\t\tthis.getOwnerComponent().oDraft.getCount({\r\n\t\t\t\t\tpath: \"/ZWRK_C_ASHDR_DETAILS_C\",\r\n\t\t\t\t\turlParameters: {\r\n\t\t\t\t\t\tsearch: sSearchTerm\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilters: aStatusFilter,\r\n\t\t\t\t\tbusyControl: oStatusControl\r\n\t\t\t\t}, resolve, reject);\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\toApprCount.then(function(oResult) {\r\n\t\t\t\tthis.getModel(\"masterView\").setProperty(\"/apprCount\", oResult.data);\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\tvar oHoldCount = new Promise(function(resolve, reject) {\r\n\t\t\t\tvar aStatusFilter = aSmartFilter.slice();\r\n\t\t\t\taStatusFilter.push(new Filter(\"status\", FilterOperator.EQ, \"E0005\"), oFilter1);\r\n\t\t\t\tthis.getOwnerComponent().oDraft.getCount({\r\n\t\t\t\t\tpath: \"/ZWRK_C_ASHDR_DETAILS_C\",\r\n\t\t\t\t\turlParameters: {\r\n\t\t\t\t\t\tsearch: sSearchTerm\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilters: aStatusFilter,\r\n\t\t\t\t\tbusyControl: oStatusControl\r\n\t\t\t\t}, resolve, reject);\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\toHoldCount.then(function(oResult) {\r\n\t\t\t\tthis.getModel(\"masterView\").setProperty(\"/holdCount\", oResult.data);\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\tvar oReturnCount = new Promise(function(resolve, reject) {\r\n\t\t\t\tvar aStatusFilter = aSmartFilter.slice();\r\n\t\t\t\taStatusFilter.push(new Filter(\"status\", FilterOperator.EQ, \"E0004\"), oFilter1);\r\n\t\t\t\tthis.getOwnerComponent().oDraft.getCount({\r\n\t\t\t\t\tpath: \"/ZWRK_C_ASHDR_DETAILS_C\",\r\n\t\t\t\t\turlParameters: {\r\n\t\t\t\t\t\tsearch: sSearchTerm\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilters: aStatusFilter,\r\n\t\t\t\t\tbusyControl: oStatusControl\r\n\t\t\t\t}, resolve, reject);\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\toReturnCount.then(function(oResult) {\r\n\t\t\t\tthis.getModel(\"masterView\").setProperty(\"/returnCount\", oResult.data);\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\tvar oAllCount = new Promise(function(resolve, reject) {\r\n\t\t\t\tvar aStatusFilter = aSmartFilter.slice();\r\n\t\t\t\taStatusFilter.push(oFilter1);\r\n\t\t\t\tthis.getOwnerComponent().oDraft.getCount({\r\n\t\t\t\t\tpath: \"/ZWRK_C_ASHDR_DETAILS_C\",\r\n\t\t\t\t\turlParameters: {\r\n\t\t\t\t\t\tsearch: sSearchTerm\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilters: aStatusFilter,\r\n\t\t\t\t\tbusyControl: oStatusControl\r\n\t\t\t\t}, resolve, reject);\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\toAllCount.then(function(oResult) {\r\n\t\t\t\tthis.getModel(\"masterView\").setProperty(\"/aCount\", oResult.data);\r\n\t\t\t}.bind(this));\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event Handler for clicking on Sort in the Master List\r\n\t\t * @param {sap.ui.base.Event} oEvent Event for Pressing Sort on the master list\r\n\t\t */\r\n\t\tonSortPress: function(oEvent) {\r\n\t\t\tthis._getSortDialog().open();\r\n\t\t},\r\n\t\t/**\r\n\t\t * Function to refresh Master List Model\r\n\t\t * @private\r\n\t\t */\r\n\t\tonMasterListRefresh: function() {\r\n\t\t\tthis.getModel().refresh();\r\n\t\t},\r\n\r\n\t\t_onDetailRouteMatch: function() {\r\n\t\t\t//\t\tthis.getView().byId(\"ItemsST\").rebindList();\t\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Event Handler for clicking the confirm button on the Sort Dialog\r\n\t\t * @param {Event} oEvent Event for confirming sort parameters\r\n\t\t */\r\n\t\thandleConfirm: function(oEvent) {\r\n\t\t\tvar oBinding = this.byId(\"ItemsST\").getList().getBinding(\"items\"),\r\n\t\t\t\tSORTKEY = oEvent.getParameter(\"sortItem\").getProperty(\"key\"),\r\n\t\t\t\taSorter = [];\r\n\t\t\taSorter.push(new sap.ui.model.Sorter(SORTKEY, oEvent.getParameter(\"sortDescending\")));\r\n\t\t\toBinding.sort(aSorter);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Lifecycle method for setting filters everytime the list is rebound\r\n\t\t * @param {Event} oEvent Event for list binding redone\r\n\t\t */\r\n\t\tbeforeRebindList: function(oEvent) {\r\n\t\t\tvar mBindingParams = oEvent.getParameter(\"bindingParams\");\r\n\t\t\tif (mBindingParams.parameters.custom && mBindingParams.parameters.custom.search) {\r\n\t\t\t\tmBindingParams.parameters.custom.search = this._concatStarToSearchValue(mBindingParams.parameters.custom.search);\r\n\t\t\t}\r\n\t\t\tvar sStorePosition = jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\").PositionId;\r\n\t\t\tvar sPosition = this.getModel(\"appView\").getProperty(\"/position\");\r\n\t\t\tvar Udf1;\r\n\t\t\tif (sStorePosition === sPosition) {\r\n\t\t\t\tUdf1 = sPosition;\r\n\t\t\t} else {\r\n\t\t\t\tUdf1 = sStorePosition;\r\n\t\t\t}\r\n\r\n\t\t\tvar oFilter1 = new Filter(\"udf1\", FilterOperator.EQ, Udf1),\r\n\t\t\t\toFilter2 = new Filter(\"status\", FilterOperator.EQ, this.getModel(\"masterView\").getProperty(\"/listStatusCode\")),\r\n\t\t\t\taFilters = new Filter([oFilter1, oFilter2], true),\r\n\t\t\t\toDefSorter = new sap.ui.model.Sorter(\"changetat\", true);\r\n\t\t\tif (this.getModel(\"masterView\").getProperty(\"/highStatus\") !== \"X\") {\r\n\t\t\t\toEvent.getParameter(\"bindingParams\").filters.push(oFilter2);\r\n\t\t\t}\r\n\t\t\tif (!sPosition) {\r\n\t\t\t\tsPosition = \"00000000\";\r\n\t\t\t}\r\n\t\t\tif (sPosition) {\r\n\t\t\t\toEvent.getParameter(\"bindingParams\").filters.push(oFilter1);\r\n\t\t\t}\r\n\t\t\tif (this.byId(\"ItemsST\").getList().getBinding(\"items\") && this.byId(\"ItemsST\").getList().getBinding(\"items\").aSorters.length > 0) {\r\n\t\t\t\toEvent.getParameter(\"bindingParams\").sorter = this.byId(\"ItemsST\").getList().getBinding(\"items\").aSorters;\r\n\t\t\t} else {\r\n\t\t\t\toEvent.getParameter(\"bindingParams\").sorter.push(oDefSorter);\r\n\t\t\t}\r\n\t\t\tthis._setMultiPosition(\"sap-icon://sys-cancel\");\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event Handler for clicking on the Draft filter on the Master List\r\n\t\t * @param {sap.ui.base.Event} oEvent Event for pressing on \"ALL\" filter\r\n\t\t */\r\n\t\tonAllPress: function(oEvent) {\r\n\t\t\tvar oMasterViewModel = this.getModel(\"masterView\");\r\n\t\t\toMasterViewModel.setProperty(\"/listFilter\", \"\");\r\n\t\t\toMasterViewModel.setProperty(\"/listStatusCode\", \"\");\r\n\t\t\toMasterViewModel.setProperty(\"/highStatus\", \"X\");\r\n\t\t\toMasterViewModel.setProperty(\"/bMultiSelectEnabled\", false);\r\n\t\t\tthis.getView().byId(\"ItemsST\").rebindList();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Event Handler for clicking on the Draft filter on the Master List\r\n\t\t * @param {Event}  oEvent Event for pressing on \"DRAFT\" filter\r\n\t\t */\r\n\t\tonDraftPress: function(oEvent) {\r\n\t\t\tvar oMasterViewModel = this.getModel(\"masterView\");\r\n\t\t\toMasterViewModel.setProperty(\"/listFilter\", \"Draft\");\r\n\t\t\toMasterViewModel.setProperty(\"/listStatusCode\", \"E0001\");\r\n\t\t\toMasterViewModel.setProperty(\"/highStatus\", \"D\");\r\n\t\t\toMasterViewModel.setProperty(\"/bMultiSelectEnabled\", false);\r\n\t\t\tthis.getView().byId(\"ItemsST\").rebindList();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Event Handler for clicking on the In Process filter on the Master List\r\n\t\t * @param {Event}  oEvent Event for pressing on \"IN PROCESS\" filter\r\n\t\t */\r\n\t\tonInprocessPress: function(oEvent) {\r\n\t\t\tvar oMasterViewModel = this.getModel(\"masterView\");\r\n\t\t\toMasterViewModel.setProperty(\"/listFilter\", \"\");\r\n\t\t\t//Code for In-Process\r\n\t\t\toMasterViewModel.setProperty(\"/listStatusCode\", \"E0003\");\r\n\t\t\toMasterViewModel.setProperty(\"/highStatus\", \"I\");\r\n\t\t\tif (this.getView().getModel(\"appView\").getProperty(\"/role\") === \"C\") {\r\n\t\t\t\toMasterViewModel.setProperty(\"/bMultiSelectEnabled\", true);\r\n\t\t\t}\r\n\t\t\tthis.getView().byId(\"ItemsST\").rebindList();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Event Handler for clicking on the Return filter on the Master List\r\n\t\t * @param {Event}  oEvent Event for pressing on \"RETURN\" filter\r\n\t\t */\r\n\t\tonReturnPress: function(oEvent) {\r\n\t\t\tvar oMasterViewModel = this.getModel(\"masterView\");\r\n\t\t\toMasterViewModel.setProperty(\"/listFilter\", \"\");\r\n\t\t\toMasterViewModel.setProperty(\"/listStatusCode\", \"E0004\");\r\n\t\t\toMasterViewModel.setProperty(\"/highStatus\", \"R\");\r\n\t\t\toMasterViewModel.setProperty(\"/bMultiSelectEnabled\", false);\r\n\t\t\tthis.getView().byId(\"ItemsST\").rebindList();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Event Handler for clicking on the Approved filter on the Master List\r\n\t\t * @param {Event}  oEvent Event for pressing on \"APPROVED\" filter\r\n\t\t */\r\n\t\tonApprovedPress: function(oEvent) {\r\n\t\t\tvar oMasterViewModel = this.getModel(\"masterView\");\r\n\t\t\toMasterViewModel.setProperty(\"/listFilter\", \"Approved\");\r\n\t\t\t//Code for Approve\r\n\t\t\toMasterViewModel.setProperty(\"/listStatusCode\", \"E0006\");\r\n\t\t\toMasterViewModel.setProperty(\"/highStatus\", \"A\");\r\n\t\t\toMasterViewModel.setProperty(\"/bMultiSelectEnabled\", false);\r\n\t\t\tthis.getView().byId(\"ItemsST\").rebindList();\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event Handler for clicking on the Approved filter on the Master List\r\n\t\t * @param {Event}  oEvent Event for pressing on \"ON HOLD\" filter\r\n\t\t */\r\n\t\tonHoldPress: function(oEvent) {\r\n\t\t\tvar oMasterViewModel = this.getModel(\"masterView\");\r\n\t\t\toMasterViewModel.setProperty(\"/listFilter\", \"Hold\");\r\n\t\t\t//Code for Approve\r\n\t\t\toMasterViewModel.setProperty(\"/listStatusCode\", \"E0005\");\r\n\t\t\toMasterViewModel.setProperty(\"/highStatus\", \"H\");\r\n\t\t\toMasterViewModel.setProperty(\"/bMultiSelectEnabled\", false);\r\n\t\t\tthis.getView().byId(\"ItemsST\").rebindList();\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for Radio button selection\r\n\t\t * @param {sap.ui.base.Event} oEvent Event for selecting radio button on Create Fragment\r\n\t\t */\r\n\t\tonSelectRadioAS: function(oEvent) {\r\n\t\t\tvar sControlId = oEvent.getSource().getId(),\r\n\r\n\t\t\t\toCreateNewASModel = this.getModel(\"createNewASModel\");\r\n\t\t\t// this._getCreateFragControlById(\"idNewRadioBtn\").setSelected(false);\r\n\t\t\t// this._getCreateFragControlById(\"idAmendRadioBtn\").setSelected(true);\r\n\t\t\toCreateNewASModel.setProperty(\"/amendEditable\", true);\r\n\t\t\toCreateNewASModel.setProperty(\"/copyEditable\", false);\r\n\t\t\toCreateNewASModel.setProperty(\"/NewASRadioButtons\", false);\r\n\t\t\t//Controlling the Visibility of Bundle Table\r\n\t\t\tif (sControlId === this._getCreateFragControlById(\"idBundleRadioBtn\").getId()) {\r\n\t\t\t\tif (!this.getModel(\"oBundleCodeModel\")) {\r\n\t\t\t\t\tvar oBundleCodeModelData = [{\r\n\t\t\t\t\t\tcode: \"\",\r\n\t\t\t\t\t\tdescription: \"\",\r\n\t\t\t\t\t\tamount: \"\"\r\n\t\t\t\t\t}];\r\n\t\t\t\t\tthis.setModel(new JSONModel(oBundleCodeModelData), \"oBundleCodeModel\");\r\n\t\t\t\t}\r\n\t\t\t\tthis._getCreateFragControlById(\"idMasterBundleCodeTable\").setVisible(true);\r\n\t\t\t} else {\r\n\t\t\t\tthis._getCreateFragControlById(\"idMasterBundleCodeTable\").setVisible(false);\r\n\t\t\t}\r\n\t\t\t//Migrated Code Starts\r\n\t\t\tif (sControlId === this._getCreateFragControlById(\"idAmendRadioBtn\").getId()) {\r\n\t\t\t\toCreateNewASModel.setProperty(\"/amendEditable\", true);\r\n\t\t\t\tthis._getCreateFragControlById(\"idCopyFromASCode\").setValue(\"\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idCopyFromASCode\").resetProperty(\"valueState\");\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedASRadioButtons\", false);\r\n\t\t\t\t//changes started by lahari\r\n\t\t\t\toCreateNewASModel.setProperty(\"/NewASRadioButtons\", false);\r\n\t\t\t} else if (sControlId === this._getCreateFragControlById(\"idCopyFromRadioBtn\").getId()) {\r\n\t\t\t\toCreateNewASModel.setProperty(\"/copyEditable\", true);\r\n\t\t\t\tthis._getCreateFragControlById(\"idAmendASCode\").setValue(\"\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idAmendASCode\").resetProperty(\"valueState\");\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedASRadioButtons\", false);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/NewASRadioButtons\", false);\r\n\t\t\t\tthis.oSelectedObject = null;\r\n\t\t\t} else if (sControlId === this._getCreateFragControlById(\"idMigratedRadioBtn\").getId()) {\r\n\t\t\t\tthis._getCreateFragControlById(\"idCopyFromASCode\").setValue(\"\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idCopyFromASCode\").resetProperty(\"valueState\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idAmendASCode\").setValue(\"\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idAmendASCode\").resetProperty(\"valueState\");\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedASRadioButtons\", true);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedPhaseOneEditable\", true);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedNonCfmsEditable\", false);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedRadioBtnPhaseOneSelected\", true);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedRadioBtnNonCfmsSelected\", false);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/NewASRadioButtons\", false);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedPhaseOneEditable\", false);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedNonCfmsEditable\", false);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/NewRadioBtnPhaseOneSelected\", true);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/NewRadioBtnNonCfmsSelected\", false);\r\n\t\t\t\tthis.oSelectedObject = null;\r\n\t\t\t} else if (sControlId === this._getCreateFragControlById(\"idNewRadioBtn\").getId()) {\r\n\t\t\t\tthis._getCreateFragControlById(\"idCopyFromASCode\").setValue(\"\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idCopyFromASCode\").resetProperty(\"valueState\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idAmendASCode\").setValue(\"\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idAmendASCode\").resetProperty(\"valueState\");\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedASRadioButtons\", false);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedPhaseOneEditable\", false);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedNonCfmsEditable\", false);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedRadioBtnPhaseOneSelected\", true);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedRadioBtnNonCfmsSelected\", false);\r\n\r\n\t\t\t\toCreateNewASModel.setProperty(\"/NewASRadioButtons\", true);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedPhaseOneEditable\", true);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedNonCfmsEditable\", false);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/NewRadioBtnPhaseOneSelected\", true);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/NewRadioBtnNonCfmsSelected\", false);\r\n\t\t\t\t//changes ended by lahari\r\n\t\t\t\tthis.oSelectedObject = null;\r\n\t\t\t} else {\r\n\t\t\t\tthis._getCreateFragControlById(\"idCopyFromASCode\").resetProperty(\"value\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idAmendASCode\").resetProperty(\"value\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idCopyFromASCode\").resetProperty(\"valueState\");\r\n\t\t\t\tthis._getCreateFragControlById(\"idAmendASCode\").resetProperty(\"valueState\");\r\n\t\t\t\toCreateNewASModel.setProperty(\"/migratedASRadioButtons\", false);\r\n\t\t\t}\r\n\t\t\t//Migrated Code Ends\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for adding a new row to bundle table\r\n\t\t * @param {sap.ui.base.Event} oEvent Event for pressing on new row addition\r\n\t\t */\r\n\t\tonAddNewRow: function(oEvent) {\r\n\t\t\tvar oNewRowData = {\r\n\t\t\t\t\tcode: \"\",\r\n\t\t\t\t\tdescription: \"\",\r\n\t\t\t\t\tamount: \"\"\r\n\t\t\t\t},\r\n\t\t\t\toBundleModel = this.getModel(\"oBundleCodeModel\");\r\n\t\t\tvar oModelData = oBundleModel.getProperty(\"/\");\r\n\t\t\toModelData.splice(0, 0, oNewRowData);\r\n\t\t\toBundleModel.updateBindings();\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler funtion for Deleting the Row of Bundle table\r\n\t\t * @param {sap.ui.base.Event} oEvent Event for removing row\r\n\t\t */\r\n\t\tonDeleteRow: function(oEvent) {\r\n\t\t\tvar oModel = this.getModel(\"oBundleCodeModel\"),\r\n\t\t\t\toModelData = oModel.getProperty(\"/\"),\r\n\t\t\t\tsDltItemIndex = this._getCreateFragControlById(\"idMasterBundleCodeTable\").getSelectedItem().getBindingContext(\"oBundleCodeModel\")\r\n\t\t\t\t.getPath().split(\"/\")[1];\r\n\t\t\toModelData.splice(sDltItemIndex, 1);\r\n\t\t\toModel.updateBindings();\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for code value help\r\n\t\t * @param {sap.ui.base.Event} oEvent Event for pressing on value help dialog button\r\n\t\t */\r\n\t\thandleCodeValueHelp: function(oEvent) {\r\n\t\t\tthis.ASCode = oEvent.getSource();\r\n\t\t\tthis.getASCodeVH().open({\r\n\t\t\t\tfilters: [new Filter([new Filter(\"status\", FilterOperator.NE, \"E0001\"), new Filter(\"status\", FilterOperator.NE, \"Draft\")],\r\n\t\t\t\t\ttrue)],\r\n\t\t\t\t//for single select pass this method\r\n\t\t\t\tselect: function(oSelectedObject) {\r\n\t\t\t\t\tthis.ASCode.setValue(oSelectedObject.code);\r\n\t\t\t\t\tthis.getModel(\"masterView\").setProperty(\"/copyObject\", oSelectedObject);\r\n\t\t\t\t}.bind(this)\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler when suggestion item is selected\r\n\t\t * @param {sap.ui.base.Event} oEvent  Event for selecting an item out of suggestions\r\n\t\t */\r\n\t\thandleSuggestionItemSelected: function(oEvent) {\r\n\t\t\tvar oSelectedItem = oEvent.getParameter(\"selectedItem\");\r\n\t\t\tif (oSelectedItem) {\r\n\t\t\t\tthis.oSelectedObject = oSelectedItem.getBindingContext().getObject();\r\n\t\t\t\toEvent.getSource().setValueState();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for live change on Input fields\r\n\t\t * @param {sap.ui.base.Event} oEvent Event for live change\r\n\t\t */\r\n\t\thandleLiveChange: function(oEvent) {\r\n\t\t\tif (this.oSelectedObject) {\r\n\t\t\t\tthis.oSelectedObject = null;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Internal function for Value help dialog\r\n\t\t * @private\r\n\t\t * @returns {Object} Value help dialog control\r\n\t\t */\r\n\t\tgetASCodeVH: function() {\r\n\t\t\tif (!this.oASCodeVH) {\r\n\t\t\t\tthis.oASCodeVH = new VHDialog({\r\n\t\t\t\t\tcomponent: this.getOwnerComponent(),\r\n\t\t\t\t\tid: \"vhCodeAS\",\r\n\t\t\t\t\ttitleKey: \"detail.ops.panel.content.table.column.vh.title.code\",\r\n\t\t\t\t\tentitySet: \"/ZWRK_C_CODE\",\r\n\t\t\t\t\tsorter: new Sorter(\"code\", false),\r\n\t\t\t\t\tbMultiSelect: false,\r\n\t\t\t\t\tkey: \"code\",\r\n\t\t\t\t\tdescriptionKey: \"guid\",\r\n\t\t\t\t\tfields: [{\r\n\t\t\t\t\t\tkey: \"code\",\r\n\t\t\t\t\t\tlabel: \"{i18n>master.fragment.table.code}\",\r\n\t\t\t\t\t\tvalue: \"{code}\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tkey: \"short_desc\",\r\n\t\t\t\t\t\tlabel: \"{i18n>master.fragment.table.shortdesc}\",\r\n\t\t\t\t\t\tvalue: \"{short_desc}\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tkey: \"stext\",\r\n\t\t\t\t\t\tlabel: \"{i18n>master.fragment.table.status}\",\r\n\t\t\t\t\t\tvalue: \"{stext}\"\r\n\t\t\t\t\t}]\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn this.oASCodeVH;\r\n\t\t},\r\n\r\n\t\t/* =========================================================== */\r\n\t\t/* begin: internal methods                                     */\r\n\t\t/* =========================================================== */\r\n\r\n\t\t/*\r\n\t\t * Function to create a Model for the Master View\r\n\t\t */\r\n\t\t_createViewModel: function() {\r\n\t\t\tvar iCount = 0;\r\n\t\t\treturn new JSONModel({\r\n\t\t\t\tisFilterBarVisible: false,\r\n\t\t\t\tfilterBarLabel: \"\",\r\n\t\t\t\tdelay: 0,\r\n\t\t\t\ttitle: this.getResourceBundle().getText(\"master.count.title\", [0]),\r\n\t\t\t\tnoDataText: this.getResourceBundle().getText(\"master.nodatatext\"),\r\n\t\t\t\tsortBy: \"ShortDesc\",\r\n\t\t\t\tgroupBy: \"None\",\r\n\t\t\t\tdCount: iCount,\r\n\t\t\t\tinPCount: 0,\r\n\t\t\t\tapprCount: 0,\r\n\t\t\t\thighStatus: \"D\",\r\n\t\t\t\tlistFilter: \"Draft\",\r\n\t\t\t\tlistStatusCode: \"E0001\",\r\n\t\t\t\tbPositionSelected: false,\r\n\t\t\t\tbMultiSelectVisible: false,\r\n\t\t\t\tbMultiSelectEnabled: false,\r\n\t\t\t\tNotingstring: \"\",\r\n\t\t\t\tbCreateBtnEnable: true\r\n\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t/*\r\n\t\t * Event handler When the Master List is received\r\n\t\t */\r\n\t\t_onMasterMatched: function() {\r\n\t\t\t//Set the layout property of the FCL control to 'OneColumn'\r\n\t\t\tthis.getModel(\"appView\").setProperty(\"/layout\", sap.f.LayoutType.TwoColumnsMidExpanded);\r\n\t\t\t//Enabling/desabling the view ctrs based on Detail view visibility mode\r\n\t\t\tvar oAppViewModel = this.getModel(\"appView\");\r\n\t\t\tif (!oAppViewModel.getProperty(\"/bEnabledMasterViewCtr\")) {\r\n\t\t\t\toAppViewModel.setProperty(\"/bEnabledMasterViewCtr\", true);\r\n\t\t\t\toAppViewModel.setProperty(\"/sMasterListMode\", \"SingleSelectMaster\");\r\n\t\t\t} else {\r\n\t\t\t\toAppViewModel.setProperty(\"/bEnabledMasterViewCtr\", false);\r\n\t\t\t\toAppViewModel.setProperty(\"/sMasterListMode\", \"None\");\r\n\t\t\t}\r\n\t\t\toAppViewModel.updateBindings();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Shows the selected item on the detail page\r\n\t\t * On phones a additional history entry is created\r\n\t\t * @param {sap.m.ObjectListItem} oItem selected Item\r\n\t\t * @private\r\n\t\t */\r\n\t\t_showDetail: function(oItem) {\r\n\t\t\tvar bReplace = !Device.system.phone;\r\n\t\t\t// set the layout property of FCL control to show two columns\r\n\t\t\tthis.getModel(\"appView\").setProperty(\"/layout\", \"TwoColumnsMidExpanded\");\r\n\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bUserCreateAS\", false);\r\n\t\t\tthis.getRouter().navTo(\"Detail\", {\r\n\t\t\t\tobjectId: oItem.getBindingContext().getProperty(\"guid\"),\r\n\t\t\t\tstateId: \"D\" + \":\" + oItem.getBindingContext().getProperty(\"IsActive\")\r\n\t\t\t}, bReplace);\r\n\t\t},\r\n\t\t/**\r\n\t\t * \r\n\t\t * @param {*} sGuid is the document Guid to navigate\r\n\t\t */\r\n\t\t_showDetailWithCrossApp: function(sGuid) {\r\n\t\t\tvar bReplace = !Device.system.phone;\r\n\t\t\tthis.getRouter().navTo(\"Detail\", {\r\n\t\t\t\tobjectId: sGuid,\r\n\t\t\t\tstateId: \"D\" + \":\"\r\n\t\t\t}, bReplace);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Apply the chosen sorter and grouper to the master list\r\n\t\t * @param {sap.ui.base.Event} oEvent the confirm event\r\n\t\t * @private\r\n\t\t */\r\n\t\t_applySortGroup: function(oEvent) {\r\n\t\t\tvar mParams = oEvent.getParameters(),\r\n\t\t\t\tsPath,\r\n\t\t\t\tbDescending,\r\n\t\t\t\taSorters = [];\r\n\t\t\tsPath = mParams.sortItem.getKey();\r\n\t\t\tbDescending = mParams.sortDescending;\r\n\t\t\taSorters.push(new Sorter(sPath, bDescending));\r\n\t\t\tthis._oList.getBinding(\"items\").sort(aSorters);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Internal function to return the payload for create\r\n\t\t * @returns{oPayload} payload for create AS\r\n\t\t */\r\n\t\t_createPayload: function() {\r\n\t\t\tvar sPosition = this.getModel(\"appView\").getProperty(\"/position\"),\r\n\t\t\t\toPayload = {\r\n\t\t\t\t\tAction: \"\",\r\n\t\t\t\t\tGuid: \"00000000-0000-0000-0000-000000000000\",\r\n\t\t\t\t\tLockTimestamp: \"\\/Date(\" + (new Date()).getTime() + \")\\/\",\r\n\t\t\t\t\tFnam: \"\",\r\n\t\t\t\t\tFval: \"\",\r\n\t\t\t\t\tCode: \"\",\r\n\t\t\t\t\tPosition: sPosition,\r\n\t\t\t\t\tInitiatinDept: \"\",\r\n\t\t\t\t\tDepartDesc: \"\",\r\n\t\t\t\t\tSessionGuid: jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\").SessionGuid\r\n\t\t\t\t};\r\n\r\n\t\t\t//Migrated Code Starts\r\n\t\t\tif (this._getCreateFragControlById(\"idNewRadioBtn\").getSelected()) {\r\n\t\t\t\toPayload.Action = \"NEW\";\r\n\r\n\t\t\t} else if (this._getCreateFragControlById(\"idNewRadioBtnGO\").getSelected()) {\r\n\t\t\t\toPayload.Action = \"NEW\";\r\n\t\t\t\toPayload.Code = this._getCreateFragControlById(\"idNewRadioBtn\").getValue();\r\n\t\t\t} else if (this._getCreateFragControlById(\"idNewRadioBtnProceeding\").getSelected()) {\r\n\t\t\t\toPayload.Action = \"NEW\";\r\n\t\t\t\t// this.getView().byId(\"idNEWGO\").setVisible(true);\r\n\t\t\t\t// oPayload.Code = this._getCreateFragControlById(\"idMigratedNonCfms\").getValue();\r\n\t\t\t} else if (this._getCreateFragControlById(\"idAmendRadioBtn\").getSelected()) {\r\n\t\t\t\toPayload.Action = \"AMEND\";\r\n\t\t\t\toPayload.Guid = this.oSelectedObject.guid;\r\n\t\t\t\toPayload.Code = this._getCreateFragControlById(\"idAmendASCode\").getValue();\r\n\t\t\t} else if (this._getCreateFragControlById(\"idCopyFromRadioBtn\").getSelected()) {\r\n\t\t\t\toPayload.Action = \"COPY\";\r\n\t\t\t\toPayload.Guid = this.oSelectedObject.guid;\r\n\t\t\t\toPayload.Code = this._getCreateFragControlById(\"idCopyFromASCode\").getValue();\r\n\t\t\t} else if (this._getCreateFragControlById(\"idMigratedRadioBtnPhaseOne\").getSelected()) {\r\n\t\t\t\toPayload.Action = \"MIGRATED\";\r\n\t\t\t\toPayload.Code = this._getCreateFragControlById(\"idMigratedASCode\").getValue();\r\n\t\t\t} else if (this._getCreateFragControlById(\"idMigratedRadioBtnNonCfms\").getSelected()) {\r\n\t\t\t\toPayload.Action = \"MIGRATED\";\r\n\t\t\t\t// oPayload.Code = this._getCreateFragControlById(\"idMigratedNonCfms\").getValue();\r\n\t\t\t} else {\r\n\t\t\t\toPayload.Action = \"BUNDLE\";\r\n\t\t\t\tvar sASCode = \"\",\r\n\t\t\t\t\taBundleModelData = this.getModel(\"oBundleCodeModel\").getProperty(\"/\");\r\n\t\t\t\tfor (var i = 0; i < aBundleModelData.length; i++) {\r\n\t\t\t\t\tif (sASCode) {\r\n\t\t\t\t\t\tsASCode = \",\" + aBundleModelData[i];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsASCode = aBundleModelData[i];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\toPayload.Code = sASCode;\r\n\t\t\t}\r\n\t\t\treturn oPayload;\r\n\t\t\t//Migrated Code Ends\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * function to handle radio buttons\r\n\t\t * @public\r\n\t\t */\r\n\r\n\t\t//Migrated Code Starts\r\n\t\tonRadioButtonSelect: function(oEvent) {\r\n\t\t\tvar oCreateNewASModel = this.getModel(\"createNewASModel\");\r\n\t\t\tif (oEvent.getSource().getId().indexOf(\"goCategory\") >= 0) {\r\n\t\t\t\toCreateNewASModel.setProperty(\"/refVisible\", false);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/typeVisible\", true);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/sancno1\", true);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/sancno2\", false);\r\n\t\t\t\tthis._setInputFieldsNumberOnly(this._getMigratedCreateFragControlById(\"sancNo\"));\r\n\t\t\t} else if (oEvent.getSource().getId().indexOf(\"deptCategory\") >= 0) {\r\n\t\t\t\toCreateNewASModel.setProperty(\"/refVisible\", true);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/typeVisible\", false);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/sancno2\", true);\r\n\t\t\t\toCreateNewASModel.setProperty(\"/sancno1\", false);\r\n\t\t\t}\r\n\t\t\toCreateNewASModel.updateBindings();\r\n\t\t},\r\n\t\t//Migrated Code Ends\r\n\r\n\t\t/**\r\n\t\t * Sets the item count on the master list header\r\n\t\t * @param {integer} iTotalItems the total number of items in the list\r\n\t\t * @private\r\n\t\t */\r\n\t\t_updateListItemCount: function(iTotalItems) {\r\n\t\t\tvar sTitle;\r\n\t\t\t// only update the counter if the length is final\r\n\t\t\tif (this._oList.getBinding(\"items\").isLengthFinal()) {\r\n\t\t\t\tsTitle = this.getResourceBundle().getText(\"master.count.title\", [iTotalItems]);\r\n\t\t\t\tthis.getModel(\"masterView\").setProperty(\"/title\", sTitle);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Internal helper method to apply both filter and search state together on the list binding\r\n\t\t * @private\r\n\t\t */\r\n\t\t_applyFilterSearch: function() {\r\n\t\t\tvar aFilters = this._oListFilterState.aSearch.concat(this._oListFilterState.aFilter),\r\n\t\t\t\toViewModel = this.getModel(\"masterView\");\r\n\t\t\tthis._oList.getBinding(\"items\").filter(aFilters, \"Application\");\r\n\t\t\t// changes the noDataText of the list in case there are no filter results\r\n\t\t\tif (aFilters.length !== 0) {\r\n\t\t\t\toViewModel.setProperty(\"/noDataText\", this.getResourceBundle().getText(\"masterListNoDataWithFilterOrSearchText\"));\r\n\t\t\t} else if (this._oListFilterState.aSearch.length > 0) {\r\n\t\t\t\t// only reset the no data text to default when no new search was triggered\r\n\t\t\t\toViewModel.setProperty(\"/noDataText\", this.getResourceBundle().getText(\"masterListNoDataText\"));\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Internal helper method that sets the filter bar visibility property and the label's caption to be shown\r\n\t\t * @param {string} sFilterBarText the selected filter value\r\n\t\t * @private\r\n\t\t */\r\n\t\t_updateFilterBar: function(sFilterBarText) {\r\n\t\t\tvar oViewModel = this.getModel(\"masterView\");\r\n\t\t\toViewModel.setProperty(\"/isFilterBarVisible\", (this._oListFilterState.aFilter.length > 0));\r\n\t\t\toViewModel.setProperty(\"/filterBarLabel\", this.getResourceBundle().getText(\"masterFilterBarText\", [sFilterBarText]));\r\n\t\t},\r\n\t\t/**\r\n\t\t * Selects first item of the list\r\n\t\t * @param {object} sGuid Header guid of the record \r\n\t\t */\r\n\t\t_selectMasterListItem: function(sGuid) {\r\n\t\t\t// if(this._oList.getList().getItems().length && sGuid){\r\n\t\t\t// \tif(!this._oList.getList().getSelectedItem()) {\r\n\t\t\t// \t\tthis._oList.getList().setSelectedItem(oItem);\r\n\t\t\t// \t}\r\n\t\t\t// } else \r\n\t\t\tvar startupParams = this.getOwnerComponent().getComponentData().startupParameters;\r\n\t\t\tif (this._oList.getList().getItems().length || startupParams.Mode) {\r\n\t\t\t\t//var startupParams = oStartupParameters; // get Startup params from Owner Component\r\n\t\t\t\tif (startupParams.GUID && startupParams.GUID[0]) {\r\n\t\t\t\t\tthis._showDetailWithCrossApp(startupParams.GUID[0]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar oFirstItem = this._oList.getList().getItems()[0];\r\n\t\t\t\t\tthis._oList.getList().setSelectedItem(oFirstItem);\r\n\t\t\t\t\tthis._showDetail(oFirstItem);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar bReplace = !Device.system.phone;\r\n\t\t\t\t// set the layout property of FCL control to show two columns\r\n\t\t\t\tthis.getModel(\"appView\").setProperty(\"/layout\", \"TwoColumnsMidExpanded\");\r\n\t\t\t\tthis.getRouter().navTo(\"notFound\", bReplace);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Internal Function for the Dialog Box of Sorting Parameters\r\n\t\t * @private\r\n\t\t * @returns {Object} Dialog box for sort\r\n\t\t */\r\n\t\t_getSortDialog: function() {\r\n\t\t\tif (!this._oSortDialog) {\r\n\t\t\t\tvar fragId = this.createId(\"fragSortDialog\");\r\n\t\t\t\tthis._oSortDialog = sap.ui.xmlfragment(fragId, \"com.goap.cfms.works.as.fragment.sort\", this);\r\n\t\t\t\tthis.getView().addDependent(this._oSortDialog);\r\n\t\t\t\tjQuery.sap.syncStyleClass(\"sapUiSizeCompact\", this.getView(), this._oSortDialog);\r\n\t\t\t}\r\n\t\t\treturn this._oSortDialog;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Internal function to validate when Create button is pressed\r\n\t\t * @private\r\n\t\t * @returns {boolean} Check condition for create dialog close\r\n\t\t */\r\n\t\t_validateCreate: function() {\r\n\t\t\tvar bCopy = this._getCreateFragControlById(\"idCopyFromRadioBtn\").getSelected(),\r\n\t\t\t\tsCopyCode = this._getCreateFragControlById(\"idCopyFromASCode\").getValue(),\r\n\t\t\t\tbAmend = this._getCreateFragControlById(\"idAmendRadioBtn\").getSelected(),\r\n\t\t\t\tsAmendCode = this._getCreateFragControlById(\"idAmendASCode\").getValue(),\r\n\t\t\t\tbRetVal = true;\r\n\r\n\t\t\tthis._getCreateFragControlById(\"idCopyFromASCode\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tif (bCopy && (!sCopyCode || !this.oSelectedObject)) {\r\n\t\t\t\tbRetVal = false;\r\n\t\t\t\tthis._getCreateFragControlById(\"idCopyFromASCode\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\t} else if (bAmend && (!sAmendCode || !this.oSelectedObject)) {\r\n\t\t\t\tbRetVal = false;\r\n\t\t\t\tthis._getCreateFragControlById(\"idAmendASCode\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\t}\r\n\t\t\treturn bRetVal;\r\n\t\t},\r\n\t\t/**\r\n\t\t * function to return the Control \r\n\t\t * @param {string} sControlId Identifier for the Control Structure of Create Fragment\r\n\t\t * @returns {Object} Control inside the fragment\r\n\t\t */\r\n\t\t_getCreateFragControlById: function(sControlId) {\r\n\t\t\treturn sap.ui.core.Fragment.byId(this.createId(\"fragCreateFrag\"), sControlId);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Private function to read Role\r\n\t\t * @param{Object} oData\r\n\t\t */\r\n\t\t_getUserRole: function(sPosition) {\r\n\t\t\tvar Mode = this.getOwnerComponent().getComponentData().startupParameters.Mode;\r\n\t\t\tif (!Mode) {\r\n\t\t\t\t//var sUserId = \"14482503\";\r\n\t\t\t\t//sPosition = \"30058277\";\r\n\t\t\t\tvar sUserId = sap.ushell.Container.getService(\"UserInfo\").getId();\r\n\t\t\t\tvar oRole = new Promise(function(resolve, reject) {\r\n\t\t\t\t\tthis.getOwnerComponent().oDraft.getRole({\r\n\t\t\t\t\t\tfName: \"/GetRole\",\r\n\t\t\t\t\t\tApplicationId: \"AS\",\r\n\t\t\t\t\t\tUserId: sUserId,\r\n\t\t\t\t\t\tPositionId: sPosition\r\n\t\t\t\t\t}, resolve, reject);\r\n\t\t\t\t}.bind(this));\r\n\t\t\t\toRole.then(function(oResult) {\r\n\t\t\t\t\tvar oViewAppModel = this.getOwnerComponent().getModel(\"appView\");\r\n\t\t\t\t\tif (oResult.data.results.length > 0) {\r\n\t\t\t\t\t\toViewAppModel.setProperty(\"/role\", oResult.data.results[0].Role);\r\n\t\t\t\t\t\toViewAppModel.setProperty(\"/position\", oResult.data.results[0].PositionId);\r\n\t\t\t\t\t\toViewAppModel.setProperty(\"/positionText\", oResult.data.results[0].PositionText);\r\n\r\n\t\t\t\t\t\tvar sCreatedBy = sap.ushell.Container.getService(\"UserInfo\").getId();\r\n\t\t\t\t\t\tvar oParamsBrowserStorage = {\r\n\t\t\t\t\t\t\tUserId: sCreatedBy,\r\n\t\t\t\t\t\t\tPositionId: oResult.data.results[0].PositionId,\r\n\t\t\t\t\t\t\tRole: oResult.data.results[0].Role,\r\n\t\t\t\t\t\t\tSessionGuid: jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\").SessionGuid\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tjQuery.sap.storage(jQuery.sap.storage.Type.session).put(\"zworksBrowserStorage\", oParamsBrowserStorage);\r\n\r\n\t\t\t\t\t\tvar role = oViewAppModel.getData().role;\r\n\t\t\t\t\t\tif (role === \"A\" || role === \"C\") {\r\n\t\t\t\t\t\t\tthis.byId(\"idInProcess\").firePress();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar oMasterViewModel = this.getModel(\"masterView\");\r\n\t\t\t\t\t\t\toMasterViewModel.setProperty(\"/listFilter\", \"Draft\");\r\n\t\t\t\t\t\t\toMasterViewModel.setProperty(\"/listStatusCode\", \"E0001\");\r\n\t\t\t\t\t\t\toMasterViewModel.setProperty(\"/highStatus\", \"D\");\r\n\t\t\t\t\t\t\toMasterViewModel.setProperty(\"/bMultiSelectEnabled\", false);\r\n\t\t\t\t\t\t\tthis.getView().byId(\"ItemsST\").rebindList();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}.bind(this));\r\n\t\t\t\toRole.catch(function(oError) {\r\n\t\t\t\t\tthis.getModel(\"appView\").setProperty(\"/role\", \"\");\r\n\t\t\t\t}.bind(this));\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Private function to create payload for MassPayload Note\r\n\t\t */\r\n\t\t_getMassPayload: function() {\r\n\t\t\tvar oMassPayload = {\r\n\t\t\t\t\tFflag: \"\",\r\n\t\t\t\t\tFposition: \"\",\r\n\t\t\t\t\tFuserid: \"\",\r\n\t\t\t\t\tAplication: \"AS\",\r\n\t\t\t\t\tAction: \"D\",\r\n\t\t\t\t\tGuid: \"00000000-0000-0000-0000-000000000000\",\r\n\t\t\t\t\tNotingid: \"CREATE\",\r\n\t\t\t\t\tPagent: \"INCFMS_CNS_\",\r\n\t\t\t\t\tTextid: \"0004\",\r\n\t\t\t\t\tNotingstring: encodeURIComponent(this.getModel(\"masterView\").getProperty(\"/Notingstring\")),\r\n\t\t\t\t\tMassHeaderItems: []\r\n\t\t\t\t},\r\n\t\t\t\taSelectedItems = this.byId(\"ItemsST\").getList().getSelectedItems();\r\n\t\t\tif (aSelectedItems.length > 0) {\r\n\t\t\t\tfor (var i = 0; i < aSelectedItems.length; i++) {\r\n\t\t\t\t\tvar oBindingContext = aSelectedItems[i].getBindingContext(),\r\n\t\t\t\t\t\toItems = {\r\n\t\t\t\t\t\t\tAplication: \"AS\",\r\n\t\t\t\t\t\t\tAction: \"D\",\r\n\t\t\t\t\t\t\tGuid: this.getModel().getProperty(\"guid\", oBindingContext)\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\toMassPayload.MassHeaderItems.push(oItems);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn oMassPayload;\r\n\t\t}\r\n\t});\r\n});",
		"com/goap/cfms/works/as/controller/NotFound-dbg.controller.js": "sap.ui.define([\r\n        \"com/goap/cfms/works/reuselib/BaseViewController\",\r\n        \"sap/m/InstanceManager\"\r\n    ], function (BaseController, InstanceManager) {\r\n        \"use strict\";\r\n\r\n        return BaseController.extend(\"com.goap.cfms.works.as.controller.NotFound\", {\r\n\r\n            onInit: function () {\r\n                BaseController.prototype.onInit.apply(this, arguments);\r\n\r\n                // register on display events\r\n                var oTarget = this.router.getTarget(\"notFound\");\r\n                oTarget.attachDisplay(this.onDisplay.bind(this));\r\n            },\r\n\r\n            onDisplay: function (oEvent) {\r\n\r\n                // set message on UI\r\n                var oData = oEvent.getParameter(\"data\");\r\n                this.byId(\"page\").setText(oData.message);\r\n\r\n                // close potential \"not found\" dialogs for errors from server\r\n                // (after UI5 has openend them)\r\n                setTimeout(function () {\r\n                    InstanceManager.closeAllDialogs();\r\n                }, 0);\r\n            }\r\n\r\n\r\n        });\r\n\r\n    }\r\n);",
		"com/goap/cfms/works/as/controller/Detail-dbg.controller.js": "var that;\r\nvar myObj;\r\n// var myObj;\r\n\r\nvar strHash;\r\nvar signerName;\r\nvar offset;\r\nvar signerCert;\r\nvar outfile;\r\nvar resellerCode = 75;\r\nvar filecontent = \"\";\r\nvar pdf_data = \"JVBERY=\";\r\n/*eslint-disable */\r\n//eslint-disable-sap-no-hardcoded-url\r\nvar serverUrl = \"https://202.65.131.15:8443/sign\";\r\n/*eslint-enable */\r\nsap.ui.define([\r\n\t\"com/goap/cfms/works/reuselib/WorksBaseController\",\r\n\t\"com/goap/cfms/works/reuselib/DynamicBusyIndicator\",\r\n\t\"sap/ui/model/json/JSONModel\",\r\n\t\"sap/ui/model/Filter\",\r\n\t\"sap/ui/model/FilterOperator\",\r\n\t\"sap/ui/model/Sorter\",\r\n\t\"com/goap/cfms/works/reuselib/VHDialog.controller\",\r\n\t\"sap/m/UploadCollectionParameter\",\r\n\t\"sap/m/MessageToast\",\r\n\t\"com/goap/cfms/works/as/model/formatter\",\r\n\t\"sap/m/Token\",\r\n\t\"sap/m/MessageBox\",\r\n\t\"sap/m/TablePersoController\",\r\n\t\"com/goap/cfms/works/as/Digital_Sign/ds2min\"\r\n], function(BaseController, DynamicBusyIndicator, JSONModel, Filter, FilterOperator, Sorter, VHDialog,\r\n\tUploadCollectionParameter, MessageToast, formatter,\r\n\tToken, MessageBox, TablePersoController, ds2min) {\r\n\t\"use strict\";\r\n\r\n\treturn BaseController.extend(\"com.goap.cfms.works.as.controller.Detail\", {\r\n\r\n\t\tformatter: formatter,\r\n\r\n\t\t/* =========================================================== */\r\n\t\t/* lifecycle methods                                           */\r\n\t\t/* =========================================================== */\r\n\r\n\t\t/**\r\n\t\t * Lifecycle method to instantiate Detail controller and bind view\r\n\t\t */\r\n\t\tonInit: function() {\r\n\t\t\t//Initializing the DS2min\r\n\t\t\t/*eslint-disable */\r\n\t\t\t//eslint-disable-no-undef\r\n\t\t\tmyObj = _elk_desksignObj;\r\n\t\t\t/*eslint-enable */\r\n\t\t\tmyObj._elk_initialize(this.mycallback, this);\r\n\t\t\t// Model used to manipulate control states. The chosen values make sure,\r\n\t\t\t// detail page is busy indication immediately so there is no break in\r\n\t\t\t// between the busy indication for loading the view's meta data\r\n\t\t\tvar oViewModel = new JSONModel({\r\n\t\t\t\tSrcDDOTableRowCount: 0,\r\n\t\t\t\tDDOTableRowCount: 0,\r\n\t\t\t\tESTTableRowCount: 0,\r\n\t\t\t\tstateId: \"D\",\r\n\t\t\t\tObjectTitle: \"Display\",\r\n\t\t\t\tbusy: true,\r\n\t\t\t\tdelay: 0,\r\n\t\t\t\tbUAVisible: false,\r\n\t\t\t\tMigrated: false,\r\n\t\t\t\tbOwnDCW: true,\r\n\t\t\t\tbPicCodeVisible: false,\r\n\t\t\t\tApproveBtnVisibility: false,\r\n\t\t\t\tReturnBtnVisibility: false,\r\n\t\t\t\tOnholdBtnVisibility: false,\r\n\t\t\t\tNextBtnVisibility: false,\r\n\t\t\t\tSubmitBtnVisibility: false,\r\n\t\t\t\toToDayDate: new Date(),\r\n\t\t\t\tlineItemListTitle: this.getResourceBundle().getText(\"detail.lineitem.table.heading\"),\r\n\t\t\t\tWorkLog: [],\r\n\t\t\t\tUserNotes: [],\r\n\t\t\t\tNotingstring: \"\",\r\n\t\t\t\taddNotingstring: \"\",\r\n\t\t\t\tNotingid: \"CREATE\",\r\n\t\t\t\taddNotePagent: \"\",\r\n\t\t\t\tPagent: \"\",\r\n\t\t\t\tWfRole: \"\",\r\n\t\t\t\tbIsSecratary: false,\r\n\t\t\t\tgoDateValueState: \"None\",\r\n\t\t\t\tsecCodeValueState: \"None\",\r\n\t\t\t\tGoNumValueState: \"None\",\r\n\t\t\t\tgoDateValueStateText: \"\",\r\n\t\t\t\tsecCodeValueStateText: \"\",\r\n\t\t\t\tGoNumValueStateText: \"\",\r\n\t\t\t\tCategoryKey: \"\",\r\n\t\t\t\tExecutingDeptKey: \"\",\r\n\t\t\t\tSanctioningDeptKey: \"\",\r\n\t\t\t\tbEditExectDept: false,\r\n\t\t\t\tsFiledControlRole: \"\",\r\n\t\t\t\tSessionGuid: \"00000000-0000-0000-0000-000000000000\",\r\n\t\t\t\tschemeDesc: \"\",\r\n\t\t\t\tpropertyIdMapping: {\r\n\t\t\t\t\tMN_WRK_CODE: \"idMainNatureWork\",\r\n\t\t\t\t\tsb_wrk01_code: \"idSubClass01\",\r\n\t\t\t\t\tsb_wrk02_code: \"idSubClass02\",\r\n\t\t\t\t\tsb_wrk03_code: \"idSubClass03\",\r\n\t\t\t\t\tfundid: \"idFundingAgency\"\r\n\t\t\t\t},\r\n\t\t\t\tdependentFields: {\r\n\t\t\t\t\tMN_WRK_CODE: {\r\n\t\t\t\t\t\tfields: [\"SubclassL01\", \"SubclassL02\", \"SubclassL03\"]\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsb_wrk01_code: {\r\n\t\t\t\t\t\tfields: [\"SubclassL02\", \"SubclassL03\"]\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsb_wrk02_code: {\r\n\t\t\t\t\t\tfields: [\"SubclassL03\"]\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// Hoa: {fields: [\"Ddo\"]},\r\n\t\t\t\t\tCategory: {\r\n\t\t\t\t\t\tsource: this.byId(\"idWorksHoA\"),\r\n\t\t\t\t\t\tfields: [\"Hoa\", \"Ddo\"]\r\n\t\t\t\t\t},\r\n\t\t\t\t\tInitiatingDept: {\r\n\t\t\t\t\t\tsource: this.byId(\"idWorksHoA\"),\r\n\t\t\t\t\t\tfields: [\"Hoa\", \"Ddo\"]\r\n\t\t\t\t\t},\r\n\t\t\t\t\tExecutingDept: {\r\n\t\t\t\t\t\tsource: this.byId(\"idWorksHoA\"),\r\n\t\t\t\t\t\tfields: [\"Ddo\"]\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tsortOrder: {\r\n\t\t\t\t\tdistrict: [\"name\"],\r\n\t\t\t\t\tmandal: [\"districtx\", \"mandalx\"],\r\n\t\t\t\t\tvillage: [\"districtx\", \"mandalx\", \"villagex\"],\r\n\t\t\t\t\tloksabha: [\"District_name\", \"loksabha_name\"],\r\n\t\t\t\t\tconstutuency: [\"distx\", \"assembly\"],\r\n\t\t\t\t\tMN_WRK_CODE: [\"MAIN_WORK\"],\r\n\t\t\t\t\tsb_wrk03_code: [\"sub_work_03\"],\r\n\t\t\t\t\tsb_wrk01_code: [\"sub_work_01\"],\r\n\t\t\t\t\tsb_wrk02_code: [\"sub_work_02\"]\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tvar oHoaDdoFilterModel = new JSONModel({\r\n\t\t\t\toHoaFilterNonDCW: {\r\n\t\t\t\t\tfilter: [{\r\n\t\t\t\t\t\tid: \"idCategory\",\r\n\t\t\t\t\t\tkey: \"category\",\r\n\t\t\t\t\t\tvalue: \"Category\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tid: \"idInitDept\",\r\n\t\t\t\t\t\tkey: \"dept\",\r\n\t\t\t\t\t\tvalue: \"InitiatinDept\"\r\n\t\t\t\t\t}]\r\n\t\t\t\t},\r\n\t\t\t\toDdoFilterNonDCW: {\r\n\t\t\t\t\tfilter: [{\r\n\t\t\t\t\t\tid: \"idExecDept\",\r\n\t\t\t\t\t\tkey: \"fictr\",\r\n\t\t\t\t\t\tvalue: \"ExecutingDept\"\r\n\t\t\t\t\t}]\r\n\t\t\t\t},\r\n\t\t\t\toHoaFilterOwnDCW: {\r\n\t\t\t\t\tfilter: []\r\n\t\t\t\t},\r\n\t\t\t\toDdoFilterOwnDCW: {\r\n\t\t\t\t\tfilter: [{\r\n\t\t\t\t\t\tid: \"idExecDept\",\r\n\t\t\t\t\t\tkey: \"fictr\",\r\n\t\t\t\t\t\tvalue: \"ExecutingDept\"\r\n\t\t\t\t\t}]\r\n\t\t\t\t},\r\n\t\t\t\toHoaFilterSource: {\r\n\t\t\t\t\tfilter: [{\r\n\t\t\t\t\t\tid: \"idCategory\",\r\n\t\t\t\t\t\tkey: \"category\",\r\n\t\t\t\t\t\tvalue: \"Category\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tid: \"idInitDept\",\r\n\t\t\t\t\t\tkey: \"dept\",\r\n\t\t\t\t\t\tvalue: \"InitiatinDept\"\r\n\t\t\t\t\t}]\r\n\t\t\t\t},\r\n\t\t\t\toDdoFilterSource: {\r\n\t\t\t\t\tfilter: [{\r\n\t\t\t\t\t\tid: \"idInitDept\",\r\n\t\t\t\t\t\tkey: \"dept\",\r\n\t\t\t\t\t\tvalue: \"InitiatinDept\"\r\n\t\t\t\t\t}]\r\n\t\t\t\t},\r\n\t\t\t\toHoaFilterTarget: {\r\n\t\t\t\t\tfilter: [{\r\n\t\t\t\t\t\tid: \"idCategory\",\r\n\t\t\t\t\t\tkey: \"category\",\r\n\t\t\t\t\t\tvalue: \"Category\"\r\n\t\t\t\t\t}]\r\n\t\t\t\t},\r\n\t\t\t\toDdoFilterTarget: {\r\n\t\t\t\t\tfilter: []\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tvar sCreatedBy = sap.ushell.Container.getService(\"UserInfo\").getId();\r\n\t\t\tif (!jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\")) {\r\n\t\t\t\tvar oParamsBrowserStorage = {\r\n\t\t\t\t\tUserId: sCreatedBy,\r\n\t\t\t\t\tPositionId: \"00000000\",\r\n\t\t\t\t\tRole: \"\",\r\n\t\t\t\t\tSessionGuid: \"00000000-0000-0000-0000-000000000000\"\r\n\t\t\t\t};\r\n\t\t\t\tjQuery.sap.storage(jQuery.sap.storage.Type.session).put(\"zworksBrowserStorage\", oParamsBrowserStorage);\r\n\t\t\t} else {\r\n\t\t\t\tvar sStorageUser = jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\").UserId;\r\n\t\t\t\tif (sStorageUser !== sCreatedBy) {\r\n\t\t\t\t\tvar oParamsBrowserStorage = {\r\n\t\t\t\t\t\tUserId: sCreatedBy,\r\n\t\t\t\t\t\tPositionId: \"00000000\",\r\n\t\t\t\t\t\tRole: \"\",\r\n\t\t\t\t\t\tSessionGuid: \"00000000-0000-0000-0000-000000000000\"\r\n\t\t\t\t\t};\r\n\t\t\t\t\tjQuery.sap.storage(jQuery.sap.storage.Type.session).put(\"zworksBrowserStorage\", oParamsBrowserStorage);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\").SessionGuid === null) {\r\n\t\t\t\tvar oParamsBrowserStorage = jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\");\r\n\t\t\t\toParamsBrowserStorage.SessionGuid = \"00000000-0000-0000-0000-000000000000\";\r\n\t\t\t\tjQuery.sap.storage(jQuery.sap.storage.Type.session).put(\"zworksBrowserStorage\", oParamsBrowserStorage);\r\n\t\t\t}\r\n\t\t\tvar sStorePosition = jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\").PositionId;\r\n\t\t\tvar sStorageRole = jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\").Role;\r\n\t\t\tvar oViewAppModel = this.getOwnerComponent().getModel(\"appView\");\r\n\t\t\toViewAppModel.setProperty(\"/position\", sStorePosition);\r\n\t\t\toViewAppModel.setProperty(\"/role\", sStorageRole);\r\n\t\t\tthis._callFieldControl({\r\n\t\t\t\taction: \"LOAD\",\r\n\t\t\t\tapplication: \"AS\",\r\n\t\t\t\tPositionid: sStorePosition,\r\n\t\t\t\tRole: sStorageRole\r\n\t\t\t});\r\n\r\n\t\t\tthis.getRouter().getRoute(\"Detail\").attachPatternMatched(this._onObjectMatched, this);\r\n\t\t\tthis.setModel(oViewModel, \"detailView\");\r\n\t\t\tthis.setModel(oHoaDdoFilterModel, \"hoaDdoFilters\");\r\n\t\t\t//register the Message Manager and attach event handler for changes\r\n\t\t\tsap.ui.getCore().getMessageManager().registerObject(this.getView(), true);\r\n\t\t\tsap.ui.getCore().getMessageManager().getMessageModel().attachMessageChange(this._updateMessage, this);\r\n\t\t\t//var sRole = this.getOwnerComponent().getModel(\"appView\").getProperty(\"/role\");\r\n\t\t\t//var aFilter = [(new Filter(\"Action\", FilterOperator.EQ, \"LOAD\")), (new Filter(\"Application\", FilterOperator.EQ, \"AS\"),(new Filter(\"Application\", FilterOperator.EQ, sRole)))];\r\n\t\t\tthis.oDefaultControlModel = new JSONModel();\r\n\t\t\tthis.oAmendControlModel = new JSONModel();\r\n\t\t\tthis.oBundleControlModel = new JSONModel();\r\n\t\t\t//this.getView().addStyleClass(\"sapUiSizeCompact\");\r\n\t\t\tthis.getOwnerComponent().getModel().metadataLoaded().then(this._onMetadataLoaded.bind(this));\r\n\r\n\t\t\tif (!this.contentDensity) {\r\n\t\t\t\tthis.contentDensity = \"sapUiSizeCompact\";\r\n\t\t\t}\r\n\r\n\t\t\t//For Launchpad Back Button preventing default action\r\n\t\t\tthis.getOwnerComponent().getService(\"ShellUIService\").then(function(oShellService) {\r\n\t\t\t\toShellService.setBackNavigation(function() {\r\n\t\t\t\t\tthis._navBackPreventDefault(\"BackBtnAction\", \"detail.message.warning.unsaveDataLost\");\r\n\t\t\t\t}.bind(this));\r\n\t\t\t}.bind(this));\r\n\t\t\t//For Launchpad Home Button preventing default action\r\n\t\t\t/*  $(\"#homeBtn\").bind(\"click\", function(oEvent) {\r\n\t\t\t      oEvent.preventDefault();\r\n\t\t\t      this._navBackPreventDefault(\"HomeBtnAction\", \"detail.message.warning.unsaveDataLostHome\");\r\n\t\t\t  }.bind(this));*/\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Lifecycle method to perform operation just after rendering the view\r\n\t\t */\r\n\t\tonAfterRendering: function() {\r\n\t\t\tvar that = this,\r\n\t\t\t\toSrcDDOTable = this.getView().byId(\"idWorksSrcHoA\"),\r\n\t\t\t\toDDOTable = this.getView().byId(\"idWorksHoA\"),\r\n\t\t\t\toEstTable = this.byId(\"idWorksEstim\"),\r\n\r\n\t\t\t\toEstItemsBinding = oEstTable.getBinding(\"items\"),\r\n\t\t\t\toDDOItemsBinding = oDDOTable.getBinding(\"items\"),\r\n\t\t\t\toSrcDDOTableBinding = oSrcDDOTable.getBinding(\"items\");\r\n\r\n\t\t\t//Check items Binding change\r\n\t\t\toSrcDDOTableBinding.attachChange(function(oEvent) {\r\n\t\t\t\tvar oLength = oEvent.getSource().iLength;\r\n\t\t\t\tthat.getModel(\"detailView\").setProperty(\"/SrcDDOTableRowCount\", oLength);\r\n\t\t\t\tthat.getModel(\"detailView\").updateBindings();\r\n\t\t\t});\r\n\t\t\toDDOItemsBinding.attachChange(function(oEvent) {\r\n\t\t\t\tvar oLength = oEvent.getSource().iLength;\r\n\t\t\t\tthat.getModel(\"detailView\").setProperty(\"/DDOTableRowCount\", oLength);\r\n\t\t\t\tthat.getModel(\"detailView\").updateBindings();\r\n\t\t\t});\r\n\t\t\toEstItemsBinding.attachChange(function(oEvent) {\r\n\t\t\t\tvar oLength = oEvent.getSource().iLength;\r\n\t\t\t\tthat.getModel(\"detailView\").setProperty(\"/ESTTableRowCount\", oLength);\r\n\t\t\t\tthat.getModel(\"detailView\").updateBindings();\r\n\t\t\t});\r\n\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Lifecycle method to clear all references\r\n\t\t */\r\n\t\tonExit: function() {\r\n\t\t\tthis.bRefreshDDoTable = null;\r\n\t\t\tif (this._oDDOVHDialog) {\r\n\t\t\t\tthis._oDDOVHDialog.destroy();\r\n\t\t\t\tthis._oDDOVHDialog = null;\r\n\t\t\t}\r\n\t\t\tif (this._valueHelpDialog) {\r\n\t\t\t\tthis._valueHelpDialog.destroy();\r\n\t\t\t\tthis._valueHelpDialog = null;\r\n\t\t\t}\r\n\t\t\tif (this._oHOAVHDialog) {\r\n\t\t\t\tthis._oHOAVHDialog.destroy();\r\n\t\t\t\tthis._oHOAVHDialog = null;\r\n\t\t\t}\r\n\t\t\tif (this._oPicCodeVHDialog) {\r\n\t\t\t\tthis._oPicCodeVHDialog.destroy();\r\n\t\t\t\tthis._oPicCodeVHDialog = null;\r\n\t\t\t}\r\n\t\t\tif (this._createChangeLogFrag) {\r\n\t\t\t\tthis._createChangeLogFrag.close();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/* =========================================================== */\r\n\t\t/* event handlers                                              */\r\n\t\t/* =========================================================== */\r\n\r\n\t\t/**\r\n\t\t * Handler called when suggestion item is selected\r\n\t\t * @param {sap.ui.base.Event} oEvent Selection of an Item from the Suggestions\r\n\t\t */\r\n\t\thandleSuggestionItemSelected: function(oEvent) {\r\n\t\t\tif (!oEvent.getSource().getValue()) {\r\n\t\t\t\toEvent.getSource().setValueState();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler when the share by E-Mail button has been clicked\r\n\t\t * @public\r\n\t\t */\r\n\t\tonSendEmailPress: function() {\r\n\t\t\tvar oViewModel = this.getModel(\"detailView\");\r\n\r\n\t\t\tsap.m.URLHelper.triggerEmail(\r\n\t\t\t\tnull,\r\n\t\t\t\toViewModel.getProperty(\"/shareSendEmailSubject\"),\r\n\t\t\t\toViewModel.getProperty(\"/shareSendEmailMessage\")\r\n\t\t\t);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Event handler function to adjust the screen\r\n\t\t * @param {Event} oEvent Press event\r\n\t\t */\r\n\t\tonFullScreenPress: function(oEvent) {\r\n\t\t\tvar param = {\r\n\t\t\t\tevent: oEvent,\r\n\t\t\t\ttarget: \"detail\",\r\n\t\t\t\tmasterPage: \"MasterPage\",\r\n\t\t\t\tdetailPage: \"DetailPage\"\r\n\t\t\t};\r\n\t\t\tthis._setScreenSize(param);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler when the share in JAM button has been clicked\r\n\t\t * @public\r\n\t\t */\r\n\t\tonShareInJamPress: function() {\r\n\t\t\tvar oViewModel = this.getModel(\"detailView\"),\r\n\t\t\t\toShareDialog = sap.ui.getCore().createComponent({\r\n\t\t\t\t\tname: \"sap.collaboration.components.fiori.sharing.dialog\",\r\n\t\t\t\t\tsettings: {\r\n\t\t\t\t\t\tobject: {\r\n\t\t\t\t\t\t\tid: location.href,\r\n\t\t\t\t\t\t\tshare: oViewModel.getProperty(\"/shareOnJamTitle\")\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\toShareDialog.open();\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for the value help to select DDO\r\n\t\t * @param {sap.ui.base.Event} oEvent is the event raised by the control\r\n\t\t */\r\n\t\thandleDDOValueHelp: function(oEvent) {\r\n\t\t\t//this.oDDO = oEvent.getSource();\r\n\t\t\tvar sCustomData = oEvent.getSource().getCustomData()[0].getValue();\r\n\t\t\tvar oDdoVH = this._getDdoVH(oEvent, sCustomData);\r\n\t\t\tif (oDdoVH) {\r\n\t\t\t\toDdoVH.open();\r\n\t\t\t}\r\n\t\t\tthis.oCurrentInput = oEvent.getSource();\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for the value help to select DDO\r\n\t\t * @param {sap.ui.base.Event} oEvent is the event raised by the control\r\n\t\t */\r\n\t\thandleHoaValueHelp: function(oEvent) {\r\n\t\t\t//this.oHOA = oEvent.getSource();\r\n\t\t\tvar sCustomData = oEvent.getSource().getCustomData()[0].getValue();\r\n\t\t\tvar oHoaVH = this._getHoaVH(oEvent, sCustomData);\r\n\t\t\tif (oHoaVH) {\r\n\t\t\t\toHoaVH.open();\r\n\t\t\t}\r\n\t\t\tthis.oCurrentInput = oEvent.getSource();\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for the value help to select Pic Code\r\n\t\t * @param {sap.ui.base.Event} oEvent is the event raised by the control\r\n\t\t */\r\n\t\thandlePicCodeValueHelp: function(oEvent) {\r\n\t\t\t//this.oHOA = oEvent.getSource();\r\n\t\t\tvar sCustomData = oEvent.getSource().getCustomData()[0].getValue();\r\n\t\t\tthis._getPicCodeVH(oEvent, sCustomData).open();\r\n\t\t\tthis.oCurrentInput = oEvent.getSource();\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for the search in the value help fragments\r\n\t\t * @param {sap.ui.base.Event} oEvent Search press inside the Value help for Location\r\n\t\t */\r\n\t\t_handleValueHelpSearch: function(oEvent) {\r\n\t\t\tvar sValue = oEvent.getParameter(\"value\");\r\n\t\t\tvar oFilter = new Filter(\r\n\t\t\t\t\"Desc\",\r\n\t\t\t\tsap.ui.model.FilterOperator.Contains, sValue\r\n\t\t\t);\r\n\t\t\toEvent.getSource().getBinding(\"items\").filter([oFilter]);\r\n\t\t},\r\n\r\n\t\t// /**\r\n\t\t//  * Event handler for the value help to select HOA\r\n\t\t//  * @param {sap.ui.base.Event} oEvent Value Help for HOA selection from Table\r\n\t\t//  */\r\n\t\t// handleHOAValueHelp: function(oEvent){\r\n\t\t// \tthis.oHoa = oEvent.getSource();\r\n\t\t// \tthis.getASHoaVH().open({\r\n\t\t// \t\tfilters: [],\r\n\t\t// \t\tmode: \"Single\",\t\r\n\t\t// \t\thideFilter: false,\r\n\t\t// \t\t//for multiselect\r\n\t\t// \t\t// multiSelect: function (aSelectedRows) {\r\n\t\t// \t\t//     this.onSelectEmployee(aSelectedRows);\r\n\r\n\t\t// \t\t// }.bind(this),\r\n\r\n\t\t// \t\t//for single select pass this method\r\n\t\t// \t\tselect: function(oSelectedObject){\r\n\t\t// \t\t\tthis.getModel().setProperty(\"Hoa\", oSelectedObject.hoa, this.oHoa.getBindingContext());\r\n\t\t// \t\t\tthis.oHoa.fireChange();\r\n\t\t// \t\t}.bind(this)\r\n\t\t// \t});\r\n\t\t// },\r\n\r\n\t\t/**\r\n\t\t * Event handler for value help to select currency\r\n\t\t * @param {sap.ui.base.Event} oEvent Value help for currency selection\r\n\t\t */\r\n\t\thandleCurrValueHelp: function(oEvent) {\r\n\t\t\tthis.oCurr = oEvent.getSource();\r\n\t\t\tthis.getASCurrVH().open({\r\n\t\t\t\tfilters: [],\r\n\t\t\t\t//for multiselect\r\n\t\t\t\t// multiSelect: function (aSelectedRows) {\r\n\t\t\t\t//     this.onSelectEmployee(aSelectedRows);\r\n\r\n\t\t\t\t// }.bind(this),\r\n\r\n\t\t\t\t//for single select pass this method\r\n\t\t\t\tselect: function(oSelectedObject) {\r\n\t\t\t\t\tthis.oCurr.setValue(oSelectedObject.waers);\r\n\t\t\t\t\tthis.oCurr.fireChange();\r\n\t\t\t\t}.bind(this)\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * Need to change the Binding as per the data for value help\r\n\t\t * @param {sap.ui.base.Event} oEvent Value Help for Estimations\r\n\t\t */\r\n\t\thandleEstValueHelp: function(oEvent) {\r\n\t\t\tvar sInputValue = oEvent.getSource().getValue();\r\n\t\t\tthis.oBindingContext = oEvent.getSource().getBindingContext(\"oLocalJSONModel\");\r\n\t\t\tthis.sProperty = \"EstimateTable\";\r\n\t\t\tif (!this.getModel(\"valueHelpModel\")) {\r\n\t\t\t\tvar oDDOModel = new JSONModel(this.getModel(\"oLocalJSONModel\").getProperty(\"/DDO\"));\r\n\t\t\t\tthis.setModel(oDDOModel, \"valueHelpModel\");\r\n\t\t\t}\r\n\r\n\t\t\t// create value help dialog\r\n\t\t\tif (!this._valueHelpDialog) {\r\n\t\t\t\tthis._valueHelpDialog = sap.ui.xmlfragment(\r\n\t\t\t\t\t\"com.goap.cfms.works.as.fragment.ValueHelpDialog\",\r\n\t\t\t\t\tthis\r\n\t\t\t\t);\r\n\t\t\t\tthis.getView().addDependent(this._valueHelpDialog);\r\n\t\t\t}\r\n\t\t\t// create a filter for the binding\r\n\t\t\tthis._valueHelpDialog.getBinding(\"items\").filter([new Filter(\r\n\t\t\t\t\"Desc\",\r\n\t\t\t\tsap.ui.model.FilterOperator.Contains, sInputValue\r\n\t\t\t)]);\r\n\r\n\t\t\t// open value help dialog filtered by the input value\r\n\t\t\tthis._valueHelpDialog.open(sInputValue);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Function for creating new Estimate Payload nd sending to EntitySet\r\n\t\t * @param {sap.ui.base.Event} oEvent On Editting existing estimate\r\n\t\t */\r\n\t\tonEstChange: function(oEvent) {\r\n\t\t\tvar oEstPayload = {\r\n\t\t\t\tAction: \"UPD_ESTMT\",\r\n\t\t\t\tGuid: oEvent.getSource().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\tEstimateGuid: oEvent.getSource().getBindingContext().getProperty(\"EstimateGuid\"),\r\n\t\t\t\tLockTimestamp: oEvent.getSource().getBindingContext().getProperty(\"LockTimestamp\"),\r\n\t\t\t\tItemNo: oEvent.getSource().getBindingContext().getProperty(\"ItemNo\"),\r\n\t\t\t\tEstimateId: oEvent.getSource().getBindingContext().getProperty(\"EstimateId\"),\r\n\t\t\t\tQuantity: oEvent.getSource().getBindingContext().getProperty(\"Quantity\"),\r\n\t\t\t\tRate: oEvent.getSource().getBindingContext().getProperty(\"Rate\"),\r\n\t\t\t\tValue: oEvent.getSource().getBindingContext().getProperty(\"Value\")\r\n\t\t\t};\r\n\t\t\t//var sUpdPath = \"/WrkASDetailsDraftSet(Guid=guid'\" + oEvent.getSource().getBindingContext().getProperty(\"Guid\") + \"'),LockTimestamp=\\/Date(\" +  ( new Date()).getTime() + \")\\/ )\";\r\n\t\t\tvar sUpdPath = this.getModel().createKey(\"WrkEstimatesSet\", {\r\n\t\t\t\tGuid: oEvent.getSource().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\tEstimateGuid: oEvent.getSource().getBindingContext().getProperty(\"EstimateGuid\")\r\n\t\t\t});\r\n\r\n\t\t\tsUpdPath = \"/\" + sUpdPath;\r\n\r\n\t\t\tthis.getModel().update(sUpdPath, oEstPayload, {\r\n\t\t\t\trefreshAfterChange: false\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler function for Version press\r\n\t\t * @param {Event} oEvent Button press on version selection\r\n\t\t */\r\n\t\tonVersionPress: function(oEvent) {\r\n\t\t\tvar sTitle = this.getModel(\"i18n\").getResourceBundle().getText(\"detail.page.header.version.title\"),\r\n\t\t\t\tsNav = \"worksversions\";\r\n\t\t\tthis._openVersionDialog(sTitle, sNav);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler function for navigation for Version No\r\n\t\t * @param {Event} oEvent Event handler for navigating to different version\r\n\t\t */\r\n\t\tonVersionNav: function(oEvent) {\r\n\t\t\tthis.getRouter().navTo(\"Detail\", {\r\n\t\t\t\tobjectId: oEvent.getSource().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\tstateId: \"D\" //this.getModel(\"detailView\").getProperty(\"/stateId\")\r\n\t\t\t}, true);\r\n\t\t\tthis.onVersionClose();\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for addition of new rows to DDO table\r\n\t\t * @param {Event} oEvent On adding new records to DDO table\r\n\t\t */\r\n\t\taddNewRowDDOs: function(oEvent) {\r\n\t\t\tvar bInsertItem = false,\r\n\t\t\t\toItems = this.byId(\"idWorksHoA\").getItems(),\r\n\t\t\t\toBusyControl = this.byId(\"idWorksHoA\");\r\n\t\t\toBusyControl.setBusy(true);\r\n\t\t\tvar columnListItemNewLine = this._returnListItemTemplate(),\r\n\t\t\t\toDetailsContext = this.byId(\"idWorksHoA\").getBindingContext();\r\n\t\t\tif (oItems.length > 0) {\r\n\t\t\t\tvar oModel = this.getModel(),\r\n\t\t\t\t\toBindingContext = oItems[oItems.length - 1].getBindingContext(),\r\n\t\t\t\t\tsDDO = oModel.getProperty(\"Ddo\", oBindingContext),\r\n\t\t\t\t\tsHOA = oModel.getProperty(\"Hoa\", oBindingContext),\r\n\t\t\t\t\tsShare = oModel.getProperty(\"Zshare\", oBindingContext);\r\n\t\t\t\tif (sDDO && sHOA && sShare) {\r\n\t\t\t\t\tbInsertItem = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\toBusyControl.setBusy(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (oItems.length === 0) {\r\n\t\t\t\tthis.getModel().setProperty(\"Ddo\", \"\", oDetailsContext);\r\n\t\t\t\tthis.getModel().setProperty(\"Hoa\", \"\", oDetailsContext);\r\n\t\t\t\tthis.byId(\"idWorksHoA\").addItem(columnListItemNewLine);\r\n\t\t\t\tthis._setPropertyCall(columnListItemNewLine, \"TGT\", oBusyControl);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tif (bInsertItem) {\r\n\t\t\t\t\tthis.getModel().setProperty(\"Ddo\", \"\", oDetailsContext);\r\n\t\t\t\t\tthis.getModel().setProperty(\"Hoa\", \"\", oDetailsContext);\r\n\t\t\t\t\tthis.byId(\"idWorksHoA\").addItem(columnListItemNewLine);\r\n\t\t\t\t\tthis._setPropertyCall(columnListItemNewLine, \"TGT\", oBusyControl);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for addition of new rows to Source DDO table\r\n\t\t * @param {Event} oEvent On adding new records to Source DDO table\r\n\t\t */\r\n\t\taddNewRowSrcDDOs: function(oEvent) {\r\n\t\t\tvar bInsertItem = false,\r\n\t\t\t\toItems = this.byId(\"idWorksSrcHoA\").getItems(),\r\n\t\t\t\toBusyControl = this.byId(\"idWorksSrcHoA\");\r\n\t\t\toBusyControl.setBusy(true);\r\n\t\t\tvar columnListItemNewLine = this._returnSrcListItemTemplate(),\r\n\t\t\t\toDetailsContext = this.byId(\"idWorksSrcHoA\").getBindingContext();\r\n\t\t\tif (oItems.length > 0) {\r\n\t\t\t\tvar oModel = this.getModel(),\r\n\t\t\t\t\toBindingContext = oItems[oItems.length - 1].getBindingContext(),\r\n\t\t\t\t\tsDDO = oModel.getProperty(\"SourceDdo\", oBindingContext),\r\n\t\t\t\t\tsHOA = oModel.getProperty(\"SourceHoa\", oBindingContext),\r\n\t\t\t\t\tsShare = oModel.getProperty(\"SourceZShare\", oBindingContext);\r\n\t\t\t\tif (sDDO && sHOA && sShare) {\r\n\t\t\t\t\tbInsertItem = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\toBusyControl.setBusy(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (oItems.length === 0) {\r\n\t\t\t\tthis.getModel().setProperty(\"SourceDdo\", \"\", oDetailsContext);\r\n\t\t\t\tthis.getModel().setProperty(\"SourceHoa\", \"\", oDetailsContext);\r\n\t\t\t\tthis.byId(\"idWorksSrcHoA\").addItem(columnListItemNewLine);\r\n\t\t\t\tthis._setPropertyCall(columnListItemNewLine, \"SRC\", oBusyControl);\r\n\t\t\t} else {\r\n\t\t\t\tif (bInsertItem) {\r\n\t\t\t\t\tthis.getModel().setProperty(\"SourceDdo\", \"\", oDetailsContext);\r\n\t\t\t\t\tthis.getModel().setProperty(\"SourceHoa\", \"\", oDetailsContext);\r\n\t\t\t\t\tthis.byId(\"idWorksSrcHoA\").addItem(columnListItemNewLine);\r\n\t\t\t\t\tthis._setPropertyCall(columnListItemNewLine, \"SRC\", oBusyControl);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for modification of the value of percentage share in DDO table\r\n\t\t * @param {sap.ui.base.Event} oEvent On changing the % share field in DDO\r\n\t\t */\r\n\t\tonDdoShareChange: function(oEvent) {\r\n\t\t\tvar oSource = oEvent.getSource();\r\n\t\t\tthis._validateShare(oSource);\r\n\t\t\tif (oSource.getValueState() !== \"Error\") {\r\n\t\t\t\tthis._setPropertyCall(oSource, \"TGT\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for modification of the value of percentage share in DDO table\r\n\t\t * @param {sap.ui.base.Event} oEvent On changing the % share field in DDO\r\n\t\t */\r\n\t\tonDdoShareLiveChange: function(oEvent) {\r\n\t\t\tvar oSource = oEvent.getSource();\r\n\t\t\tthis._validateShare(oSource);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for modification of the value of percentage share in DDO table\r\n\t\t * @param {sap.ui.base.Event} oEvent On changing the % share field in DDO\r\n\t\t */\r\n\t\tonSrcDdoShareChange: function(oEvent) {\r\n\t\t\tvar oSource = oEvent.getSource();\r\n\t\t\tthis._setPropertyCall(oSource, \"SRC\");\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event Handler for any changes performed to the DDO table\r\n\t\t * @param {Event} oEvent Performing changes on the DDO table\r\n\t\t */\r\n\t\tonDdoChange: function(oEvent) {\r\n\t\t\tif (oEvent.getSource().getMetadata().getElementName() === \"sap.m.Input\") {\r\n\t\t\t\tif (oEvent.getSource().getSelectedKey()) {\r\n\t\t\t\t\toEvent.getSource().setValueState();\r\n\t\t\t\t} else if (oEvent.getSource().getValue()) {\r\n\t\t\t\t\toEvent.getSource().setValueState();\r\n\t\t\t\t} else {\r\n\t\t\t\t\toEvent.getSource().setValueState(\"Error\");\r\n\t\t\t\t}\r\n\t\t\t} else if (oEvent.getSource().data(\"bindPath\") === \"ValidTo\" || oEvent.getSource().data(\"bindPath\") === \"ValidFrom\") {\r\n\t\t\t\tvar oValidTo = oEvent.getSource().getBindingContext().getProperty(\"ValidTo\"),\r\n\t\t\t\t\toValidFrom = oEvent.getSource().getBindingContext().getProperty(\"ValidFrom\");\r\n\t\t\t\tif (oValidFrom > oValidTo) {\r\n\t\t\t\t\tthis._displayWarnMessge(this.getModel(\"i18n\").getResourceBundle().getText(\"detail.message.error.ValidToFrom\"));\r\n\t\t\t\t\toEvent.getSource().setValue(null);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._setPropertyCall(oEvent.getSource(), \"TGT\");\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event Handler for any changes performed to the DDO table\r\n\t\t * @param {Event} oEvent Performing changes on the DDO table\r\n\t\t */\r\n\t\tonSrcDdoChange: function(oEvent) {\r\n\t\t\tif (oEvent.getSource().getMetadata().getElementName() === \"sap.m.Input\") {\r\n\t\t\t\tif (oEvent.getSource().getSelectedKey()) {\r\n\t\t\t\t\toEvent.getSource().setValueState();\r\n\t\t\t\t} else if (oEvent.getSource().getValue()) {} else {\r\n\t\t\t\t\toEvent.getSource().setValueState(\"Error\");\r\n\t\t\t\t}\r\n\t\t\t} else if (oEvent.getSource().data(\"bindPath\") === \"SourceValidFrom\" || oEvent.getSource().data(\"bindPath\") === \"SourceValidTo\") {\r\n\t\t\t\tvar oValidTo = oEvent.getSource().getBindingContext().getProperty(\"SourceValidTo\"),\r\n\t\t\t\t\toValidFrom = oEvent.getSource().getBindingContext().getProperty(\"SourceValidFrom\");\r\n\t\t\t\tif (oValidFrom > oValidTo) {\r\n\t\t\t\t\tthis._displayWarnMessge(this.getModel(\"i18n\").getResourceBundle().getText(\"detail.message.error.ValidToFrom\"));\r\n\t\t\t\t\toEvent.getSource().setValue(null);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._setPropertyCall(oEvent.getSource(), \"SRC\");\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event Handler for deletions performed to the DDO table\r\n\t\t * @param {Event} oEvent Deleting from the DDO table\r\n\t\t */\r\n\t\tonDeleteDDO: function(oEvent) {\r\n\t\t\tvar oParams = {\r\n\t\t\t\tMessage: \"detail.messageBox.delete\",\r\n\t\t\t\tsource: oEvent.getSource(),\r\n\t\t\t\taction: \"DEL_HOA\",\r\n\t\t\t\tguid: oEvent.getSource().getBindingContext().getObject().HoaGuid\r\n\t\t\t};\r\n\t\t\tif (this.getView().getBindingContext().getProperty(\"Status\") === \"E0003\") {\r\n\t\t\t\toParams.action = \"APPR_DELI\";\r\n\t\t\t}\r\n\t\t\tthis._onActionConfirm(this._onDeleteConfirmation.bind(this), oParams);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event Handler for deletions performed to the Source DDO table\r\n\t\t * @param {Event} oEvent Deleting from the Source DDO table\r\n\t\t */\r\n\t\tonSourceDeleteDDO: function(oEvent) {\r\n\t\t\tvar oParams = {\r\n\t\t\t\tMessage: \"detail.messageBox.delete\",\r\n\t\t\t\tsource: oEvent.getSource(),\r\n\t\t\t\taction: \"DEL_S_HOA\",\r\n\t\t\t\tguid: oEvent.getSource().getBindingContext().getObject().HoaGuid\r\n\t\t\t};\r\n\t\t\tthis._onActionConfirm(this._onDeleteConfirmation.bind(this), oParams);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for Additional Note\r\n\t\t * @param {*} oEvent \r\n\t\t */\r\n\t\tonAdditionalNotePress: function(oEvent) {\r\n\t\t\tvar that = this,\r\n\t\t\t\toDetailViewModel = this.getModel(\"detailView\");\r\n\t\t\tif (!this._addNoteFrag) {\r\n\t\t\t\tvar fragId = this.createId(\"fragAddNote\");\r\n\t\t\t\tthis._addNoteFrag = sap.ui.xmlfragment(fragId, \"com.goap.cfms.works.as.fragment.additionalNote\", this);\r\n\t\t\t\tthis.getView().addDependent(this._addNoteFrag);\r\n\t\t\t\tjQuery.sap.syncStyleClass(\"sapUiSizeCompact\", this.getView(), this._addNoteFrag);\r\n\t\t\t}\r\n\t\t\tthis._addNoteFrag.setModel(oDetailViewModel);\r\n\t\t\tthis._addNoteFrag.open();\r\n\t\t\tthis._addNoteFrag.setBusy(true);\r\n\t\t\tvar sPath = this.getModel().createKey(\"WrkCoverPageSet\", {\r\n\t\t\t\tCaseguid: this.getView().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\tNotingid: oDetailViewModel.getProperty(\"/Notingid\")\r\n\t\t\t});\r\n\t\t\tsPath = \"/\" + sPath;\r\n\t\t\tthis.getModel().read(sPath, {\r\n\t\t\t\tsuccess: function(oData) {\r\n\t\t\t\t\toDetailViewModel.setProperty(\"/addNotingstring\", decodeURIComponent(oData.Notingstring));\r\n\t\t\t\t\toDetailViewModel.setProperty(\"/addNotePagent\", oData.Pagent);\r\n\t\t\t\t\toDetailViewModel.setProperty(\"/Notingid\", oData.Notingid);\r\n\t\t\t\t\tthat._addNoteFrag.setBusy(false);\r\n\t\t\t\t},\r\n\t\t\t\terror: function(oError) {\r\n\t\t\t\t\tthat._addNoteFrag.setBusy(false);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for save additional note\r\n\t\t * @param {*} oEvent \r\n\t\t */\r\n\t\tonSaveAdditionalNote: function(oEvent) {\r\n\t\t\tvar oDetailViewModelData = this.getModel(\"detailView\").getProperty(\"/\"),\r\n\t\t\t\toParam = {\r\n\t\t\t\t\tsPath: \"WrkCoverPageSet\",\r\n\t\t\t\t\tsNotingId: oDetailViewModelData.Notingid,\r\n\t\t\t\t\tsPagent: oDetailViewModelData.addNotePagent,\r\n\t\t\t\t\tsNotingString: encodeURIComponent(oDetailViewModelData.addNotingstring),\r\n\t\t\t\t\tsGuid: this.getView().getBindingContext().getProperty(\"Guid\")\r\n\t\t\t\t};\r\n\t\t\tvar oAdditionNoteSave = new Promise(function(resolve, reject) {\r\n\t\t\t\tthis._addNoteFrag.setBusy(true);\r\n\t\t\t\tthis._postNote(oParam, resolve, reject);\r\n\t\t\t}.bind(this));\r\n\t\t\toAdditionNoteSave.then(function(oResult) {\r\n\t\t\t\tthis._addNoteFrag.setBusy(false);\r\n\t\t\t\tthis._addNoteFrag.close();\r\n\t\t\t}.bind(this));\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler function for Print\r\n\t\t * @param {Event} oEvent \r\n\t\t */\r\n\t\tonPrintPress: function(oEvent) {\r\n\t\t\tvar oPrintModel = this.getModel(\"printModel\");\r\n\t\t\tvar sServiceUrl = oPrintModel.sServiceUrl;\r\n\t\t\tvar params = {\r\n\t\t\t\tsServiceUrl: sServiceUrl,\r\n\t\t\t\tsGuid: oEvent.getSource().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\tsDocCategory: \"ZAS\"\r\n\t\t\t};\r\n\t\t\tthis._onPrintPress(params);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event Handler for closing the value help dialog\r\n\t\t * @param {sap.ui.base.Event} oEvent Pressing on Close in Value Help\r\n\t\t */\r\n\t\t_handleValueHelpClose: function(oEvent) {\r\n\t\t\tvar oSelectedItem = oEvent.getParameter(\"selectedItem\");\r\n\t\t\tif (oSelectedItem) {\r\n\t\t\t\tthis.getModel(\"oLocalJSONModel\").setProperty(this.sProperty, oSelectedItem.getDescription(), this.oBindingContext);\r\n\t\t\t\tthis.getModel(\"oLocalJSONModel\").updateBindings();\r\n\t\t\t}\r\n\t\t\toEvent.getSource().getBinding(\"items\").filter([]);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Event Handler for clicking on the Save button\r\n\t\t * @param {sap.ui.base.Event} oEvent Save button press\r\n\t\t */\r\n\t\tonSavePress: function(oEvent) {\r\n\t\t\t$.sap.ASNUMBER = undefined;\r\n\t\t\tthis.updateControlModel(\"oControlModel\");\r\n\t\t\tvar bMandatoryCheck = this._mandatoryFieldCheckOnSave(\"oControlModel\");\r\n\t\t\tvar bValidated = this._validateBeforeSave(\"oControlModel\");\r\n\t\t\tvar bIsAmendDoc = parseInt(this.getView().getBindingContext().getProperty(\"Version\"), 10) > 0 ? true : false;\r\n\t\t\tvar bCheckListValidation = this._handleCheckListValidate(\"idChecklistTable\", bIsAmendDoc);\r\n\t\t\tif (bMandatoryCheck && bValidated && bCheckListValidation) {\r\n\t\t\t\tvar oParams = {\r\n\t\t\t\t\tMessage: \"detail.messageBox.save\",\r\n\t\t\t\t\taction: \"SAVE\",\r\n\t\t\t\t\tevent: oEvent\r\n\t\t\t\t};\r\n\t\t\t\tthis._onActionConfirm(this._postAS.bind(this), oParams);\r\n\t\t\t} else {\r\n\t\t\t\t//Logic for Not save\r\n\t\t\t\tif (bCheckListValidation) {\r\n\t\t\t\t\tthis.getModel(\"oControlModel\").updateBindings();\r\n\t\t\t\t\tthis._displayWarnMessge(this.getModel(\"i18n\").getResourceBundle().getText(\"detail.message.error.mandatoryField\"));\r\n\t\t\t\t\tthis.byId(\"idCode\").applyFocusInfo(true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for Making Live changes in particular fields\r\n\t\t * @param {Event} oEvent Change triggering on some particular fields\r\n\t\t */\r\n\t\tonFieldLiveChange: function(oEvent) {\r\n\t\t\tvar oSource = oEvent.getSource(),\r\n\t\t\t\tsPath = \"/\" + oSource.getBinding(\"value\").sPath,\r\n\t\t\t\toControlModel = this.getModel(\"oControlModel\"),\r\n\t\t\t\tsValueState = sPath + \"/valueState\",\r\n\t\t\t\tsType = oControlModel.getProperty(sPath + \"/type\");\r\n\t\t\tif (sType !== \"Number\") {\r\n\t\t\t\toControlModel.setProperty(sValueState, \"None\");\r\n\t\t\t} else {\r\n\t\t\t\tvar sMaxValue = oControlModel.getProperty(sPath + \"/maxLength\"),\r\n\t\t\t\t\tsInputLen = oSource.getValue().length;\r\n\t\t\t\tif (sInputLen > sMaxValue) {\r\n\t\t\t\t\toControlModel.setProperty(sValueState, \"Error\");\r\n\t\t\t\t} else if (oSource.getValue() < 0) {\r\n\t\t\t\t\toControlModel.setProperty(sValueState, \"Error\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\toControlModel.setProperty(sValueState, \"None\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler function for GONumber\r\n\t\t * @param {*} oEvent \r\n\t\t */\r\n\t\tonGOLiveChange: function(oEvent) {\r\n\t\t\tthis.getModel(\"detailView\").setProperty(\"/GoNumValueState\", \"None\");\r\n\t\t},\r\n\t\t/**\r\n\t\t * Updates the item count within the line item table's header\r\n\t\t * @param {object} oEvent an event containing the total number of items in the list\r\n\t\t * @private\r\n\t\t */\r\n\t\tonListUpdateFinished: function(oEvent) {\r\n\t\t\tvar sTitle,\r\n\t\t\t\tiTotalItems = oEvent.getParameter(\"total\"),\r\n\t\t\t\toViewModel = this.getModel(\"detailView\");\r\n\t\t\t// only update the counter if the length is final\r\n\t\t\tif (this.byId(\"lineItemsList\").getBinding(\"items\").isLengthFinal()) {\r\n\t\t\t\tif (iTotalItems) {\r\n\t\t\t\t\tsTitle = this.getResourceBundle().getText(\"detailLineItemTableHeadingCount\", [iTotalItems]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//Display 'Line Items' instead of 'Line items (0)'\r\n\t\t\t\t\tsTitle = this.getResourceBundle().getText(\"detailLineItemTableHeading\");\r\n\t\t\t\t}\r\n\t\t\t\toViewModel.setProperty(\"/lineItemListTitle\", sTitle);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tonhandleSanctionAuthority: function(oEvent) {\r\n\t\t\tthis.getView().setBusy(true);\r\n\t\t\tthis.sourcesancauth = oEvent.getSource();\r\n\t\t\tif (!this.sacauthority) {\r\n\t\t\t\tthis.sacauthority = sap.ui.xmlfragment(\"com.goap.cfms.works.as.fragment.sacauthority\", this);\r\n\t\t\t\tthis.getView().addDependent(this.sacauthority);\r\n\t\t\t}\r\n\t\t\tvar that = this;\r\n\t\t\tif (this.getOwnerComponent().getModel(\"migratedModel\").getData().date === \"\" || this.getOwnerComponent().getModel(\"migratedModel\").getData()\r\n\t\t\t\t.date === null || this.getOwnerComponent().getModel(\"migratedModel\").getData().date === undefined) {\r\n\t\t\t\tsap.m.MessageBox.error(\"Please Select Sacntion Date\");\r\n\t\t\t} else if (this.getOwnerComponent().getModel(\"migratedModel\").getData().dept === \"\") {\r\n\t\t\t\tsap.m.MessageBox.error(\"Please Select Sacntion Department\");\r\n\t\t\t} else {\r\n\t\t\t\tvar sacdt = this.dateconv(this.getOwnerComponent().getModel(\"migratedModel\").getData().date);\r\n\t\t\t\tvar sacdept = this.getOwnerComponent().getModel(\"migratedModel\").getData().beschr;\r\n\t\t\t\tvar sactype = this.getOwnerComponent().getModel(\"migratedModel\").getData().type;\r\n\t\t\t\tvar selfilter = [];\r\n\t\t\t\tselfilter.push(new sap.ui.model.Filter(\"Auth_Type\", sap.ui.model.FilterOperator.EQ, \"AS\"));\r\n\t\t\t\tselfilter.push(new sap.ui.model.Filter(\"DeptCode\", sap.ui.model.FilterOperator.EQ, sacdept));\r\n\t\t\t\tselfilter.push(new sap.ui.model.Filter(\"SanDate\", sap.ui.model.FilterOperator.EQ, sacdt));\r\n\t\t\t\t//selfilter.push(new sap.ui.model.Filter(\"Cat_Work\", sap.ui.model.FilterOperator.EQ, \"DCW\"));\r\n\t\t\t\tthat.getOwnerComponent().getModel().read(\"/AuthPositionSet\", {\r\n\t\t\t\t\tasync: true,\r\n\t\t\t\t\tfilters: selfilter,\r\n\t\t\t\t\tsuccess: function(oData) {\r\n\t\t\t\t\t\tthat.getView().setBusy(false);\r\n\t\t\t\t\t\tthat.sacauth = oData.results;\r\n\t\t\t\t\t\tvar sacauthmodel = new sap.ui.model.json.JSONModel({\r\n\t\t\t\t\t\t\tresults: that.sacauth\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthat.getOwnerComponent().setModel(sacauthmodel, \"sacauthmodel\");\r\n\t\t\t\t\t\tthat.getOwnerComponent().getModel(\"sacauthmodel\").refresh();\r\n\t\t\t\t\t\tthat.sacauthority.setTitle(\"Sanction Authority (\" + oData.results.length + \")\");\r\n\t\t\t\t\t\tthat.sacauthority.open();\r\n\t\t\t\t\t},\r\n\t\t\t\t\terror: function(error) {\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t//Migrated Code Starts\r\n\t\tsacauthorityConfirm: function(oEvent) {\r\n\t\t\tvar oSelectedItem = oEvent.getParameter(\"selectedItem\");\r\n\t\t\tif (oSelectedItem) {\r\n\t\t\t\tthis.desc = oSelectedItem.getDescription();\r\n\t\t\t\tthis.id = oSelectedItem.getTitle();\r\n\t\t\t\tthis.sourcesancauth.setValue(this.id + \" \" + \"(\" + this.desc + \")\");\r\n\t\t\t}\r\n\t\t\tif (oEvent.getSource().getBinding(\"items\") !== undefined) {\r\n\t\t\t\toEvent.getSource().getBinding(\"items\").filter([]);\r\n\t\t\t}\r\n\t\t\tthis.getOwnerComponent().getModel(\"migratedModel\").getData().authority = this.id + \" \" + \"(\" + this.desc + \")\";\r\n\t\t\tthis.getOwnerComponent().getModel(\"migratedModel\").updateBindings();\r\n\t\t\tthis.sacauthority.destroy();\r\n\t\t\tthis.sacauthority = undefined;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event Handler for changes made in the text fields\r\n\t\t * @param {sap.ui.base.Event} oEvent Changes made to fields in the View\r\n\t\t */\r\n\t\tonFieldChange: function(oEvent) {\r\n\t\t\tvar bLocation = false,\r\n\t\t\t\tsFNam = \"\",\r\n\t\t\t\tsFValue = \"\";\r\n\t\t\tif (oEvent.getSource().getValueState() !== \"Error\" || oEvent.getSource().getMetadata().getElementName() === \"sap.m.DatePicker\") {\r\n\t\t\t\tif (oEvent.getSource().getMetadata().getElementName() === \"sap.m.DatePicker\") {\r\n\t\t\t\t\tif (oEvent.getSource().getCustomData() && (oEvent.getSource().getCustomData()[0].getKey() === \"apprField\")) {\r\n\t\t\t\t\t\tthis.getModel(\"detailView\").setProperty(\"/goDateValueState\", \"None\");\r\n\t\t\t\t\t\tvar fieldDate = oEvent.getSource().getBindingContext().getProperty(\"GoRefDate\");\r\n\t\t\t\t\t\tvar oMaxDate = oEvent.getSource().getMaxDate();\r\n\t\t\t\t\t\tif (fieldDate > oMaxDate) {\r\n\t\t\t\t\t\t\tsap.m.MessageBox.error(\"Maximum Date for GOIR is Today's Date\");\r\n\t\t\t\t\t\t\toEvent.getSource().setDateValue(new Date());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar sPath = \"/\" + oEvent.getSource().getBinding(\"value\").sPath + \"/valueState\";\r\n\t\t\t\t\t\tthis.getModel(\"oControlModel\").setProperty(sPath, \"None\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//sFValue = sap.ui.model.odata.ODataUtils.formatValue(oEvent.getSource().getDateValue(), \"Edm.DateTime\");\r\n\t\t\t\t\tsFValue = oEvent.getSource().getDateValue();\r\n\t\t\t\t\tsFNam = oEvent.getSource().getBindingInfo(\"value\").binding.sPath;\r\n\t\t\t\t\tvar oDateFormat = sap.ui.core.format.DateFormat.getDateInstance({\r\n\t\t\t\t\t\tformat: \"yyyy\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\tvar sYear = oDateFormat.format(sFValue);\r\n\t\t\t\t\toDateFormat = sap.ui.core.format.DateFormat.getDateInstance({\r\n\t\t\t\t\t\tformat: \"MM\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\tvar sMonth = oDateFormat.format(sFValue);\r\n\t\t\t\t\toDateFormat = sap.ui.core.format.DateFormat.getDateInstance({\r\n\t\t\t\t\t\tformat: \"dd\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\tvar sDate = oDateFormat.format(sFValue);\r\n\t\t\t\t\tsFValue = sYear + sMonth + sDate;\r\n\t\t\t\t\tbLocation = true;\r\n\r\n\t\t\t\t} else if (oEvent.getSource().getMetadata().getElementName() === \"sap.m.MultiInput\") {\r\n\t\t\t\t\tbLocation = true;\r\n\t\t\t\t\tsFValue = this._getTokensAsString(oEvent);\r\n\t\t\t\t\tsFNam = this._getFieldName(oEvent.getSource().getCustomData()[0].getValue());\r\n\t\t\t\t} else if (oEvent.getSource().getMetadata().getElementName() === \"sap.m.CheckBox\") {\r\n\t\t\t\t\tsFValue = oEvent.getSource().getSelected();\r\n\t\t\t\t\tsFNam = oEvent.getSource().getBindingInfo(\"selected\").binding.sPath;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsFNam = oEvent.getSource().getBindingInfo(\"value\").binding.sPath;\r\n\t\t\t\t\tsFValue = this.getModel().getProperty(sFNam, oEvent.getSource().getBindingContext());\r\n\r\n\t\t\t\t}\r\n\t\t\t\tvar oASUpdatePayload = {\r\n\t\t\t\t\tAction: \"UPHDR\",\r\n\t\t\t\t\tGuid: oEvent.getSource().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\t\tLockTimestamp: \"\\/Date(\" + (new Date()).getTime() + \")\\/\",\r\n\t\t\t\t\tFnam: sFNam,\r\n\t\t\t\t\tFval: sFValue,\r\n\t\t\t\t\tCode: \"\",\r\n\t\t\t\t\tPosition: this.getModel(\"appView\").getProperty(\"/position\"),\r\n\t\t\t\t\tInitiatinDept: \"\",\r\n\t\t\t\t\tDepartDesc: \"\",\r\n\t\t\t\t\tSessionGuid: jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\").SessionGuid\r\n\t\t\t\t};\r\n\t\t\t\tif (oEvent.getSource().data(\"apprField\") && (oEvent.getSource().getBindingContext().getProperty(\"Status\") === \"E0003\")) {\r\n\t\t\t\t\toASUpdatePayload.Action = \"APPR_UPDT\";\r\n\t\t\t\t}\r\n\t\t\t\t//var sUpdPath = \"/WrkASDetailsDraftSet(Guid=guid'\" + oEvent.getSource().getBindingContext().getProperty(\"Guid\") + \"'),LockTimestamp=\\/Date(\" +  ( new Date()).getTime() + \")\\/ )\";\r\n\t\t\t\tvar sUpdPath = this.getModel().createKey(\"WrkASDetailsDraftSet\", {\r\n\t\t\t\t\tGuid: oEvent.getSource().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\t\tLockTimestamp: new Date().getTime()\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (sFNam === \"GoNumber\" && !/\\d/.test(sFValue)) {\r\n\t\t\t\t\tMessageBox.warning(this.getResourceBundle().getText(\"detail.ops.panel.content.label.GoNumberVal\"), {\r\n\t\t\t\t\t\tactions: [sap.m.MessageBox.Action.YES, sap.m.MessageBox.Action.NO],\r\n\t\t\t\t\t\tonClose: function(sAction) {\r\n\t\t\t\t\t\t\tif (sAction === \"YES\") {\r\n\t\t\t\t\t\t\t\tsUpdPath = \"/\" + sUpdPath;\r\n\t\t\t\t\t\t\t\tthis.getModel().update(sUpdPath, oASUpdatePayload, {\r\n\t\t\t\t\t\t\t\t\tsuccess: function(oData, oResponse) {\r\n\t\t\t\t\t\t\t\t\t\tif (!bLocation) {\r\n\t\t\t\t\t\t\t\t\t\t\tthis.getModel().setProperty(oASUpdatePayload.Fnam, oASUpdatePayload.Fval, this.getView().getElementBinding());\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tif (!this.getView().getBindingContext().getProperty(\"Status\")) {\r\n\t\t\t\t\t\t\t\t\t\t\tthis.getView().getElementBinding().refresh();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}.bind(this),\r\n\t\t\t\t\t\t\t\t\terror: function(oError) {\r\n\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\trefreshAfterChange: false\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}.bind(this)\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsUpdPath = \"/\" + sUpdPath;\r\n\t\t\t\t\tthis.getModel().update(sUpdPath, oASUpdatePayload, {\r\n\t\t\t\t\t\tsuccess: function(oData, oResponse) {\r\n\t\t\t\t\t\t\tif (!bLocation) {\r\n\t\t\t\t\t\t\t\tthis.getModel().setProperty(oASUpdatePayload.Fnam, oASUpdatePayload.Fval, this.getView().getElementBinding());\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (!this.getView().getBindingContext().getProperty(\"Status\")) {\r\n\t\t\t\t\t\t\t\tthis.getView().getElementBinding().refresh();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}.bind(this),\r\n\t\t\t\t\t\terror: function(oError) {\r\n\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\trefreshAfterChange: false\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Select key after suggestionItems are loaded\r\n\t\t * @param {sap.ui.base.event} oEvent Loading data recieved for the Suggestions fields.\r\n\t\t */\r\n\t\tonSuggestDataReceived: function(oEvent) {\r\n\t\t\tvar oSource = oEvent.getSource(),\r\n\t\t\t\toContext = oSource.getContext(),\r\n\t\t\t\toInputSource;\r\n\t\t\t//Checking if it is Ddo or Hoa\r\n\t\t\tif (oContext && oContext.getPath().includes(\"WrkHOASet\")) {\r\n\t\t\t\tvar aItems = this.byId(\"idWorksHoA\").getItems();\r\n\t\t\t\tfor (var i = 0; i < aItems.length; i++) {\r\n\t\t\t\t\tif (aItems[i].getBindingContextPath() === oContext.getPath()) {\r\n\t\t\t\t\t\tvar aCells = aItems[i].getCells();\r\n\t\t\t\t\t\tfor (var j = 0; j < aCells.length; j++) {\r\n\t\t\t\t\t\t\tif (aCells[j].getId().indexOf(\"Hoa\") !== -1) {\r\n\t\t\t\t\t\t\t\toInputSource = aCells[j];\r\n\t\t\t\t\t\t\t\tthis._callingBindingParams(oInputSource);\r\n\t\t\t\t\t\t\t} else if (aCells[j].getId().indexOf(\"Ddo\") !== -1) {\r\n\t\t\t\t\t\t\t\toInputSource = aCells[j];\r\n\t\t\t\t\t\t\t\tthis._callingBindingParams(oInputSource);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//Checking for other value help fields\r\n\t\t\t} else {\r\n\t\t\t\tvar aReferences = oSource._getEntityType().key.propertyRef,\r\n\t\t\t\t\tsProperty = aReferences[aReferences.length - 1].name,\r\n\t\t\t\t\tsId = this.getModel(\"detailView\").getProperty(\"/propertyIdMapping/\" + sProperty);\r\n\t\t\t\toInputSource = this.byId(sId);\r\n\t\t\t\tthis._callingBindingParams(oInputSource);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event Handler for changes made in selection\r\n\t\t * @param {Event} oEvent Change made in Selection fields\r\n\t\t */\r\n\t\tonSelectChange: function(oEvent) {\r\n\t\t\tvar sFValue = \"\",\r\n\t\t\t\tsKey = oEvent.getSource().data(\"clearKey\");\r\n\t\t\tif (sKey) {\r\n\t\t\t\tvar oParams = {\r\n\t\t\t\t\tsProperty: sKey\r\n\t\t\t\t};\r\n\t\t\t\tthis._clearDependentField(oParams);\r\n\t\t\t}\r\n\t\t\tif (oEvent.getSource().getMetadata().getElementName() === \"sap.m.DatePicker\") {\r\n\t\t\t\tsFValue = sap.ui.model.odata.ODataUtils.formatValue(oEvent.getSource().getDateValue(), \"Edm.DateTime\");\r\n\t\t\t} else {\r\n\t\t\t\tsFValue = oEvent.getSource().getSelectedKey();\r\n\t\t\t}\r\n\t\t\tif (sFValue || !oEvent.getSource().getValue()) {\r\n\t\t\t\toEvent.getSource().setValueState();\r\n\t\t\t\tif (this.getModel(\"oControlModel\")) {\r\n\t\t\t\t\tthis.getModel(\"oControlModel\").setProperty(\"/\" + oEvent.getSource().getCustomData()[0].getProperty(\"value\") + \"/\" + \"/valueState\",\r\n\t\t\t\t\t\t\"None\");\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\t\t\t\toEvent.getSource().setValueState(\"Error\");\r\n\t\t\t}\r\n\t\t\tif (oEvent.getSource().getCustomData()[0].getProperty(\"value\") === \"Category\") {\r\n\t\t\t\tvar oDetailViewModel = this.getModel(\"detailView\");\r\n\t\t\t\tif (sFValue === \"02\") {\r\n\t\t\t\t\toDetailViewModel.setProperty(\"/bUAVisible\", true);\r\n\t\t\t\t\toDetailViewModel.setProperty(\"/bOwnDCW\", true);\r\n\t\t\t\t} else {\r\n\t\t\t\t\toDetailViewModel.setProperty(\"/bUAVisible\", false);\r\n\t\t\t\t\toDetailViewModel.setProperty(\"/bOwnDCW\", false);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.bRefreshDDoTable = true;\r\n\t\t\t\tthis._identifyHoaDdoFilters();\r\n\t\t\t\tthis._setHoaDdoFilters();\r\n\t\t\t}\r\n\t\t\t//DCW type changes\r\n\t\t\tif (oEvent.getSource().getCustomData()[0].getProperty(\"value\") === \"DcwType\") {\r\n\t\t\t\tvar oDetailViewModel = this.getModel(\"detailView\");\r\n\t\t\t\tif (sFValue === \"01\") {\r\n\t\t\t\t\toDetailViewModel.setProperty(\"/bOwnDCW\", true);\r\n\t\t\t\t\tthis.getModel(\"oControlModel\").setProperty(\"/SourceDdo/mandatory\",\r\n\t\t\t\t\t\tfalse);\r\n\t\t\t\t\tthis.getModel(\"oControlModel\").setProperty(\"/SourceHoa/mandatory\",\r\n\t\t\t\t\t\tfalse);\r\n\t\t\t\t\tthis.getModel(\"oControlModel\").setProperty(\"/SourceDdo/valueState\", \"None\");\r\n\t\t\t\t\tthis.getModel(\"oControlModel\").setProperty(\"/SourceHoa/valueState\", \"None\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\toDetailViewModel.setProperty(\"/bOwnDCW\", false);\r\n\t\t\t\t\tthis.getModel(\"oControlModel\").setProperty(\"/SourceDdo/mandatory\",\r\n\t\t\t\t\t\ttrue);\r\n\t\t\t\t\tthis.getModel(\"oControlModel\").setProperty(\"/SourceHoa/mandatory\",\r\n\t\t\t\t\t\ttrue);\r\n\t\t\t\t\tthis.getModel(\"oControlModel\").setProperty(\"/SourceDdo/valueState\", \"Error\");\r\n\t\t\t\t\tthis.getModel(\"oControlModel\").setProperty(\"/SourceHoa/valueState\", \"Error\");\r\n\t\t\t\t}\r\n\t\t\t\toDetailViewModel.updateBindings();\r\n\t\t\t\tthis.bRefreshDDoTable = true;\r\n\t\t\t\t// this.byId(\"idWorksSrcHoA\").getBinding(\"items\").refresh(true);\r\n\t\t\t\t// this.byId(\"idWorksHoA\").getBinding(\"items\").refresh(true);\r\n\t\t\t\tthis._identifyHoaDdoFilters();\r\n\t\t\t\tthis._setHoaDdoFilters();\r\n\t\t\t}\r\n\t\t\tvar oASUpdatePayload = {\r\n\t\t\t\tAction: \"UPHDR\",\r\n\t\t\t\tGuid: oEvent.getSource().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\tLockTimestamp: \"\\/Date(\" + (new Date()).getTime() + \")\\/\",\r\n\t\t\t\tFnam: oEvent.getSource().getCustomData()[0].getProperty(\"value\"),\r\n\t\t\t\tFval: sFValue,\r\n\t\t\t\tCode: \"\",\r\n\t\t\t\tPosition: this.getModel(\"appView\").getProperty(\"/position\"),\r\n\t\t\t\tInitiatinDept: \"\",\r\n\t\t\t\tDepartDesc: \"\",\r\n\t\t\t\tSessionGuid: jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\").SessionGuid\r\n\t\t\t};\r\n\t\t\tif (oEvent.getSource().data(\"apprField\") && (oEvent.getSource().getBindingContext().getProperty(\"Status\") === \"E0003\")) {\r\n\t\t\t\toASUpdatePayload.Action = \"APPR_UPDT\";\r\n\t\t\t}\r\n\t\t\tif (oEvent.getSource().getCustomData() && oEvent.getSource().getCustomData()[0].getValue() === \"Scheme\" && (oEvent.getSource().getBindingContext()\r\n\t\t\t\t\t.getProperty(\"Status\") === \"E0003\")) {\r\n\t\t\t\toASUpdatePayload.Action = \"APPR_UPDT\";\r\n\t\t\t}\r\n\t\t\t//var sUpdPath = \"/WrkASDetailsDraftSet(Guid=guid'\" + oEvent.getSource().getBindingContext().getProperty(\"Guid\") + \"'),LockTimestamp=\\/Date(\" +  ( new Date()).getTime() + \")\\/ )\";\r\n\t\t\tvar sUpdPath = this.getModel().createKey(\"WrkASDetailsDraftSet\", {\r\n\t\t\t\tGuid: oEvent.getSource().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\tLockTimestamp: new Date().getTime()\r\n\t\t\t});\r\n\t\t\t//Prashil Add Code to attach suggest items to DDO\r\n\r\n\t\t\tsUpdPath = \"/\" + sUpdPath;\r\n\t\t\tthis.getModel().update(sUpdPath, oASUpdatePayload, {\r\n\t\t\t\tsuccess: function(oData, oResponse) {\r\n\t\t\t\t\tthis.getModel().setProperty(oASUpdatePayload.Fnam, oASUpdatePayload.Fval, this.getView().getElementBinding());\r\n\t\t\t\t\tif (this.bRefreshDDoTable) {\r\n\t\t\t\t\t\tthis.byId(\"idWorksSrcHoA\").getBinding(\"items\").refresh(true);\r\n\t\t\t\t\t\tthis.byId(\"idWorksHoA\").getBinding(\"items\").refresh(true);\r\n\t\t\t\t\t\tthis.byId(\"idBudgetCtrl\").setValue(\"\");\r\n\t\t\t\t\t\tthis.byId(\"idBudgetCtrl\").fireChange();\r\n\t\t\t\t\t\tthis.bRefreshDDoTable = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}.bind(this),\r\n\t\t\t\terror: function(oError) {\r\n\r\n\t\t\t\t},\r\n\t\t\t\trefreshAfterChange: false\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tonSelectChangeDetailWork: function(oEvent) {\r\n\t\t\tvar sFValue = \"\",\r\n\t\t\t\tsKey = oEvent.getSource().data(\"clearKey\");\r\n\t\t\tif (sKey) {\r\n\t\t\t\tvar oParams = {\r\n\t\t\t\t\tsProperty: sKey\r\n\t\t\t\t};\r\n\t\t\t\t//\t\tthis._clearDependentFieldDetailWork(oParams);\r\n\t\t\t}\r\n\r\n\t\t\tsFValue = oEvent.getSource().getSelectedKey();\r\n\r\n\t\t\tif (sFValue || !oEvent.getSource().getValue()) {\r\n\t\t\t\toEvent.getSource().setValueState();\r\n\t\t\t\tif (this.getModel(\"oControlModel\")) {\r\n\t\t\t\t\tthis.getModel(\"oControlModel\").setProperty(\"/\" + oEvent.getSource().getCustomData()[0].getProperty(\"value\") + \"/\" + \"/valueState\",\r\n\t\t\t\t\t\t\"None\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar oASUpdatePayload = {\r\n\t\t\t\tAction: \"UPHDR\",\r\n\t\t\t\tGuid: oEvent.getSource().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\tLockTimestamp: \"\\/Date(\" + (new Date()).getTime() + \")\\/\",\r\n\t\t\t\tFnam: oEvent.getSource().getCustomData()[0].getProperty(\"value\"),\r\n\t\t\t\tFval: sFValue,\r\n\t\t\t\tCode: \"\",\r\n\t\t\t\tPosition: this.getModel(\"appView\").getProperty(\"/position\"),\r\n\t\t\t\tInitiatinDept: \"\",\r\n\t\t\t\tDepartDesc: \"\",\r\n\t\t\t\tSessionGuid: jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\").SessionGuid\r\n\t\t\t};\r\n\t\t\tif (oEvent.getSource().data(\"apprField\") && (oEvent.getSource().getBindingContext().getProperty(\"Status\") === \"E0003\")) {\r\n\t\t\t\toASUpdatePayload.Action = \"APPR_UPDT\";\r\n\t\t\t}\r\n\t\t\tif (oEvent.getSource().getCustomData() && oEvent.getSource().getCustomData()[0].getValue() === \"Scheme\" && (oEvent.getSource().getBindingContext()\r\n\t\t\t\t\t.getProperty(\"Status\") === \"E0003\")) {\r\n\t\t\t\toASUpdatePayload.Action = \"APPR_UPDT\";\r\n\t\t\t}\r\n\t\t\t//var sUpdPath = \"/WrkASDetailsDraftSet(Guid=guid'\" + oEvent.getSource().getBindingContext().getProperty(\"Guid\") + \"'),LockTimestamp=\\/Date(\" +  ( new Date()).getTime() + \")\\/ )\";\r\n\t\t\tvar sUpdPath = this.getModel().createKey(\"WrkASDetailsDraftSet\", {\r\n\t\t\t\tGuid: oEvent.getSource().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\tLockTimestamp: new Date().getTime()\r\n\t\t\t});\r\n\t\t\t//Prashil Add Code to attach suggest items to DDO\r\n\r\n\t\t\tsUpdPath = \"/\" + sUpdPath;\r\n\t\t\tthis.getModel().update(sUpdPath, oASUpdatePayload, {\r\n\t\t\t\tsuccess: function(oData, oResponse) {\r\n\t\t\t\t\t//\tthis.getModel().setProperty(oASUpdatePayload.Fnam, oASUpdatePayload.Fval, this.getView().getElementBinding());\r\n\r\n\t\t\t\t}.bind(this),\r\n\t\t\t\terror: function(oError) {\r\n\r\n\t\t\t\t},\r\n\t\t\t\trefreshAfterChange: false\r\n\t\t\t});\r\n\r\n\t\t},\r\n\r\n\t\t_clearDependentFieldDetailWork: function(oParams) {\r\n\t\t\tvar aFieldId = [];\r\n\t\t\tif (oParams.sProperty === \"MAIN_WORK\") {\r\n\t\t\t\taFieldId = [\"idSubClass01\", \"idSubClass02\", \"idSubClass03\"];\r\n\t\t\t} else if (oParams.sProperty === \"sub_work_01\") {\r\n\t\t\t\taFieldId = [\"idSubClass02\", \"idSubClass03\"];\r\n\t\t\t} else if (oParams.sProperty === \"sub_work_02\") {\r\n\t\t\t\taFieldId = [\"idSubClass03\"];\r\n\t\t\t}\r\n\t\t\tthis._clearField(aFieldId);\r\n\t\t},\r\n\r\n\t\t_clearField: function(aFieldId) {\r\n\t\t\tfor (var i = 0; i < aFieldId.length; i++) {\r\n\t\t\t\tvar oControl = this.byId(aFieldId[i]);\r\n\t\t\t\toControl.setSelectedKey(\"\");\r\n\t\t\t\toControl.setValueState();\r\n\t\t\t\tif (oControl.getMetadata().getElementName() === \"sap.m.Input\") {\r\n\t\t\t\t\toControl.setValue(\"\");\r\n\t\t\t\t\tvar sFname;\r\n\t\t\t\t\tswitch (aFieldId[i]) {\r\n\t\t\t\t\t\tcase \"idSubClass01\":\r\n\t\t\t\t\t\t\tsFname = \"SubclassL01\";\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"idSubClass02\":\r\n\t\t\t\t\t\t\tsFname = \"SubclassL02\";\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"idSubClass03\":\r\n\t\t\t\t\t\t\tsFname = \"SubclassL03\";\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar oASUpdatePayload = {\r\n\t\t\t\t\t\tAction: \"UPHDR\",\r\n\t\t\t\t\t\tGuid: this.getView().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\t\t\tLockTimestamp: \"\\/Date(\" + (new Date()).getTime() + \")\\/\",\r\n\t\t\t\t\t\tFnam: sFname,\r\n\t\t\t\t\t\tFval: \"\",\r\n\t\t\t\t\t\tCode: \"\",\r\n\t\t\t\t\t\tPosition: this.getModel(\"appView\").getProperty(\"/position\"),\r\n\t\t\t\t\t\tInitiatinDept: \"\",\r\n\t\t\t\t\t\tDepartDesc: \"\",\r\n\t\t\t\t\t\tSessionGuid: jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\").SessionGuid\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tvar sUpdPath = this.getModel().createKey(\"WrkASDetailsDraftSet\", {\r\n\t\t\t\t\t\tGuid: this.getView().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\t\t\tLockTimestamp: new Date().getTime()\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsUpdPath = \"/\" + sUpdPath;\r\n\t\t\t\t\tthis.getModel().update(sUpdPath, oASUpdatePayload, {\r\n\t\t\t\t\t\tsuccess: function(oData, oResponse) {\r\n\t\t\t\t\t\t\tthis.getModel().setProperty(oASUpdatePayload.Fnam, oASUpdatePayload.Fval, this.getView().getElementBinding());\r\n\t\t\t\t\t\t\t//\tthis.getView().getElementBinding().refresh();\r\n\t\t\t\t\t\t}.bind(this),\r\n\t\t\t\t\t\terror: function(oError) {\r\n\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\trefreshAfterChange: false\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Event Handler for clicking on Cancel button in Detail View\r\n\t\t * @param {sap.ui.base.Event} oEvent Pressing cancel in view\r\n\t\t */\r\n\t\tonCancelPress: function(oEvent) {\r\n\t\t\tvar that = this;\r\n\t\t\tvar oParams = {\r\n\t\t\t\tMessage: \"detail.messageBox.cancel\",\r\n\t\t\t\taction: \"DFT_CNCL\",\r\n\t\t\t\tevent: oEvent\r\n\t\t\t};\r\n\t\t\tthis._onActionConfirm(this._cancelPost.bind(this), oParams);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for additional note\r\n\t\t * @param {*} oEvent \r\n\t\t */\r\n\t\tonCancelAdditionalNote: function(oEvent) {\r\n\t\t\tthis._addNoteFrag.close();\r\n\t\t},\r\n\t\t/**\r\n\t\t * \r\n\t\t * @param {*} param \r\n\t\t */\r\n\t\t_cancelPost: function(param) {\r\n\t\t\tvar that = this;\r\n\t\t\tthis.getModel().callFunction(\"/WrkLockEdit\", {\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t\turlParameters: {\r\n\t\t\t\t\tLockTimeStamp: new Date().getTime(),\r\n\t\t\t\t\tAction: param.action,\r\n\t\t\t\t\tGuid: this.getView().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\t\tApplication: \"AS\",\r\n\t\t\t\t\tSessionGuid: sap.ui.getCore().getModel(\"ZWRKGlobalModel\").getProperty(\"/AS/SessionGuid\")\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function(oResponse, oTe) {\r\n\t\t\t\t\tthat._notAllowEditOnDocument();\r\n\t\t\t\t\tthat._changeFullScreenMode(false, \"detail\", \"MasterPage\", \"asIdBtnScreenToggle\");\r\n\t\t\t\t\tsap.ushell.Container.setDirtyFlag(false);\r\n\t\t\t\t\tthat.getRouter().navTo(\"default\", {}, true);\r\n\t\t\t\t\tthat.getModel().refresh();\r\n\t\t\t\t},\r\n\t\t\t\terror: function(oError) {\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event Handler for clicking on Submit button in Detail View\r\n\t\t * @param {sap.ui.base.Event} oEvent Pressing submit in view\r\n\t\t */\r\n\t\tonSubmitPress: function(oEvent) {\r\n\t\t\t$.sap.ASNUMBER = undefined;\r\n\t\t\tthis.updateControlModel(\"oControlModel\");\r\n\t\t\tvar bMandatoryCheck = this._mandatoryFieldCheckOnSave(\"oControlModel\"),\r\n\t\t\t\tbValidated = this._validateBeforeSave(\"oControlModel\"),\r\n\t\t\t\tbIsAmendDoc = parseInt(this.getView().getBindingContext().getProperty(\"Version\")) > 0 ? true : false,\r\n\t\t\t\tbCheckListValidation = this._handleCheckListValidate(\"idChecklistTable\", bIsAmendDoc);\r\n\t\t\tif (bMandatoryCheck && bValidated && bCheckListValidation) {\r\n\t\t\t\tvar oParams = {\r\n\t\t\t\t\tMessage: \"detail.messageBox.submit\",\r\n\t\t\t\t\taction: \"SUBMIT\",\r\n\t\t\t\t\tevent: oEvent\r\n\t\t\t\t};\r\n\t\t\t\tif (this._checkNote()) {\r\n\t\t\t\t\tvar backendValidationCheck = new Promise(function(resolve, reject) {\r\n\t\t\t\t\t\tthis.checkBackendValidation(resolve, reject);\r\n\t\t\t\t\t}.bind(this));\r\n\r\n\t\t\t\t\tbackendValidationCheck.then(function() {\r\n\t\t\t\t\t\tthis._onActionConfirm(this._postAS.bind(this), oParams);\r\n\t\t\t\t\t}.bind(this));\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\t\t\t\tif (bCheckListValidation) {\r\n\t\t\t\t\tthis.getModel(\"oControlModel\").updateBindings();\r\n\t\t\t\t\tthis._displayWarnMessge(this.getModel(\"i18n\").getResourceBundle().getText(\"detail.message.error.mandatoryField\"));\r\n\t\t\t\t\tthis.byId(\"idCode\").applyFocusInfo(true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event Handler for clicking on Next Level button in Detail View\r\n\t\t * @param {sap.ui.base.Event} oEvent Pressing Next Level in view\r\n\t\t */\r\n\t\tonNextLevelPress: function(oEvent) {\r\n\t\t\tvar oParams = {\r\n\t\t\t\tMessage: \"detail.messageBox.next\",\r\n\t\t\t\taction: \"NEXT\",\r\n\t\t\t\tevent: oEvent\r\n\t\t\t};\r\n\t\t\tif (this._checkNote()) {\r\n\t\t\t\tvar backendValidationCheck = new Promise(function(resolve, reject) {\r\n\t\t\t\t\tthis.checkBackendValidation(resolve, reject);\r\n\t\t\t\t}.bind(this));\r\n\r\n\t\t\t\tbackendValidationCheck.then(function() {\r\n\t\t\t\t\tthis._onActionConfirm(this._postAS.bind(this), oParams);\r\n\t\t\t\t}.bind(this));\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Event Handler for clicking on Return button in Detail View\r\n\t\t * @param {sap.ui.base.Event} oEvent Pressing return in view\r\n\t\t */\r\n\t\tonReturnPress: function(oEvent) {\r\n\t\t\tvar oParams = {\r\n\t\t\t\tMessage: \"detail.messageBox.return\",\r\n\t\t\t\taction: \"RETURN\",\r\n\t\t\t\tevent: oEvent\r\n\t\t\t};\r\n\t\t\tif (this._checkNote()) {\r\n\t\t\t\tthis._onActionConfirm(this._postAS.bind(this), oParams);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Event Handler for clicking on Approve button in Detail View\r\n\t\t * @param {sap.ui.base.Event} oEvent Pressing approve in view\r\n\t\t */\r\n\t\tonApprovePress: function(oEvent) {\r\n\t\t\tthis.updateControlModel(\"oControlModel\");\r\n\t\t\tvar bMandatoryCheck = this._mandatoryFieldCheckOnSave(\"oControlModel\"),\r\n\t\t\t\tbValidated = this._validateBeforeSave(\"oControlModel\"),\r\n\t\t\t\tbApprovalMandatoryCheck = this._checkSecrataryMand();\r\n\t\t\tif (bApprovalMandatoryCheck && bMandatoryCheck && bValidated) {\r\n\t\t\t\tvar oParams = {\r\n\t\t\t\t\tMessage: \"detail.messageBox.approve\",\r\n\t\t\t\t\taction: \"APPROVE\",\r\n\t\t\t\t\tevent: oEvent\r\n\t\t\t\t};\r\n\t\t\t\tif (this._checkNote()) {\r\n\t\t\t\t\tthis._onActionConfirm(this._postAS.bind(this), oParams);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.getModel(\"oControlModel\").updateBindings();\r\n\t\t\t\tthis._displayWarnMessge(this.getModel(\"i18n\").getResourceBundle().getText(\"detail.message.error.mandatoryField\"));\r\n\t\t\t\tthis.byId(\"idCode\").applyFocusInfo(true);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Event Handler for clicking on On Hold button in Detail View\r\n\t\t * @param {sap.ui.base.Event} oEvent Pressing withhold in view\r\n\t\t */\r\n\t\tonWithheldPress: function(oEvent) {\r\n\t\t\tvar oParams = {\r\n\t\t\t\tMessage: \"detail.messageBox.withHeld\",\r\n\t\t\t\taction: \"WITHHELD\",\r\n\t\t\t\tevent: oEvent\r\n\t\t\t};\r\n\t\t\t//this._onActionConfirm(this._postAS.bind(this), oParams);\r\n\t\t\tif (this._checkNote()) {\r\n\t\t\t\tthis._onActionConfirm(this._postAS.bind(this), oParams);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for Add new Estimation\r\n\t\t * @param {sap.ui.base.Event} oEvent Adding new estimate\r\n\t\t */\r\n\t\t/*onAddNewEstimation: function(oEvent){\r\n\t\t\tvar oBindingContext = this.getView().getBindingContext(),\r\n\t\t\t\toCrossAppNavigator = sap.ushell.Container.getService(\"CrossApplicationNavigation\");\r\n\t\t\tvar hash = (oCrossAppNavigator && oCrossAppNavigator.hrefForExternal({\r\n\t\t\t\ttarget:{\r\n\t\t\t\t\tsemanticObject: \"ZWorks\",\r\n\t\t\t\t\taction: \"estimation\"\r\n\t\t\t\t},\r\n\t\t\t\tparams:{\r\n\t\t\t\t\trefGuid: oBindingContext.getProperty(\"Guid\"),\r\n\t\t\t\t\trefType : \"ZWAS\",\r\n\t\t\t\t\tRefNo : oBindingContext.getProperty(\"Code\"),\r\n\t\t\t\t\tappState: this.getModel(\"detailView\").getProperty(\"/stateId\")\r\n\t\t\t\t}\r\n\t\t\t})) || \"\";\r\n\t\t\toCrossAppNavigator.toExternal({\r\n\t\t\t\ttarget: {\r\n\t\t\t\t\tshellHash: hash\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},*/\r\n\r\n\t\tonAddNewEstimation: function(oEvent) {\r\n\t\t\tvar oBindingContext = this.getView().getBindingContext();\r\n\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/EST/bAddNewEST\", true);\r\n\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bUserCreateAS\", true);\r\n\t\t\tsap.ushell.Container.setDirtyFlag(false);\r\n\t\t\tthis.getOwnerComponent().getModel().read(\"/WrkMigCheckSet(Code='\" + oBindingContext.getProperty(\"Code\") + \"',AppType='ZWAS')\", {\r\n\t\t\t\t// filters: aFilters,\r\n\t\t\t\tsuccess: function(oData) {\r\n\t\t\t\t\tvar oCrossAppNavigator = sap.ushell.Container.getService(\"CrossApplicationNavigation\");\r\n\t\t\t\t\tvar hash = (oCrossAppNavigator && oCrossAppNavigator.hrefForExternal({\r\n\t\t\t\t\t\ttarget: {\r\n\t\t\t\t\t\t\tsemanticObject: \"ZWorks\",\r\n\t\t\t\t\t\t\taction: \"estimation\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\trefGuid: oBindingContext.getProperty(\"Guid\"),\r\n\t\t\t\t\t\t\trefType: \"ZWAS\",\r\n\t\t\t\t\t\t\tRefNo: oBindingContext.getProperty(\"Code\"),\r\n\t\t\t\t\t\t\tappState: this.getModel(\"detailView\").getProperty(\"/stateId\"),\r\n\t\t\t\t\t\t\tmigInd: oData.Migrated\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})) || \"\";\r\n\t\t\t\t\tvar sNoteText = this.getModel(\"detailView\").getProperty('/Notingstring');\r\n\t\t\t\t\tif (!sNoteText) {\r\n\t\t\t\t\t\tthis._navToEst(hash);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar sMsgText = this.getModel(\"i18n\").getResourceBundle().getText('detail.message.warning.notetextlost');\r\n\t\t\t\t\t\tMessageBox.confirm(sMsgText, {\r\n\t\t\t\t\t\t\tonClose: function(oAction) {\r\n\t\t\t\t\t\t\t\tif (oAction === MessageBox.Action.OK) {\r\n\t\t\t\t\t\t\t\t\tthis._navToEst(hash);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}.bind(this)\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// oCrossAppNavigator.toExternal({\r\n\t\t\t\t\t// \ttarget: {\r\n\t\t\t\t\t// \t\tshellHash: hash\r\n\t\t\t\t\t// \t}\r\n\t\t\t\t\t// });\r\n\t\t\t\t}.bind(this),\r\n\t\t\t\terror: function(oData) {\r\n\r\n\t\t\t\t}.bind(this)\r\n\t\t\t});\r\n\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for Link press\r\n\t\t * @param {*} oEvent \r\n\t\t */\r\n\t\tonEstItemPress: function(oEvent) {\r\n\r\n\t\t\tif (this.getModel(\"detailView\").getProperty(\"/bEditable\")) {\r\n\t\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bUserCreateAS\", true);\r\n\t\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/EST/parentEdit\", true);\r\n\t\t\t} else {\r\n\t\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/EST/parentEdit\", false);\r\n\t\t\t}\r\n\t\t\tsap.ushell.Container.setDirtyFlag(false);\r\n\t\t\tvar sNoteText = this.getModel(\"detailView\").getProperty('/Notingstring'),\r\n\t\t\t\tsEstGuid = oEvent.getSource().getBindingContext().getObject(\"EstGuid\"),\r\n\t\t\t\toCrossAppNavigator = sap.ushell.Container.getService(\"CrossApplicationNavigation\");\r\n\t\t\tvar sHash = oCrossAppNavigator.hrefForExternal({\r\n\t\t\t\ttarget: {\r\n\t\t\t\t\tshellHash: \"ZWorks-estimation&/Detail/\" + sEstGuid + \"/D/ZDE/xapp\"\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif (!sNoteText) {\r\n\t\t\t\tthis._navToEst(sHash);\r\n\t\t\t} else {\r\n\t\t\t\tvar sMsgText = this.getModel(\"i18n\").getResourceBundle().getText(\"detail.message.warning.notetextlost\");\r\n\t\t\t\tMessageBox.confirm(sMsgText, {\r\n\t\t\t\t\tonClose: function(oAction) {\r\n\t\t\t\t\t\tif (oAction === MessageBox.Action.OK) {\r\n\t\t\t\t\t\t\tthis._navToEst(sHash);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}.bind(this)\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Private function to navigate hash\r\n\t\t * @param {string} sHash hash string\r\n\t\t */\r\n\t\t_navToEst: function(sHash) {\r\n\t\t\tvar oCrossAppNavigator = sap.ushell.Container.getService(\"CrossApplicationNavigation\");\r\n\t\t\toCrossAppNavigator.toExternal({\r\n\t\t\t\ttarget: {\r\n\t\t\t\t\tshellHash: sHash\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event Handler for deletions performed to the DDO table\r\n\t\t * @param {sap.ui.base.Event} oEvent Delete press on estimate\r\n\t\t */\r\n\t\tonDeleteEstimate: function(oEvent) {\r\n\t\t\tvar oParams = {\r\n\t\t\t\tMessage: \"detail.messageBox.delete\",\r\n\t\t\t\tsource: oEvent.getSource(),\r\n\t\t\t\taction: \"DEL_ESTMT\",\r\n\t\t\t\tguid: oEvent.getSource().getBindingContext().getObject().EstGuid\r\n\t\t\t};\r\n\t\t\tthis._onActionConfirm(this._onDeleteConfirmation.bind(this), oParams);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for pressing on Edit\r\n\t\t * @param {Event} oEvent Button press for edit mode.\r\n\t\t */\r\n\t\tonEditPress: function(oEvent) {\r\n\t\t\tvar that = this;\r\n\t\t\tvar AsNumber = that.getView().byId(\"idCode\").getValue();\r\n\t\t\tthat._getMigCheckSet();\r\n\t\t\tvar oBtn = this.getView().byId(\"asIdBtnScreenToggle\");\r\n\t\t\tthis.getModel().callFunction(\"/WrkLockEdit\", {\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t\turlParameters: {\r\n\t\t\t\t\tLockTimeStamp: new Date().getTime(),\r\n\t\t\t\t\tAction: \"LOCKCHK\",\r\n\t\t\t\t\tGuid: that.getView().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\t\tApplication: \"AS\",\r\n\t\t\t\t\tSessionGuid: jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\").SessionGuid\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function(oResponse, oTe) {\r\n\t\t\t\t\t//Updating sessionguid in browser storage data\r\n\t\t\t\t\tif (oResponse.SessionGuid) {\r\n\t\t\t\t\t\tvar oParamsBrowserStorage = jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\");\r\n\t\t\t\t\t\toParamsBrowserStorage.SessionGuid = oResponse.SessionGuid;\r\n\t\t\t\t\t\tjQuery.sap.storage(jQuery.sap.storage.Type.session).put(\"zworksBrowserStorage\", oParamsBrowserStorage);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/SessionGuid\", oResponse.SessionGuid);\r\n\t\t\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bUserCreateAS\", true);\r\n\t\t\t\t\tthat._changeFullScreenMode(true, \"detail\", \"MasterPage\", \"asIdBtnScreenToggle\");\r\n\t\t\t\t\t//\t\t\t\t\toBtn.firePress();\r\n\t\t\t\t\tthat._navToDetail.bind(that)(\"E\");\r\n\t\t\t\t\t//\t\t\t\t\tthat._allowEditOnDocument();\r\n\t\t\t\t},\r\n\t\t\t\terror: function(oError) {\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler function for display button\r\n\t\t * @param {Event} oEvent Button press for display mode.\r\n\t\t */\r\n\t\tonDisplayPress: function(oEvent) {\r\n\t\t\tvar that = this;\r\n\t\t\tvar oBtn = this.getView().byId(\"asIdBtnScreenToggle\");\r\n\t\t\tthis.getModel().callFunction(\"/WrkLockEdit\", {\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t\turlParameters: {\r\n\t\t\t\t\tLockTimeStamp: new Date().getTime(),\r\n\t\t\t\t\tAction: \"LOCKDEL\",\r\n\t\t\t\t\tGuid: oEvent.getSource().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\t\tApplication: \"AS\",\r\n\t\t\t\t\tSessionGuid: sap.ui.getCore().getModel(\"ZWRKGlobalModel\").getProperty(\"/AS/SessionGuid\")\r\n\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function(oResponse, oTe) {\r\n\t\t\t\t\t//\t\t\t\t\toBtn.firePress();\r\n\t\t\t\t\tsap.ushell.Container.setDirtyFlag(false);\r\n\t\t\t\t\tthat._changeFullScreenMode(false, \"detail\", \"MasterPage\", \"asIdBtnScreenToggle\");\r\n\t\t\t\t\tthat._notAllowEditOnDocument();\r\n\t\t\t\t\tthat._navToDetail.bind(that)(\"D\");\r\n\r\n\t\t\t\t},\r\n\t\t\t\terror: function(oError) {\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * Private function to bind \r\n\t\t * @param {*} oEvent \r\n\t\t */\r\n\t\t_updatePositionBinding: function() {\r\n\t\t\tvar oPositon = this.byId(\"idPosition\"),\r\n\t\t\t\toFilter = new Filter(\"SUBPROCESS_AREA\", FilterOperator.EQ, \"AS\"),\r\n\t\t\t\taCreatedBy = this.getView().getBindingContext().getProperty(\"UserIdCr\");\r\n\t\t\tif (!this.oPosItemTemp) {\r\n\t\t\t\tthis.oPosItemTemp = new sap.ui.core.Item({\r\n\t\t\t\t\ttext: \"{STEXT}\",\r\n\t\t\t\t\tkey: \"{position}\"\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\toPositon.bindAggregation(\"items\", {\r\n\t\t\t\tpath: \"/ZWRK_C_USER_POSITIONS(p_user='\" + aCreatedBy + \"')/Set\",\r\n\t\t\t\tfilters: [oFilter],\r\n\t\t\t\ttemplate: this.oPosItemTemp\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for Clicking on the details display for location \r\n\t\t * @param {Event} oEvent Button press on Location Details\r\n\t\t */\r\n\t\thandleLocationListDisplay: function(oEvent) {\r\n\t\t\tvar oLocationModel = this.getModel(\"location\");\r\n\t\t\tif (oLocationModel.getProperty(\"/vDistrict\")) {\r\n\t\t\t\tthis.handleDistrictListDisplay();\r\n\t\t\t} else if (oLocationModel.getProperty(\"/vMandal\")) {\r\n\t\t\t\tthis.handleMandalListDisplay();\r\n\t\t\t} else if (oLocationModel.getProperty(\"/vVillage\")) {\r\n\t\t\t\tthis.handleVillageListDisplay();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Function to handle live change on control\r\n\t\t * @param {sap.ui.base.Event} oEvent Live changes on fields\r\n\t\t */\r\n\t\thandleLiveChange: function(oEvent) {\r\n\t\t\tif (this.oSelectedObject) {\r\n\t\t\t\tthis.oSelectedObject = null;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for Clicking on the details display for constituency \r\n\t\t * @param {Event} oEvent Button press on Constituency Details\r\n\t\t */\r\n\t\thandleConstListDisplay: function(oEvent) {\r\n\t\t\tvar sCustomData = oEvent.getSource().getCustomData()[0].getValue();\r\n\t\t\t//var oLocationModel = this.getModel(\"location\");\r\n\t\t\tif (sCustomData === this.getModel(\"i18n\").getResourceBundle().getText(\"detail.ops.panel.content.label.assembly\")) {\r\n\t\t\t\tthis.handleAssemblyListDisplay();\r\n\t\t\t} else {\r\n\t\t\t\tthis.onLoksabhaListClick();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler function for Radio button select, set enabled/desabled input field\r\n\t\t * @param {Event} oEvent Selection of radio button\r\n\t\t */\r\n\t\tonRadioSelect: function(oEvent) {\r\n\t\t\tvar sLocationRBtn = oEvent.getSource().getCustomData()[0].getValue();\r\n\t\t\tswitch (sLocationRBtn) {\r\n\t\t\t\tcase \"district\":\r\n\t\t\t\t\tthis._setPropertyValue(\"location\", [\"vDistrict\"], true);\r\n\t\t\t\t\tthis._setPropertyValue(\"location\", [\"vMandal\", \"vVillage\"], false);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"mandal\":\r\n\t\t\t\t\tthis._setPropertyValue(\"location\", [\"vMandal\"], true);\r\n\t\t\t\t\tthis._setPropertyValue(\"location\", [\"vDistrict\", \"vVillage\"], false);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"village\":\r\n\t\t\t\t\tthis._setPropertyValue(\"location\", [\"vVillage\"], true);\r\n\t\t\t\t\tthis._setPropertyValue(\"location\", [\"vDistrict\", \"vMandal\"], false);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"loksabha\":\r\n\t\t\t\t\tthis._setPropertyValue(\"location\", [\"vLoksabha\"], true);\r\n\t\t\t\t\t//\tthis._setPropertyValue(\"location\", [\"vAssembly\"], false);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tthis._setPropertyValue(\"location\", [\"vAssembly\"], true);\r\n\t\t\t\t\t//\tthis._setPropertyValue(\"location\", [\"vLoksabha\"], false);\r\n\t\t\t}\r\n\t\t\tthis.getModel(\"location\").updateBindings();\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler function for note edit press\r\n\t\t * @param {Event} oEvent Button press on note edit\r\n\t\t */\r\n\t\tonNoteActionPress: function(oEvent) {\r\n\t\t\tvar sAction = oEvent.getSource().getKey();\r\n\t\t\tif (sAction === \"edit\") {\r\n\t\t\t\tvar oDetailViewModel = this.getModel(\"detailView\"),\r\n\t\t\t\t\toNotePayload = oDetailViewModel.getProperty(\"/\"),\r\n\t\t\t\t\toParentBindingContext = oEvent.getSource().getParent().getBindingContext(\"detailView\");\r\n\t\t\t\toDetailViewModel = this.getModel(\"detailView\");\r\n\t\t\t\tvar sNoteText = oDetailViewModel.getProperty(\"Notingstring\", oParentBindingContext);\r\n\t\t\t\tvar sNotingId = oDetailViewModel.getProperty(\"Notingid\", oParentBindingContext);\r\n\t\t\t\tvar sPagent = oDetailViewModel.getProperty(\"Pagent\", oParentBindingContext);\r\n\t\t\t\toNotePayload.Notingstring = sNoteText;\r\n\t\t\t\toNotePayload.Notingid = sNotingId;\r\n\t\t\t\toNotePayload.Pagent = sPagent;\r\n\t\t\t\toDetailViewModel.updateBindings();\r\n\t\t\t\tMessageToast.show(this.getResourceBundle().getText(\"detail.ObjPageSection.toast.editMessage.addedtoEditor\"));\r\n\t\t\t}\r\n\t\t},\r\n\t\t/** \r\n\t\t * Event handler on click message popover at footer\r\n\t\t * @param {Event} oEvent Button press on Error Messages display\r\n\t\t */\r\n\t\thandleMessagePopoverPress: function(oEvent) {\r\n\t\t\tthis.getOwnerComponent().oMessagePopover.toggle(oEvent.getSource());\r\n\t\t},\r\n\t\t/**\r\n\t\t * @param {*} oEvent is the onselect event\r\n\t\t */\r\n\t\tonHOADDOSelect: function(oEvent) {\r\n\t\t\tvar oSelectedItem = oEvent.getParameter(\"selectedItem\"),\r\n\t\t\t\tsCustomData = oSelectedItem.getCustomData()[1].getValue();\r\n\t\t\tvar sBindingPath,\r\n\t\t\t\tsControlId;\r\n\t\t\tif (oSelectedItem) {\r\n\t\t\t\tif (sCustomData === \"Ddo\" || sCustomData === \"SourceDdo\") {\r\n\t\t\t\t\tvar sDDO = oSelectedItem.getBindingContext().getProperty(\"fistl\");\r\n\t\t\t\t\tvar sDDODes = oSelectedItem.getBindingContext().getProperty(\"BESCHR\");\r\n\t\t\t\t\tsBindingPath = oSelectedItem.data(\"sSrcBindingPath\");\r\n\t\t\t\t\tsControlId = oSelectedItem.data(\"controlId\");\r\n\t\t\t\t\tif (sCustomData === \"Ddo\") {\r\n\t\t\t\t\t\tthis.getModel().setProperty(sBindingPath + \"/Ddo\", sDDO);\r\n\t\t\t\t\t\tthis.getModel().setProperty(sBindingPath + \"/DdoDes\", sDDODes);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.getModel().setProperty(sBindingPath + \"/SourceDdo\", sDDO);\r\n\t\t\t\t\t\tthis.getModel().setProperty(sBindingPath + \"/DdoDes\", sDDODes);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//\tthis._destroyFrag(this._oDDOVHDialog);\r\n\t\t\t\t} else if (sCustomData === \"Hoa\" || sCustomData === \"SourceHoa\") {\r\n\t\t\t\t\tvar sHOA = oSelectedItem.getBindingContext().getProperty(\"Hoa\");\r\n\t\t\t\t\t// sGsh = oSelectedItem.getBindingContext().getProperty(\"gsh\"),\r\n\t\t\t\t\t// aCells = this.oCurrentInput.getParent().getCells(),\r\n\t\t\t\t\t// oCell = aCells.filter(function(cell) {return cell.data(\"bindPath\") === \"PicCode\";})[0];\r\n\t\t\t\t\tsBindingPath = oSelectedItem.data(\"sSrcBindingPath\");\r\n\t\t\t\t\tsControlId = oSelectedItem.data(\"controlId\");\r\n\t\t\t\t\tif (sCustomData === \"Hoa\") {\r\n\t\t\t\t\t\tthis.getModel().setProperty(sBindingPath + \"/Hoa\", sHOA);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.getModel().setProperty(sBindingPath + \"/SourceHoa\", sHOA);\r\n\t\t\t\t\t\tif (this.byId(\"idBudgetCtrl\").getValue() === \"\") {\r\n\t\t\t\t\t\t\tthis.byId(\"idBudgetCtrl\").setValue(oSelectedItem.getBindingContext().getProperty(\"bcf\"));\r\n\t\t\t\t\t\t\tthis.byId(\"idBudgetCtrl\").fireChange();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// if(sGsh === \"07\") {\r\n\t\t\t\t\t\t// \toCell.setEditable(true);\r\n\t\t\t\t\t\t// } else {\r\n\t\t\t\t\t\t// \toCell.setValue();\r\n\t\t\t\t\t\t// \toCell.setEditable(false);\r\n\t\t\t\t\t\t// }\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// else if(sCustomData === \"PicCode\") {\r\n\t\t\t\t// \tvar sPicsCode = oSelectedItem.getBindingContext().getProperty(\"Pics_Code\");\r\n\t\t\t\t// \tsBindingPath = oSelectedItem.data(\"sSrcBindingPath\");\r\n\t\t\t\t// \tif(sCustomData === \"PicCode\"){\r\n\t\t\t\t// \t\tthis.getModel().setProperty( sBindingPath + \"/PicsCode\", sPicsCode);\r\n\t\t\t\t// \t}\r\n\t\t\t\t// }\r\n\r\n\t\t\t\tthis.oCurrentInput.fireChange();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for HoA Ddo search in value help\r\n\t\t * @param {sap.ui.model.Event} oEvent is the event for Search\r\n\t\t */\r\n\t\thandleHOADDOSearch: function(oEvent) {\r\n\t\t\tvar sValue = oEvent.getParameter(\"value\");\r\n\t\t\tvar aFilters = [],\r\n\t\t\t\tsCustomData = oEvent.getSource().getCustomData()[0].getValue();\r\n\t\t\tif (sCustomData === \"Ddo\" || sCustomData === \"SourceDdo\") {\r\n\t\t\t\taFilters.push(new Filter(\"fistl\", sap.ui.model.FilterOperator.Contains, sValue));\r\n\t\t\t\taFilters.push(new Filter(\"BESCHR\", sap.ui.model.FilterOperator.Contains, sValue));\r\n\t\t\t} else if (sCustomData === \"Hoa\" || sCustomData === \"SourceHoa\") {\r\n\t\t\t\taFilters.push(new Filter(\"Hoa\", sap.ui.model.FilterOperator.Contains, sValue));\r\n\t\t\t} else if (sCustomData === \"PicCode\") {\r\n\t\t\t\taFilters.push(new Filter(\"Pics_Code\", sap.ui.model.FilterOperator.Contains, sValue));\r\n\t\t\t\taFilters.push(new Filter(\"District_name\", sap.ui.model.FilterOperator.Contains, sValue));\r\n\t\t\t}\r\n\t\t\tvar oFilter = new sap.ui.model.Filter({\r\n\t\t\t\tfilters: aFilters,\r\n\t\t\t\tbAnd: false\r\n\t\t\t});\r\n\t\t\tvar oBinding = oEvent.getSource().getBinding(\"items\");\r\n\t\t\toBinding.filter(oFilter);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for closing HoA DDO\r\n\t\t * @param {sap.ui.base.Ecent} oEvent is the parameter control\r\n\t\t */\r\n\t\thandleHOADDOClose: function(oEvent) {\r\n\t\t\tvar sCustomData = oEvent.getSource().getCustomData()[0].getValue();\r\n\t\t\tif (sCustomData === \"Ddo\" || sCustomData === \"SourceDdo\") {\r\n\t\t\t\tif (this._oDDOVHDialog) {\r\n\t\t\t\t\tthis._oDDOVHDialog.destroy();\r\n\t\t\t\t\tthis._oDDOVHDialog = null;\r\n\t\t\t\t}\r\n\t\t\t} else if (sCustomData === \"Hoa\" || sCustomData === \"SourceHoa\") {\r\n\t\t\t\tif (this._oHOAVHDialog) {\r\n\t\t\t\t\tthis._oHOAVHDialog.destroy();\r\n\t\t\t\t\tthis._oHOAVHDialog = null;\r\n\t\t\t\t}\r\n\t\t\t} else if (sCustomData === \"PicCode\") {\r\n\t\t\t\tif (this._oPicCodeVHDialog) {\r\n\t\t\t\t\tthis._oPicCodeVHDialog.destroy();\r\n\t\t\t\t\tthis._oPicCodeVHDialog = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for Change Log\r\n\t\t * @param {Event} oEvent event for change log press\r\n\t\t */\r\n\t\tonChangeLogPress: function(oEvent) {\r\n\t\t\tif (!this._createChangeLogFrag) {\r\n\t\t\t\tvar fragId = this.createId(\"IdChangeLog\");\r\n\t\t\t\tthis._createChangeLogFrag = sap.ui.xmlfragment(fragId, \"com.goap.cfms.works.as.fragment.changeLog\", this);\r\n\t\t\t\tthis.getView().addDependent(this._createChangeLogFrag);\r\n\t\t\t}\r\n\t\t\tvar oChangeTable = this._getFragControlById(\"idProductsTable\", \"IdChangeLog\");\r\n\r\n\t\t\toChangeTable.bindAggregation(\"items\", {\r\n\t\t\t\tpath: \"AsDettoChangeLogs\",\r\n\t\t\t\ttemplate: this._returnChangeLogTemplate()\r\n\t\t\t});\r\n\t\t\tthis._createChangeLogFrag.open();\r\n\t\t},\r\n\t\t/**\r\n\t\t * Function to return the template for the Change Log Table\r\n\t\t * @private\r\n\t\t * @returns {Object} Template for the change log table list item\r\n\t\t */\r\n\t\t_returnChangeLogTemplate: function() {\r\n\t\t\tvar oLogTemplate = new sap.m.ColumnListItem({\r\n\t\t\t\tcells: [\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{User}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{path:'Date',type: 'sap.ui.model.odata.type.DateTime'}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{Type}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{ShortDesc}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{Estimated Value}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{GoNumber}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{path:'GoRefDate',type: 'sap.ui.model.odata.type.DateTime'}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{Category}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{LocalClass}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{StatusText}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{MainWorkNature}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{SubclassL01}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{SubclassL02}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{SubclassL03}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{InitDepartDesc}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{Scheme}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{Stage}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{ExecutingDept}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{BcRatio}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{Agency}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{RefOrdnum}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{path:'RefDate',type: 'sap.ui.model.odata.type.DateTime'}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{ValueSactioned}\"\r\n\t\t\t\t\t}), new sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{CurrencySanctioned}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{ApprovOrder}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{path:'ApprovDate',type: 'sap.ui.model.odata.type.DateTime'}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{ApprovStatus}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{District}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{Mandal}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{Village}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{Loksabha}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{RefAsType}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{FundingAgencyId}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{RefernAgency}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{RefNumber}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"{DcwType}\"\r\n\t\t\t\t\t})\r\n\t\t\t\t]\r\n\t\t\t});\r\n\t\t\treturn oLogTemplate;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler for closing change log dialog\r\n\t\t */\r\n\t\tonCloseChangeLogDialog: function() {\r\n\t\t\tthis._createChangeLogFrag.close();\r\n\t\t},\r\n\t\t/* =========================================================== */\r\n\t\t/* begin: internal methods                                     */\r\n\t\t/* =========================================================== */\r\n\r\n\t\t/**\r\n\t\t * Binds the view to the object path and expands the aggregated line items.\r\n\t\t * @function\r\n\t\t * @param {sap.ui.base.Event} oEvent pattern match event in route 'object'\r\n\t\t * @private\r\n\t\t */\r\n\t\t_onObjectMatched: function(oEvent) {\r\n\t\t\tif (this.getView().getModel(\"appView\").getProperty(\"/bPositionChangeLoadFC\")) {\r\n\t\t\t\tthis.getView().getModel(\"appView\").setProperty(\"/bPositionChangeLoadFC\", false);\r\n\t\t\t\tthis._callFieldControl({\r\n\t\t\t\t\taction: \"LOAD\",\r\n\t\t\t\t\tapplication: \"AS\",\r\n\t\t\t\t\tPositionid: this.getView().getModel(\"appView\").getProperty(\"/position\"),\r\n\t\t\t\t\tRole: this.getView().getModel(\"appView\").getProperty(\"/role\")\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tvar sViewState = \"\",\r\n\t\t\t\tsDraftState = \"\",\r\n\t\t\t\taViewState,\r\n\t\t\t\toDetailViewModel = this.getModel(\"detailView\"),\r\n\t\t\t\toAppViewModel = this.getModel(\"appView\"),\r\n\t\t\t\tsObjectId = oEvent.getParameter(\"arguments\").objectId,\r\n\t\t\t\tstateId = oEvent.getParameter(\"arguments\").stateId,\r\n\t\t\t\toParam = this.getOwnerComponent().getComponentData().startupParameters.Mode;\r\n\t\t\tif (oParam) {\r\n\t\t\t\toDetailViewModel.setProperty(\"/Mode\", oParam[0]);\r\n\t\t\t}\r\n\t\t\tif (stateId.indexOf(\":\") !== -1) {\r\n\t\t\t\taViewState = stateId.split(\":\");\r\n\t\t\t\tsViewState = aViewState[0];\r\n\t\t\t\tsDraftState = aViewState[1];\r\n\t\t\t} else {\r\n\t\t\t\tsViewState = stateId;\r\n\t\t\t}\r\n\t\t\t//\t\t\toDetailViewModel.setProperty(\"/stateId\", sViewState);\r\n\t\t\toDetailViewModel.setProperty(\"/DraftStatus\", sDraftState);\r\n\t\t\tthis._authorizeUser(sObjectId);\r\n\t\t\tif (sap.ui.getCore().getModel(\"ZWRKGlobalModel\").getProperty(\"/AS/bNavtoAsfromDocFlow\")) {\r\n\t\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bNavtoAsfromDocFlow\", false);\r\n\t\t\t\tthis._notAllowEditOnDocument();\r\n\t\t\t} else {\r\n\t\t\t\tif (sap.ui.getCore().getModel(\"ZWRKGlobalModel\").getProperty(\"/AS/bUserCreateAS\")) {\r\n\t\t\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bUserCreateAS\", false);\r\n\t\t\t\t\tthis._changeFullScreenMode(true, \"detail\", \"MasterPage\", \"asIdBtnScreenToggle\");\r\n\t\t\t\t\tthis._allowEditOnDocument();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis._notAllowEditOnDocument();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//\t\t\tvar bEditable = false;\r\n\t\t\t//\t\t\tif (sViewState !== \"D\") {\r\n\t\t\t//\t\t\t\tbEditable = true;\r\n\t\t\t//\t\t\t\t//Enabling/desabling the control based on Visible Mode of Detail view\r\n\t\t\t//\t\t\t\toAppViewModel.setProperty(\"/bEnabledMasterViewCtr\", false);\r\n\t\t\t//\t\t\t\toAppViewModel.setProperty(\"/sMasterListMode\", \"None\");\r\n\t\t\t//\t\t\t} else {\r\n\t\t\t//\r\n\t\t\t//\t\t\t\tbEditable = false;\r\n\t\t\t//\t\t\t\toAppViewModel.setProperty(\"/bEnabledMasterViewCtr\", true);\r\n\t\t\t//\t\t\t\toAppViewModel.setProperty(\"/sMasterListMode\", \"SingleSelectMaster\");\r\n\t\t\t//\t\t\t}\r\n\t\t\t//\t\t\toDetailViewModel.setProperty(\"/bEditable\", bEditable);\r\n\t\t\toAppViewModel.updateBindings();\r\n\t\t\toAppViewModel.setProperty(\"/layout\", \"TwoColumnsMidExpanded\");\r\n\r\n\t\t\tthis.getModel().metadataLoaded().then(function() {\r\n\t\t\t\tvar sObjectPath = this.getModel().createKey(\"WrkDetailsSet\", {\r\n\t\t\t\t\tGuid: sObjectId\r\n\t\t\t\t});\r\n\t\t\t\tthis._bindView(\"/\" + sObjectPath, sObjectId);\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\t//Migration Call\r\n\t\t\tif ($.sap.ASNUMBER === undefined) {\r\n\t\t\t\tthis._getMigCheckSet();\r\n\t\t\t} else {\r\n\t\t\t\tthis._getMigCheckSet($.sap.ASNUMBER.AsNumber);\r\n\t\t\t}\r\n\t\t\t//\t\t\tif (sap.ui.getCore().getModel(\"ZWRKGlobalModel\").getProperty(\"/AS/bFullScreen\")) {\r\n\t\t\t//\t\t\t\tthis._changeFullScreenMode(true, \"detail\", \"MasterPage\", \"asIdBtnScreenToggle\");\r\n\t\t\t//\t\t\t}\r\n\t\t},\r\n\r\n\t\t// Migration Code Start\r\n\t\t_getMigCheckSet: function(data) {\r\n\t\t\tif (data === undefined) {\r\n\t\t\t\tvar NewASNumber = this.getView().byId(\"idCode\").getValue();\r\n\t\t\t} else {\r\n\t\t\t\tvar NewASNumber = data;\r\n\t\t\t}\r\n\t\t\tvar that = this;\r\n\t\t\tvar CheckUrl = \"/WrkMigCheckSet(Code='\" + NewASNumber + \"',AppType='ZWAS')\";\r\n\t\t\tthis.getOwnerComponent().getModel().read(CheckUrl, {\r\n\t\t\t\tsuccess: function(oData, oResponse) {\r\n\t\t\t\t\tthat.NewASNumber = oData;\r\n\t\t\t\t\tif (oData.Migrated === \"X\") {\r\n\t\t\t\t\t\tthat.getView().getModel(\"detailView\").setProperty(\"/Migrated\", true);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.getView().getModel(\"detailView\").setProperty(\"/Migrated\", false);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terror: function(error) {}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tonAddMigPress: function(oEvent) {\r\n\t\t\t// this._setFormReset();\r\n\t\t\tthis.getView().setBusy(true);\r\n\t\t\tvar that = this;\r\n\t\t\tvar Url = \"/WrkMigCmmSet(Guid=guid'\" + oEvent.getSource().getBindingContext().getProperty(\"Guid\") + \"',AsNumber='\" + this.getView()\r\n\t\t\t\t.byId(\"idCode\").getValue() + \"',ApplicationName='ZWAS')\";\r\n\t\t\tthis.getOwnerComponent().getModel().read(Url, {\r\n\t\t\t\turlParameters: {\r\n\t\t\t\t\t'$expand': \"WrkOldAs_Nav\"\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function(oData, oResponse) {\r\n\t\t\t\t\tthat.SancDate = oData.SanDate;\r\n\t\t\t\t\tthat.SancAmount = oData.SanAmount;\r\n\t\t\t\t\tvar oModelTable = new sap.ui.model.json.JSONModel();\r\n\t\t\t\t\toModelTable.setData([]);\r\n\t\t\t\t\tvar aArray = [];\r\n\t\t\t\t\tfor (var i = 0; i < oData.WrkOldAs_Nav.results.length; i++) {\r\n\t\t\t\t\t\tif (that.getModel(\"detailView\").getProperty(\"/WfRole\") === \"C\" && that.getModel(\"detailView\").getProperty(\"/stateId\") === \"E\" ||\r\n\t\t\t\t\t\t\tthat.getModel(\"detailView\").getProperty(\"/WfRole\") === \"C\" && that.getModel(\"detailView\").getProperty(\"/stateId\") === \"D\" ||\r\n\t\t\t\t\t\t\tthat.getModel(\"detailView\").getProperty(\"/WfRole\") === \"A\" && that.getModel(\"detailView\").getProperty(\"/stateId\") === \"E\" ||\r\n\t\t\t\t\t\t\tthat.getModel(\"detailView\").getProperty(\"/WfRole\") === \"A\" && that.getModel(\"detailView\").getProperty(\"/stateId\") === \"D\") {\r\n\t\t\t\t\t\t\tvar Obj = {};\r\n\t\t\t\t\t\t\tObj.MigASEditNumber = oData.WrkOldAs_Nav.results[i].OldAsNumber;\r\n\t\t\t\t\t\t\tObj.SancEditAmunt = oData.WrkOldAs_Nav.results[i].SanAmount;\r\n\t\t\t\t\t\t\tObj.ASEditDescription = oData.WrkOldAs_Nav.results[i].PrjDesc;\r\n\t\t\t\t\t\t\tObj.SanctionEditRefe = oData.WrkOldAs_Nav.results[i].SanRefNo;\r\n\t\t\t\t\t\t\tObj.SanEditAmntEditable = false;\r\n\t\t\t\t\t\t\tObj.MigCDSEditable = false;\r\n\t\t\t\t\t\t} else if (that.getModel(\"detailView\").getProperty(\"/stateId\") !== \"D\") {\r\n\t\t\t\t\t\t\tvar Obj = {};\r\n\t\t\t\t\t\t\tObj.MigASEditNumber = oData.WrkOldAs_Nav.results[i].OldAsNumber;\r\n\t\t\t\t\t\t\tObj.SancEditAmunt = oData.WrkOldAs_Nav.results[i].SanAmount;\r\n\t\t\t\t\t\t\tObj.ASEditDescription = oData.WrkOldAs_Nav.results[i].PrjDesc;\r\n\t\t\t\t\t\t\tObj.SanctionEditRefe = oData.WrkOldAs_Nav.results[i].SanRefNo;\r\n\t\t\t\t\t\t\tObj.SanEditAmntEditable = true;\r\n\t\t\t\t\t\t\tObj.MigCDSEditable = true;\r\n\t\t\t\t\t\t\tObj.DelteEditable = true;\r\n\t\t\t\t\t\t} else if (that.getModel(\"detailView\").getProperty(\"/stateId\") === \"D\") {\r\n\t\t\t\t\t\t\tvar Obj = {};\r\n\t\t\t\t\t\t\tObj.MigASEditNumber = oData.WrkOldAs_Nav.results[i].OldAsNumber;\r\n\t\t\t\t\t\t\tObj.SancEditAmunt = oData.WrkOldAs_Nav.results[i].SanAmount;\r\n\t\t\t\t\t\t\tObj.ASEditDescription = oData.WrkOldAs_Nav.results[i].PrjDesc;\r\n\t\t\t\t\t\t\tObj.SanctionEditRefe = oData.WrkOldAs_Nav.results[i].SanRefNo;\r\n\t\t\t\t\t\t\tObj.SanEditAmntEditable = false;\r\n\t\t\t\t\t\t\tObj.MigCDSEditable = false;\r\n\t\t\t\t\t\t\tObj.DelteEditable = false;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\taArray.push(Obj);\r\n\t\t\t\t\t\tObj = {};\r\n\t\t\t\t\t}\r\n\t\t\t\t\taArray = {\r\n\t\t\t\t\t\t\"results\": aArray\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\toModelTable.setData([]);\r\n\t\t\t\t\toModelTable.setData(aArray);\r\n\t\t\t\t\tthat.getView().setModel(oModelTable, \"TableModel\");\r\n\t\t\t\t\tthat.getView().getModel(\"TableModel\").updateBindings();\r\n\t\t\t\t\tif (!that._EditMigratedASFrag) {\r\n\t\t\t\t\t\tvar fragId = that.createId(\"createMigratedASDialog\");\r\n\t\t\t\t\t\tthat._EditMigratedASFrag = sap.ui.xmlfragment(fragId, \"com.goap.cfms.works.as.fragment.EditMigratedASDialog\", that);\r\n\t\t\t\t\t\tthat.getView().addDependent(that._EditMigratedASFrag);\r\n\t\t\t\t\t\tjQuery.sap.syncStyleClass(\"sapUiSizeCompact\", that.getView(), that._EditMigratedASFrag);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (oData.SanType === \"\") {\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"goCategory\").setSelected(false);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"deptCategory\").setSelected(true);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"SanctionNumber2\").setVisible(true);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"SanctionNumber1\").setVisible(false);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"SanctionType\").setVisible(false);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"ASTypeId\").setVisible(false);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"ASTypeId\").setSelectedKey(oData.SanType);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"sancNo\").setValue(\"\");\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"sancNo1\").setValue(oData.SanNumber);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"goCategory\").setSelected(true);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"deptCategory\").setSelected(false);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"SanctionNumber1\").setVisible(true);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"SanctionNumber2\").setVisible(false);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"SanctionType\").setVisible(true);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"ASTypeId\").setVisible(true);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"ASTypeId\").setSelectedKey(oData.SanType);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"sancNo\").setValue(oData.SanNumber);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"sancNo1\").setValue(\"\");\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (oData.NonCfmsInd === \"X\") {\r\n\t\t\t\t\t\tthat.NonCfmsInd = oData.NonCfmsInd;\r\n\t\t\t\t\t\tif (that.getModel(\"detailView\").getProperty(\"/WfRole\") === \"C\" && that.getModel(\"detailView\").getProperty(\"/stateId\") === \"E\" ||\r\n\t\t\t\t\t\t\tthat.getModel(\"detailView\").getProperty(\"/WfRole\") === \"C\" && that.getModel(\"detailView\").getProperty(\"/stateId\") === \"D\" ||\r\n\t\t\t\t\t\t\tthat.getModel(\"detailView\").getProperty(\"/WfRole\") === \"A\" && that.getModel(\"detailView\").getProperty(\"/stateId\") === \"E\" ||\r\n\t\t\t\t\t\t\tthat.getModel(\"detailView\").getProperty(\"/WfRole\") === \"A\" && that.getModel(\"detailView\").getProperty(\"/stateId\") === \"D\" ||\r\n\t\t\t\t\t\t\tthat.getModel(\"detailView\").getProperty(\"/stateId\") === \"D\") {\r\n\t\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"sancAmount\").setEditable(false);\r\n\t\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"UpdateBtnId\").setVisible(false);\r\n\t\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"CancelBtnId\").setVisible(false);\r\n\t\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"OkBtnId\").setVisible(true);\r\n\t\t\t\t\t\t} else if (that.getModel(\"detailView\").getProperty(\"/stateId\") !== \"D\") {\r\n\t\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"sancAmount\").setEditable(true);\r\n\t\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"UpdateBtnId\").setVisible(true);\r\n\t\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"CancelBtnId\").setVisible(true);\r\n\t\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"OkBtnId\").setVisible(false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"SanctionAmountId\").setVisible(true);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"sancAmount\").setValue(oData.SanAmount);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"TableBelowForm\").setVisible(false);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.NonCfmsInd = oData.NonCfmsInd;\r\n\t\t\t\t\t\tif (that.getModel(\"detailView\").getProperty(\"/WfRole\") === \"C\" && that.getModel(\"detailView\").getProperty(\"/stateId\") === \"E\" ||\r\n\t\t\t\t\t\t\tthat.getModel(\"detailView\").getProperty(\"/WfRole\") === \"C\" && that.getModel(\"detailView\").getProperty(\"/stateId\") === \"D\" ||\r\n\t\t\t\t\t\t\tthat.getModel(\"detailView\").getProperty(\"/WfRole\") === \"A\" && that.getModel(\"detailView\").getProperty(\"/stateId\") === \"E\" ||\r\n\t\t\t\t\t\t\tthat.getModel(\"detailView\").getProperty(\"/WfRole\") === \"A\" && that.getModel(\"detailView\").getProperty(\"/stateId\") === \"D\" ||\r\n\t\t\t\t\t\t\tthat.getModel(\"detailView\").getProperty(\"/stateId\") === \"D\") {\r\n\t\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"UpdateBtnId\").setVisible(false);\r\n\t\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"CancelBtnId\").setVisible(false);\r\n\t\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"OkBtnId\").setVisible(true);\r\n\t\t\t\t\t\t} else if (that.getModel(\"detailView\").getProperty(\"/stateId\") !== \"D\") {\r\n\t\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"UpdateBtnId\").setVisible(true);\r\n\t\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"CancelBtnId\").setVisible(true);\r\n\t\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"OkBtnId\").setVisible(false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"sancAmount\").setEditable(false);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"SanctionAmountId\").setVisible(false);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"sancAmount\").setValue(\"\");\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"TableBelowForm\").setVisible(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (that.getModel(\"detailView\").getProperty(\"/stateId\") === \"D\") {\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"ASDescr\").setEditable(false);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"SanctionDescr\").setEditable(false);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"sancAmount\").setEditable(false);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"goAmount\").setEditable(false);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"goCategory\").setEditable(false);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"deptCategory\").setEditable(false);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"sancNo\").setEditable(false);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"sancNo1\").setEditable(false);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"ASTypeId\").setEditable(false);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"SanctionDate\").setEditable(false);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"SanctionDept\").setEditable(false);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"sanAuthority\").setEditable(false);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"ASDescr\").setEditable(true);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"SanctionDescr\").setEditable(true);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"sancAmount\").setEditable(true);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"goAmount\").setEditable(true);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"goCategory\").setEditable(true);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"deptCategory\").setEditable(true);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"sancNo\").setEditable(true);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"sancNo1\").setEditable(true);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"ASTypeId\").setEditable(true);\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"SanctionDate\").setEditable(true);\r\n\t\t\t\t\t\tif (oData.TsFlag === true) {\r\n\t\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"SanctionDept\").setEditable(false);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"SanctionDept\").setEditable(true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthat._getMigratedCreateFragControlById(\"sanAuthority\").setEditable(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthat._getMigratedCreateFragControlById(\"SanctionDate\").setValue(that.dateconv(oData.SanDate));\r\n\t\t\t\t\tthat._getMigratedCreateFragControlById(\"sanAuthority\").setValue(oData.SanAuthority);\r\n\t\t\t\t\tthat._getMigratedCreateFragControlById(\"goAmount\").setValue(oData.GoAmount);\r\n\r\n\t\t\t\t\tthat._getMigratedCreateFragControlById(\"SanctionDept\").setValue(oData.SanDepartment + \"-\" + oData.Beschr);\r\n\t\t\t\t\t/*\tdate picker only select (no need enter date) - in fragment - -start cfms_ctm_npv(28_01_23)*/\r\n\t\t\t\t\tvar dateArray = [\"SanctionDate\"];\r\n\t\t\t\t\t// dateArray.forEach(date => {\r\n\t\t\t\t\t// var oDatePicker = sap.ui.getCore().byId(date);\r\n\t\t\t\t\tvar oDatePicker = that._getMigratedCreateFragControlById(\"SanctionDate\");\r\n\t\t\t\t\t// var oDatePicker = \tthis._getMigratedCreateFragControlById(\"sancDate\").getId();\r\n\t\t\t\t\t// var oDatePicker = this.getView().byId(date);\r\n\t\t\t\t\toDatePicker.addEventDelegate({\r\n\t\t\t\t\t\tonAfterRendering: function() {\r\n\t\t\t\t\t\t\tvar oDateInner = this.$().find('.sapMInputBaseInner');\r\n\t\t\t\t\t\t\t// var oDateInner = this._getMigratedCreateFragControlById(\"sancDate\").$().find('.sapMInputBaseInner');\r\n\t\t\t\t\t\t\tvar oID = oDateInner[0].id;\r\n\t\t\t\t\t\t\t$('#' + oID).attr(\"disabled\", \"disabled\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, oDatePicker);\r\n\r\n\t\t\t\t\t// sap.ui.getCore().byId(\"sancDate\").setMaxDate(new Date());\r\n\t\t\t\t\t// sap.ui.getCore().byId(\"sancDate\").setMaxDate(new Date());\r\n\t\t\t\t\t/*\t\tdate picker only select (no need enter date) - in fragment --End - cfms_ctm_npv(28_01_23)*/\r\n\t\t\t\t\tthat._EditMigratedASFrag.open();\r\n\t\t\t\t\tthat.getView().setBusy(false);\r\n\t\t\t\t},\r\n\t\t\t\terror: function(error) {}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t_getMigratedCreateFragControlById: function(sControlId) {\r\n\t\t\treturn sap.ui.core.Fragment.byId(this.createId(\"createMigratedASDialog\"), sControlId);\r\n\t\t},\r\n\r\n\t\tOnpressAddnewRow: function(oEvent) {\r\n\r\n\t\t\tvar oCreateNewASModel = this.getModel(\"createNewASModel\");\r\n\t\t\tvar Obj = {\r\n\t\t\t\tMigASEditNumber: \"\",\r\n\t\t\t\tSancEditAmunt: \"\",\r\n\t\t\t\tASEditDescription: \"\",\r\n\t\t\t\tSanctionEditRefe: \"\"\r\n\t\t\t};\r\n\t\t\tvar data = this.getView().getModel(\"TableModel\").getData().results;\r\n\t\t\tdata.push(Obj);\r\n\t\t\tthis.getView().getModel(\"TableModel\").refresh();\r\n\t\t},\r\n\r\n\t\tOnpressDelete: function(oEvent) {\r\n\r\n\t\t\tvar RowId = oEvent.getSource().getId().split(\"-\")[10];\r\n\t\t\tthis.getView().getModel(\"TableModel\").getData().results.splice(RowId, 1);\r\n\t\t\tthis.getView().getModel(\"TableModel\").refresh();\r\n\t\t},\r\n\r\n\t\tonUpdateMigratedAS: function(oEvent) {\r\n\t\t\tthis.getView().setBusy(true);\r\n\t\t\tvar that = this;\r\n\t\t\tvar sanAMount = \"0\";\r\n\t\t\tif (that.NonCfmsInd === \"\") {\r\n\t\t\t\tfor (var i = 0; i < this.getView().getModel(\"TableModel\").getData().results.length; i++) {\r\n\t\t\t\t\tvar sanAMount = Number(sanAMount) + Number(this.getView().getModel(\"TableModel\").getData().results[i].SancAmunt);\r\n\t\t\t\t\tvar RowTable = i + 1;\r\n\t\t\t\t\tif (this.getView().getModel(\"TableModel\").getData().results[i].MigASNumber === \"\") {\r\n\t\t\t\t\t\tsap.m.MessageBox.error(\"Please Enter the Old AS Number in Row '\" + RowTable + \"'. \");\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else if (this.getView().getModel(\"TableModel\").getData().results[i].SancAmunt === \"\") {\r\n\t\t\t\t\t\tsap.m.MessageBox.error(\"Please Enter the Old AS Number in Row '\" + RowTable + \"'. \");\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar category, sancno;\r\n\t\t\tif (this._getMigratedCreateFragControlById(\"goCategory\").getSelected()) {\r\n\t\t\t\tcategory = 'GO';\r\n\t\t\t\tsancno = that._getMigratedCreateFragControlById(\"sancNo\").getValue();\r\n\t\t\t} else {\r\n\t\t\t\tcategory = 'DEP';\r\n\t\t\t\tsancno = that._getMigratedCreateFragControlById(\"sancNo1\").getValue();\r\n\t\t\t}\r\n\t\t\tvar Arry = [];\r\n\t\t\tvar Obj = {};\r\n\t\t\tfor (var i = 0; i < this.getView().getModel(\"TableModel\").getData().results.length; i++) {\r\n\t\t\t\tObj.ApplicationName = \"ZWAS\";\r\n\t\t\t\tObj.OldAsNumber = this.getView().getModel(\"TableModel\").getData().results[i].MigASEditNumber;\r\n\t\t\t\tif (this.getView().getModel(\"TableModel\").getData().results[i].SancEditAmunt === \"\") {\r\n\t\t\t\t\tObj.SanAmount = \"0.00\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tObj.SanAmount = this.getView().getModel(\"TableModel\").getData().results[i].SancEditAmunt;\r\n\t\t\t\t}\r\n\t\t\t\tObj.SanRefNo = this.getView().getModel(\"TableModel\").getData().results[i].SanctionEditRefe;\r\n\t\t\t\tObj.PrjDesc = this.getView().getModel(\"TableModel\").getData().results[i].ASEditDescription;\r\n\t\t\t\tArry.push(Obj);\r\n\t\t\t\tObj = {};\r\n\t\t\t}\r\n\t\t\tvar dt = that._DateCoversion(that._getMigratedCreateFragControlById(\"SanctionDate\").getValue());\r\n\t\t\t// oEvent.getSource().getBindingContext().getProperty(\"Guid\")\r\n\t\t\tif (that._getMigratedCreateFragControlById(\"sancAmount\").getValue() === \"\") {\r\n\t\t\t\tvar Sanamnt = \"0.00\";\r\n\t\t\t} else {\r\n\t\t\t\tvar Sanamnt = that._getMigratedCreateFragControlById(\"sancAmount\").getValue();\r\n\t\t\t}\r\n\t\t\tvar SanDepartment = \"\";\r\n\t\t\tif (this.getOwnerComponent().getModel(\"migratedModel\").getData().beschr === \"\") {\r\n\t\t\t\tSanDepartment = this._getMigratedCreateFragControlById(\"SanctionDept\").getValue().split(\"-\")[0];\r\n\t\t\t} else {\r\n\t\t\t\tSanDepartment = this.getOwnerComponent().getModel(\"migratedModel\").getData().beschr;\r\n\t\t\t}\r\n\t\t\tvar migratedPayloadData = {\r\n\t\t\t\tAction: 'MIGSAVE',\r\n\t\t\t\tGuid: oEvent.getSource().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\t// OldAsNumber: that.oldASNumber,\r\n\t\t\t\tSanDate: dt,\r\n\t\t\t\tSanType: that._getMigratedCreateFragControlById(\"ASTypeId\").getSelectedKey(),\r\n\t\t\t\tSanNumber: sancno,\r\n\t\t\t\tSanAmount: Sanamnt,\r\n\t\t\t\tGoAmount: that._getMigratedCreateFragControlById(\"goAmount\").getValue(),\r\n\t\t\t\tSanAuthority: this._getMigratedCreateFragControlById(\"sanAuthority\").getValue().split(\" \")[0],\r\n\t\t\t\tSanCategory: category,\r\n\t\t\t\tSanDes: \"X\",\r\n\t\t\t\tSanDepartment: SanDepartment,\r\n\t\t\t\tBeschr: \"\",\r\n\t\t\t\tAsNumber: that.getView().byId(\"idCode\").getValue(),\r\n\t\t\t\tNonCfmsInd: that.NonCfmsInd,\r\n\t\t\t\tPosition: that.getModel(\"appView\").getProperty(\"/position\"),\r\n\t\t\t\tWrkOldAs_Nav: Arry,\r\n\t\t\t\tTsFlag: false\r\n\t\t\t};\r\n\t\t\t// below code added by SAGAR to clear the dependent field when user changes the sanction dept in mig screen\r\n\t\t\tif (SanDepartment !== this.getView().getBindingContext().getProperty(\"InitiatinDept\")) {\r\n\t\t\t\tthis.bSanctionDeptUpdateMig = true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.bSanctionDeptUpdateMig = false;\r\n\t\t\t}\r\n\t\t\tthis._saveMigratedASData(migratedPayloadData);\r\n\t\t},\r\n\r\n\t\t_DateCoversion: function(value) {\r\n\t\t\t// var d = value.split(\".\")[0];\r\n\t\t\t// var m = value.split(\".\")[1];\r\n\t\t\t// var y = value.split(\".\")[2];\r\n\t\t\t// var FullDate = m + \".\" + d + \".\" + y;\r\n\t\t\t// return FullDate;\r\n\t\t\tvar dt2 = value.split(\".\");\r\n\t\t\tif (dt2[1] === \"01\" && dt2[0] === \"31\" || dt2[1] === \"03\" && dt2[0] === \"31\" || dt2[1] === \"05\" && dt2[0] === \"31\" || dt2[1] ===\r\n\t\t\t\t\"07\" && dt2[0] === \"31\" || dt2[1] === \"08\" && dt2[0] === \"31\" || dt2[1] === \"10\" && dt2[0] === \"31\" || dt2[1] ===\r\n\t\t\t\t\"12\" && dt2[0] === \"31\") {\r\n\t\t\t\tdt2[0] = \"01\";\r\n\t\t\t\tif (dt2[1] === \"12\") {\r\n\t\t\t\t\tdt2[1] = \"01\";\r\n\t\t\t\t\tdt2[2] = parseInt(dt2[2]) + 1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdt2[1] = parseInt(dt2[1]) + 1;\r\n\t\t\t\t}\r\n\t\t\t} else if (dt2[1] === \"04\" && dt2[0] === \"30\" || dt2[1] === \"06\" && dt2[0] === \"30\" || dt2[1] === \"09\" && dt2[0] === \"30\" || dt2[1] ===\r\n\t\t\t\t\"11\" && dt2[0] === \"30\") {\r\n\t\t\t\t/* old code -start*/\r\n\t\t\t\t// dt2[1] = \"01\";\r\n\t\t\t\t// dt2[2] = parseInt(dt2[2]) + 1;\r\n\t\t\t\t/* old code -end*/\r\n\t\t\t\t/*code changed on - cfms_ctm_npv -(23_01_23) -start*/\r\n\t\t\t\tdt2[0] = \"01\";\r\n\t\t\t\tdt2[1] = parseInt(dt2[1]) + 1;\r\n\t\t\t\t/*code changed on - cfms_ctm_npv -(23_01_23) -end*/\r\n\t\t\t} else if (dt2[1] === \"02\" && dt2[0] === \"28\" || dt2[1] === \"02\" && dt2[0] === \"29\") {\r\n\t\t\t\t/* old code -start*/\r\n\t\t\t\t// dt2[0] = \"01\";\r\n\t\t\t\t// dt2[1] = parseInt(dt2[1]) + 1;\r\n\t\t\t\t/* old code -end*/\r\n\t\t\t\t/*code changed on - cfms_ctm_npv -(23_01_23) -start*/\r\n\t\t\t\tdt2[0] = \"01\";\r\n\t\t\t\tdt2[1] = parseInt(dt2[1]) + 1;\r\n\t\t\t\t/*code changed on - cfms_ctm_npv -(23_01_23) -end*/\r\n\t\t\t} else if (dt2[1] === \"01\" && dt2[0] !== \"31\" || dt2[1] === \"03\" && dt2[0] !== \"31\" || dt2[1] === \"05\" && dt2[0] !== \"31\" || dt2[1] ===\r\n\t\t\t\t\"07\" && dt2[0] !== \"31\" || dt2[1] === \"08\" && dt2[0] !== \"31\" || dt2[1] === \"10\" && dt2[0] !== \"31\" || dt2[1] ===\r\n\t\t\t\t\"12\" && dt2[0] !== \"31\") {\r\n\t\t\t\tdt2[0] = parseInt(dt2[0]) + 1;\r\n\t\t\t} else if (dt2[1] === \"04\" && dt2[0] !== \"30\" || dt2[1] === \"06\" && dt2[0] !== \"30\" || dt2[1] === \"09\" && dt2[0] !== \"30\" || dt2[1] ===\r\n\t\t\t\t\"11\" && dt2[0] !== \"30\") {\r\n\t\t\t\tdt2[0] = parseInt(dt2[0]) + 1;\r\n\t\t\t} else if (dt2[1] === \"02\" && dt2[0] !== \"28\" || dt2[1] === \"02\" && dt2[0] !== \"29\") {\r\n\t\t\t\tdt2[0] = parseInt(dt2[0]) + 1;\r\n\t\t\t}\r\n\r\n\t\t\tfunction addZero(i) {\r\n\t\t\t\tif (i < 10) {\r\n\t\t\t\t\ti = \"0\" + i;\r\n\t\t\t\t}\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t\tif (dt2[1].toString().length === 1) {\r\n\t\t\t\tdt2[1] = addZero(dt2[1]);\r\n\t\t\t}\r\n\t\t\tif (dt2[0].toString().length === 1) {\r\n\t\t\t\tdt2[0] = addZero(dt2[0]);\r\n\t\t\t}\r\n\t\t\t/*eslint-disable */\r\n\t\t\t//eslint-disable-no-implicit-coercion\r\n\t\t\tvar dt = \"\" + dt2[2] + \"\" + dt2[1] + \"\" + dt2[0] + \"\";\r\n\t\t\tvar dt1 = \"\" + dt.toString().slice(4, 6) + \".\" + dt.toString().slice(6, 8) + \".\" + dt.toString().slice(0, 4) + \"\";\r\n\t\t\tvar Fulldate = \"\\/Date(\" + new Date(dt1).getTime() + \")\\/\";\r\n\t\t\treturn Fulldate;\r\n\t\t\t/*eslint-enable */\r\n\t\t},\r\n\t\t_saveMigratedASData: function(data) {\r\n\t\t\tvar that = this;\r\n\t\t\tthis.getOwnerComponent().getModel().create(\"/WrkMigCmmSet\", data, {\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tsuccess: function(oData, oResponse) {\r\n\t\t\t\t\tthat.payloadData = oData;\r\n\t\t\t\t\t$.sap.ASNUMBER = oData;\r\n\t\t\t\t\t// below code a\r\n\t\t\t\t\tif (that.bSanctionDeptUpdateMig) {\r\n\t\t\t\t\t\tthat.getModel().setProperty(that.byId(\"idExecDept\").getBindingContext().getPath() + \"/ExecutingDept\", \"\");\r\n\t\t\t\t\t\tthat.byId(\"idWorksSrcHoA\").getBinding(\"items\").refresh(true);\r\n\t\t\t\t\t\tthat.byId(\"idWorksHoA\").getBinding(\"items\").refresh(true);\r\n\t\t\t\t\t\t// that.getView().getElementBinding().refresh();\r\n\t\t\t\t\t\t// that.byId(\"idExecDept\").fireChange();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (that._getMigratedCreateFragControlById(\"fileUpload\").getSelected()) {\r\n\t\t\t\t\t\tif (!that._poUploadFragment) {\r\n\t\t\t\t\t\t\tthat._poUploadFragment = sap.ui.xmlfragment(\"com.goap.cfms.works.as.fragment.POUpload\", that);\r\n\t\t\t\t\t\t\tthat.getView().addDependent(that._poUploadFragment);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (that.getOwnerComponent().getModel(\"uploadedItem\") != undefined) {\r\n\t\t\t\t\t\t\tthat.getOwnerComponent().getModel(\"uploadedItem\").setData([]);\r\n\t\t\t\t\t\t\tthat.getOwnerComponent().getModel(\"uploadedItem\").refresh();\r\n\t\t\t\t\t\t\tthat.getOwnerComponent().getModel(\"uploadedItem\").updateBindings();\r\n\t\t\t\t\t\t\tsap.ui.getCore().byId(\"fileUpload\").setValue(\"\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthat._poUploadFragment.open();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat._EditMigratedASFrag.close();\r\n\t\t\t\t\t\tthat.getView().setBusy(false);\r\n\t\t\t\t\t\tthat.getRouter().navTo(\"Detail\", {\r\n\t\t\t\t\t\t\tobjectId: oData.Guid,\r\n\t\t\t\t\t\t\tstateId: \"C\"\r\n\t\t\t\t\t\t}, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terror: function(error) {\r\n\t\t\t\t\t// sap.m.MessageBox.error(\"\" + JSON.parse(error.responseText).error.message.value + \"\", {\r\n\t\t\t\t\t// \tactions: [sap.m.MessageBox.Action.OK],\r\n\t\t\t\t\t// \tonClose: function (sAction) {\r\n\t\t\t\t\t// \t\tif (sAction === \"OK\" || sAction === null) {}\r\n\t\t\t\t\t// \t}\r\n\t\t\t\t\t// });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tOnPressCloseFrag: function(oEvent) {\r\n\t\t\tvar that = this;\r\n\t\t\tthat._EditMigratedASFrag.close();\r\n\t\t\t// that._EditMigratedASFrag.destroy();\r\n\t\t},\r\n\r\n\t\tOnPressOkCloseFrag: function(oEvent) {\r\n\t\t\tvar that = this;\r\n\t\t\tthat._EditMigratedASFrag.close();\r\n\t\t\t// that._EditMigratedASFrag.destroy();\r\n\t\t},\r\n\r\n\t\tdateconv: function(value) {\r\n\t\t\tvar res = String(value).slice(4, 15);\r\n\t\t\tvar m = res.slice(0, 3);\r\n\t\t\tvar d = res.slice(4, 6);\r\n\t\t\tvar y = res.slice(7, 15);\r\n\t\t\tswitch (m) {\r\n\t\t\t\tcase \"Jan\":\r\n\t\t\t\t\tm = \"01\";\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"Feb\":\r\n\t\t\t\t\tm = \"02\";\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"Mar\":\r\n\t\t\t\t\tm = \"03\";\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"Apr\":\r\n\t\t\t\t\tm = \"04\";\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"May\":\r\n\t\t\t\t\tm = \"05\";\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"Jun\":\r\n\t\t\t\t\tm = \"06\";\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"Jul\":\r\n\t\t\t\t\tm = \"07\";\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"Aug\":\r\n\t\t\t\t\tm = \"08\";\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"Sep\":\r\n\t\t\t\t\tm = \"09\";\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"Oct\":\r\n\t\t\t\t\tm = \"10\";\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"Nov\":\r\n\t\t\t\t\tm = \"11\";\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"Dec\":\r\n\t\t\t\t\tm = \"12\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tvar frmdatemil = d + \".\" + m + \".\" + y;\r\n\t\t\treturn frmdatemil;\r\n\t\t},\r\n\r\n\t\t// Migration Code Ends\r\n\t\t/**\r\n\t\t * Binds the view to the object path. Makes sure that detail view displays\r\n\t\t * a busy indicator while data for the corresponding element binding is loaded.\r\n\t\t * @function\r\n\t\t * @param {string} sObjectPath path to the object to be bound to the view.\r\n\t\t * @param {guid} sObjectId is the guid of the view to bind\r\n\t\t * @private\r\n\t\t */\r\n\t\t_bindView: function(sObjectPath, sObjectId) {\r\n\t\t\tvar that = this,\r\n\t\t\t\toLocationModel = this.getModel(\"location\");\r\n\t\t\t// Local JSON model to set visibility of location \r\n\t\t\tvar oLocationModelData = {\r\n\t\t\t\tvDistrict: false,\r\n\t\t\t\tvMandal: false,\r\n\t\t\t\tvVillage: false,\r\n\t\t\t\tvLoksabha: false,\r\n\t\t\t\tvAssembly: false,\r\n\t\t\t\tbLoc: true,\r\n\t\t\t\tbConst: true\r\n\t\t\t};\r\n\t\t\tif (!oLocationModel) {\r\n\t\t\t\toLocationModel = new JSONModel(oLocationModelData);\r\n\t\t\t\tthis.setModel(oLocationModel, \"location\");\r\n\t\t\t} else {\r\n\t\t\t\toLocationModel.setProperty(\"/\", oLocationModelData);\r\n\t\t\t}\r\n\r\n\t\t\t// Set busy indicator during view binding\r\n\t\t\tvar oViewModel = this.getModel(\"detailView\");\r\n\t\t\tthis.getModel().invalidateEntry(this.getView().getBindingContext());\r\n\t\t\tthis.getView().bindElement({\r\n\t\t\t\tpath: sObjectPath,\r\n\t\t\t\tevents: {\r\n\t\t\t\t\tdataRequested: function() {\r\n\t\t\t\t\t\toViewModel.setProperty(\"/busy\", true);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdataReceived: function(oData) {\r\n\t\t\t\t\t\tthat.getModel().resetChanges();\r\n\t\t\t\t\t\t// oViewModel.setProperty(\"/busy\", false);\r\n\t\t\t\t\t\t// \tthat.getWorkFlowLogDetails({\r\n\t\t\t\t\t\t// \t\tApplicationId : \"AS\",\r\n\t\t\t\t\t\t// \t\tGuid : sObjectId\r\n\t\t\t\t\t\t// });\r\n\t\t\t\t\t\tvar oPromiseWorkFlowLog = new Promise(function(resolve1, reject1) {\r\n\t\t\t\t\t\t\tthat.getWorkFlowLogDetails({\r\n\t\t\t\t\t\t\t\tApplicationId: \"AS\",\r\n\t\t\t\t\t\t\t\tGuid: sObjectId\r\n\t\t\t\t\t\t\t}, resolve1, reject1);\r\n\t\t\t\t\t\t}.bind(that));\r\n\t\t\t\t\t\toPromiseWorkFlowLog.then(function() {\r\n\t\t\t\t\t\t\toViewModel.setProperty(\"/busy\", false);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\toViewModel.setProperty(\"/Notingstring\", \"\");\r\n\t\t\t\t\t\toViewModel.updateBindings();\r\n\t\t\t\t\t\tthat.subClassL01Value = that.getView().getBindingContext().getProperty(\"SubclassL01\");\r\n\t\t\t\t\t\tthat.byId(\"idSubClass01\").getBinding(\"suggestionItems\").refresh();\r\n\t\t\t\t\t\tthat.byId(\"idSubClass02\").getBinding(\"suggestionItems\").refresh();\r\n\t\t\t\t\t\tthat.byId(\"idSubClass03\").getBinding(\"suggestionItems\").refresh();\r\n\r\n\t\t\t\t\t\tthat.getView().getModel(\"detailView\").setProperty(\"/CategoryKey\", that.getView().getBindingContext().getProperty(\"Category\"));\r\n\t\t\t\t\t\tthat.getView().getModel(\"detailView\").setProperty(\"/ExecutingDeptKey\", that.getView().getBindingContext().getProperty(\r\n\t\t\t\t\t\t\t\"ExecutingDept\"));\r\n\t\t\t\t\t\tthat.getView().getModel(\"detailView\").setProperty(\"/SanctioningDeptKey\", that.getView().getBindingContext().getProperty(\r\n\t\t\t\t\t\t\t\"InitiatinDept\"));\r\n\r\n\t\t\t\t\t\tthat.getUserFeedList();\r\n\t\t\t\t\t\tthat._setObjectSectionVisibility();\r\n\t\t\t\t\t\tthat._setLocationListDisplay();\r\n\t\t\t\t\t\tif (that._clearValueStates) {\r\n\t\t\t\t\t\t\tthat._clearValueStates(\"oControlModel\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthat._switchControlModel();\r\n\t\t\t\t\t\tthat._setAmendPageTitle(that.getModel(\"detailView\").getProperty(\"/stateId\"));\r\n\t\t\t\t\t\t//set the Object  Header Title\r\n\t\t\t\t\t\tthat.setPageHeaderTitle(that.getModel(\"detailView\").getProperty(\"/stateId\"));\r\n\t\t\t\t\t\t//\tthat._bindTreeTableRows();\r\n\t\t\t\t\t\tthat.byId(\"idWorksHoA\").updateAggregation(\"items\");\r\n\t\t\t\t\t\tthat._identifyHoaDdoFilters();\r\n\t\t\t\t\t\tthat._setHoaDdoFilters();\r\n\t\t\t\t\t\t//Bind Position\r\n\t\t\t\t\t\tthat._updatePositionBinding();\r\n\t\t\t\t\t\t//Clear MainworkNature\r\n\t\t\t\t\t\tthat._initControlValue();\r\n\t\t\t\t\t\t//Dynamic BindingLocal Class and catory\r\n\t\t\t\t\t\tthat._bindSelectControl();\r\n\t\t\t\t\t\t//Dynamic enable of Executing Dept if No TS is create with this AS\r\n\t\t\t\t\t\tthat._editableExectDepartment();\r\n\r\n\t\t\t\t\t\tvar aAttachFilters = new Filter({\r\n\t\t\t\t\t\t\tfilters: [\r\n\t\t\t\t\t\t\t\tnew Filter(\"DocType\", \"EQ\", 'ZWAS')\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\tand: true\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthat.byId(\"idUploadCollection\").getBinding(\"items\").filter(aAttachFilters);\r\n\r\n\t\t\t\t\t\tvar documentPosition;\r\n\t\t\t\t\t\tif (that.getView().getBindingContext().getProperty(\"Udf1\")) {\r\n\t\t\t\t\t\t\tdocumentPosition = that.getView().getBindingContext().getProperty(\"Udf1\");\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tdocumentPosition = this.getModel(\"appView\").getProperty(\"/position\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar aFilters = [];\r\n\t\t\t\t\t\tvar oFilter = new Filter(\r\n\t\t\t\t\t\t\t\"UserPosition\",\r\n\t\t\t\t\t\t\tsap.ui.model.FilterOperator.Contains, documentPosition\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\taFilters.push(oFilter);\r\n\t\t\t\t\t\t//\t\t\t            if (oData.getParameters().data.MigrationInd) {\r\n\t\t\t\t\t\tvar oFilterGuid = new Filter(\r\n\t\t\t\t\t\t\t\"ASGuid\",\r\n\t\t\t\t\t\t\tsap.ui.model.FilterOperator.EQ, oData.getParameters().data.MigrationInd === false ? \"00000000-0000-0000-0000-000000000000\" :\r\n\t\t\t\t\t\t\tsObjectId\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\taFilters.push(oFilterGuid);\r\n\t\t\t\t\t\t//\t\t\t            }\r\n\t\t\t\t\t\tthat.getView().byId(\"idInitDept\").getBinding(\"items\").filter(aFilters);\r\n\t\t\t\t\t\t//\tthat.getView().byId(\"idInitDept\").getBinding(\"items\").refresh();\r\n\r\n\t\t\t\t\t\toViewModel.setProperty(\"/busy\", false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis._bindViewDone();\r\n\t\t\tvar oChecklistTableBinding = this.byId(\"idChecklistTable\").getBinding(\"items\");\r\n\t\t\tvar sFlmFilter = sObjectPath.substring(20, sObjectPath.length - 2);\r\n\t\t\toChecklistTableBinding.filter([new Filter(\"ApplicationId\", FilterOperator.EQ, \"ZWAS\"), new Filter(\"FlmGuid\", FilterOperator.EQ,\r\n\t\t\t\tsFlmFilter)]);\r\n\t\t\t//\t\tthis.getModel().refresh(true);\r\n\r\n\t\t},\r\n\t\t/**\r\n\t\t * Internal method to return the name of the field\r\n\t\t * @param {String} sFName Name of the specific field\r\n\t\t * @returns {String} Name of the field\r\n\t\t */\r\n\t\t_getFieldName: function(sFName) {\r\n\t\t\tvar sFieldName = \"\";\r\n\t\t\tif (sFName === \"District\" || sFName === \"Mandal\" || sFName === \"Village\") {\r\n\t\t\t\tsFieldName = \"LocationDetails\";\r\n\t\t\t} else if (sFName === \"Constituency\") {\r\n\t\t\t\tsFieldName = \"AssemblyDetails\";\r\n\t\t\t} else {\r\n\t\t\t\tsFieldName = \"ConstituencyDetails\";\r\n\t\t\t}\r\n\t\t\treturn sFieldName;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Internal method to convert tokens to string and return the same with separators\r\n\t\t * @param {Event} oEvent On recieving a token in the controller\r\n\t\t * @returns {String} Value of the token as a string\r\n\t\t */\r\n\t\t_getTokensAsString: function(oEvent) {\r\n\t\t\tvar aTokenset = [],\r\n\t\t\t\tbRemovetokenAction = false,\r\n\t\t\t\tsRemoveTokenKey = \"\",\r\n\t\t\t\taTokens = oEvent.getSource().getTokens(),\r\n\t\t\t\tsCustomeControlText = oEvent.getSource().getCustomData()[0].getValue();\r\n\t\t\tif (aTokens.length > 0) {\r\n\t\t\t\tfor (var i = 0; i < aTokens.length; i++) {\r\n\t\t\t\t\tif (oEvent.getParameter(\"type\") === \"removed\") {\r\n\t\t\t\t\t\tbRemovetokenAction = true;\r\n\t\t\t\t\t\tsRemoveTokenKey = oEvent.getParameter(\"removedTokens\")[0].getKey();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (bRemovetokenAction) {\r\n\t\t\t\t\t\tif (aTokens[i].getKey() !== sRemoveTokenKey) {\r\n\t\t\t\t\t\t\taTokenset.push(aTokens[i].getKey());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\taTokenset.push(aTokens[i].getKey());\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar sTokenASString = aTokenset.join(\"$\");\r\n\t\t\tif (sTokenASString.indexOf(\"#\") === -1) {\r\n\t\t\t\tif (sCustomeControlText === \"District\") {\r\n\t\t\t\t\tsTokenASString = \"D\" + \"#\" + sTokenASString;\r\n\t\t\t\t} else if (sCustomeControlText === \"Mandal\") {\r\n\t\t\t\t\tsTokenASString = \"M\" + \"#\" + sTokenASString;\r\n\t\t\t\t} else if (sCustomeControlText === \"Village\") {\r\n\t\t\t\t\tsTokenASString = \"V\" + \"#\" + sTokenASString;\r\n\t\t\t\t} else if (sCustomeControlText === \"LokSabha\") {\r\n\t\t\t\t\tsTokenASString = \"L\" + \"#\" + sTokenASString;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsTokenASString = \"A\" + \"#\" + sTokenASString;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn sTokenASString;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Internal Method to set the Call Property for a change in the DDO table\r\n\t\t * @param {EventSource} oSource Source of the event for Property Call during saving\r\n\t\t */\r\n\t\t_setPropertyCall: function(oSource, sType, oBusyControl) {\r\n\t\t\tvar that = this,\r\n\t\t\t\toBindingContext = oSource.getBindingContext(),\r\n\t\t\t\tbNewItem = false,\r\n\t\t\t\toDetailViewModelData = this.getModel(\"detailView\").getProperty(\"/\"),\r\n\t\t\t\tsAction = \"\",\r\n\t\t\t\toHoaPayload,\r\n\t\t\t\tsUpdPath,\r\n\t\t\t\tsBindingPath = oSource.data(\"bindPath\"),\r\n\t\t\t\toHoaGuid = oBindingContext.getProperty(\"HoaGuid\"),\r\n\t\t\t\toLockTimestamp = oBindingContext.getProperty(\"LockTimestamp\");\r\n\r\n\t\t\tif (!oHoaGuid) {\r\n\t\t\t\tif (oDetailViewModelData.SubmitBtnVisibility === \"X\") {\r\n\t\t\t\t\tsAction = sType === \"TGT\" ? \"INSRI\" : \"SNSRI\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsAction = \"APPR_UPDT\";\r\n\t\t\t\t}\r\n\t\t\t\tbNewItem = true;\r\n\t\t\t\toHoaGuid = \"00000000-0000-0000-0000-000000000000\";\r\n\t\t\t\toLockTimestamp = \"\\/Date(\" + (new Date()).getTime() + \")\\/\";\r\n\t\t\t} else {\r\n\t\t\t\tif (oDetailViewModelData.SubmitBtnVisibility === \"X\") {\r\n\t\t\t\t\tsAction = sType === \"TGT\" ? \"UPDTI\" : \"UPDTS\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsAction = \"APPR_UPDT\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (sType === \"TGT\") {\r\n\t\t\t\toHoaPayload = {\r\n\t\t\t\t\tAction: sAction,\r\n\t\t\t\t\tGuid: oBindingContext.getProperty(\"Guid\"),\r\n\t\t\t\t\tHoaGuid: oHoaGuid,\r\n\t\t\t\t\tLockTimestamp: oLockTimestamp,\r\n\t\t\t\t\tItemNo: (oBindingContext.getProperty(\"ItemNo\") || \"0000\"),\r\n\t\t\t\t\tDdo: (oBindingContext.getProperty(\"Ddo\") || \"\"),\r\n\t\t\t\t\tDdoDes: (oBindingContext.getProperty(\"DdoDes\" || \"\")),\r\n\t\t\t\t\tHoa: (oBindingContext.getProperty(\"Hoa\") || \"\"),\r\n\t\t\t\t\tZshare: (oBindingContext.getProperty(\"Zshare\") || \"0\"),\r\n\t\t\t\t\tFundAgencyDesc: (oBindingContext.getProperty(\"FundAgencyDesc\") || \"\"),\r\n\t\t\t\t\tRefNumber: (oBindingContext.getProperty(\"RefNumber\") || \"0\"),\r\n\t\t\t\t\tValidFrom: (oBindingContext.getProperty(\"ValidFrom\") || new Date()),\r\n\t\t\t\t\tValidTo: (oBindingContext.getProperty(\"ValidTo\") || new Date(\"12/31/9999\"))\r\n\t\t\t\t};\r\n\t\t\t\tsUpdPath = this.getModel().createKey(\"WrkHOASet\", {\r\n\t\t\t\t\tGuid: oBindingContext.getProperty(\"Guid\"),\r\n\t\t\t\t\tHoaGuid: oHoaPayload.HoaGuid\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\toHoaPayload = {\r\n\t\t\t\t\tAction: sAction,\r\n\t\t\t\t\tGuid: oBindingContext.getProperty(\"Guid\"),\r\n\t\t\t\t\tHoaGuid: oHoaGuid,\r\n\t\t\t\t\tLockTimestamp: oLockTimestamp,\r\n\t\t\t\t\tItemNo: (oBindingContext.getProperty(\"ItemNo\") || \"0000\"),\r\n\t\t\t\t\tSourceDdo: (oBindingContext.getProperty(\"SourceDdo\") || \"\"),\r\n\t\t\t\t\tSourceHoa: (oBindingContext.getProperty(\"SourceHoa\") || \"\"),\r\n\t\t\t\t\tSourceZShare: (oBindingContext.getProperty(\"SourceZShare\") || \"0\"),\r\n\t\t\t\t\tFundAgencyDesc: (oBindingContext.getProperty(\"FundAgencyDesc\") || \"\"),\r\n\t\t\t\t\tPicsCode: (oBindingContext.getProperty(\"PicsCode\") || \"\"),\r\n\t\t\t\t\tSourceValidFrom: (oBindingContext.getProperty(\"ValidFrom\") || new Date()),\r\n\t\t\t\t\tSourceValidTo: (oBindingContext.getProperty(\"ValidTo\") || new Date(\"12/31/9999\"))\r\n\t\t\t\t};\r\n\t\t\t\tsUpdPath = this.getModel().createKey(\"WrkDcwHOADDOSet\", {\r\n\t\t\t\t\tGuid: oBindingContext.getProperty(\"Guid\"),\r\n\t\t\t\t\tHoaGuid: oHoaPayload.HoaGuid\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (bNewItem) {\r\n\t\t\t\tsUpdPath = sType === \"TGT\" ? \"/WrkHOASet\" : \"/WrkDcwHOADDOSet\";\r\n\t\t\t\tthis.getModel().create(sUpdPath, oHoaPayload, {\r\n\t\t\t\t\tsuccess: function(oData, oResponse) {\r\n\t\t\t\t\t\tthat.byId(\"idWorksHoA\").getBinding(\"items\").refresh();\r\n\t\t\t\t\t\tthat.byId(\"idWorksSrcHoA\").getBinding(\"items\").refresh();\r\n\t\t\t\t\t\tif (oBusyControl) {\r\n\t\t\t\t\t\t\toBusyControl.setBusy(false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\terror: function(oError) {\r\n\t\t\t\t\t\tif (oBusyControl) {\r\n\t\t\t\t\t\t\toBusyControl.setBusy(false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\trefreshAfterChange: false\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tsUpdPath = \"/\" + sUpdPath;\r\n\t\t\t\tthis.getModel().update(sUpdPath, oHoaPayload, {\r\n\t\t\t\t\tsuccess: function(oData, oResponse) {\r\n\t\t\t\t\t\tif (sBindingPath === \"SourceHoa\" || sBindingPath === \"Hoa\") {\r\n\t\t\t\t\t\t\tif (sBindingPath === \"SourceHoa\") {\r\n\t\t\t\t\t\t\t\tthat.byId(\"idWorksSrcHoA\").getBinding(\"items\").refresh();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthat.byId(\"idWorksHoA\").getBinding(\"items\").refresh();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (oBusyControl) {\r\n\t\t\t\t\t\t\toBusyControl.setBusy(false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\terror: function(oError) {\r\n\t\t\t\t\t\tif (oBusyControl) {\r\n\t\t\t\t\t\t\toBusyControl.setBusy(false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\trefreshAfterChange: false\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Internal Method to create a new Column List Item for the DDO Table\r\n\t\t * @private\r\n\t\t * @returns {Object} Template for items on the list\r\n\t\t */\r\n\t\t_returnListItemTemplate: function() {\r\n\t\t\tvar oListItemTemplate, that = this,\r\n\t\t\t\toDdo = new sap.m.Input({\r\n\t\t\t\t\tchange: that.onDdoChange.bind(that),\r\n\t\t\t\t\tplaceholder: \"{i18n>detail.ops.panel.content.table.column.text.PDDO}\",\r\n\t\t\t\t\tmaxLength: \"{oControlModel>/Ddo/maxLength}\",\r\n\t\t\t\t\tvalue: \"{DdoDes}\",\r\n\t\t\t\t\tshowValueHelp: true,\r\n\t\t\t\t\tvalueHelpOnly: true,\r\n\t\t\t\t\tvalueHelpRequest: that.handleDDOValueHelp.bind(that),\r\n\t\t\t\t\ttype: \"{oControlModel>/Ddo/type}\",\r\n\t\t\t\t\tvalueState: \"{oControlModel>/Ddo/valueState}\",\r\n\t\t\t\t\tvalueStateText: \"{oControlModel>/Ddo/valueStateText}\",\r\n\t\t\t\t\teditable: \"{= ${oControlModel>/Ddo/display} && ${detailView>/bEditable} ? true: false}\",\r\n\t\t\t\t\ttooltip: \"{Ddo}\"\r\n\t\t\t\t});\r\n\t\t\toDdo.data(\"bindPath\", \"Ddo\");\r\n\t\t\tvar oHoa = new sap.m.Input({\r\n\t\t\t\tchange: that.onDdoChange.bind(that),\r\n\t\t\t\tplaceholder: \"{i18n>detail.ops.panel.content.table.column.text.PHeadOfAccount}\",\r\n\t\t\t\tmaxLength: \"{oControlModel>/Hoa/maxLength}\",\r\n\t\t\t\tvalue: \"{Hoa}\",\r\n\t\t\t\tshowValueHelp: true,\r\n\t\t\t\tvalueHelpOnly: true,\r\n\t\t\t\tvalueHelpRequest: that.handleHoaValueHelp.bind(that),\r\n\t\t\t\ttype: \"{oControlModel>/Hoa/type}\",\r\n\t\t\t\tvalueState: \"{= ${oControlModel>/Hoa/valueState}}\",\r\n\t\t\t\tvalueStateText: \"{oControlModel>/Hoa/valueStateText}\",\r\n\t\t\t\teditable: \"{= ${oControlModel>/Hoa/display} && ${detailView>/bEditable} ? true: false}\",\r\n\t\t\t\ttooltip: \"{Hoa}\"\r\n\t\t\t});\r\n\t\t\toHoa.data(\"bindPath\", \"Hoa\");\r\n\t\t\tvar oValidFrom = new sap.m.DatePicker({\r\n\t\t\t\tchange: that.onDdoChange.bind(that),\r\n\t\t\t\tvalue: \"{path:'ValidFrom', type:'sap.ui.model.type.Date', formatOptions: { style: 'medium', strictParsing: true, UTC: true}}\",\r\n\t\t\t\teditable: \"{detailView>/bEditable}\"\r\n\t\t\t});\r\n\t\t\toValidFrom.data(\"bindPath\", \"ValidFrom\");\r\n\t\t\tvar oValidTo = new sap.m.DatePicker({\r\n\t\t\t\tchange: that.onDdoChange.bind(that),\r\n\t\t\t\tvalue: \"{path:'ValidTo', type:'sap.ui.model.type.Date', formatOptions: { style: 'medium', strictParsing: true, UTC: true}}\",\r\n\t\t\t\teditable: \"{detailView>/bEditable}\"\r\n\t\t\t});\r\n\t\t\toValidTo.data(\"bindPath\", \"ValidTo\");\r\n\r\n\t\t\toListItemTemplate = new sap.m.ColumnListItem({\r\n\t\t\t\tcells: [\r\n\t\t\t\t\t// add created controls to item\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttype: \"Text\",\r\n\t\t\t\t\t\tvalue: \"{HoaGuid}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Input({\r\n\t\t\t\t\t\tvalue: \"{ItemNo}\",\r\n\t\t\t\t\t\teditable: false,\r\n\t\t\t\t\t\ttextDirection: \"RTL\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\toDdo,\r\n\t\t\t\t\toHoa,\r\n\t\t\t\t\tnew sap.m.Input({\r\n\t\t\t\t\t\tchange: that.onDdoShareChange.bind(that),\r\n\t\t\t\t\t\tplaceholder: \"{i18n>detail.ops.panel.content.table.column.text.PShare}\",\r\n\t\t\t\t\t\tvalue: \"{Zshare}\",\r\n\t\t\t\t\t\tenabled: \"{detailView>/bEditable}\",\r\n\t\t\t\t\t\teditable: \"{detailView>/bEditable}\",\r\n\t\t\t\t\t\ttextDirection: \"LTR\",\r\n\t\t\t\t\t\ttextAlign: \"Right\"\r\n\t\t\t\t\t}),\r\n\r\n\t\t\t\t\tnew sap.m.Input({\r\n\t\t\t\t\t\tchange: that.onDdoChange.bind(that),\r\n\t\t\t\t\t\tvalue: \"{RefNumber}\",\r\n\t\t\t\t\t\tenabled: \"{detailView>/bEditable}\",\r\n\t\t\t\t\t\teditable: \"{detailView>/bEditable}\",\r\n\t\t\t\t\t\ttextDirection: \"LTR\",\r\n\t\t\t\t\t\tvisible: false\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Input({\r\n\t\t\t\t\t\tvalue: \"{FundAgencyDesc}\",\r\n\t\t\t\t\t\teditable: false,\r\n\t\t\t\t\t\ttooltip: \"{FundAgencyDesc}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\toValidFrom,\r\n\t\t\t\t\toValidTo,\r\n\t\t\t\t\tnew sap.m.Button({\r\n\t\t\t\t\t\ticon: \"sap-icon://delete\",\r\n\t\t\t\t\t\ttype: \"Transparent\",\r\n\t\t\t\t\t\tpress: that.onDeleteDDO.bind(that),\r\n\t\t\t\t\t\tvisible: \"{= ${detailView>/bEditable} ? true: false}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttext: \"\",\r\n\t\t\t\t\t\tvisible: false,\r\n\t\t\t\t\t\ttextDirection: \"LTR\"\r\n\t\t\t\t\t})\r\n\t\t\t\t]\r\n\t\t\t});\r\n\t\t\treturn oListItemTemplate;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Internal Method to create a new Column List Item for the DDO Table\r\n\t\t * @private\r\n\t\t * @returns {Object} Template for items on the list\r\n\t\t */\r\n\t\t_returnSrcListItemTemplate: function() {\r\n\t\t\tvar oListItemTemplate,\r\n\t\t\t\tthat = this;\r\n\t\t\t//Setting Control for DDO VH\r\n\t\t\tvar oSrcDdo = new sap.m.Input({\r\n\t\t\t\tchange: that.onSrcDdoChange.bind(that),\r\n\t\t\t\tplaceholder: \"{i18n>detail.ops.panel.content.table.column.text.PsrcDDO}\",\r\n\t\t\t\tmaxLength: \"{oControlModel>/SourceDdo/maxLength}\",\r\n\t\t\t\tvalue: \"{DdoDes}\",\r\n\t\t\t\tshowValueHelp: true,\r\n\t\t\t\tvalueHelpOnly: true,\r\n\t\t\t\tvalueHelpRequest: that.handleDDOValueHelp.bind(that),\r\n\t\t\t\ttype: \"{oControlModel>/Ddo/type}\",\r\n\t\t\t\tvalueState: \"{oControlModel>/SourceDdo/valueState}\",\r\n\t\t\t\tvalueStateText: \"{oControlModel>/SourceDdo/valueStateText}\",\r\n\t\t\t\teditable: \"{= ${oControlModel>/SourceDdo/display} && ${detailView>/bEditable} && (${detailView>/SubmitBtnVisibility} === 'X' ? true: false)}\",\r\n\t\t\t\ttooltip: \"{SourceDdo}\"\r\n\t\t\t});\r\n\t\t\toSrcDdo.data(\"bindPath\", \"SourceDdo\");\r\n\t\t\t//Setting Control for HOA VH\r\n\t\t\tvar oSrcHoa = new sap.m.Input({\r\n\t\t\t\tchange: that.onSrcDdoChange.bind(that),\r\n\t\t\t\tplaceholder: \"{i18n>detail.ops.panel.content.table.column.text.PsrcHOA}\",\r\n\t\t\t\tmaxLength: \"{oControlModel>/SourceHoa/maxLength}\",\r\n\t\t\t\tvalue: \"{SourceHoa}\",\r\n\t\t\t\tshowValueHelp: true,\r\n\t\t\t\tvalueHelpOnly: true,\r\n\t\t\t\tvalueHelpRequest: that.handleHoaValueHelp.bind(that),\r\n\t\t\t\ttype: \"{oControlModel>/SourceHoa/type}\",\r\n\t\t\t\tvalueState: \"{= ${oControlModel>/SourceHoa/valueState}}\",\r\n\t\t\t\tvalueStateText: \"{oControlModel>/SourceHoa/valueStateText}\",\r\n\t\t\t\teditable: \"{= ${oControlModel>/SourceHoa/display} && ${detailView>/bEditable} && (${detailView>/SubmitBtnVisibility} === 'X' ? true: false)}\",\r\n\t\t\t\ttooltip: \"{SourceHoa}\"\r\n\t\t\t});\r\n\t\t\toSrcHoa.data(\"bindPath\", \"SourceHoa\");\r\n\r\n\t\t\t//Setting Control for Pic Code VH\r\n\t\t\t// var oPicsCode = new sap.m.Input({\r\n\t\t\t// \tchange:that.onSrcDdoChange.bind(that),\r\n\t\t\t// \tvalue:\"{PicsCode}\",\r\n\t\t\t// \trequired:\"{= ${oControlModel>/PicsCode/mandatory}}\",\r\n\t\t\t// \tshowValueHelp:true,\r\n\t\t\t// \tvalueHelpRequest:that.handlePicCodeValueHelp.bind(that),\r\n\t\t\t// \teditable:\"{= ${oControlModel>/PicsCode/display} && ${detailView>/bEditable} && (${detailView>/SubmitBtnVisibility} === 'X' ? true: false) && (${PicsCode} !== '' ? true : false)}\",\r\n\t\t\t// \tvalueState:\"{oControlModel>/PicsCode/valueState}\",\r\n\t\t\t// \tvalueStateText:\"{oControlModel>/PicsCode/valueStateText}\" ,\r\n\t\t\t// \tmaxLength:\"{oControlModel>/PicsCode/maxLength}\" ,\r\n\t\t\t// \ttype:\"{oControlModel>/PicsCode/type}\",\r\n\t\t\t// \ttooltip:\"{PicsCode}\"\r\n\t\t\t// });\r\n\t\t\t// oPicsCode.data(\"bindPath\", \"PicCode\");\r\n\r\n\t\t\t//Setting Control for Date\r\n\t\t\tvar oSrcValidFrom = new sap.m.DatePicker({\r\n\t\t\t\tchange: that.onSrcDdoChange.bind(that),\r\n\t\t\t\tplaceholder: \"{i18n>detail.ops.panel.content.table.column.text.PvalidFrom}\",\r\n\t\t\t\tvalue: \"{path:'SourceValidFrom', type:'sap.ui.model.type.Date', formatOptions: { style: 'medium', strictParsing: true, UTC: true}}\",\r\n\t\t\t\teditable: \"{detailView>/bEditable}\"\r\n\t\t\t});\r\n\t\t\toSrcValidFrom.data(\"bindPath\", \"SourceValidFrom\");\r\n\r\n\t\t\t//Setting Control for Date\r\n\t\t\tvar oSrcValidTo = new sap.m.DatePicker({\r\n\t\t\t\tchange: that.onSrcDdoChange.bind(that),\r\n\t\t\t\tplaceholder: \"{i18n>detail.ops.panel.content.table.column.text.PvalidTo}\",\r\n\t\t\t\tvalue: \"{path:'SourceValidTo', type:'sap.ui.model.type.Date', formatOptions: { style: 'medium', strictParsing: true, UTC: true}}\",\r\n\t\t\t\teditable: \"{detailView>/bEditable}\"\r\n\t\t\t});\r\n\t\t\toSrcValidTo.data(\"bindPath\", \"SourceValidTo\");\r\n\r\n\t\t\toListItemTemplate = new sap.m.ColumnListItem({\r\n\t\t\t\tcells: [\r\n\t\t\t\t\t// add created controls to item\r\n\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\ttype: \"Text\",\r\n\t\t\t\t\t\tvalue: \"{HoaGuid}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.m.Input({\r\n\t\t\t\t\t\tvalue: \"{ItemNo}\",\r\n\t\t\t\t\t\teditable: false,\r\n\t\t\t\t\t\ttextDirection: \"RTL\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\toSrcDdo,\r\n\t\t\t\t\toSrcHoa,\r\n\t\t\t\t\tnew sap.m.Input({\r\n\t\t\t\t\t\tvalue: \"{FundAgencyDesc}\",\r\n\t\t\t\t\t\teditable: false,\r\n\t\t\t\t\t\ttooltip: \"{FundAgencyDesc}\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\t// new sap.m.Input({\r\n\t\t\t\t\t// \tchange:that.onDdoShareChange.bind(that),\r\n\t\t\t\t\t// \tvalue:\"{SourceZshare}\",\r\n\t\t\t\t\t// \tenabled:\"{detailView>/bEditable}\",\r\n\t\t\t\t\t// \teditable:\"{detailView>/bEditable}\", \r\n\t\t\t\t\t// \ttextDirection:\"RTL\"\r\n\t\t\t\t\t// }),\r\n\t\t\t\t\t// oPicsCode,\r\n\t\t\t\t\toSrcValidFrom,\r\n\t\t\t\t\toSrcValidTo,\r\n\t\t\t\t\tnew sap.m.Button({\r\n\t\t\t\t\t\ticon: \"sap-icon://delete\",\r\n\t\t\t\t\t\ttype: \"Transparent\",\r\n\t\t\t\t\t\tpress: that.onDeleteDDO.bind(that),\r\n\t\t\t\t\t\tvisible: \"{= ${detailView>/bEditable} && (${detailView>/SubmitBtnVisibility} === 'X' ? true: false)}\"\r\n\t\t\t\t\t})\r\n\t\t\t\t]\r\n\t\t\t});\r\n\t\t\treturn oListItemTemplate;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Function for calling _bindSuggestionItems function for binding suggestion Items\r\n\t\t * @param {object} oInputSource \r\n\t\t */\r\n\t\t_callingBindingParams: function(oInputSource) {\r\n\t\t\tvar oEntityInfo = oInputSource.data(\"entityInfo\"),\r\n\t\t\t\toParams = {\r\n\t\t\t\t\toInputSource: oInputSource,\r\n\t\t\t\t\tsProperty: oInputSource.data(\"text\"),\r\n\t\t\t\t\tsKey: oInputSource.data(\"key\"),\r\n\t\t\t\t\toVHData: this._getVHEntityDetail(oEntityInfo)\r\n\t\t\t\t};\r\n\t\t\tthis._bindSuggestionItems(oParams, function() {\r\n\t\t\t\tvar oObject = oInputSource.getBindingContext().getObject(),\r\n\t\t\t\t\tsPropertyKey = oObject[oInputSource.data(\"bindPath\")];\r\n\r\n\t\t\t\t//edit mode AS Document go to estimate come back subClassL01 property value changing \r\n\t\t\t\t//so we did some patch up\r\n\t\t\t\tif (oInputSource.data(\"bindPath\") === \"SubclassL01\") {\r\n\t\t\t\t\toInputSource.setSelectedKey(this.subClassL01Value);\r\n\t\t\t\t} else {\r\n\t\t\t\t\toInputSource.setSelectedKey(sPropertyKey);\r\n\t\t\t\t}\r\n\t\t\t\t// oInputSource.setSelectedKey(sPropertyKey);\r\n\t\t\t\tthis.byId(\"idCode\").focus();\r\n\t\t\t\toInputSource.getBinding(\"suggestionItems\").attachEvent(\"dataReceived\", this.onSuggestDataReceived.bind(this));\r\n\t\t\t}.bind(this));\r\n\t\t},\r\n\t\t/**\r\n\t\t * Internal method for confirming delete action\r\n\t\t * @param {sap.ui.base.Event} oParams \r\n\t\t */\r\n\t\t_onDeleteConfirmation: function(oParams) {\r\n\t\t\tvar oSource = oParams.source,\r\n\t\t\t\toBindingContext = oSource.getBindingContext(),\r\n\t\t\t\tsPath = oBindingContext.getPath();\r\n\t\t\tif (oParams.guid) {\r\n\t\t\t\tvar oDeleteItem = new Promise(function(resolve, reject) {\r\n\t\t\t\t\tthis.getOwnerComponent().oDraft.whenDeleteLine({\r\n\t\t\t\t\t\tpath: sPath,\r\n\t\t\t\t\t\tbusyControl: this.getView(),\r\n\t\t\t\t\t\turlParameters: {\r\n\t\t\t\t\t\t\tAction: oParams.action\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, resolve, reject);\r\n\t\t\t\t}.bind(this));\r\n\t\t\t\toDeleteItem.then(function(oResult) {\r\n\t\t\t\t\tthis.getModel().refresh(true);\r\n\t\t\t\t\t//\tthis.getView().getElementBinding().refresh(true);\r\n\t\t\t\t\tMessageToast.show(this.getResourceBundle().getText(\"detail.message.delete.success\"));\r\n\t\t\t\t}.bind(this));\r\n\t\t\t} else {\r\n\t\t\t\tvar oItem = oSource.getParent(),\r\n\t\t\t\t\toTable = oItem.getParent();\r\n\t\t\t\toTable.removeItem(oItem);\r\n\t\t\t\tMessageToast.show(this.getResourceBundle().getText(\"detail.message.delete.success\"));\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Private function to make location list display button editable\r\n\t\t */\r\n\t\t_setLocationListDisplay: function() {\r\n\t\t\tvar oLocationModel = this.getModel(\"location\"),\r\n\t\t\t\toBindingContext = this.getView().getBindingContext(),\r\n\t\t\t\tlocDetailSX = oBindingContext.getProperty(\"LocationDetailsx\"),\r\n\t\t\t\tlocConstDetailSX = oBindingContext.getProperty(\"ConstituencyDetailsx\");\r\n\t\t\tif (locDetailSX === \"D\") {\r\n\t\t\t\toLocationModel.setProperty(\"/vDistrict\", true);\r\n\t\t\t\toLocationModel.setProperty(\"/bLoc\", true);\r\n\t\t\t} else if (locDetailSX === \"M\") {\r\n\t\t\t\toLocationModel.setProperty(\"/vMandal\", true);\r\n\t\t\t\toLocationModel.setProperty(\"/bLoc\", true);\r\n\t\t\t} else if (locDetailSX === \"V\") {\r\n\t\t\t\toLocationModel.setProperty(\"/vVillage\", true);\r\n\t\t\t\toLocationModel.setProperty(\"/bLoc\", true);\r\n\t\t\t} else {\r\n\t\t\t\toLocationModel.setProperty(\"/vVillage\", false);\r\n\t\t\t\toLocationModel.setProperty(\"/vMandal\", false);\r\n\t\t\t\toLocationModel.setProperty(\"/vDistrict\", false);\r\n\t\t\t\toLocationModel.setProperty(\"/bLoc\", false);\r\n\t\t\t}\r\n\t\t\tif (locConstDetailSX === \"L\") {\r\n\t\t\t\toLocationModel.setProperty(\"/vLoksabha\", true);\r\n\t\t\t\toLocationModel.setProperty(\"/bConst\", true);\r\n\t\t\t} else if (locConstDetailSX === \"A\") {\r\n\t\t\t\toLocationModel.setProperty(\"/vAssembly\", true);\r\n\t\t\t\toLocationModel.setProperty(\"/bConst\", true);\r\n\t\t\t} else {\r\n\t\t\t\toLocationModel.setProperty(\"/vAssembly\", false);\r\n\t\t\t\toLocationModel.setProperty(\"/vLoksabha\", false);\r\n\t\t\t\toLocationModel.setProperty(\"/bConst\", false);\r\n\t\t\t}\r\n\t\t\toLocationModel.updateBindings();\r\n\t\t},\r\n\t\t/**\r\n\t\t * Internal function for change in the Detail View binding\r\n\t\t */\r\n\t\t_onBindingChange: function() {\r\n\t\t\tvar oView = this.getView(),\r\n\t\t\t\toElementBinding = oView.getElementBinding();\r\n\t\t\t// No data for the binding\r\n\t\t\tif (!oElementBinding.getBoundContext()) {\r\n\t\t\t\tthis.getRouter().getTargets().display(\"detailObjectNotFound\");\r\n\t\t\t\t// if object could not be found, the selection in the master list\r\n\t\t\t\t// does not make sense anymore.\r\n\t\t\t\t/*eslint-disable */\r\n\t\t\t\t//eslint-disable-no-useless-return\r\n\t\t\t\treturn;\r\n\t\t\t\t/*eslint-enable */\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Internal method for binding with metadata once detail view is loaded.\r\n\t\t */\r\n\t\t_onMetadataLoaded: function() {\r\n\t\t\t// Store original busy indicator delay for the detail view\r\n\t\t\tvar oViewModel = this.getModel(\"detailView\");\r\n\t\t\t// Make sure busy indicator is displayed immediately when\r\n\t\t\t// detail view is displayed for the first time\r\n\t\t\toViewModel.setProperty(\"/delay\", 0);\r\n\t\t\toViewModel.setProperty(\"/lineItemTableDelay\", 0);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Set the full screen mode to false and navigate to master page\r\n\t\t */\r\n\t\tonCloseDetailPress: function() {\r\n\t\t\tthis.getModel(\"appView\").setProperty(\"/actionButtonsInfo/midColumn/fullScreen\", false);\r\n\t\t\t// No item should be selected on master after detail page is closed\r\n\t\t\tthis.getOwnerComponent().oListSelector.clearMasterListSelection();\r\n\t\t\tthis.getRouter().navTo(\"master\");\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Toggle between full and non full screen mode.\r\n\t\t */\r\n\t\ttoggleFullScreen: function() {\r\n\t\t\tvar bFullScreen = this.getModel(\"appView\").getProperty(\"/actionButtonsInfo/midColumn/fullScreen\");\r\n\t\t\tthis.getModel(\"appView\").setProperty(\"/actionButtonsInfo/midColumn/fullScreen\", !bFullScreen);\r\n\t\t\tif (!bFullScreen) {\r\n\t\t\t\t// store current layout and go full screen\r\n\t\t\t\tthis.getModel(\"appView\").setProperty(\"/previousLayout\", this.getModel(\"appView\").getProperty(\"/layout\"));\r\n\t\t\t\tthis.getModel(\"appView\").setProperty(\"/layout\", \"MidColumnFullScreen\");\r\n\t\t\t} else {\r\n\t\t\t\t// reset to previous layout\r\n\t\t\t\tthis.getModel(\"appView\").setProperty(\"/layout\", this.getModel(\"appView\").getProperty(\"/previousLayout\"));\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * function to set the Header title\r\n\t\t * @param {string} sStateId Identifier for the editability state of the document\r\n\t\t */\r\n\t\tsetPageHeaderTitle: function(sStateId) {\r\n\t\t\tvar oResourceBundle = this.getResourceBundle(),\r\n\t\t\t\tsStatus = this.getView().getBindingContext().getProperty(\"Status\");\r\n\t\t\tif (sStateId === \"D\") {\r\n\t\t\t\tif (sStatus !== \"E0006\") {\r\n\t\t\t\t\tthis.getModel(\"detailView\").setProperty(\"/ObjectTitle\", oResourceBundle.getText(\"detail.page.header.title.displayP\"));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.getModel(\"detailView\").setProperty(\"/ObjectTitle\", oResourceBundle.getText(\"detail.page.header.title.display\"));\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if (sStateId === \"C\") {\r\n\t\t\t\tthis.getModel(\"detailView\").setProperty(\"/ObjectTitle\", oResourceBundle.getText(\"detail.page.header.title.create\"));\r\n\t\t\t} else if (sStateId === \"E\") {\r\n\t\t\t\tthis.getModel(\"detailView\").setProperty(\"/ObjectTitle\", oResourceBundle.getText(\"detail.page.header.title.edit\"));\r\n\t\t\t}\r\n\t\t\tthis.getModel().updateBindings();\r\n\t\t},\r\n\t\t/**\r\n\t\t * Private function used for naviagation after success to detail\r\n\t\t * @param {String} sState Identifier for the state of the document.\r\n\t\t * @private\r\n\t\t */\r\n\t\t_navToDetail: function(sState) {\r\n\t\t\tvar sGuid = this.getView().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\tsViewState = this._getViewState(sState);\r\n\t\t\tthis.getRouter().navTo(\"Detail\", {\r\n\t\t\t\tobjectId: sGuid,\r\n\t\t\t\tstateId: sViewState\r\n\t\t\t}, true);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Private function to get State of view\r\n\t\t * @param {String} sViewState Initial View state determination\r\n\t\t * @returns {String} Current State of the document\r\n\t\t */\r\n\t\t_getViewState: function(sViewState) {\r\n\t\t\tvar sState, sDraftStatus = this.getModel(\"detailView\").getProperty(\"/DraftStatus\");\r\n\t\t\tif (sDraftStatus) {\r\n\t\t\t\tsState = sViewState + \":\" + sDraftStatus;\r\n\t\t\t} else {\r\n\t\t\t\tsState = sViewState;\r\n\t\t\t}\r\n\t\t\treturn sState;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Private function to get the instance of ValueHelp fragment\r\n\t\t * @private\r\n\t\t * @returns {Object} value help dialog control\r\n\t\t */\r\n\t\t_getHoaVH: function(oEvent, sCustomData) {\r\n\t\t\tif (this._oHOAVHDialog) {\r\n\t\t\t\tthis._oHOAVHDialog.destroy();\r\n\t\t\t\tthis._oHOAVHDialog = null;\r\n\t\t\t}\r\n\t\t\tif (this.oVHTemplate) {\r\n\t\t\t\tthis.oVHTemplate.destroy();\r\n\t\t\t\tthis.oVHTemplate = null;\r\n\t\t\t}\r\n\t\t\tvar oBindingContext = this.getView().getBindingContext(),\r\n\t\t\t\tsExecDept = oBindingContext.getProperty(\"ExecutingDept\"),\r\n\t\t\t\tsCategory = oBindingContext.getProperty(\"Category\"),\r\n\t\t\t\tsBudgetCtrl = oBindingContext.getProperty(\"BudgetCtrl\"),\r\n\t\t\t\tsSancDept = oBindingContext.getProperty(\"InitiatinDept\"),\r\n\t\t\t\tisMigration = oBindingContext.getProperty(\"MigrationInd\");\r\n\r\n\t\t\tif (!this._oHOAVHDialog) {\r\n\t\t\t\tthis._oHOAVHDialog = this._createFragment(this.createId(\"idHoaVH\"), \"com.goap.cfms.works.as.fragment.hoaVH\");\r\n\t\t\t\tthis.getView().addDependent(this._oHOAVHDialog);\r\n\t\t\t}\r\n\t\t\t// create a filter for the binding\r\n\t\t\tvar oSrcBindingPath = oEvent.getSource().getBindingContext().getPath();\r\n\t\t\tvar sControlId = oEvent.getSource().getId();\r\n\t\t\tthis.oVHTemplate = this._templateForHOADDOVH(\"idHOAVHList\", oSrcBindingPath, sCustomData, sControlId);\r\n\r\n\t\t\tif (sCustomData === \"SourceHoa\") {\r\n\t\t\t\tthis._oHOAVHDialog.bindAggregation(\"items\", \"/ZWRK_C_HOA_DCW(p_budget_ctrl='\" + sBudgetCtrl + \"',p_sancdept='\" + sSancDept +\r\n\t\t\t\t\t\"')/Set\", this.oVHTemplate);\r\n\t\t\t} else {\r\n\t\t\t\tvar aFilter = [];\r\n\r\n\t\t\t\tif (!sCategory) {\r\n\t\t\t\t\tvar sMsgText = this.getModel(\"i18n\").getResourceBundle().getText(\"detail.message.error.mandatory.hoa\");\r\n\t\t\t\t\tMessageBox.show(sMsgText, {\r\n\t\t\t\t\t\ticon: MessageBox.Icon.WARNING,\r\n\t\t\t\t\t\ttitle: this.getModel(\"i18n\").getResourceBundle().getText(\"warning.title\"),\r\n\t\t\t\t\t\taction: MessageBox.Action.OK\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (oBindingContext.getProperty(\"Category\") === \"02\" && oBindingContext.getProperty(\"DcwType\") === \"02\") {\r\n\t\t\t\t\tif (!sBudgetCtrl) {\r\n\t\t\t\t\t\tvar sMsgText = this.getModel(\"i18n\").getResourceBundle().getText(\"detail.message.error.mandatory.sourceHoa\");\r\n\t\t\t\t\t\tMessageBox.show(sMsgText, {\r\n\t\t\t\t\t\t\ticon: MessageBox.Icon.WARNING,\r\n\t\t\t\t\t\t\ttitle: this.getModel(\"i18n\").getResourceBundle().getText(\"warning.title\"),\r\n\t\t\t\t\t\t\taction: MessageBox.Action.OK\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (oBindingContext.getProperty(\"Category\") === \"04\") {\r\n\t\t\t\t\tvar sDDO = oEvent.getSource().getBindingContext().getProperty(\"Ddo\");\r\n\t\t\t\t\taFilter.push(new Filter(\"ddo\", FilterOperator.EQ, sDDO));\r\n\t\t\t\t}\r\n\t\t\t\tvar oBindingInfo = {\r\n\t\t\t\t\tpath: \"/ZWRK_C_HOA_V(p_category='\" + sCategory + \"',p_dept='\" + sSancDept + \"',p_budget_ctrl='\" + sBudgetCtrl +\r\n\t\t\t\t\t\t\"',p_exec_dept='\" + sExecDept + \"',p_migration=\" + isMigration + \")/Set\",\r\n\t\t\t\t\ttemplate: this.oVHTemplate,\r\n\t\t\t\t\tfilters: aFilter\r\n\t\t\t\t};\r\n\t\t\t\tthis._oHOAVHDialog.bindAggregation(\"items\", oBindingInfo);\r\n\t\t\t}\r\n\r\n\t\t\tthis._oHOAVHDialog.data(\"CustomData\", sCustomData);\r\n\t\t\t// open value help dialog filtered by the input value\r\n\t\t\t//this._valueHelpDialog.open();\r\n\t\t\treturn this._oHOAVHDialog;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Private function to get the instance of ValueHelp fragment\r\n\t\t * @private\r\n\t\t * @returns {Object} value help dialog control\r\n\t\t */\r\n\t\t_getDdoVH: function(oEvent, sCustomData) {\r\n\t\t\tif (this._oDDOVHDialog) {\r\n\t\t\t\tthis._oDDOVHDialog.destroy();\r\n\t\t\t\tthis._oDDOVHDialog = null;\r\n\t\t\t}\r\n\t\t\tif (this.oVHTemplate) {\r\n\t\t\t\tthis.oVHTemplate.destroy();\r\n\t\t\t\tthis.oVHTemplate = null;\r\n\t\t\t}\r\n\t\t\tvar oBindingContext = this.getView().getBindingContext(),\r\n\t\t\t\tsSancDept = oBindingContext.getProperty(\"InitiatinDept\"),\r\n\t\t\t\tsExecDept = oBindingContext.getProperty(\"ExecutingDept\"),\r\n\t\t\t\tsUserCr = oBindingContext.getProperty(\"UserIdCr\"),\r\n\t\t\t\tsDcwType = oBindingContext.getProperty(\"DcwType\");\r\n\t\t\tif (!(sSancDept && sExecDept)) {\r\n\t\t\t\tvar sMsgText = this.getModel(\"i18n\").getResourceBundle().getText(\"detail.message.error.mandatory.ddo\");\r\n\t\t\t\tMessageBox.show(sMsgText, {\r\n\t\t\t\t\ticon: MessageBox.Icon.WARNING,\r\n\t\t\t\t\ttitle: this.getModel(\"i18n\").getResourceBundle().getText(\"warning.title\"),\r\n\t\t\t\t\taction: MessageBox.Action.OK\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._oDDOVHDialog = this._createFragment(this.createId(\"idDDOVH\"), \"com.goap.cfms.works.as.fragment.ddoVH\");\r\n\t\t\tthis.getView().addDependent(this._oDDOVHDialog);\r\n\t\t\t// create a filter for the binding\r\n\t\t\tvar oSrcBindingPath = oEvent.getSource().getBindingContext().getPath();\r\n\t\t\tvar sControlId = oEvent.getSource().getId();\r\n\t\t\tthis.oVHTemplate = this._templateForHOADDOVH(\"idDDOVHList\", oSrcBindingPath, sCustomData, sControlId);\r\n\t\t\tif (sCustomData === \"SourceDdo\") {\r\n\t\t\t\tthis._oDDOVHDialog.bindAggregation(\"items\", \"/ZWRK_C_SDDO_V(p_execdept='\" + sExecDept + \"',p_sancdept='\" + sSancDept +\r\n\t\t\t\t\t\"',p_uname='\" + sUserCr + \"',p_DcwType='\" + sDcwType + \"')/Set\", this.oVHTemplate);\r\n\t\t\t} else {\r\n\t\t\t\tthis._oDDOVHDialog.bindAggregation(\"items\", \"/ZWRK_C_DDO_V(p_execdept='\" + sExecDept + \"',p_sancdept='\" + sSancDept +\r\n\t\t\t\t\t\"',p_uname='\" + sUserCr + \"',p_DcwType='\" + sDcwType + \"',p_SUBPROCESS_AREA='AS\" + \"')/Set\", this.oVHTemplate);\r\n\t\t\t}\r\n\t\t\tthis._oDDOVHDialog.data(\"CustomData\", sCustomData);\r\n\t\t\t// open value help dialog filtered by the input value\r\n\t\t\treturn this._oDDOVHDialog;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Private function to get the instance of ValueHelp fragment\r\n\t\t * @private\r\n\t\t * @returns {Object} value help dialog control\r\n\t\t */\r\n\t\t_getPicCodeVH: function(oEvent, sCustomData) {\r\n\t\t\tif (this._oPicCodeVHDialog) {\r\n\t\t\t\tthis._oPicCodeVHDialog.destroy();\r\n\t\t\t\tthis._oPicCodeVHDialog = null;\r\n\t\t\t}\r\n\t\t\tvar oBindingContext = this.getView().getBindingContext();\r\n\r\n\t\t\tthis._oPicCodeVHDialog = this._createFragment(this.createId(\"idPicCodeVH\"), \"com.goap.cfms.works.as.fragment.picCodeVH\");\r\n\t\t\tthis.getView().addDependent(this._oPicCodeVHDialog);\r\n\t\t\t// create a filter for the binding\r\n\t\t\tvar oSrcBindingPath = oEvent.getSource().getBindingContext().getPath();\r\n\t\t\tvar oVHTemplate = this._templateForHOADDOVH(\"idPicCodeVHList\", oSrcBindingPath, sCustomData);\r\n\r\n\t\t\tthis._oPicCodeVHDialog.bindAggregation(\"items\", \"/ZWRK_C_PICCODE\", oVHTemplate);\r\n\t\t\tthis._oPicCodeVHDialog.data(\"CustomData\", sCustomData);\r\n\r\n\t\t\t// open value help dialog filtered by the input value\r\n\t\t\treturn this._oPicCodeVHDialog;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Private function to get the instance of ValueHelp fragment\r\n\t\t * @private\r\n\t\t * @returns {Object} value help dialog control\r\n\t\t */\r\n\t\tgetASHoaVH: function() {\r\n\t\t\tif (!this.oASHoaVH) {\r\n\t\t\t\tthis.oASHoaVH = new VHDialog({\r\n\t\t\t\t\tcomponent: this.getOwnerComponent(),\r\n\t\t\t\t\tid: \"vhHoaAS\",\r\n\t\t\t\t\tcontentDensity: this.contentDensity,\r\n\t\t\t\t\ttitleKey: \"detail.ops.panel.content.table.column.vh.title.hoa\",\r\n\t\t\t\t\tentitySet: \"/ZWRK_C_HOA\",\r\n\t\t\t\t\tsorter: new Sorter(\"hoa\", false),\r\n\t\t\t\t\tbMultiSelect: false,\r\n\t\t\t\t\tkey: \"hoa\",\r\n\t\t\t\t\tdescriptionKey: \"hoa\",\r\n\t\t\t\t\tfields: [{\r\n\t\t\t\t\t\tkey: \"hoa\",\r\n\t\t\t\t\t\tlabel: \"{i18n>detail.table.ddo.hoa}\",\r\n\t\t\t\t\t\tvalue: \"{hoa}\"\r\n\t\t\t\t\t}]\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn this.oASHoaVH;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Private function to get the instance of ValueHelp fragment\r\n\t\t * @private\r\n\t\t * @returns {Object} value help dialog control\r\n\t\t */\r\n\t\tgetASCurrVH: function() {\r\n\t\t\tif (!this.oASCurrVH) {\r\n\t\t\t\tthis.oASCurrVH = new VHDialog({\r\n\t\t\t\t\tcomponent: this.getOwnerComponent(),\r\n\t\t\t\t\tid: \"vhCurrAS\",\r\n\t\t\t\t\tcontentDensity: this.contentDensity,\r\n\t\t\t\t\ttitleKey: \"detail.ops.panel.content.table.column.vh.title.curr\",\r\n\t\t\t\t\tentitySet: \"/ZWRK_C_CURRNKEY\",\r\n\t\t\t\t\tsorter: new Sorter(\"waers\", false),\r\n\t\t\t\t\tbMultiSelect: false,\r\n\t\t\t\t\tkey: \"waers\",\r\n\t\t\t\t\tdescriptionKey: \"ktext\",\r\n\t\t\t\t\tfields: [{\r\n\t\t\t\t\t\tkey: \"waers\",\r\n\t\t\t\t\t\tlabel: \"{/ZWRK_C_CURRNKEY/waers/#@sap:label}\",\r\n\t\t\t\t\t\tvalue: \"{waers}\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tkey: \"ktext\",\r\n\t\t\t\t\t\tlabel: \"{/ZWRK_C_CURRNKEY/ktext/#@sap:label}\",\r\n\t\t\t\t\t\tvalue: \"{ktext}\"\r\n\t\t\t\t\t}]\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn this.oASCurrVH;\r\n\t\t},\r\n\t\t/**\r\n\t\t * To handle OK press in Location Value Help\r\n\t\t * @param {object} oSource the control which triggered\r\n\t\t * @param {sap.ui.base.event} oEvent object\r\n\t\t * @returns {boolean} Whether ok or not.\r\n\t\t */\r\n\t\t_handleOk: function(oSource, oEvent) {\r\n\t\t\tvar oControl = oSource.getCustomData()[0].getValue(),\r\n\t\t\t\toTable = this._getFragControlById(\"idSmartTable\", \"idVHDialog\"),\r\n\t\t\t\toSelectedItemContext = oTable.getTable().getSelectedContexts(),\r\n\t\t\t\toModel = this.getModel(),\r\n\t\t\t\ti;\r\n\t\t\tif (oSelectedItemContext.length === 0) {\r\n\t\t\t\tMessageToast.show(this.getResourceBundle().getText(\"ymsg.smartvh.noselect\"));\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tswitch (oControl) {\r\n\t\t\t\tcase \"District\":\r\n\t\t\t\t\tthis._removeAllToken([\"idSelectVillage\", \"idSelectMandal\"]);\r\n\t\t\t\t\tthis._removeAllToken([\"idSelectVillage\", \"idSelectMandal\"]);\r\n\t\t\t\t\tthis.getModel().getProperty(\"district\", oTable.getTable().getSelectedContexts()[0]);\r\n\t\t\t\t\tfor (i = 0; i < oSelectedItemContext.length; i++) {\r\n\t\t\t\t\t\tvar oSelectedTokenKey = oModel.getProperty(\"district\", oSelectedItemContext[i]),\r\n\t\t\t\t\t\t\tbDuplicateExist = this._checkTokenDuplicate(oSelectedTokenKey, oSource);\r\n\t\t\t\t\t\tif (!bDuplicateExist) {\r\n\t\t\t\t\t\t\toSource.addToken(new Token({\r\n\t\t\t\t\t\t\t\tkey: oSelectedTokenKey,\r\n\t\t\t\t\t\t\t\ttext: oModel.getProperty(\"name\", oSelectedItemContext[i])\r\n\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\toSource.fireTokenUpdate();\r\n\t\t\t\t\tthis._handleExit();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"Mandal\":\r\n\t\t\t\t\tthis._removeAllToken([\"idSelectDistrict\", \"idSelectVillage\"]);\r\n\t\t\t\t\tfor (i = 0; i < oSelectedItemContext.length; i++) {\r\n\t\t\t\t\t\tvar oSelectedTokenKey = oModel.getProperty(\"district\", oSelectedItemContext[i]) + \":\" + oModel.getProperty(\"mandal\",\r\n\t\t\t\t\t\t\t\toSelectedItemContext[i]),\r\n\t\t\t\t\t\t\tbDuplicateExist = this._checkTokenDuplicate(oSelectedTokenKey, oSource);\r\n\t\t\t\t\t\tif (!bDuplicateExist) {\r\n\t\t\t\t\t\t\toSource.addToken(new Token({\r\n\t\t\t\t\t\t\t\tkey: oSelectedTokenKey,\r\n\t\t\t\t\t\t\t\ttext: oModel.getProperty(\"mandalx\", oSelectedItemContext[i])\r\n\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\toSource.fireTokenUpdate();\r\n\t\t\t\t\tthis._handleExit();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"Village\":\r\n\t\t\t\t\tthis._removeAllToken([\"idSelectDistrict\", \"idSelectMandal\"]);\r\n\r\n\t\t\t\t\tfor (i = 0; i < oSelectedItemContext.length; i++) {\r\n\t\t\t\t\t\tvar oSelectedTokenKey = oModel.getProperty(\"district\", oSelectedItemContext[i]) + \":\" + oModel.getProperty(\"mandal\",\r\n\t\t\t\t\t\t\t\toSelectedItemContext[i]) + \":\" + oModel.getProperty(\"village\", oSelectedItemContext[i]),\r\n\t\t\t\t\t\t\tbDuplicateExist = this._checkTokenDuplicate(oSelectedTokenKey, oSource);\r\n\t\t\t\t\t\tif (!bDuplicateExist) {\r\n\t\t\t\t\t\t\toSource.addToken(new Token({\r\n\t\t\t\t\t\t\t\tkey: oSelectedTokenKey,\r\n\t\t\t\t\t\t\t\ttext: oModel.getProperty(\"villagex\", oSelectedItemContext[i])\r\n\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\toSource.fireTokenUpdate();\r\n\t\t\t\t\tthis._handleExit();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"LokSabha\":\r\n\t\t\t\t\t//this._removeAllToken([\"idMultiInputAssembly\"]);\r\n\t\t\t\t\tfor (i = 0; i < oSelectedItemContext.length; i++) {\r\n\t\t\t\t\t\tvar oSelectedTokenKey = oModel.getProperty(\"loksabha\", oSelectedItemContext[i]),\r\n\t\t\t\t\t\t\tbDuplicateExist = this._checkTokenDuplicate(oSelectedTokenKey, oSource);\r\n\t\t\t\t\t\tif (!bDuplicateExist) {\r\n\t\t\t\t\t\t\toSource.addToken(new Token({\r\n\t\t\t\t\t\t\t\tkey: oSelectedTokenKey,\r\n\t\t\t\t\t\t\t\ttext: oModel.getProperty(\"loksabha_name\", oSelectedItemContext[i])\r\n\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\toSource.fireTokenUpdate();\r\n\t\t\t\t\tthis._handleExit();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"project_id\":\r\n\t\t\t\t\tvar aArray = [];\r\n\t\t\t\t\tvar Obj = {};\r\n\t\t\t\t\tvar LstRsultRow = this.getView().getModel(\"TableModel\").getData().results.length - 1;\r\n\t\t\t\t\tif (this.getView().getModel(\"TableModel\").getData().results.length > 0 && this.getView().getModel(\"TableModel\").getData().results[\r\n\t\t\t\t\t\t\tLstRsultRow].MigASEditNumber === \"\") {\r\n\t\t\t\t\t\tthis.getView().getModel(\"TableModel\").getData().results.splice(LstRsultRow, 1);\r\n\t\t\t\t\t\tthis.getView().getModel(\"TableModel\").refresh();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (var k = 0; k < this.getView().getModel(\"TableModel\").getData().results.length; k++) {\r\n\t\t\t\t\t\tObj.MigASEditNumber = this.getView().getModel(\"TableModel\").getData().results[k].MigASEditNumber;\r\n\t\t\t\t\t\tObj.SancEditAmunt = this.getView().getModel(\"TableModel\").getData().results[k].SancEditAmunt;\r\n\t\t\t\t\t\tObj.ASEditDescription = this.getView().getModel(\"TableModel\").getData().results[k].ASEditDescription;\r\n\t\t\t\t\t\tObj.SanctionEditRefe = this.getView().getModel(\"TableModel\").getData().results[k].SanctionEditRefe;\r\n\t\t\t\t\t\taArray.push(Obj);\r\n\t\t\t\t\t\tObj = {};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (var i = 0; i < oSelectedItemContext.length; i++) {\r\n\t\t\t\t\t\tObj.MigASEditNumber = oSelectedItemContext[i].getObject().project_id;\r\n\t\t\t\t\t\tObj.SancEditAmunt = oSelectedItemContext[i].getObject().san_amt;\r\n\t\t\t\t\t\tObj.ASEditDescription = oSelectedItemContext[i].getObject().prj_desc;\r\n\t\t\t\t\t\tObj.SanctionEditRefe = oSelectedItemContext[i].getObject().san_ref_no;\r\n\t\t\t\t\t\taArray.push(Obj);\r\n\t\t\t\t\t\tObj = {};\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\taArray = {\r\n\t\t\t\t\t\t\"results\": aArray\r\n\t\t\t\t\t};\r\n\t\t\t\t\tvar oModel = new sap.ui.model.json.JSONModel();\r\n\t\t\t\t\toModel.setData(aArray);\r\n\r\n\t\t\t\t\tthis.getView().setModel(oModel, \"TableModel\");\r\n\t\t\t\t\tthis.getView().getModel(\"TableModel\").refresh();\r\n\t\t\t\t\tthis._handleExit();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\t//this._removeAllToken([\"idMultiInputLoksabha\"]);\r\n\t\t\t\t\tfor (i = 0; i < oSelectedItemContext.length; i++) {\r\n\t\t\t\t\t\tvar oSelectedTokenKey = oModel.getProperty(\"constutuency\", oSelectedItemContext[i]),\r\n\t\t\t\t\t\t\tbDuplicateExist = this._checkTokenDuplicate(oSelectedTokenKey, oSource);\r\n\t\t\t\t\t\tif (!bDuplicateExist) {\r\n\t\t\t\t\t\t\toSource.addToken(new Token({\r\n\t\t\t\t\t\t\t\tkey: oSelectedTokenKey,\r\n\t\t\t\t\t\t\t\ttext: oModel.getProperty(\"assembly\", oSelectedItemContext[i])\r\n\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\toSource.fireTokenUpdate();\r\n\t\t\t\t\tthis._handleExit();\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Private function used to remove all token from multi-input\r\n\t\t * @private\r\n\t\t * @param {Array} aControlId Array of IDs of controls\r\n\t\t */\r\n\t\t_removeAllToken: function(aControlId) {\r\n\t\t\tvar aEmpArray = [];\r\n\t\t\tfor (var i = 0; i < aControlId.length; i++) {\r\n\t\t\t\tvar oControl = this.byId(aControlId[i]);\r\n\t\t\t\toControl.setTokens(aEmpArray);\r\n\t\t\t\t//\toControl.fireTokenUpdate();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Private function used for Setting the token based on user selection\r\n\t\t * @private\r\n\t\t * @param {Source} oSource Source of Event\r\n\t\t * @param {Array} aSelectedObjects Array of all selected objects in the suggestions\r\n\t\t * @param {String} textProperty Corresponding Text of the selections\r\n\t\t * @param {String} keyProperty Key of the Selections\r\n\t\t */\r\n\t\t_setTokens: function(oSource, aSelectedObjects, textProperty, keyProperty) {\r\n\t\t\tvar aTokens = oSource.getTokens();\r\n\t\t\tvar that = this;\r\n\t\t\tjQuery.each(aSelectedObjects, function(index, oSelectedObject) {\r\n\t\t\t\tvar oNewToken = that._createNewTokens(oSelectedObject, textProperty, keyProperty);\r\n\t\t\t\tvar bNewToken = true;\r\n\t\t\t\tjQuery.each(aTokens, function(i, oToken) {\r\n\t\t\t\t\tif (oToken.getKey() === oNewToken.getKey()) {\r\n\t\t\t\t\t\tbNewToken = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif (bNewToken) {\r\n\t\t\t\t\taTokens.push(oNewToken);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\toSource.setTokens(aTokens);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Private function to create a token\r\n\t\t * @private\r\n\t\t * @param {Object} oSelectedObject Parameters of new Token\r\n\t\t * @param {String} text Corresponding Text of selection\r\n\t\t * @param {String} key Key of Selection\r\n\t\t * @returns {Object} Token for selected keys and corresponding texts\r\n\t\t */\r\n\t\t_createNewTokens: function(oSelectedObject, text, key) {\r\n\t\t\treturn new Token({\r\n\t\t\t\ttext: oSelectedObject[text],\r\n\t\t\t\tkey: oSelectedObject[key]\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Private function to get instance of value help for district\r\n\t\t * @private\r\n\t\t * @returns {Object} Control for Location value help\r\n\t\t */\r\n\t\t_getASDistrictVH: function() {\r\n\t\t\tif (!this.oASDistVH) {\r\n\t\t\t\tthis.oASDistVH = new VHDialog({\r\n\t\t\t\t\tcomponent: this.getOwnerComponent(),\r\n\t\t\t\t\tid: \"vhDistrictAS\",\r\n\t\t\t\t\tcontentDensity: this.contentDensity,\r\n\t\t\t\t\ttitleKey: \"detail.ops.panel.content.table.column.vh.title.district\",\r\n\t\t\t\t\tentitySet: \"/ZWRK_C_DISTRICTS\",\r\n\t\t\t\t\tsorter: new Sorter(\"district\", false),\r\n\t\t\t\t\tbMultiSelect: false,\r\n\t\t\t\t\tkey: \"district\",\r\n\t\t\t\t\tdescriptionKey: \"name\",\r\n\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t// {\r\n\t\t\t\t\t\t//     key: \"district\",\r\n\t\t\t\t\t\t//     label: \"{i18n>detail.location.popup.districtId}\",\r\n\t\t\t\t\t\t//     value: \"{district}\"\r\n\t\t\t\t\t\t// },\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tkey: \"name\",\r\n\t\t\t\t\t\t\tlabel: \"{i18n>detail.location.popup.districtName}\",\r\n\t\t\t\t\t\t\tvalue: \"{name}\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn this.oASDistVH;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Private function to get instance of value help for mandal\r\n\t\t * @private\r\n\t\t * @returns {Object} Control for Location value help\r\n\t\t */\r\n\t\t_getASMandalVH: function() {\r\n\t\t\tif (!this.oASMandalVH) {\r\n\t\t\t\tthis.oASMandalVH = new VHDialog({\r\n\t\t\t\t\tcomponent: this.getOwnerComponent(),\r\n\t\t\t\t\tid: \"vhMandalAS\",\r\n\t\t\t\t\tcontentDensity: this.contentDensity,\r\n\t\t\t\t\ttitleKey: \"detail.ops.panel.content.table.column.vh.title.mandal\",\r\n\t\t\t\t\tentitySet: \"/ZWRK_C_MANDAL_LIST\",\r\n\t\t\t\t\tsorter: new Sorter(\"mandal\", false),\r\n\t\t\t\t\tbMultiSelect: false,\r\n\t\t\t\t\tkey: \"mandal\",\r\n\t\t\t\t\tdescriptionKey: \"name\",\r\n\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t// {\r\n\t\t\t\t\t\t//     key: \"district\",\r\n\t\t\t\t\t\t//     label: \"{i18n>detail.location.popup.districtId}\",\r\n\t\t\t\t\t\t//     value: \"{district}\"\r\n\t\t\t\t\t\t// },\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tkey: \"districtx\",\r\n\t\t\t\t\t\t\tlabel: \"{i18n>detail.location.popup.districtName}\",\r\n\t\t\t\t\t\t\tvalue: \"{districtx}\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// {\r\n\t\t\t\t\t\t//     key: \"mandal\",\r\n\t\t\t\t\t\t//     label: \"{i18n>detail.location.popup.mandalId}\",\r\n\t\t\t\t\t\t//     value: \"{mandal}\"\r\n\t\t\t\t\t\t// },\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tkey: \"mandalx\",\r\n\t\t\t\t\t\t\tlabel: \"{i18n>detail.location.popup.mandalName}\",\r\n\t\t\t\t\t\t\tvalue: \"{mandalx}\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn this.oASMandalVH;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Private function to get instance of value help for village\r\n\t\t * @private\r\n\t\t * @returns {Object} Control for Location value help\r\n\t\t */\r\n\t\t_getASVillageVH: function() {\r\n\t\t\tif (!this.oASVillageVH) {\r\n\t\t\t\tthis.oASVillageVH = new VHDialog({\r\n\t\t\t\t\tcomponent: this.getOwnerComponent(),\r\n\t\t\t\t\tid: \"vhVillageAS\",\r\n\t\t\t\t\tcontentDensity: this.contentDensity,\r\n\t\t\t\t\ttitleKey: \"detail.ops.panel.content.table.column.vh.title.village\",\r\n\t\t\t\t\tentitySet: \"/ZWRK_C_VILLAGES_LIST\",\r\n\t\t\t\t\tsorter: new Sorter(\"village\", false),\r\n\t\t\t\t\tbMultiSelect: false,\r\n\t\t\t\t\tkey: \"village\",\r\n\t\t\t\t\tdescriptionKey: \"villagename\",\r\n\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t// {\r\n\t\t\t\t\t\t//     key: \"district\",\r\n\t\t\t\t\t\t//     label: \"{i18n>detail.location.popup.districtId}\",\r\n\t\t\t\t\t\t//     value: \"{district}\"\r\n\t\t\t\t\t\t// },\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tkey: \"districtx\",\r\n\t\t\t\t\t\t\tlabel: \"{i18n>detail.location.popup.districtName}\",\r\n\t\t\t\t\t\t\tvalue: \"{districtx}\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// {\r\n\t\t\t\t\t\t//     key: \"mandal\",\r\n\t\t\t\t\t\t//     label: \"{i18n>detail.location.popup.mandalId}\",\r\n\t\t\t\t\t\t//     value: \"{mandal}\"\r\n\t\t\t\t\t\t// },\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tkey: \"mandalx\",\r\n\t\t\t\t\t\t\tlabel: \"{i18n>detail.location.popup.mandalName}\",\r\n\t\t\t\t\t\t\tvalue: \"{mandalx}\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// {\r\n\t\t\t\t\t\t//     key: \"village\",\r\n\t\t\t\t\t\t//     label: \"{i18n>detail.location.popup.villageId}\",\r\n\t\t\t\t\t\t//     value: \"{village}\"\r\n\t\t\t\t\t\t// },\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tkey: \"villagex\",\r\n\t\t\t\t\t\t\tlabel: \"{i18n>detail.location.popup.villageName}\",\r\n\t\t\t\t\t\t\tvalue: \"{villagex}\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn this.oASVillageVH;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Private function to get instance of value help for lok sabha\r\n\t\t * @private\r\n\t\t * @returns {Object} Control for Location value help\r\n\t\t */\r\n\t\t_getASLoksabhaVH: function() {\r\n\t\t\tif (!this.oASLoksabhaVH) {\r\n\t\t\t\tthis.oASLoksabhaVH = new VHDialog({\r\n\t\t\t\t\tcomponent: this.getOwnerComponent(),\r\n\t\t\t\t\tid: \"vhLoksabhaAS\",\r\n\t\t\t\t\tcontentDensity: this.contentDensity,\r\n\t\t\t\t\ttitleKey: \"detail.ops.panel.content.table.column.vh.title.loksabha\",\r\n\t\t\t\t\tentitySet: \"/ZWRK_C_LOKSABHA\",\r\n\t\t\t\t\tsorter: new Sorter(\"loksabha\", false),\r\n\t\t\t\t\tbMultiSelect: false,\r\n\t\t\t\t\tkey: \"loksabha\",\r\n\t\t\t\t\tdescriptionKey: \"loksabha_name\",\r\n\t\t\t\t\tfields: [{\r\n\t\t\t\t\t\tkey: \"District_name\",\r\n\t\t\t\t\t\tlabel: \"{/ZWRK_C_LOKSABHA/District_name/#@sap:label}\",\r\n\t\t\t\t\t\tvalue: \"{District_name}\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tkey: \"loksabha_name\",\r\n\t\t\t\t\t\tlabel: \"{/ZWRK_C_LOKSABHA/loksabha_name/#@sap:label}\",\r\n\t\t\t\t\t\tvalue: \"{loksabha_name}\"\r\n\t\t\t\t\t}]\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn this.oASLoksabhaVH;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Private function to get instance of value help for assembly\r\n\t\t * @private\r\n\t\t * @returns {Object} Control for Location value help\r\n\t\t */\r\n\t\t_getASAssemblyVH: function() {\r\n\t\t\tif (!this.oASAssemblyVH) {\r\n\t\t\t\tthis.oASAssemblyVH = new VHDialog({\r\n\t\t\t\t\tcomponent: this.getOwnerComponent(),\r\n\t\t\t\t\tid: \"vhAssemblyAS\",\r\n\t\t\t\t\tcontentDensity: this.contentDensity,\r\n\t\t\t\t\ttitleKey: \"detail.ops.panel.content.table.column.vh.title.assembly\",\r\n\t\t\t\t\tentitySet: \"/ZWRK_C_CONSTITUENCIES\",\r\n\t\t\t\t\tsorter: new Sorter(\"constutuency\", false),\r\n\t\t\t\t\tbMultiSelect: false,\r\n\t\t\t\t\tkey: \"constutuency\",\r\n\t\t\t\t\tdescriptionKey: \"assembly\",\r\n\t\t\t\t\tfields: [{\r\n\t\t\t\t\t\tkey: \"distx\",\r\n\t\t\t\t\t\tlabel: \"{/ZWRK_C_CONSTITUENCIES/distx/#@sap:label}\",\r\n\t\t\t\t\t\tvalue: \"{distx}\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tkey: \"assembly\",\r\n\t\t\t\t\t\tlabel: \"{/ZWRK_C_CONSTITUENCIES/assembly/#@sap:label}\",\r\n\t\t\t\t\t\tvalue: \"{assembly}\"\r\n\t\t\t\t\t}]\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn this.oASAssemblyVH;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Private function to return the getBinding Context\r\n\t\t * @param {Array} aControlId Array of Controls for IDs\r\n\t\t * @param {String} sFilterItems String of filter items\r\n\t\t * @param {String} sSelectedKey String of Selected record key\r\n\t\t */\r\n\t\t_setFilterOnBindings: function(aControlId, sFilterItems, sSelectedKey) {\r\n\t\t\tvar aFilter = [];\r\n\t\t\tif (sFilterItems.length) {\r\n\t\t\t\tfor (var j = 0; j < sFilterItems.length; j++) {\r\n\t\t\t\t\taFilter.push(new Filter(sFilterItems[j], FilterOperator.EQ, sSelectedKey));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (aControlId.length > 0) {\r\n\t\t\t\tfor (var i = 0; i < aControlId.length; i++) {\r\n\t\t\t\t\tthis.byId(aControlId[i]).setSelectedKey(\"\");\r\n\t\t\t\t\tthis.byId(aControlId[i]).getBinding(\"items\").filter(aFilter);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Private function to return the filter of selected token\r\n\t\t * @private\r\n\t\t * @param {String} sMultiInputCId Identifier for Multi Input Property\r\n\t\t * @param {String} sFilterProperty Identifier for Filter Property\r\n\t\t * @returns {aTokenFilters} Array of filtering tokens\r\n\t\t */\r\n\t\t_getTokenFilter: function(sMultiInputCId, sFilterProperty) {\r\n\t\t\tvar aTokenFilters = [],\r\n\t\t\t\taTokens = this.byId(sMultiInputCId).getTokens();\r\n\t\t\tif (aTokens.length > 0) {\r\n\t\t\t\tfor (var i = 0; i < aTokens.length; i++) {\r\n\t\t\t\t\tvar sKey = aTokens[i].getKey();\r\n\t\t\t\t\tif (sKey) {\r\n\t\t\t\t\t\taTokenFilters.push(new Filter(sFilterProperty, FilterOperator.EQ, sKey));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\taTokenFilters.push(new Filter(sFilterProperty, FilterOperator.EQ, \"\"));\r\n\t\t\t}\r\n\t\t\treturn aTokenFilters;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler function for MultiInput value help for District\r\n\t\t * @private\r\n\t\t * @param {Event} oEvent Displaying list of Districts\r\n\t\t */\r\n\t\thandleDistrictListDisplay: function(oEvent) {\r\n\t\t\tvar aTokenFilters = this._getTokenFilter(\"idSelectDistrict\", \"district\");\r\n\t\t\tthis._getASDistrictVH().open({\r\n\t\t\t\tfilters: aTokenFilters,\r\n\t\t\t\tmode: \"None\",\r\n\t\t\t\thideFilter: true,\r\n\t\t\t\tdisplayTitle: \"detail.ops.panel.content.table.column.vh.title.sdistrict\",\r\n\t\t\t\tmultiSelect: function(oSelectedObject) {\r\n\r\n\t\t\t\t},\r\n\t\t\t\tselect: function(oSelectedObject) {\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler function for MultiInput value help for Mandals\r\n\t\t * @private\r\n\t\t * @param {Event} oEvent Displaying list of Mandals\r\n\t\t */\r\n\t\thandleMandalListDisplay: function(oEvent) {\r\n\t\t\tvar aTokenFilters = this._getTokenFilter(\"idSelectMandal\", \"filter\");\r\n\t\t\tthis._getASMandalVH().open({\r\n\t\t\t\tfilters: aTokenFilters,\r\n\t\t\t\tmode: \"None\",\r\n\t\t\t\thideFilter: true,\r\n\t\t\t\tdisplayTitle: \"detail.ops.panel.content.table.column.vh.title.smandal\",\r\n\t\t\t\tselect: function(oSelectedObject) {\r\n\r\n\t\t\t\t},\r\n\t\t\t\tmultiSelect: function(oSelectedObject) {\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler function for MultiInput value help for Villages\r\n\t\t * @private\r\n\t\t * @param {Event} oEvent Displaying list of Villages\r\n\t\t */\r\n\t\thandleVillageListDisplay: function(oEvent) {\r\n\t\t\tvar aTokenFilters = this._getTokenFilter(\"idSelectVillage\", \"filter\");\r\n\t\t\tthis._getASVillageVH().open({\r\n\t\t\t\tfilters: aTokenFilters,\r\n\t\t\t\tmode: \"None\",\r\n\t\t\t\thideFilter: true,\r\n\t\t\t\tdisplayTitle: \"detail.ops.panel.content.table.column.vh.title.svillage\",\r\n\t\t\t\tmultiSelect: function(oSelectedObject) {\r\n\r\n\t\t\t\t},\r\n\t\t\t\tselect: function(oSelectedObject) {\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler function for MultiInput value help for Lok Sabhas\r\n\t\t * @private\r\n\t\t * @param {Event} oEvent Displaying list of Lok Sabhas\r\n\t\t */\r\n\t\tonLoksabhaListClick: function(oEvent) {\r\n\t\t\tvar aTokenFilters = this._getTokenFilter(\"idMultiInputLoksabha\", \"loksabha\");\r\n\t\t\tthis._getASLoksabhaVH().open({\r\n\t\t\t\tfilters: aTokenFilters,\r\n\t\t\t\tmode: \"None\",\r\n\t\t\t\thideFilter: true,\r\n\t\t\t\tdisplayTitle: \"detail.ops.panel.content.table.column.vh.title.sloksabha\",\r\n\t\t\t\tselect: function(oSelectedObject) {\r\n\r\n\t\t\t\t},\r\n\t\t\t\tmultiSelect: function(oSelectedObject) {\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * Event handler function for MultiInput value help for Assemblies\r\n\t\t * @private\r\n\t\t * @param {Event} oEvent Displaying list of Assemblies\r\n\t\t */\r\n\t\thandleAssemblyListDisplay: function(oEvent) {\r\n\t\t\tvar aTokenFilters = this._getTokenFilter(\"idMultiInputAssembly\", \"constutuency\");\r\n\t\t\tthis._getASAssemblyVH().open({\r\n\t\t\t\tfilters: aTokenFilters,\r\n\t\t\t\tmode: \"None\",\r\n\t\t\t\thideFilter: true,\r\n\t\t\t\tdisplayTitle: \"detail.ops.panel.content.table.column.vh.title.sassembly\",\r\n\t\t\t\tselect: function(oSelectedObject) {\r\n\r\n\t\t\t\t},\r\n\t\t\t\tmultiSelect: function(oSelectedObject) {\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * private function to set value for multiple fields\r\n\t\t * @param {string} sModelName Model Identifier\r\n\t\t * @param {array} aProp1  Array of properties\r\n\t\t * @param {string} sPropV Array of properties\r\n\t\t */\r\n\t\t_setPropertyValue: function(sModelName, aProp1, sPropV) {\r\n\t\t\tfor (var i = 0; i < aProp1.length; i++) {\r\n\t\t\t\tvar sProperty = \"/\" + aProp1[i];\r\n\t\t\t\tthis.getModel(sModelName).setProperty(sProperty, sPropV);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * private function to authorize a user\r\n\t\t * @param {string} sObjectId Object Identifier\r\n\t\t */\r\n\t\t_authorizeUser: function(sObjectId) {\r\n\t\t\tvar that = this,\r\n\t\t\t\tsPositionId = this.getModel(\"appView\").getProperty(\"/position\"),\r\n\t\t\t\toAppViewModel = this.getModel(\"appView\"),\r\n\t\t\t\toResourceBundle = this.getResourceBundle(),\r\n\t\t\t\toDetailViewModel = this.getModel(\"detailView\");\r\n\t\t\tvar oAuth = new Promise(function(resolve, reject) {\r\n\t\t\t\tthis.getOwnerComponent().oDraft.getAuthorization({\r\n\t\t\t\t\tfName: \"/GetOpenItems\",\r\n\t\t\t\t\tApplicationId: \"AS\",\r\n\t\t\t\t\tGuid: sObjectId,\r\n\t\t\t\t\tPositionId: sPositionId\r\n\t\t\t\t}, resolve, reject);\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\toAuth.then(function(oResult) {\r\n\t\t\t\tvar oOpenItems = oResult.data.GetOpenItems;\r\n\t\t\t\tthis.getModel(\"detailView\").setProperty(\"/WfRole\", oOpenItems.Wfrole);\r\n\t\t\t\tif (oOpenItems.ApproveBt === \"X\" || oOpenItems.NextBt === \"X\" || oOpenItems.SubmitBt === \"X\") {\r\n\t\t\t\t\tthis.getModel(\"detailView\").setProperty(\"/authorized\", true);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.getModel(\"detailView\").setProperty(\"/authorized\", false);\r\n\t\t\t\t\t//\t\t\t\t\toDetailViewModel.setProperty(\"/stateId\", \"D\");\r\n\t\t\t\t\t//\t\t\t\t\toDetailViewModel.setProperty(\"/bEditable\", false);\r\n\t\t\t\t\t//\t\t\t\t\toAppViewModel.setProperty(\"/bEnabledMasterViewCtr\", true);\r\n\t\t\t\t\t//\t\t\t\t\toAppViewModel.setProperty(\"/sMasterListMode\", \"SingleSelectMaster\");\r\n\t\t\t\t\t//\t\t\t\t\tthis.getModel(\"detailView\").setProperty(\"/ObjectTitle\", oResourceBundle.getText(\"detail.page.header.title.display\"));\r\n\t\t\t\t}\r\n\t\t\t\tthis._setFooterButtonsVisibility(oOpenItems);\r\n\t\t\t\tif (oOpenItems.ApproveBt === \"X\") {\r\n\t\t\t\t\tthis.getModel().callFunction(\"/User_Is_Secratary\", {\r\n\t\t\t\t\t\tmethod: \"GET\",\r\n\t\t\t\t\t\turlParameters: {\r\n\t\t\t\t\t\t\tGuid: sObjectId,\r\n\t\t\t\t\t\t\tPosition: this.getModel(\"appView\").getProperty(\"/position\")\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: function(oResponse, oTe) {\r\n\t\t\t\t\t\t\tif (oResponse.User_Is_Secratary.IsSecratary === \"X\") {\r\n\t\t\t\t\t\t\t\tthat.getModel(\"detailView\").setProperty(\"/bIsSecratary\", true);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthat.getModel(\"detailView\").setProperty(\"/bIsSecratary\", false);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\terror: function(oError) {\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}.bind(this));\r\n\t\t},\r\n\t\t/**\r\n\t\t * private function to update buttons visibility\r\n\t\t * @param {object} oOpenItems Object containing accessibility options for the footer buttons\r\n\t\t */\r\n\t\t_setFooterButtonsVisibility: function(oOpenItems) {\r\n\t\t\tthis.getModel(\"detailView\").setProperty(\"/ApproveBtnVisibility\", oOpenItems.ApproveBt);\r\n\t\t\tthis.getModel(\"detailView\").setProperty(\"/NextBtnVisibility\", oOpenItems.NextBt);\r\n\t\t\tthis.getModel(\"detailView\").setProperty(\"/OnholdBtnVisibility\", oOpenItems.OnholdBt);\r\n\t\t\tthis.getModel(\"detailView\").setProperty(\"/ReturnBtnVisibility\", oOpenItems.ReturnBt);\r\n\t\t\tthis.getModel(\"detailView\").setProperty(\"/SubmitBtnVisibility\", oOpenItems.SubmitBt);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Function to get the User Feed list and Add action button in it\r\n\t\t * @private\r\n\t\t */\r\n\t\tgetUserFeedList: function() {\r\n\t\t\tvar that = this,\r\n\t\t\t\taFilters = [],\r\n\t\t\t\tsGuid = this.getView().getBindingContext().getProperty(\"Guid\");\r\n\t\t\taFilters.push(new Filter(\"Tabtype\", FilterOperator.EQ, \"CREATE\"));\r\n\t\t\taFilters.push(new Filter(\"Caseguid\", FilterOperator.EQ, sGuid));\r\n\t\t\taFilters.push(new Filter(\"Wiid\", FilterOperator.EQ, \"\"));\r\n\t\t\taFilters.push(new Filter(\"Wfinfo\", FilterOperator.EQ, \"\"));\r\n\t\t\taFilters.push(new Filter(\"Application\", FilterOperator.EQ, \"AS\"));\r\n\t\t\tthis._getMigCheckSet();\r\n\t\t\tthis.getView().setBusy(true);\r\n\t\t\tthis.getModel().read(\"/WrkNoteSet\", {\r\n\t\t\t\tfilters: aFilters,\r\n\t\t\t\tsuccess: function(oData) {\r\n\t\t\t\t\tfor (var i = 0; i < oData.results.length; i++) {\r\n\t\t\t\t\t\toData.results[i].Notingstring = decodeURIComponent(oData.results[i].Notingstring);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthat.getModel(\"detailView\").setProperty(\"/UserNotes\", oData.results);\r\n\t\t\t\t\tthat.getView().setBusy(false);\r\n\t\t\t\t},\r\n\t\t\t\terror: function(oError) {\r\n\t\t\t\t\tthat.getView().setBusy(false);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * Private function to assign the action Item on Comments\r\n\t\t * @param {Array} aNoteList Array containing all notes of the document \r\n\t\t */\r\n\t\t_setActionItemOnFeedListItem: function(aNoteList) {\r\n\t\t\tif (this.getModel(\"detailView\").getProperty(\"/stateId\") !== \"D\") {\r\n\t\t\t\tif (aNoteList.length > 0) {\r\n\t\t\t\t\tfor (var i = 0; i < aNoteList.length; i++) {\r\n\t\t\t\t\t\tvar Actions = [];\r\n\t\t\t\t\t\tif (aNoteList[i].Noteflag) {\r\n\t\t\t\t\t\t\tActions.push({\r\n\t\t\t\t\t\t\t\t\"Text\": \"Edit\",\r\n\t\t\t\t\t\t\t\t\"Icon\": \"sap-icon://edit\",\r\n\t\t\t\t\t\t\t\t\"Key\": \"edit\"\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\taNoteList[i].Actions = Actions;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Private function to fire the update for Message Popover message update\r\n\t\t * @param {Event} oEvent Click on message popover\r\n\t\t */\r\n\t\t_updateMessage: function(oEvent) {\r\n\t\t\tif (this.getView().byId(\"idMessagePopover\")) {\r\n\t\t\t\tthis.getView().byId(\"idMessagePopover\").setText(sap.ui.getCore().getMessageManager().getMessageModel().getData().length);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Private function to set visibility of components of the View\r\n\t\t * @private\r\n\t\t */\r\n\t\t_setObjectSectionVisibility: function() {\r\n\t\t\tvar oBindingContext = this.getView().getBindingContext();\r\n\t\t\tif (oBindingContext) {\r\n\t\t\t\tvar sCategory = oBindingContext.getProperty(\"Category\"),\r\n\t\t\t\t\toDetailViewModel = this.getModel(\"detailView\");\r\n\t\t\t\tif (sCategory === \"02\") {\r\n\t\t\t\t\toDetailViewModel.setProperty(\"/bUAVisible\", true);\r\n\t\t\t\t\tvar sDcwType = oBindingContext.getProperty(\"DcwType\");\r\n\t\t\t\t\tif (sDcwType === \"02\") {\r\n\t\t\t\t\t\toDetailViewModel.setProperty(\"/bOwnDCW\", false);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\toDetailViewModel.setProperty(\"/bOwnDCW\", true);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\toDetailViewModel.setProperty(\"/bUAVisible\", false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Private function to create Params for Post Note\r\n\t\t * @param {String} sAction Action specifier String\r\n\t\t * @returns {Object} Note attributes to be saved\r\n\t\t */\r\n\t\t_createPostCallParam: function(sAction) {\r\n\t\t\tvar oDetailViewModelData = this.getModel(\"detailView\").getProperty(\"/\");\r\n\t\t\treturn {\r\n\t\t\t\tnotePath: \"WrkNoteSet\",\r\n\t\t\t\tpath: \"WrkSave\",\r\n\t\t\t\taction: sAction,\r\n\t\t\t\tAppID: \"AS\",\r\n\t\t\t\tFPositionid: this.getModel(\"appView\").getProperty(\"/position\"),\r\n\t\t\t\tFUserid: \"\",\r\n\t\t\t\tRole: \"\",\r\n\t\t\t\tFFlag: \"\",\r\n\t\t\t\tNotingid: oDetailViewModelData.Notingid,\r\n\t\t\t\tPagent: oDetailViewModelData.Pagent,\r\n\t\t\t\tNotingstring: oDetailViewModelData.Notingstring,\r\n\t\t\t\tGuid: this.getView().getBindingContext().getProperty(\"Guid\")\r\n\t\t\t};\r\n\t\t},\r\n\t\t// /**\r\n\t\t//  * Private function for submit/return/approve\r\n\t\t//  * @private\r\n\t\t//  * @param {Object} oParams Object containing save parameters\r\n\t\t//  */\r\n\t\t// _workFlowCall: function(oParams){\r\n\t\t// \tvar that = this;\r\n\t\t// \tthis.oProcessActionPromise = new Promise(function(resolve, reject){\r\n\t\t// \t\tthat._postCall(oParams, resolve, reject);\r\n\t\t// \t});\r\n\t\t// \tthis.oProcessActionPromise.then(function(oData){\r\n\t\t// \t\tthat.getModel(\"detailView\").setProperty(\"/Notingstring\", \"\");\r\n\t\t// \t\tthat.oProcessActionPromise = null;\r\n\t\t// \t\tthat.getModel(\"detailView\").setProperty(\"/DraftStatus\", \"X\");\r\n\t\t// \t\tthat._successToastMsgDisplay(oParams.action);\r\n\t\t// \t\tthat._navToDetail.bind(that)(\"D\");\r\n\t\t// \t});\r\n\t\t// },\r\n\t\t/**\r\n\t\t * Private function for submit/return/approve\r\n\t\t * @private\r\n\t\t * @param {Object} oParams Object containing save parameters\r\n\t\t */\r\n\t\t_workFlowCall: function(oParams) {\r\n\t\t\tvar that = this,\r\n\t\t\t\tsUser = \"\",\r\n\t\t\t\tsPath = \"\";\r\n\t\t\tif (sap.ushell) {\r\n\t\t\t\tsUser = sap.ushell.Container.getService(\"UserInfo\").getId();\r\n\t\t\t}\r\n\t\t\tsPath = this.getModel().createKey(\"User_DetailsSet\", {\r\n\t\t\t\tUser_ID: sUser,\r\n\t\t\t\tApplication: \"AS\",\r\n\t\t\t\tRole: this.getModel(\"detailView\").getProperty(\"/WfRole\")\r\n\t\t\t});\r\n\t\t\tvar params = {\r\n\t\t\t\tpath: \"/\" + sPath,\r\n\t\t\t\tbusyControl: that.getView()\r\n\t\t\t};\r\n\t\t\tif (oParams.action !== \"SAVE\") {\r\n\t\t\t\tthis.oValidateBio = new Promise(function(resolve, reject) {\r\n\t\t\t\t\tthis._getBioValidation(params, resolve, reject);\r\n\t\t\t\t}.bind(this));\r\n\t\t\t\tthis.oValidateBio.then(function(oData) {\r\n\t\t\t\t\tthat._postWorkFlowCall(oParams);\r\n\t\t\t\t}, function(oError) {\r\n\t\t\t\t\tthat._postWorkFlowCall(oParams);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthat._postWorkFlowCall(oParams);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\t/**\r\n\t\t * function for submit/return/approve\r\n\t\t * @private\r\n\t\t * @param {Object} oParams Object containing save parameters\r\n\t\t */\r\n\t\t_postWorkFlowCall: function(oParams) {\r\n\t\t\tvar that = this,\r\n\t\t\t\toDetailViewModel = this.getModel(\"detailView\"),\r\n\t\t\t\toViewModel = this.getModel(\"detailView\"),\r\n\t\t\t\taWorkFlowLogData = oDetailViewModel.getProperty(\"/Worklog\"),\r\n\t\t\t\tbWorkFlowDefined = true;\r\n\t\t\t//to determine the freeworkflow\r\n\t\t\tif (oParams.action === \"SUBMIT\" || oParams.action === \"NEXT\") {\r\n\t\t\t\tvar sUserId = sap.ushell.Container.getService(\"UserInfo\").getId();\r\n\t\t\t\tif (aWorkFlowLogData.length === 0) {\r\n\t\t\t\t\tvar oPromiseWorkFlowLog = new Promise(function(resolve1, reject1) {\r\n\t\t\t\t\t\tthat.getWorkFlowLogDetails({\r\n\t\t\t\t\t\t\tApplicationId: \"AS\",\r\n\t\t\t\t\t\t\tGuid: that.getView().getBindingContext().getProperty(\"Guid\")\r\n\t\t\t\t\t\t}, resolve1, reject1);\r\n\t\t\t\t\t}.bind(that));\r\n\t\t\t\t\toPromiseWorkFlowLog.then(function() {\r\n\t\t\t\t\t\toViewModel.setProperty(\"/busy\", false);\r\n\t\t\t\t\t\tvar aWrkFLogData = oDetailViewModel.getProperty(\"/Worklog\");\r\n\t\t\t\t\t\tfor (var i = 0; i < aWrkFLogData.length; i++) {\r\n\t\t\t\t\t\t\tif ((sUserId === aWrkFLogData[i].Pernr) && (aWrkFLogData[i].Wfrole === oDetailViewModel.getProperty(\"/WfRole\")) && (\r\n\t\t\t\t\t\t\t\t\taWrkFLogData.length - 1) === i) {\r\n\t\t\t\t\t\t\t\tbWorkFlowDefined = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (aWrkFLogData.length >= 1) {\r\n\t\t\t\t\t\t\tthat._postSubmitCall(bWorkFlowDefined, oParams);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if (aWorkFlowLogData.length >= 1) {\r\n\t\t\t\t\tfor (var i = 0; i < aWorkFlowLogData.length; i++) {\r\n\t\t\t\t\t\tif ((sUserId === aWorkFlowLogData[i].Pernr) && (aWorkFlowLogData[i].Wfrole === oDetailViewModel.getProperty(\"/WfRole\")) && (\r\n\t\t\t\t\t\t\t\taWorkFlowLogData.length - 1) === i) {\r\n\t\t\t\t\t\t\tbWorkFlowDefined = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthat._postSubmitCall(bWorkFlowDefined, oParams);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (aWorkFlowLogData.length >= 1) {\r\n\t\t\t\t\tthis._postSubmitCall(bWorkFlowDefined, oParams);\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tvar oPromiseWorkFlowLogOnSave = new Promise(function(resolve1, reject1) {\r\n\t\t\t\t\t\tthat.getWorkFlowLogDetails({\r\n\t\t\t\t\t\t\tApplicationId: \"AS\",\r\n\t\t\t\t\t\t\tGuid: that.getView().getBindingContext().getProperty(\"Guid\")\r\n\t\t\t\t\t\t}, resolve1, reject1);\r\n\t\t\t\t\t}.bind(that));\r\n\t\t\t\t\toPromiseWorkFlowLogOnSave.then(function() {\r\n\t\t\t\t\t\toViewModel.setProperty(\"/busy\", false);\r\n\t\t\t\t\t\tvar aWrkFLogData = oDetailViewModel.getProperty(\"/Worklog\");\r\n\t\t\t\t\t\tif (aWrkFLogData.length >= 1) {\r\n\t\t\t\t\t\t\tthat._postSubmitCall(bWorkFlowDefined, oParams);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tsap.m.MessageBox.error(\"Maker Role in Workflow not maintain\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * internal function to determine \r\n\t\t */\r\n\t\t_postSubmitCall: function(bWorkFlowDefined, oParams) {\r\n\t\t\tvar that = this;\r\n\t\t\tif (bWorkFlowDefined) {\r\n\t\t\t\tthis.oProcessActionPromise = new Promise(function(resolve, reject) {\r\n\t\t\t\t\t//\tthat.getView().getModel().resetChanges();   27JUL20\r\n\t\t\t\t\t//\t\t\t\t\tthat._postCall(oParams, resolve, reject);\r\n\t\t\t\t\tthat._postCallNew(oParams, resolve, reject);\r\n\t\t\t\t});\r\n\t\t\t\tthis.oProcessActionPromise.then(function(oData) {\r\n\t\t\t\t\tsap.ushell.Container.setDirtyFlag(false);\r\n\t\t\t\t\tthat.getView().getElementBinding().refresh();\r\n\t\t\t\t\tthat.getModel().refresh(true);\r\n\t\t\t\t\tthat._bindViewDone();\r\n\r\n\t\t\t\t\tif (oParams.action === \"APPROVE\" && oData.data.DmsUrl) {\r\n\t\t\t\t\t\tthat._handleDigitalSing(oData.data.DmsUrl, oData.data.FioriLink);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.getModel(\"detailView\").setProperty(\"/Notingstring\", \"\");\r\n\t\t\t\t\t\tthat.oProcessActionPromise = null;\r\n\t\t\t\t\t\tthat.getModel(\"detailView\").setProperty(\"/DraftStatus\", \"X\");\r\n\t\t\t\t\t\tthat._successToastMsgDisplay(oParams.action);\r\n\t\t\t\t\t\tthat._changeFullScreenMode(false, \"detail\", \"MasterPage\", \"asIdBtnScreenToggle\");\r\n\t\t\t\t\t\tthat._navToDetail.bind(that)(\"D\");\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t/*\tthis.oProcessActionPromise.catch(function(oError){\r\n\t\t\t\t\t\tthat.getView().getElementBinding().refresh();\r\n\t\t\t\t\t});*/\r\n\r\n\t\t\t} else {\r\n\t\t\t\tthis.getModel(\"appView\").setProperty(\"/busy\", false);\r\n\t\t\t\tMessageBox.alert(this.getResourceBundle().getText(\"detail.error.msg.wrkflowRoleNotMaint\"), {\r\n\t\t\t\t\tactions: [sap.m.MessageBox.Action.YES, sap.m.MessageBox.Action.NO],\r\n\t\t\t\t\tonClose: function(sAction) {\r\n\t\t\t\t\t\tif (sAction === \"YES\") {\r\n\t\t\t\t\t\t\tthis._reusePositionValueHelp(oParams);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}.bind(this)\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Internal function called for free workflow\r\n\t\t */\r\n\t\tworkflowProcess: function() {\r\n\t\t\tvar that = this,\r\n\t\t\t\toWFCModel = this.getModel(\"WFCModel\"),\r\n\t\t\t\toParams = oWFCModel.getProperty(\"/oParams\");\r\n\t\t\toParams.Role = \"C\";\r\n\t\t\toParams.FFlag = \"X\";\r\n\t\t\toParams.FPositionid = oWFCModel.getProperty(\"/nextPositionID\");\r\n\t\t\toParams.FUserid = oWFCModel.getProperty(\"/nextUserID\");\r\n\t\t\tthis.oProcessActionPromise = new Promise(function(resolve, reject) {\r\n\t\t\t\t//\t\t\t\tthat._postCall(oParams, resolve, reject);\r\n\t\t\t\tthat._postCallNew(oParams, resolve, reject);\r\n\t\t\t});\r\n\t\t\tthis.oProcessActionPromise.then(function(oData) {\r\n\t\t\t\tsap.ushell.Container.setDirtyFlag(false);\r\n\t\t\t\tthat._changeFullScreenMode(false, \"detail\", \"MasterPage\", \"asIdBtnScreenToggle\");\r\n\t\t\t\tthat.getView().getElementBinding().refresh();\r\n\t\t\t\tthat.getModel().refresh(true);\r\n\t\t\t\tthat._bindViewDone();\r\n\t\t\t\tthat.getModel(\"detailView\").setProperty(\"/Notingstring\", \"\");\r\n\t\t\t\tthat.oProcessActionPromise = null;\r\n\t\t\t\tthat.getModel(\"detailView\").setProperty(\"/DraftStatus\", \"X\");\r\n\t\t\t\tthat._successToastMsgDisplay(oParams.action);\r\n\t\t\t\tthat._navToDetail.bind(that)(\"D\");\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * Private function to create the process flow bar\r\n\t\t * @private\r\n\t\t */\r\n\t\t_makeProcessFlow: function() {\r\n\t\t\tthis.createFlowBar(\"idProcessFlowBox\");\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Private function to get the I18n text\r\n\t\t * @private\r\n\t\t * @param {String} sText text value from i18n resource\r\n\t\t * @returns {Object} Text contained in i18n Resources\r\n\t\t */\r\n\t\t_getI18nText: function(sText) {\r\n\t\t\treturn this.getResourceBundle().getText(sText);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Private function to post the Note and AS\r\n\t\t * @private\r\n\t\t * @param {Object} oParams Saving parameters\r\n\t\t */\r\n\t\t_postAS: function(oParams) {\r\n\t\t\tvar oParamsTemp = this._createPostCallParam(oParams.action);\r\n\t\t\tthis._workFlowCall(oParamsTemp);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Function to check the Note before any workflow action\r\n\t\t * @private\r\n\t\t * @returns {String} Body of the note\r\n\t\t */\r\n\t\t_checkNote: function() {\r\n\t\t\tvar bNotingString = false,\r\n\t\t\t\tsDetailModel = this.getModel(\"detailView\"),\r\n\t\t\t\tsLogInUser = sap.ushell.Container.getService(\"UserInfo\").getId(),\r\n\t\t\t\tsNotingString = sDetailModel.getProperty(\"/Notingstring\"),\r\n\t\t\t\tsNotes = sDetailModel.getProperty(\"/UserNotes\");\r\n\t\t\tif (sNotes.length > 0 && sLogInUser === sNotes[0].Createdby) {\r\n\t\t\t\tbNotingString = true;\r\n\t\t\t} else if (sNotingString) {\r\n\t\t\t\t//bNotingString = true;\r\n\t\t\t\tthis._displayWarnMessge(this.getModel(\"i18n\").getResourceBundle().getText(\"detail.message.note.savebefore\")); // return is as false beacuse on submit we are not saving the notes as per new change\r\n\t\t\t} else {\r\n\t\t\t\tthis._displayWarnMessge(this.getModel(\"i18n\").getResourceBundle().getText(\"detail.message.note.empty\"));\r\n\t\t\t}\r\n\t\t\treturn bNotingString;\r\n\t\t},\r\n\r\n\t\t_switchControlModel: function() {\r\n\t\t\tif (this.getView().getBindingContext()) {\r\n\t\t\t\tvar sAsType = this.getView().getBindingContext().getProperty(\"RefAsType\");\r\n\t\t\t\tswitch (sAsType) {\r\n\t\t\t\t\tcase \"03\":\r\n\t\t\t\t\t\tthis.controlModelSwitch(this.oAmendControlModel);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t//\t\tthis.controlModelSwitch(this.oDefaultControlModel);\r\n\t\t\t\t\t\tthis._getOpenItemRole();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Private function to set the header title for Amend Page\r\n\t\t * @param {String} sStateId State Identifier of the Document\r\n\t\t */\r\n\t\t_setAmendPageTitle: function(sStateId) {\r\n\t\t\tif (this.getView().getBindingContext()) {\r\n\t\t\t\tvar sAsType = this.getView().getBindingContext().getProperty(\"RefAsType\"),\r\n\t\t\t\t\tsStatus = this.getView().getBindingContext().getProperty(\"Status\");\r\n\t\t\t\tif (sAsType === \"03\") {\r\n\t\t\t\t\tvar oResourceBundle = this.getResourceBundle();\r\n\t\t\t\t\tif (sStateId === \"D\") {\r\n\t\t\t\t\t\tif (sStatus !== \"E0006\") {\r\n\t\t\t\t\t\t\tthis.getModel(\"detailView\").setProperty(\"/ObjectTitle\", oResourceBundle.getText(\"detail.page.header.amend.title.displayP\"));\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.getModel(\"detailView\").setProperty(\"/ObjectTitle\", oResourceBundle.getText(\"detail.page.header.amend.title.display\"));\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if (sStateId === \"C\") {\r\n\t\t\t\t\t\tthis.getModel(\"detailView\").setProperty(\"/ObjectTitle\", oResourceBundle.getText(\"detail.page.header.amend.title.create\"));\r\n\t\t\t\t\t} else if (sStateId === \"E\") {\r\n\t\t\t\t\t\tthis.getModel(\"detailView\").setProperty(\"/ObjectTitle\", oResourceBundle.getText(\"detail.page.header.amend.title.edit\"));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.getModel().updateBindings();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t_identifyHoaDdoFilters: function() {\r\n\t\t\tvar bUAVisible = this.getModel(\"detailView\").getProperty(\"/bUAVisible\"),\r\n\t\t\t\tbOwnDCW = this.getModel(\"detailView\").getProperty(\"/bOwnDCW\");\r\n\t\t\t// var oHoaFilterNonDCW = {filter:[\r\n\t\t\t// \t{id: \"idCategory\", key: \"category\", value: \"Category\"}, \r\n\t\t\t// \t{id: \"idInitDept\", key: \"dept\", value: \"InitiatinDept\"}\r\n\t\t\t// ]};\r\n\t\t\t// var oDdoFilterNonDCW = {filter:[\r\n\t\t\t// \t{id: 'idExecDept', key: 'fictr', value: 'ExecutingDept'}\r\n\t\t\t// ]};\r\n\t\t\t// var oHoaFilterOwnDCW = {filter: []};\r\n\t\t\t// var oDdoFilterOwnDCW = oDdoFilterNonDCW;\r\n\t\t\t// var oHoaFilterSource = oHoaFilterNonDCW;\r\n\t\t\t// var oDdoFilterSource = {filter: [\r\n\t\t\t// \t{id: \"idInitDept\", key: \"dept\", value: \"InitiatinDept\"}\r\n\t\t\t// ]};\r\n\t\t\t// var oHoaFilterTarget = {filter:[\r\n\t\t\t// \t{id: \"idCategory\", key: \"category\", value: \"Category\"}\r\n\t\t\t// ]};\r\n\t\t\t// var oDdoFilterTarget = {filter: []};\r\n\t\t\tif (!bUAVisible) {\r\n\t\t\t\tthis.oHoaFilter = this.getModel(\"hoaDdoFilters\").getProperty(\"/oHoaFilterNonDCW\");\r\n\t\t\t\tthis.oDdoFilter = this.getModel(\"hoaDdoFilters\").getProperty(\"/oDdoFilterNonDCW\");\r\n\t\t\t} else if (bUAVisible && bOwnDCW) {\r\n\t\t\t\tthis.oHoaFilter = this.getModel(\"hoaDdoFilters\").getProperty(\"/oHoaFilterOwnDCW\");\r\n\t\t\t\tthis.oDdoFilter = this.getModel(\"hoaDdoFilters\").getProperty(\"/oDdoFilterOwnDCW\");\r\n\t\t\t} else if (bUAVisible && !bOwnDCW) {\r\n\t\t\t\tthis.oHoaFilter = this.getModel(\"hoaDdoFilters\").getProperty(\"/oHoaFilterTarget\");\r\n\t\t\t\tthis.oDdoFilter = this.getModel(\"hoaDdoFilters\").getProperty(\"/oDdoFilterTarget\");\r\n\t\t\t\tthis.oHoaSourceFilter = this.getModel(\"hoaDdoFilters\").getProperty(\"/oHoaFilterSource\");\r\n\t\t\t\tthis.oDdoSourceFilter = this.getModel(\"hoaDdoFilters\").getProperty(\"/oDdoFilterSource\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t_setHoaDdoFilters: function() {\r\n\t\t\tvar aItems = this.byId(\"idWorksHoA\").getItems(),\r\n\t\t\t\taSourceItems = this.byId(\"idWorksSrcHoA\").getItems();\r\n\t\t\tif (aItems) {\r\n\t\t\t\tfor (var i = 0; i < aItems.length; i++) {\r\n\t\t\t\t\tvar aCells = aItems[i].getCells();\r\n\t\t\t\t\tfor (var j = 0; j < aCells.length; j++) {\r\n\t\t\t\t\t\tif (aCells[j].getId().indexOf(\"Hoa\") !== -1) {\r\n\t\t\t\t\t\t\taCells[j].data(\"filterArray\", this.oHoaFilter);\r\n\t\t\t\t\t\t} else if (aCells[j].getId().indexOf(\"Ddo\") !== -1) {\r\n\t\t\t\t\t\t\taCells[j].data(\"filterArray\", this.oDdoFilter);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (aSourceItems) {\r\n\t\t\t\tfor (var i = 0; i < aSourceItems.length; i++) {\r\n\t\t\t\t\tvar aCells = aSourceItems[i].getCells();\r\n\t\t\t\t\tfor (var j = 0; j < aCells.length; j++) {\r\n\t\t\t\t\t\tif (aCells[j].getId().indexOf(\"SourceHoa\") !== -1) {\r\n\t\t\t\t\t\t\taCells[j].data(\"filterArray\", this.oHoaSourceFilter);\r\n\t\t\t\t\t\t} else if (aCells[j].getId().indexOf(\"SourceDdo\") !== -1) {\r\n\t\t\t\t\t\t\taCells[j].data(\"filterArray\", this.oDdoSourceFilter);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * @private\r\n\t\t * @param {*} sId is the id of the template to be generated\r\n\t\t * @param {*} sSrcBindingPath is the binding path of the control\r\n\t\t */\r\n\t\t_templateForHOADDOVH: function(sId, sSrcBindingPath, sCustomData, sControlId) {\r\n\t\t\tvar oTemplate = \"\";\r\n\t\t\tif (sCustomData === \"Ddo\" || sCustomData === \"SourceDdo\") {\r\n\t\t\t\toTemplate = new sap.m.StandardListItem(this.createId(sId), {\r\n\t\t\t\t\ttitle: \"{fistl}\",\r\n\t\t\t\t\tdescription: \"{BESCHR}\",\r\n\t\t\t\t\ttype: \"Active\"\r\n\t\t\t\t});\r\n\t\t\t} else if (sCustomData === \"Hoa\" || sCustomData === \"SourceHoa\") {\r\n\t\t\t\toTemplate = new sap.m.StandardListItem(this.createId(sId), {\r\n\t\t\t\t\ttitle: \"{Hoa}\",\r\n\t\t\t\t\tinfo: \"{bcf}\",\r\n\t\t\t\t\t// description : \"{Hoa}\",\r\n\t\t\t\t\ttype: \"Active\"\r\n\t\t\t\t});\r\n\t\t\t} else if (sCustomData === \"PicCode\") {\r\n\t\t\t\toTemplate = new sap.m.StandardListItem(this.createId(sId), {\r\n\t\t\t\t\ttitle: \"{Pics_Code}\",\r\n\t\t\t\t\tdescription: \"{District_name}\",\r\n\t\t\t\t\ttype: \"Active\"\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\toTemplate.data(\"sSrcBindingPath\", sSrcBindingPath);\r\n\t\t\toTemplate.data(\"CustomData\", sCustomData);\r\n\t\t\t// oTemplate.data(\"controlId\", sControlId);\r\n\t\t\treturn oTemplate;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Validate the User Input\r\n\t\t */\r\n\t\t_validateShare: function(oSource) {\r\n\t\t\tvar zShare = parseFloat(oSource.getValue());\r\n\t\t\tif (zShare > 100 || zShare < 0) {\r\n\t\t\t\toSource.setValueState(\"Error\");\r\n\t\t\t} else {\r\n\t\t\t\toSource.setValueState(\"None\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Check the duplicate Token \r\n\t\t * @param{string} sTokenKey\r\n\t\t * @param{Object} oSource\r\n\t\t * @returns {boolean}\r\n\t\t */\r\n\t\t_checkTokenDuplicate: function(sTokenKey, oSource) {\r\n\t\t\tvar bDuplicateExist = false,\r\n\t\t\t\taTokens = oSource.getTokens();\r\n\t\t\tfor (var i = 0; i < aTokens.length; i++) {\r\n\t\t\t\tif (aTokens[i].getKey() === sTokenKey) {\r\n\t\t\t\t\tbDuplicateExist = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn bDuplicateExist;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Private function to clear the Pre-existing value\r\n\t\t */\r\n\t\t_initControlValue: function() {\r\n\t\t\tvar sState = this.getModel(\"detailView\").getProperty(\"/stateId\"),\r\n\t\t\t\toBindingcontext = this.getView().getBindingContext();\r\n\t\t\tvar oAppViewModel = this.getModel(\"appView\"),\r\n\t\t\t\toModel = this.getModel();\r\n\t\t\tif (!oBindingcontext.getProperty(\"DepartDesc\") && oAppViewModel.getProperty(\"/DepartDesc\")) {\r\n\t\t\t\toModel.setProperty(\"DepartDesc\", oAppViewModel.getProperty(\"/DepartDesc\"), oBindingcontext);\r\n\t\t\t}\r\n\t\t\tif (!oBindingcontext.getProperty(\"InitiatinDept\") && oAppViewModel.getProperty(\"/InitiatinDept\")) {\r\n\t\t\t\toModel.setProperty(\"InitiatinDept\", oAppViewModel.getProperty(\"/InitiatinDept\"), oBindingcontext);\r\n\t\t\t}\r\n\t\t\tif (!oBindingcontext.getProperty(\"MainWorkNature\")) {\r\n\t\t\t\tthis.byId(\"idMainNatureWork\").setValue(\"\");\r\n\t\t\t}\r\n\t\t\tif (!oBindingcontext.getProperty(\"SubclassL03\")) {\r\n\t\t\t\tthis.byId(\"idSubClass03\").setValue(\"\");\r\n\t\t\t}\r\n\t\t\tif (!oBindingcontext.getProperty(\"SubclassL01\")) {\r\n\t\t\t\tthis.byId(\"idSubClass01\").setValue(\"\");\r\n\t\t\t}\r\n\t\t\tif (!oBindingcontext.getProperty(\"SubclassL02\")) {\r\n\t\t\t\tthis.byId(\"idSubClass02\").setValue(\"\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * bind select control\r\n\t\t * @param {*} url \r\n\t\t */\r\n\t\t_bindSelectControl: function() {\r\n\t\t\tvar oBindingContext = this.getView().getBindingContext(),\r\n\t\t\t\tsCrUser = oBindingContext.getProperty(\"UserIdCr\"),\r\n\t\t\t\tsSecDept = oBindingContext.getProperty(\"SecDept\"),\r\n\t\t\t\taFilterP = [{\r\n\t\t\t\t\tname: \"SUBPROCESS_AREA\",\r\n\t\t\t\t\tvalue: \"AS\"\r\n\t\t\t\t}],\r\n\t\t\t\toParamLocalClass = {\r\n\t\t\t\t\tsPath: \"/ZWRK_C_LOCATIONLIST(p_user='\" + sCrUser + \"')/Set\",\r\n\t\t\t\t\tsControlId: \"idLocationClass\",\r\n\t\t\t\t\tsKey: \"{location_id}\",\r\n\t\t\t\t\tsDesc: \"{location_text}\",\r\n\t\t\t\t\taFilterParam: aFilterP\r\n\t\t\t\t},\r\n\t\t\t\toParamLocalClass1 = {\r\n\t\t\t\t\tsPath: \"/ZWRK_C_CATEGORYLIST(p_user='\" + sCrUser + \"')/Set\",\r\n\t\t\t\t\tsControlId: \"idCategory\",\r\n\t\t\t\t\tsKey: \"{category}\",\r\n\t\t\t\t\tsDesc: \"{categorytext}\",\r\n\t\t\t\t\taFilterParam: aFilterP\r\n\t\t\t\t},\r\n\t\t\t\toParamLocalClass2 = {\r\n\t\t\t\t\tsPath: \"/ZWRK_C_GOSECTIONS(p_hdept='\" + sSecDept + \"',p_app='AS')/Set\",\r\n\t\t\t\t\tsControlId: \"idSecCode\",\r\n\t\t\t\t\tsKey: \"{sectioncode}\",\r\n\t\t\t\t\tsDesc: \"{sectioncode}\",\r\n\t\t\t\t\taFilterParam: []\r\n\t\t\t\t};\r\n\t\t\tthis._bindSelectItems([oParamLocalClass, oParamLocalClass1, oParamLocalClass2]);\r\n\t\t},\r\n\t\t/*---------------------------------------------DIGITAL SIGNATURE PROCESS --------------------------------------------------*/\r\n\t\t_handleDigitalSing: function(url, fioriLink) {\r\n\t\t\tthis.url = url;\r\n\t\t\tthis.fioriLink = fioriLink;\r\n\t\t\t//var pdf_data = this.oObj.Content;\r\n\t\t\tthis.getView().setBusy(true);\r\n\t\t\tthis.getView().setBusyIndicatorDelay(0);\r\n\t\t\tmyObj.SignDataInMemoryEx(pdf_data, \"\", true, true, 0, \"\", \"\", \"\", \"\", false, 0, resellerCode);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Callback function \r\n\t\t * @param {string} apiName \r\n\t\t * @param {string} status \r\n\t\t * @param {object} params \r\n\t\t */\r\n\t\tmycallback: function(apiName, status, params) {\r\n\t\t\tthat = this;\r\n\t\t\tvar retVal = \"\";\r\n\t\t\tthis.getView().setBusy(false);\r\n\t\t\tif (apiName === \"SignDataInMemoryEx\") {\r\n\t\t\t\t//console.log(params);\r\n\t\t\t\tif (typeof params.sig === \"undefined\" || params.sig === \"\") {\r\n\r\n\t\t\t\t\tretVal = \"\";\r\n\t\t\t\t\t// alert(\"Certificate operation failed: \" + status);\r\n\t\t\t\t\tvar Errordialog = new sap.m.Dialog({\r\n\t\t\t\t\t\ttitle: \"Error\",\r\n\t\t\t\t\t\ttype: \"Message\",\r\n\t\t\t\t\t\tstate: \"Error\",\r\n\t\t\t\t\t\tcontent: new sap.m.Text({\r\n\t\t\t\t\t\t\ttext: \"Certificate operation failed: \" + status\r\n\t\t\t\t\t\t}),\r\n\t\t\t\t\t\tbeginButton: new sap.m.Button({\r\n\t\t\t\t\t\t\ttext: \"OK\",\r\n\t\t\t\t\t\t\tpress: function() {\r\n\t\t\t\t\t\t\t\t// window.history.go(-1);\r\n\t\t\t\t\t\t\t\tErrordialog.close();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}),\r\n\t\t\t\t\t\tafterClose: function() {\r\n\t\t\t\t\t\t\tErrordialog.destroy();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tErrordialog.open();\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tvar signValue = params.sig;\r\n\t\t\t\t\tvar fileURL = this.url;\r\n\t\t\t\t\tvar oParameters = {\r\n\t\t\t\t\t\t\"sig\": signValue,\r\n\t\t\t\t\t\t// \"MyReason\": that.SingData.REASON,\r\n\t\t\t\t\t\t// \"MyLocation\": that.SingData.LOCATION,\r\n\t\t\t\t\t\t//\"PageNumber\": that.SingData.PAGENUMBER,\r\n\t\t\t\t\t\t\"PageNumber\": \"1\",\r\n\t\t\t\t\t\t// \"SigBlockTitle\": that.SingData.SIGN_TITLE,\r\n\t\t\t\t\t\t//\"SigPosition\": that.SingData.SIGN_POSITION,\r\n\t\t\t\t\t\t\"SigPosition\": \"4\",\r\n\t\t\t\t\t\t\"filetosign\": fileURL\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t// var getCertificateAPIUrl = serverUrl + \"/getcert.jsp\";\r\n\t\t\t\t\t//var getCertificateAPIUrl = that.SingData.URL;\r\n\t\t\t\t\t//var getCertificateAPIUrl = \"https://devdigicert.apcfss.in:8443/sign/getcert.jsp\";\r\n\t\t\t\t\tvar getCertificateAPIUrl = that.fioriLink.toLowerCase();\r\n\t\t\t\t\t// oModel.loadData(getCertificateAPIUrl, oParameters, true, 'POST');\r\n\t\t\t\t\t$.ajax({\r\n\t\t\t\t\t\turl: getCertificateAPIUrl,\r\n\t\t\t\t\t\tdata: oParameters,\r\n\t\t\t\t\t\ttype: \"POST\",\r\n\t\t\t\t\t\tsuccess: function(result) {\r\n\t\t\t\t\t\t\t// console.log(result);\r\n\t\t\t\t\t\t\tvar html = $.parseHTML(result);\r\n\r\n\t\t\t\t\t\t\tstrHash = html[5].value;\r\n\t\t\t\t\t\t\tsignerName = html[7].value;\r\n\t\t\t\t\t\t\toffset = html[9].value;\r\n\t\t\t\t\t\t\tsignerCert = html[11].value;\r\n\t\t\t\t\t\t\toutfile = html[13].value;\r\n\r\n\t\t\t\t\t\t\tvar oError = html[15];\r\n\t\t\t\t\t\t\tif (oError !== undefined) {\r\n\t\t\t\t\t\t\t\tif (oError.value !== undefined && oError.value !== \"\") {\r\n\t\t\t\t\t\t\t\t\tvar Errordialog = new sap.m.Dialog({\r\n\t\t\t\t\t\t\t\t\t\ttitle: \"Error\",\r\n\t\t\t\t\t\t\t\t\t\ttype: \"Message\",\r\n\t\t\t\t\t\t\t\t\t\tstate: \"Error\",\r\n\t\t\t\t\t\t\t\t\t\tcontent: new sap.m.Text({\r\n\t\t\t\t\t\t\t\t\t\t\ttext: oError.value\r\n\t\t\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\t\t\tbeginButton: new sap.m.Button({\r\n\t\t\t\t\t\t\t\t\t\t\ttext: \"OK\",\r\n\t\t\t\t\t\t\t\t\t\t\tpress: function() {\r\n\t\t\t\t\t\t\t\t\t\t\t\t// window.history.go(-1);\r\n\t\t\t\t\t\t\t\t\t\t\t\tErrordialog.close();\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\t\t\tafterClose: function() {\r\n\t\t\t\t\t\t\t\t\t\t\tErrordialog.destroy();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tErrordialog.open();\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tvar signerSubjectDN = signerName;\r\n\t\t\t\t\t\t\t\t\tmyObj.SignEncodedDataInBatch(strHash, 1, 0, 0, signerSubjectDN, \"\", \"\", \"\", 1, 0, resellerCode);\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t// return;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tvar signerSubjectDN = signerName;\r\n\t\t\t\t\t\t\t\tmyObj.SignEncodedDataInBatch(strHash, 1, 0, 0, signerSubjectDN, \"\", \"\", \"\", 1, 0, resellerCode);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\terror: function(oError) {\r\n\t\t\t\t\t\t\tvar Errordialog = new sap.m.Dialog({\r\n\t\t\t\t\t\t\t\ttitle: \"Error\",\r\n\t\t\t\t\t\t\t\ttype: \"Message\",\r\n\t\t\t\t\t\t\t\tstate: \"Error\",\r\n\t\t\t\t\t\t\t\tcontent: new sap.m.Text({\r\n\t\t\t\t\t\t\t\t\ttext: \"Error while signing the document\"\r\n\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\tbeginButton: new sap.m.Button({\r\n\t\t\t\t\t\t\t\t\ttext: \"OK\",\r\n\t\t\t\t\t\t\t\t\tpress: function() {\r\n\t\t\t\t\t\t\t\t\t\t// window.history.go(-1);\r\n\t\t\t\t\t\t\t\t\t\tErrordialog.close();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\tafterClose: function() {\r\n\t\t\t\t\t\t\t\t\tErrordialog.destroy();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tErrordialog.open();\r\n\t\t\t\t\t\t\t/*eslint-disable */\r\n\t\t\t\t\t\t\t//eslint-disable-no-useless-return\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t/*eslint-enable */\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else if (apiName === \"SignEncodedDataInBatch\") {\r\n\t\t\t\tif (typeof params.sig === \"undefined\") {\r\n\t\t\t\t\tretVal = \"\";\r\n\t\t\t\t\t/*eslint-disable */\r\n\t\t\t\t\t//eslint-disable-no-alert\r\n\t\t\t\t\talert(\"Certificate operation failed: \" + status);\r\n\t\t\t\t\t/*eslint-enable */\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tvar obj = {};\r\n\t\t\t\t\tretVal = params.sig;\r\n\t\t\t\t\tobj.Signername = retVal;\r\n\t\t\t\t\tobj.Offset = offset;\r\n\t\t\t\t\tobj.Strhash = strHash;\r\n\t\t\t\t\tobj.Signercert = signerCert;\r\n\t\t\t\t\tobj.Outfile = outfile;\r\n\t\t\t\t\t// obj.DocNo = this.WorkItemID;\r\n\t\t\t\t\tobj.Docyear = \"\";\r\n\t\t\t\t\tobj.PrintDocnr = \"\";\r\n\t\t\t\t\tobj.Docno = \"\";\r\n\t\t\t\t\tobj.Publaw = \"\";\r\n\t\t\t\t\tobj.Mandt = \"\";\r\n\t\t\t\t\tobj.Sysid = \"\";\r\n\t\t\t\t\tvar oDigiModel = null;\r\n\t\t\t\t\tobj.Guid = this.getView().getBindingContext().getProperty(\"Guid\");\r\n\t\t\t\t\tobj.Version = this.getView().getBindingContext().getProperty(\"Version\");\r\n\t\t\t\t\tif (this.oAmendment === \"X\") {\r\n\t\t\t\t\t\tvar oServiceULR = \"/sap/opu/odata/sap/ZGW_BD_GO_AMD_SRV\";\r\n\t\t\t\t\t\toDigiModel = new sap.ui.model.odata.ODataModel(oServiceULR, true);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\toDigiModel = this.getModel();\r\n\t\t\t\t\t}\r\n\t\t\t\t\toDigiModel.create(\"/SendPdfSet\", obj, {\r\n\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\tthat.getView().setBusy(false);\r\n\t\t\t\t\t\t\tthat.getModel(\"detailView\").setProperty(\"/Notingstring\", \"\");\r\n\t\t\t\t\t\t\tthat.oProcessActionPromise = null;\r\n\t\t\t\t\t\t\tthat.getModel(\"detailView\").setProperty(\"/DraftStatus\", \"X\");\r\n\t\t\t\t\t\t\tthat._successToastMsgDisplay(\"APPROVE\");\r\n\t\t\t\t\t\t\tthat._navToDetail.bind(that)(\"D\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\terror: function(E) {\r\n\t\t\t\t\t\t\tthat.getView().setBusy(false);\r\n\t\t\t\t\t\t\t// sap.m.MessageBox.show(JSON.parse(E.responseText).error.message.value, {\r\n\t\t\t\t\t\t\t// \ticon: sap.m.MessageBox.Icon.ERROR,\r\n\t\t\t\t\t\t\t// \ttitle: \"Error\",\r\n\t\t\t\t\t\t\t// \tactions: [sap.m.MessageBox.Action.CLOSE]\r\n\t\t\t\t\t\t\t// });\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tasync: false\r\n\t\t\t\t\t});\r\n\t\t\t\t\t/*eslint-disable */\r\n\t\t\t\t\t//eslint-disable-no-alert\r\n\t\t\t\t\tconsole.log(retVal);\r\n\t\t\t\t\t/*eslint-enable */\r\n\t\t\t\t\t//\tvar signAPIUrl = \"https://332d4937.ngrok.io/signhash.jsp\";\r\n\t\t\t\t\tvar signAPIUrl = serverUrl + \"/signhash.jsp\";\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\t/**\r\n\t\t * Function to validate \r\n\t\t * @param {*} oEvent \r\n\t\t */\r\n\t\t_checkSecrataryMand: function() {\r\n\t\t\tvar bValidAS = true,\r\n\t\t\t\toResourceBundle = this.getResourceBundle(),\r\n\t\t\t\toBindingContext = this.getView().getBindingContext(),\r\n\t\t\t\toDetailViewModel = this.getModel(\"detailView\"),\r\n\t\t\t\tbIsSecratary = oDetailViewModel.getProperty(\"/bIsSecratary\");\r\n\t\t\tif (bIsSecratary) {\r\n\t\t\t\tvar sSectionCode = oBindingContext.getProperty(\"SecDode\");\r\n\t\t\t\tif (!sSectionCode) {\r\n\t\t\t\t\tbValidAS = false;\r\n\t\t\t\t\toDetailViewModel.setProperty(\"/secCodeValueState\", \"Error\");\r\n\t\t\t\t\toDetailViewModel.setProperty(\"/secCodeValueStateText\", oResourceBundle.getText(\"detail.message.error.mandatory\"));\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar sGoNum = oBindingContext.getProperty(\"GoNumber\"),\r\n\t\t\t\t\toGoDate = oBindingContext.getProperty(\"GoRefDate\");\r\n\t\t\t\tif (!sGoNum || !oGoDate) {\r\n\t\t\t\t\tbValidAS = false;\r\n\t\t\t\t\tif (!sGoNum) {\r\n\t\t\t\t\t\toDetailViewModel.setProperty(\"/GoNumValueState\", \"Error\");\r\n\t\t\t\t\t\toDetailViewModel.setProperty(\"/GoNumValueStateText\", oResourceBundle.getText(\"detail.message.error.mandatory\"));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!oGoDate) {\r\n\t\t\t\t\t\toDetailViewModel.setProperty(\"/goDateValueState\", \"Error\");\r\n\t\t\t\t\t\toDetailViewModel.setProperty(\"/goDateValueStateText\", oResourceBundle.getText(\"detail.message.error.mandatory\"));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn bValidAS;\r\n\t\t},\r\n\t\t_notAllowEditOnDocument: function() {\r\n\t\t\tvar bEditable = false,\r\n\t\t\t\toDetailViewModel = this.getModel(\"detailView\"),\r\n\t\t\t\toResourceBundle = this.getResourceBundle(),\r\n\t\t\t\toAppViewModel = this.getModel(\"appView\");\r\n\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bUserCanEdit\", false);\r\n\t\t\toDetailViewModel.setProperty(\"/stateId\", \"D\");\r\n\t\t\toAppViewModel.setProperty(\"/bEnabledMasterViewCtr\", true);\r\n\t\t\toAppViewModel.setProperty(\"/sMasterListMode\", \"SingleSelectMaster\");\r\n\t\t\toDetailViewModel.setProperty(\"/bEditable\", bEditable);\r\n\t\t\tsap.ushell.Container.setDirtyFlag(false);\r\n\t\t},\r\n\t\t_allowEditOnDocument: function() {\r\n\t\t\tvar bEditable = true,\r\n\t\t\t\toDetailViewModel = this.getModel(\"detailView\"),\r\n\t\t\t\toResourceBundle = this.getResourceBundle(),\r\n\t\t\t\toAppViewModel = this.getModel(\"appView\");\r\n\r\n\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bUserCanEdit\", true);\r\n\t\t\toDetailViewModel.setProperty(\"/stateId\", \"E\");\r\n\t\t\toAppViewModel.setProperty(\"/bEnabledMasterViewCtr\", false);\r\n\t\t\toAppViewModel.setProperty(\"/sMasterListMode\", \"None\");\r\n\t\t\toDetailViewModel.setProperty(\"/bEditable\", bEditable);\r\n\t\t\tsap.ushell.Container.setDirtyFlag(false);\r\n\t\t},\r\n\r\n\t\t_bindViewDone: function() {\r\n\t\t\tvar that = this;\r\n\t\t\tvar oViewModel = this.getModel(\"detailView\");\r\n\r\n\t\t\tif (this.getView().getBindingContext()) {\r\n\t\t\t\toViewModel.setProperty(\"/busy\", true);\r\n\t\t\t\tvar oPromiseWorkFlowLog = new Promise(function(resolve1, reject1) {\r\n\t\t\t\t\tthat.getWorkFlowLogDetails({\r\n\t\t\t\t\t\tApplicationId: \"AS\",\r\n\t\t\t\t\t\tGuid: that.getView().getBindingContext().getProperty(\"Guid\")\r\n\t\t\t\t\t}, resolve1, reject1);\r\n\t\t\t\t}.bind(that));\r\n\t\t\t\toPromiseWorkFlowLog.then(function() {\r\n\t\t\t\t\toViewModel.setProperty(\"/busy\", false);\r\n\t\t\t\t});\r\n\t\t\t\toViewModel.setProperty(\"/Notingstring\", \"\");\r\n\t\t\t\toViewModel.updateBindings();\r\n\t\t\t\tthat.subClassL01Value = that.getView().getBindingContext().getProperty(\"SubclassL01\");\r\n\t\t\t\tthat.byId(\"idSubClass01\").getBinding(\"suggestionItems\").refresh();\r\n\t\t\t\tthat.byId(\"idSubClass02\").getBinding(\"suggestionItems\").refresh();\r\n\t\t\t\tthat.byId(\"idSubClass03\").getBinding(\"suggestionItems\").refresh();\r\n\r\n\t\t\t\tthat.getView().getModel(\"detailView\").setProperty(\"/CategoryKey\", that.getView().getBindingContext().getProperty(\"Category\"));\r\n\t\t\t\tthat.getView().getModel(\"detailView\").setProperty(\"/ExecutingDeptKey\", that.getView().getBindingContext().getProperty(\r\n\t\t\t\t\t\"ExecutingDept\"));\r\n\t\t\t\tthat.getView().getModel(\"detailView\").setProperty(\"/SanctioningDeptKey\", that.getView().getBindingContext().getProperty(\r\n\t\t\t\t\t\"InitiatinDept\"));\r\n\r\n\t\t\t\tthat.getUserFeedList();\r\n\t\t\t\tthat._setObjectSectionVisibility();\r\n\t\t\t\tthat._setLocationListDisplay();\r\n\t\t\t\tif (that._clearValueStates) {\r\n\t\t\t\t\tthat._clearValueStates(\"oControlModel\");\r\n\t\t\t\t}\r\n\t\t\t\tthat._switchControlModel();\r\n\t\t\t\tthat._setAmendPageTitle(that.getModel(\"detailView\").getProperty(\"/stateId\"));\r\n\t\t\t\t//set the Object  Header Title\r\n\t\t\t\tthat.setPageHeaderTitle(that.getModel(\"detailView\").getProperty(\"/stateId\"));\r\n\t\t\t\t//\tthat._bindTreeTableRows();\r\n\t\t\t\tthat.byId(\"idWorksHoA\").updateAggregation(\"items\");\r\n\t\t\t\tthat._identifyHoaDdoFilters();\r\n\t\t\t\tthat._setHoaDdoFilters();\r\n\t\t\t\t//Bind Position\r\n\t\t\t\tthat._updatePositionBinding();\r\n\t\t\t\t//Clear MainworkNature\r\n\t\t\t\tthat._initControlValue();\r\n\t\t\t\t//Dynamic BindingLocal Class and catory\r\n\t\t\t\tthat._bindSelectControl();\r\n\t\t\t\t//Dynamic enable of Executing Dept if No TS is create with this AS\r\n\t\t\t\tthat._editableExectDepartment();\r\n\r\n\t\t\t\tvar documentPosition;\r\n\t\t\t\tif (that.getView().getBindingContext().getProperty(\"Udf1\")) {\r\n\t\t\t\t\tdocumentPosition = that.getView().getBindingContext().getProperty(\"Udf1\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdocumentPosition = this.getModel(\"appView\").getProperty(\"/position\");\r\n\t\t\t\t}\r\n\t\t\t\tvar aFilters = [];\r\n\t\t\t\tvar oFilter = new Filter(\r\n\t\t\t\t\t\"UserPosition\",\r\n\t\t\t\t\tsap.ui.model.FilterOperator.Contains, documentPosition\r\n\t\t\t\t);\r\n\t\t\t\taFilters.push(oFilter);\r\n\t\t\t\t//\t\t\t            if (that.getView().getBindingContext().getProperty(\"MigrationInd\")) {\r\n\t\t\t\tvar oFilterGuid = new Filter(\r\n\t\t\t\t\t\"ASGuid\",\r\n\t\t\t\t\tsap.ui.model.FilterOperator.EQ, that.getView().getBindingContext().getProperty(\"MigrationInd\") === false ?\r\n\t\t\t\t\t\"00000000-0000-0000-0000-000000000000\" : that.getView().getBindingContext().getProperty(\"Guid\")\r\n\t\t\t\t);\r\n\t\t\t\taFilters.push(oFilterGuid);\r\n\t\t\t\t//\t\t\t            }\r\n\t\t\t\tthat.getView().byId(\"idInitDept\").getBinding(\"items\").filter(aFilters);\r\n\t\t\t\t//\t\tthat.getView().byId(\"idInitDept\").getBinding(\"items\").refresh();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_navBackPreventDefault: function(sMainAction, sWarningMsg) {\r\n\t\t\tif (sap.ui.getCore().getModel(\"ZWRKGlobalModel\").getProperty(\"/AS/SessionGuid\")) {\r\n\t\t\t\tif (this.getModel(\"detailView\").getProperty(\"/bEditable\")) {\r\n\t\t\t\t\tvar sMsgText = this.getModel(\"i18n\").getResourceBundle().getText(sWarningMsg);\r\n\t\t\t\t\tMessageBox.warning(sMsgText, {\r\n\t\t\t\t\t\tactions: [MessageBox.Action.YES, MessageBox.Action.NO],\r\n\t\t\t\t\t\tonClose: function(oAction) {\r\n\t\t\t\t\t\t\tif (oAction === MessageBox.Action.YES) {\r\n\t\t\t\t\t\t\t\tvar oParam = {\r\n\t\t\t\t\t\t\t\t\tApplication: \"AS\",\r\n\t\t\t\t\t\t\t\t\tGuid: this.getView().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\t\t\t\t\t\tSessionGuid: sap.ui.getCore().getModel(\"ZWRKGlobalModel\").getProperty(\"/AS/SessionGuid\")\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tsap.ushell.Container.setDirtyFlag(false);\r\n\t\t\t\t\t\t\t\tthis._deleteLockAndNavBack(\"LOCKDEL\", oParam.Guid, oParam.Application, oParam.SessionGuid, sMainAction);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}.bind(this)\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (sMainAction === \"BackBtnAction\") {\r\n\t\t\t\t\t\twindow.history.go(-1);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis._navToShellHome();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tonSelectChangeCategory: function(oEvent) {\r\n\t\t\tvar sFValue = \"\",\r\n\t\t\t\tsKey = oEvent.getSource().data(\"clearKey\");\r\n\t\t\tif (sKey) {\r\n\t\t\t\tvar oParams = {\r\n\t\t\t\t\tsProperty: sKey\r\n\t\t\t\t};\r\n\t\t\t\tthis._clearDependentField(oParams);\r\n\t\t\t}\r\n\t\t\tif (oEvent.getSource().getMetadata().getElementName() === \"sap.m.DatePicker\") {\r\n\t\t\t\tsFValue = sap.ui.model.odata.ODataUtils.formatValue(oEvent.getSource().getDateValue(), \"Edm.DateTime\");\r\n\t\t\t} else {\r\n\t\t\t\tsFValue = oEvent.getSource().getSelectedKey();\r\n\t\t\t}\r\n\t\t\tif (sFValue || !oEvent.getSource().getValue()) {\r\n\t\t\t\toEvent.getSource().setValueState();\r\n\t\t\t\tif (this.getModel(\"oControlModel\")) {\r\n\t\t\t\t\tthis.getModel(\"oControlModel\").setProperty(\"/\" + oEvent.getSource().getCustomData()[0].getProperty(\"value\") + \"/\" + \"/valueState\",\r\n\t\t\t\t\t\t\"None\");\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\t\t\t\toEvent.getSource().setValueState(\"Error\");\r\n\t\t\t}\r\n\r\n\t\t\tvar sorceHoATable = this.getView().byId(\"idWorksHoA\").getItems();\r\n\t\t\tvar Fnam = oEvent.getSource().getCustomData()[0].getProperty(\"value\");\r\n\t\t\tvar previousCategory = this.getView().getModel(\"detailView\").getProperty(\"/CategoryKey\");\r\n\t\t\tvar sMsgText = this.getModel(\"i18n\").getResourceBundle().getText(\"detail.message.warning.changeCategory\");\r\n\t\t\tif (previousCategory) {\r\n\t\t\t\tif (previousCategory !== sFValue && sorceHoATable.length > 0) {\r\n\t\t\t\t\tMessageBox.confirm(sMsgText, {\r\n\t\t\t\t\t\tonClose: function(oAction) {\r\n\t\t\t\t\t\t\tif (oAction !== MessageBox.Action.OK) {\r\n\t\t\t\t\t\t\t\tthis.getView().byId(\"idCategory\").setSelectedKey(previousCategory);\r\n\t\t\t\t\t\t\t\t//return;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis._changeCategorySuccessful(Fnam, sFValue);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}.bind(this)\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis._changeCategorySuccessful(Fnam, sFValue);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis._changeCategorySuccessful(Fnam, sFValue);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_changeCategorySuccessful: function(Fnam, sFValue) {\r\n\t\t\tvar oDetailViewModel = this.getModel(\"detailView\");\r\n\t\t\tif (sFValue === \"02\") {\r\n\t\t\t\toDetailViewModel.setProperty(\"/bUAVisible\", true);\r\n\t\t\t\toDetailViewModel.setProperty(\"/bOwnDCW\", true);\r\n\t\t\t} else {\r\n\t\t\t\toDetailViewModel.setProperty(\"/bUAVisible\", false);\r\n\t\t\t\toDetailViewModel.setProperty(\"/bOwnDCW\", false);\r\n\t\t\t}\r\n\r\n\t\t\tthis.bRefreshDDoTable = true;\r\n\t\t\tthis._identifyHoaDdoFilters();\r\n\t\t\tthis._setHoaDdoFilters();\r\n\t\t\tthis._updateCallForCategoryandExeDeptandSancDept(Fnam, sFValue);\r\n\t\t\tthis.getView().getModel(\"detailView\").setProperty(\"/CategoryKey\", sFValue);\r\n\t\t},\r\n\r\n\t\tonSelectChangeExectDept: function(oEvent) {\r\n\t\t\tvar sPreviousExetDept = this.getView().getModel(\"detailView\").getProperty(\"/ExecutingDeptKey\");\r\n\t\t\tvar sFValue = oEvent.getSource().getSelectedKey();\r\n\t\t\tvar Fnam = oEvent.getSource().getCustomData()[0].getProperty(\"value\");\r\n\t\t\tvar sorceHoATable = this.getView().byId(\"idWorksHoA\").getItems();\r\n\t\t\tvar sMsgText = this.getModel(\"i18n\").getResourceBundle().getText(\"detail.message.warning.changeExectDept\");\r\n\t\t\tif (sPreviousExetDept) {\r\n\t\t\t\tif (sPreviousExetDept !== sFValue && sorceHoATable.length > 0) {\r\n\t\t\t\t\tMessageBox.confirm(sMsgText, {\r\n\t\t\t\t\t\tonClose: function(oAction) {\r\n\t\t\t\t\t\t\tif (oAction !== MessageBox.Action.OK) {\r\n\t\t\t\t\t\t\t\tthis.getView().byId(\"idExecDept\").setSelectedKey(sPreviousExetDept);\r\n\t\t\t\t\t\t\t\t//\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis._changeExectDeptSuccessful(Fnam, sFValue);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}.bind(this)\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis._changeExectDeptSuccessful(Fnam, sFValue);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis._changeExectDeptSuccessful(Fnam, sFValue);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_changeExectDeptSuccessful: function(Fnam, sFValue) {\r\n\t\t\tthis.bRefreshDDoTable = true;\r\n\t\t\tif (this.getView().getBindingContext().getProperty(\"Status\") === \"E0003\") {\r\n\t\t\t\tthis.bRefreshDDoTable = false;\r\n\t\t\t}\r\n\t\t\tthis._identifyHoaDdoFilters();\r\n\t\t\tthis._setHoaDdoFilters();\r\n\t\t\tthis._updateCallForCategoryandExeDeptandSancDept(Fnam, sFValue);\r\n\t\t\tthis.getView().getModel(\"detailView\").setProperty(\"/ExecutingDeptKey\", sFValue);\r\n\t\t},\r\n\r\n\t\t_updateCallForCategoryandExeDeptandSancDept: function(Fnam, sFValue) {\r\n\t\t\tvar oASUpdatePayload = {\r\n\t\t\t\tAction: \"UPHDR\",\r\n\t\t\t\tGuid: this.getView().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\tLockTimestamp: \"\\/Date(\" + (new Date()).getTime() + \")\\/\",\r\n\t\t\t\tFnam: Fnam,\r\n\t\t\t\tFval: sFValue,\r\n\t\t\t\tCode: \"\",\r\n\t\t\t\tPosition: this.getModel(\"appView\").getProperty(\"/position\"),\r\n\t\t\t\tInitiatinDept: \"\",\r\n\t\t\t\tDepartDesc: \"\",\r\n\t\t\t\tSessionGuid: sap.ui.getCore().getModel(\"ZWRKGlobalModel\").getProperty(\"/AS/SessionGuid\")\r\n\t\t\t};\r\n\t\t\t/*if (oEvent.getSource().data(\"apprField\") && (oEvent.getSource().getBindingContext().getProperty(\"Status\") === \"E0003\")) {\r\n\t\t\t\toASUpdatePayload.Action = \"APPR_UPDT\";\r\n\t\t\t}\r\n\t\t\tif (oEvent.getSource().getCustomData() && oEvent.getSource().getCustomData()[0].getValue() === \"Scheme\" && (oEvent.getSource().getBindingContext()\r\n\t\t\t\t\t.getProperty(\"Status\") === \"E0003\")) {\r\n\t\t\t\toASUpdatePayload.Action = \"APPR_UPDT\";\r\n\t\t\t}*/\r\n\t\t\t//var sUpdPath = \"/WrkASDetailsDraftSet(Guid=guid'\" + oEvent.getSource().getBindingContext().getProperty(\"Guid\") + \"'),LockTimestamp=\\/Date(\" +  ( new Date()).getTime() + \")\\/ )\";\r\n\r\n\t\t\tif (this.getView().getBindingContext().getProperty(\"Status\") === \"E0003\") {\r\n\t\t\t\toASUpdatePayload.Action = \"APPR_UPDT\";\r\n\t\t\t}\r\n\r\n\t\t\tvar sUpdPath = this.getModel().createKey(\"WrkASDetailsDraftSet\", {\r\n\t\t\t\tGuid: this.getView().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\tLockTimestamp: new Date().getTime()\r\n\t\t\t});\r\n\r\n\t\t\tsUpdPath = \"/\" + sUpdPath;\r\n\t\t\tthis.getModel().update(sUpdPath, oASUpdatePayload, {\r\n\t\t\t\tsuccess: function(oData, oResponse) {\r\n\t\t\t\t\tthis.getModel().setProperty(oASUpdatePayload.Fnam, oASUpdatePayload.Fval, this.getView().getElementBinding());\r\n\t\t\t\t\tif (this.bRefreshDDoTable) {\r\n\t\t\t\t\t\tthis.byId(\"idWorksSrcHoA\").getBinding(\"items\").refresh(true);\r\n\t\t\t\t\t\tthis.byId(\"idWorksHoA\").getBinding(\"items\").refresh(true);\r\n\t\t\t\t\t\tthis.byId(\"idBudgetCtrl\").setValue(\"\");\r\n\t\t\t\t\t\tthis.byId(\"idBudgetCtrl\").fireChange();\r\n\t\t\t\t\t\tthis.bRefreshDDoTable = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ((Fnam === \"ExecutingDept\" || Fnam === \"InitiatinDept\") && this.getView().getBindingContext().getProperty(\"Status\") ===\r\n\t\t\t\t\t\t\"E0003\") {\r\n\t\t\t\t\t\tthis._deleteDDOforCheckerandApprover();\r\n\t\t\t\t\t}\r\n\t\t\t\t}.bind(this),\r\n\t\t\t\terror: function(oError) {\r\n\r\n\t\t\t\t},\r\n\t\t\t\trefreshAfterChange: false\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t_deleteDDOforCheckerandApprover: function() {\r\n\t\t\tvar sGetPath = this.getModel().createKey(\"WrkHOASet\", {\r\n\t\t\t\tGuid: this.getView().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\tHoaGuid: \"00000000-0000-0000-0000-000000000000\"\r\n\t\t\t});\r\n\r\n\t\t\tthis.getView().getModel().remove(\"/\" + sGetPath, {\r\n\t\t\t\turlParameters: {\r\n\t\t\t\t\tAction: \"APPR_DELI\"\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function(oData, oResponse) {\r\n\t\t\t\t\tthis.byId(\"idWorksSrcHoA\").getBinding(\"items\").refresh(true);\r\n\t\t\t\t\tthis.byId(\"idWorksHoA\").getBinding(\"items\").refresh(true);\r\n\t\t\t\t\tthis.byId(\"idBudgetCtrl\").setValue(\"\");\r\n\t\t\t\t\tthis.byId(\"idBudgetCtrl\").fireChange();\r\n\t\t\t\t\tthis.bRefreshDDoTable = false;\r\n\t\t\t\t}.bind(this),\r\n\t\t\t\terror: function(oError) {\r\n\r\n\t\t\t\t}.bind(this)\r\n\r\n\t\t\t});\r\n\r\n\t\t},\r\n\r\n\t\t_editableExectDepartment: function() {\r\n\t\t\tvar bFieldControlOfExectDept = false;\r\n\t\t\t/*if(this.getView().getModel(\"oControlModel\")){\r\n\t\t\t\tbFieldControlOfExectDept  = this.getView().getModel(\"oControlModel\").getProperty(\"/\").ExecutingDept.display;\r\n\t\t\t}*/\r\n\r\n\t\t\t//New create AS only guid is available\r\n\t\t\t//else call _editableExectDepartment after\r\n\t\t\t// _callFieldControlBasedOnRole where we have updated\r\n\t\t\t// field control\r\n\t\t\tif (!this.getView().getBindingContext().getProperty(\"Code\")) {\r\n\t\t\t\tthis.getView().getModel(\"detailView\").setProperty(\"/bEditExectDept\", true);\r\n\t\t\t} else {\r\n\t\t\t\tthis._checkAvailableTSforASCode(bFieldControlOfExectDept);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\t_checkAvailableTSforASCode: function(bFieldControlOfExectDept) {\r\n\t\t\tvar sPath = \"/ZWRK_C_TSHDR_DETAILS_C\",\r\n\t\t\t\taFilters = [];\r\n\t\t\taFilters.push(new Filter(\"as_refcode\", FilterOperator.EQ, this.getView().getBindingContext().getProperty(\"Code\")));\r\n\t\t\tthis.getView().getModel().read(sPath, {\r\n\t\t\t\tfilters: aFilters,\r\n\t\t\t\tsuccess: function(oData) {\r\n\t\t\t\t\tif (oData.results.length > 0) {\r\n\t\t\t\t\t\tthis.getView().getModel(\"detailView\").setProperty(\"/bEditExectDept\", false);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.getView().getModel(\"detailView\").setProperty(\"/bEditExectDept\", true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}.bind(this),\r\n\t\t\t\terror: function() {\r\n\t\t\t\t\tthis.getView().getModel(\"detailView\").setProperty(\"/bEditExectDept\", false);\r\n\t\t\t\t}.bind(this)\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t *Checking Document Role if role is same then don't call fieldControl\r\n\t\t */\r\n\t\t_getOpenItemRole: function() {\r\n\t\t\tvar oDynamicBusyIndicator = new DynamicBusyIndicator(this);\r\n\t\t\toDynamicBusyIndicator.startBusy();\r\n\t\t\tvar that = this,\r\n\t\t\t\tsPositionId = this.getModel(\"appView\").getProperty(\"/position\"),\r\n\t\t\t\tsObjectId = this.getView().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\toAppViewModel = this.getModel(\"appView\"),\r\n\t\t\t\toResourceBundle = this.getResourceBundle(),\r\n\t\t\t\toDetailViewModel = this.getModel(\"detailView\");\r\n\r\n\t\t\tvar oAuth = new Promise(function(resolve, reject) {\r\n\t\t\t\tthis.getOwnerComponent().oDraft.getAuthorization({\r\n\t\t\t\t\tfName: \"/GetOpenItems\",\r\n\t\t\t\t\tApplicationId: \"AS\",\r\n\t\t\t\t\tGuid: sObjectId,\r\n\t\t\t\t\tPositionId: sPositionId\r\n\t\t\t\t}, resolve, reject);\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\toAuth.then(function(oResult) {\r\n\t\t\t\toDynamicBusyIndicator.endBusy();\r\n\t\t\t\tvar oOpenItems = oResult.data.GetOpenItems;\r\n\t\t\t\tthis.getModel(\"detailView\").setProperty(\"/WfRole\", oOpenItems.Wfrole);\r\n\t\t\t\tthis._callFieldControlBasedOnRole();\r\n\t\t\t}.bind(this));\r\n\t\t},\r\n\r\n\t\t_callFieldControlBasedOnRole: function() {\r\n\t\t\tvar oDynamicBusyIndicator = new DynamicBusyIndicator(this);\r\n\t\t\toDynamicBusyIndicator.startBusy();\r\n\t\t\tvar sStorePosition = jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\").PositionId;\r\n\t\t\tvar sStorageRole = jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\").Role;\r\n\t\t\tvar oViewAppModel = this.getOwnerComponent().getModel(\"appView\");\r\n\t\t\toViewAppModel.setProperty(\"/position\", sStorePosition);\r\n\t\t\toViewAppModel.setProperty(\"/role\", sStorageRole);\r\n\t\t\tif ((this.getModel(\"detailView\").getProperty(\"/WfRole\") !== this.getModel(\"detailView\").getProperty(\"/sFiledControlRole\")) && (\r\n\t\t\t\t\tsStorageRole !== this.getModel(\"detailView\").getProperty(\"/WfRole\"))) {\r\n\t\t\t\tvar fieldControlCall = new Promise(function(resolve1, reject1) {\r\n\t\t\t\t\tthis._callFieldControl({\r\n\t\t\t\t\t\taction: \"LOAD\",\r\n\t\t\t\t\t\tapplication: \"AS\",\r\n\t\t\t\t\t\tPositionid: sStorePosition,\r\n\t\t\t\t\t\tRole: this.getModel(\"detailView\").getProperty(\"/WfRole\") ? this.getModel(\"detailView\").getProperty(\"/WfRole\") : sStorageRole\r\n\t\t\t\t\t}, resolve1, reject1);\r\n\t\t\t\t}.bind(this));\r\n\r\n\t\t\t\tfieldControlCall.then(function(oData) {\r\n\t\t\t\t\toDynamicBusyIndicator.endBusy();\r\n\t\t\t\t}.bind(this));\r\n\t\t\t\tthis.getModel(\"detailView\").setProperty(\"/sFiledControlRole\", this.getModel(\"detailView\").getProperty(\"/WfRole\"));\r\n\t\t\t\t//              \r\n\t\t\t} else if (this.getModel(\"detailView\").getProperty(\"/sFiledControlRole\")) {\r\n\t\t\t\tif (sStorageRole !== this.getModel(\"detailView\").getProperty(\"/sFiledControlRole\") && (this.getModel(\"detailView\").getProperty(\r\n\t\t\t\t\t\t\"/WfRole\") !== this.getModel(\"detailView\").getProperty(\"/sFiledControlRole\"))) {\r\n\t\t\t\t\tvar fieldControlCall = new Promise(function(resolve1, reject1) {\r\n\t\t\t\t\t\tthis._callFieldControl({\r\n\t\t\t\t\t\t\taction: \"LOAD\",\r\n\t\t\t\t\t\t\tapplication: \"AS\",\r\n\t\t\t\t\t\t\tPositionid: sStorePosition,\r\n\t\t\t\t\t\t\tRole: this.getModel(\"detailView\").getProperty(\"/WfRole\") ? this.getModel(\"detailView\").getProperty(\"/WfRole\") : sStorageRole\r\n\t\t\t\t\t\t}, resolve1, reject1);\r\n\t\t\t\t\t}.bind(this));\r\n\r\n\t\t\t\t\tfieldControlCall.then(function(oData) {\r\n\t\t\t\t\t\toDynamicBusyIndicator.endBusy();\r\n\t\t\t\t\t}.bind(this));\r\n\t\t\t\t\tthis.getModel(\"detailView\").setProperty(\"/sFiledControlRole\", this.getModel(\"detailView\").getProperty(\"/WfRole\"));\r\n\t\t\t\t} else {\r\n\t\t\t\t\toDynamicBusyIndicator.endBusy();\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.controlModelSwitch(this.oDefaultControlModel);\r\n\t\t\t\toDynamicBusyIndicator.endBusy();\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * @param {sap.ui.base.Event} oEvent event raised on start of checklist attachment upload\r\n\t\t */\r\n\t\tonBeforeChecklistUploadStarts: function(oEvent) {\r\n\t\t\tvar sFileName = oEvent.getParameter(\"fileName\"),\r\n\t\t\t\tsReason = this.byId(\"idTextAreaReason\").getValue(),\r\n\t\t\t\tHGuid = this.getView().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\tsLongitude = \"\",\r\n\t\t\t\tsLatitude = \"\",\r\n\t\t\t\tsDocCategory = sap.ui.core.Fragment.byId(this.createId(\"idCheckList\"), \"idDocCategory\").getValue();\r\n\t\t\tvar oCustomerHeaderSlug = new UploadCollectionParameter({\r\n\t\t\t\tname: \"slug\",\r\n\t\t\t\tvalue: HGuid + \";\" + sFileName + \";\" + sDocCategory + \";ChecList;\" + sLongitude + \";\" + sLatitude + \";\" + \"ZWAS\"\r\n\t\t\t});\r\n\t\t\toEvent.getParameters().addHeaderParameter(oCustomerHeaderSlug);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * @param {sap.ui.base.Event} oEvent event raised before upload starts\r\n\t\t */\r\n\t\tonBeforeUploadStarts: function(oEvent) {\r\n\t\t\tvar sFileName = oEvent.getParameter(\"fileName\"),\r\n\t\t\t\tsReason = this.byId(\"idTextAreaReason\").getValue(),\r\n\t\t\t\tsLongitude = \"\",\r\n\t\t\t\tsLatitude = \"\",\r\n\t\t\t\tHGuid = this.getView().getBindingContext().getProperty(\"Guid\");\r\n\t\t\tthis.byId(\"idTextAreaReason\").setValue(\"\");\r\n\t\t\tvar oCustomerHeaderSlug = new UploadCollectionParameter({\r\n\t\t\t\tname: \"slug\",\r\n\t\t\t\tvalue: HGuid + \";\" + sFileName + \";;\" + sReason + \";\" + sLongitude + \";\" + sLatitude + \";\" + \"ZWAS\"\r\n\t\t\t});\r\n\t\t\toEvent.getParameters().addHeaderParameter(oCustomerHeaderSlug);\r\n\t\t},\r\n\t\t/**\r\n\t\t * @param {sap.ui.base.Event} oEvent event raised on change of checklist\r\n\t\t */\r\n\r\n\t\tonChecklistButtonPress: function(oEvent) {\r\n\t\t\tif (!this._checklistFrag) {\r\n\t\t\t\tvar fragId = this.createId(\"idCheckList\");\r\n\t\t\t\tthis._checklistFrag = sap.ui.xmlfragment(fragId, \"com.goap.cfms.works.as.fragment.checkListAttachment\", this);\r\n\t\t\t\tthis.getView().addDependent(this._checklistFrag);\r\n\t\t\t\tjQuery.sap.syncStyleClass(\"sapUiSizeCompact\", this.getView(), this._checklistFrag);\r\n\t\t\t}\r\n\t\t\tthis._checklistFrag.open();\r\n\t\t\tvar aFilter = [];\r\n\t\t\taFilter.push(new Filter(\"DocCategory\", FilterOperator.EQ, oEvent.getSource().getBindingContext().getProperty(\"ChkId\")));\r\n\t\t\taFilter.push(new Filter(\"DocGuid\", FilterOperator.EQ, this.getView().getBindingContext().getProperty(\"Guid\")));\r\n\t\t\taFilter.push(new Filter(\"DocType\", FilterOperator.EQ, \"ZWAS\"));\r\n\t\t\tsap.ui.core.Fragment.byId(this.createId(\"idCheckList\"), \"idChecklistUploadCollection\").getBinding(\"items\").filter(aFilter);\r\n\t\t\tsap.ui.core.Fragment.byId(this.createId(\"idCheckList\"), \"idDocCategory\").setValue(oEvent.getSource().getBindingContext().getProperty(\r\n\t\t\t\t\"ChkId\"));\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * @param {sap.ui.base.Event} oEvent event raised after upload completes\r\n\t\t */\r\n\t\tonUploadComplete: function(oEvent) {\r\n\r\n\t\t\tvar aAttachFilters = new Filter({\r\n\t\t\t\tfilters: [\r\n\t\t\t\t\tnew Filter(\"DocType\", \"EQ\", \"ZWAS\")\r\n\t\t\t\t],\r\n\t\t\t\tand: true\r\n\t\t\t});\r\n\t\t\toEvent.getSource().getBinding(\"items\").filter(aAttachFilters);\r\n\t\t},\r\n\r\n\t\tonUploadCompleteCheckList: function(oEvent) {\r\n\t\t\tvar aFilter = [];\r\n\t\t\tvar sDocCategory = sap.ui.core.Fragment.byId(this.createId(\"idCheckList\"), \"idDocCategory\").getValue();\r\n\t\t\taFilter.push(new Filter(\"DocCategory\", FilterOperator.EQ, sDocCategory));\r\n\t\t\taFilter.push(new Filter(\"DocGuid\", FilterOperator.EQ, this.getView().getBindingContext().getProperty(\"Guid\")));\r\n\t\t\taFilter.push(new Filter(\"DocType\", FilterOperator.EQ, \"ZWAS\"));\r\n\t\t\tsap.ui.core.Fragment.byId(this.createId(\"idCheckList\"), \"idChecklistUploadCollection\").getBinding(\"items\").filter(aFilter);\r\n\r\n\t\t},\r\n\r\n\t\tonSelectChangeSanctDept: function(oEvent) {\r\n\t\t\tvar sPreviousExetDept = this.getView().getModel(\"detailView\").getProperty(\"/SanctioningDeptKey\");\r\n\t\t\tvar sFValue = oEvent.getSource().getSelectedKey();\r\n\t\t\tvar Fnam = \"InitiatinDept\";\r\n\t\t\tvar sorceHoATable = this.getView().byId(\"idWorksHoA\").getItems();\r\n\t\t\tvar sMsgText = this.getModel(\"i18n\").getResourceBundle().getText(\"detail.message.warning.changeSancDept\");\r\n\r\n\t\t\tvar sPath = oEvent.getSource().getSelectedItem().getBindingContext().getPath();\r\n\t\t\tvar sDepartDesc = this.getView().getModel().getProperty(sPath).Depart_name;\r\n\t\t\tif (sPreviousExetDept) {\r\n\t\t\t\tif (sPreviousExetDept !== sFValue && sorceHoATable.length > 0) {\r\n\t\t\t\t\tMessageBox.confirm(sMsgText, {\r\n\t\t\t\t\t\tonClose: function(oAction) {\r\n\t\t\t\t\t\t\tif (oAction !== MessageBox.Action.OK) {\r\n\t\t\t\t\t\t\t\tthis.getView().byId(\"idInitDept\").setSelectedKey(sPreviousExetDept);\r\n\t\t\t\t\t\t\t\t//\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis._changeSanctDeptSuccessful(Fnam, sFValue);\r\n\t\t\t\t\t\t\t\tthis._updateSanctDesc(sDepartDesc);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}.bind(this)\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis._changeSanctDeptSuccessful(Fnam, sFValue);\r\n\t\t\t\t\tthis._updateSanctDesc(sDepartDesc);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis._changeSanctDeptSuccessful(Fnam, sFValue);\r\n\t\t\t\tthis._updateSanctDesc(sDepartDesc);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_changeSanctDeptSuccessful: function(Fnam, sFValue) {\r\n\t\t\tthis.bRefreshDDoTable = true;\r\n\t\t\tif (this.getView().getBindingContext().getProperty(\"Status\") === \"E0003\") {\r\n\t\t\t\tthis.bRefreshDDoTable = false;\r\n\t\t\t}\r\n\t\t\tthis._identifyHoaDdoFilters();\r\n\t\t\tthis._setHoaDdoFilters();\r\n\t\t\tthis._updateCallForCategoryandExeDeptandSancDept(Fnam, sFValue);\r\n\t\t\tthis.getView().getModel(\"detailView\").setProperty(\"/SanctioningDeptKey\", sFValue);\r\n\t\t},\r\n\r\n\t\t_updateSanctDesc: function(sDepartDesc) {\r\n\t\t\tvar oASUpdatePayload = {\r\n\t\t\t\tAction: \"UPHDR\",\r\n\t\t\t\tGuid: this.getView().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\tLockTimestamp: \"\\/Date(\" + (new Date()).getTime() + \")\\/\",\r\n\t\t\t\tFnam: \"InitDepartDesc\",\r\n\t\t\t\tFval: sDepartDesc,\r\n\t\t\t\tCode: \"\",\r\n\t\t\t\tPosition: this.getModel(\"appView\").getProperty(\"/position\"),\r\n\t\t\t\tInitiatinDept: \"\",\r\n\t\t\t\tDepartDesc: \"\",\r\n\t\t\t\tSessionGuid: jQuery.sap.storage(jQuery.sap.storage.Type.session).get(\"zworksBrowserStorage\").SessionGuid\r\n\t\t\t};\r\n\r\n\t\t\tvar sUpdPath = this.getModel().createKey(\"WrkASDetailsDraftSet\", {\r\n\t\t\t\tGuid: this.getView().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\tLockTimestamp: new Date().getTime()\r\n\t\t\t});\r\n\t\t\tsUpdPath = \"/\" + sUpdPath;\r\n\t\t\tthis.getModel().update(sUpdPath, oASUpdatePayload, {\r\n\t\t\t\tsuccess: function(oData, oResponse) {\r\n\r\n\t\t\t\t}.bind(this),\r\n\t\t\t\terror: function(oError) {\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tcheckBackendValidation: function(resolve, reject) {\r\n\t\t\tvar that = this,\r\n\t\t\t\toDetailViewModel = this.getModel(\"detailView\"),\r\n\t\t\t\toViewModel = this.getModel(\"detailView\"),\r\n\t\t\t\taWorkFlowLogData = oDetailViewModel.getProperty(\"/Worklog\"),\r\n\t\t\t\tbWorkFlowDefined = true;\r\n\t\t\tif (aWorkFlowLogData.length >= 1) {\r\n\t\t\t\tthis.getModel(\"appView\").setProperty(\"/busy\", true);\r\n\t\t\t\tthis.getView().getModel().callFunction(\"/WrkSave\", {\r\n\t\t\t\t\tmethod: \"POST\",\r\n\t\t\t\t\turlParameters: {\r\n\t\t\t\t\t\tAction: \"SAVE\",\r\n\t\t\t\t\t\tGuid: this.getView().getBindingContext().getProperty(\"Guid\"),\r\n\t\t\t\t\t\tRole: \"\",\r\n\t\t\t\t\t\tFPositionid: \"\",\r\n\t\t\t\t\t\tFFlag: \"\",\r\n\t\t\t\t\t\tAppID: \"AS\",\r\n\t\t\t\t\t\tFUserid: \"\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: function(oResponse) {\r\n\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\t//\t\t\t\t\t\tthis.getView().getElementBinding().refresh();\r\n\t\t\t\t\t}.bind(this),\r\n\t\t\t\t\terror: function(oResponse) {\r\n\t\t\t\t\t\tthis.getModel(\"appView\").setProperty(\"/busy\", false);\r\n\t\t\t\t\t}.bind(this)\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tvar oPromiseWorkFlowLogOnSave = new Promise(function(resolve1, reject1) {\r\n\t\t\t\t\tthat.getWorkFlowLogDetails({\r\n\t\t\t\t\t\tApplicationId: \"AS\",\r\n\t\t\t\t\t\tGuid: that.getView().getBindingContext().getProperty(\"Guid\")\r\n\t\t\t\t\t}, resolve1, reject1);\r\n\t\t\t\t}.bind(that));\r\n\t\t\t\toPromiseWorkFlowLogOnSave.then(function() {\r\n\t\t\t\t\toViewModel.setProperty(\"/busy\", false);\r\n\t\t\t\t\tvar aWrkFLogData = oDetailViewModel.getProperty(\"/Worklog\");\r\n\t\t\t\t\tif (aWrkFLogData.length >= 1) {\r\n\t\t\t\t\t\tthat._postSubmitCall(bWorkFlowDefined, oParams);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsap.m.MessageBox.error(\"Maker Role in Workflow not maintain\");\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tonWrkDocFlowAs: function(oEvent) {\r\n\t\t\tif (this.getModel(\"detailView\").getProperty(\"/stateId\") === \"E\" && oEvent.getSource().getBindingContext().getProperty(\"AppName\") !==\r\n\t\t\t\t\"AS\") {\r\n\t\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bUserCreateAS\", true);\r\n\t\t\t} else if (this.getModel(\"detailView\").getProperty(\"/stateId\") === \"E\" && oEvent.getSource().getBindingContext().getProperty(\r\n\t\t\t\t\t\"AppName\") === \"AS\") {\r\n\t\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bNavtoAsfromDocFlow\", true);\r\n\t\t\t\tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bUserCreateAS\", true);\r\n\t\t\t}\r\n\t\t\tthis.onWrkDocFlow(oEvent);\r\n\t\t},\r\n\t\t_handleSaveNotes: function(oEvent) {\r\n\t\t\tif (this._checkNoteforSave()) {\r\n\t\t\t\tvar oParamsTemp = this._createPostCallParam(\"SUBMIT\");\r\n\t\t\t\tvar bNotesSave = new Promise(function(resolve, reject) {\r\n\t\t\t\t\tthis._postCallforNotes(oParamsTemp, resolve, reject);\r\n\t\t\t\t}.bind(this));\r\n\r\n\t\t\t\tbNotesSave.then(function() {\r\n\t\t\t\t\tsap.m.MessageToast.show(this.getModel(\"i18n\").getResourceBundle().getText(\"detail.message.note.saved\"));\r\n\t\t\t\t\tvar oDetailViewModel = this.getModel(\"detailView\");\r\n\t\t\t\t\tif (oDetailViewModel) {\r\n\t\t\t\t\t\toDetailViewModel.setProperty(\"/Notingstring\", \"\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.getUserFeedList();\r\n\t\t\t\t}.bind(this));\r\n\t\t\t}\r\n\t\t},\r\n\t\t_checkNoteforSave: function() {\r\n\t\t\tvar bNotingString = false,\r\n\t\t\t\tsDetailModel = this.getModel(\"detailView\"),\r\n\t\t\t\tsLogInUser = sap.ushell.Container.getService(\"UserInfo\").getId(),\r\n\t\t\t\tsNotingString = sDetailModel.getProperty(\"/Notingstring\"),\r\n\t\t\t\tsNotes = sDetailModel.getProperty(\"/UserNotes\");\r\n\t\t\tif (sNotingString === \"\" || !sNotingString) {\r\n\t\t\t\tthis._displayWarnMessge(this.getModel(\"i18n\").getResourceBundle().getText(\"detail.message.note.enter\"));\r\n\t\t\t}\r\n\t\t\t//\t\t\telse if (sNotes.length > 0 && sLogInUser === sNotes[0].Createdby) {\r\n\t\t\t//\t\t\t\tsap.m.MessageBox.alert(this.getModel(\"i18n\").getResourceBundle().getText(\"detail.message.note.present\"));\r\n\t\t\t//\t\t\t} \r\n\t\t\telse {\r\n\t\t\t\tbNotingString = true;\r\n\t\t\t}\r\n\t\t\treturn bNotingString;\r\n\t\t},\r\n\t\t_handleClearNote: function(oEvent) {\r\n\t\t\tvar oDetailViewModel = this.getModel(\"detailView\");\r\n\t\t\tif (oDetailViewModel) {\r\n\t\t\t\toDetailViewModel.setProperty(\"/Notingstring\", \"\");\r\n\t\t\t\tsap.m.MessageToast.show(this.getModel(\"i18n\").getResourceBundle().getText(\"detail.message.note.cleared\"));\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Create new scheme code\r\n\t\t * @param {Object} oEvent Event Object\r\n\t\t */\r\n\t\t_handlePressAddNewScheme: function(oEvent) {\r\n\t\t\t// create value help dialog\r\n\t\t\tif (!this._valueHelpSchemeDialog) {\r\n\t\t\t\tthis._valueHelpSchemeDialog = sap.ui.xmlfragment(\r\n\t\t\t\t\t\"com.goap.cfms.works.as.fragment.createScheme\",\r\n\t\t\t\t\tthis\r\n\t\t\t\t);\r\n\t\t\t\tthis.getView().addDependent(this._valueHelpSchemeDialog);\r\n\t\t\t}\r\n\t\t\t// open value help dialog filtered by the input value\r\n\t\t\tthis._valueHelpSchemeDialog.open();\r\n\t\t},\r\n\t\t_handleSaveSchemeCreate: function() {\r\n\t\t\tvar oParams = this._getParamsForScheme();\r\n\t\t\tif (oParams.SchemeAbbr === \"\") {\r\n\t\t\t\tsap.m.MessageBox.error(this.getModel(\"i18n\").getResourceBundle().getText(\"detail.ops.panel.content.label.Schme.Error\"));\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._valueHelpSchemeDialog.setBusy(true);\r\n\t\t\tvar sUpdPath = \"/\" + \"WrkSchemesSet\";\r\n\t\t\tthis.getModel().create(sUpdPath, oParams, {\r\n\t\t\t\tsuccess: function() {\r\n\t\t\t\t\tMessageToast.show(this.getResourceBundle().getText(\"detail.message.create.success\"));\r\n\t\t\t\t\tthis._valueHelpSchemeDialog.setBusy(false);\r\n\t\t\t\t\tthis.byId(\"idSchemeCode\").getBinding(\"items\").refresh(true);\r\n\t\t\t\t\tthis._handleCancelSchemeCreate();\r\n\t\t\t\t}.bind(this),\r\n\t\t\t\terror: function(oError) {\r\n\t\t\t\t\tthis._valueHelpSchemeDialog.setBusy(false);\r\n\t\t\t\t}.bind(this)\r\n\t\t\t});\r\n\t\t},\r\n\t\t_handleCancelSchemeCreate: function() {\r\n\t\t\tif (this._valueHelpSchemeDialog) {\r\n\t\t\t\tthis.getView().getModel(\"detailView\").setProperty(\"/schemeDesc\", \"\");\r\n\t\t\t\tthis._valueHelpSchemeDialog.close();\r\n\t\t\t\tthis._valueHelpSchemeDialog.destroy();\r\n\t\t\t\tdelete this._valueHelpSchemeDialog;\r\n\t\t\t}\r\n\t\t},\r\n\t\t_getParamsForScheme: function() {\r\n\t\t\tvar SchemDesc = this.getView().getModel(\"detailView\").getProperty(\"/schemeDesc\");\r\n\t\t\treturn {\r\n\t\t\t\tAction: \"INS_SCHEME\",\r\n\t\t\t\tSchemeId: \"\",\r\n\t\t\t\tSchemeAbbr: this._handleGetJsFirstAlphaString(SchemDesc),\r\n\t\t\t\tSchemeDesc: SchemDesc.toUpperCase()\r\n\t\t\t};\r\n\t\t},\r\n\t\t_handleGetJsFirstAlphaString: function(sValue) {\r\n\t\t\tvar matches = sValue.match(/\\b(\\w)/g);\r\n\t\t\treturn matches.join('').toUpperCase();\r\n\t\t},\r\n\t\tupdateControlModel: function(oModel) {\r\n\t\t\tvar sCatagory = this.getView().getBindingContext().getProperty(\"Category\"),\r\n\t\t\t\tsDcWType = this.getView().getBindingContext().getProperty(\"DcwType\");\r\n\t\t\tif (sDcWType === \"02\" && sCatagory === \"02\") {\r\n\t\t\t\tthis.getModel(\"oControlModel\").setProperty(\"/SourceDdo/mandatory\",\r\n\t\t\t\t\ttrue);\r\n\t\t\t\tthis.getModel(\"oControlModel\").setProperty(\"/SourceHoa/mandatory\",\r\n\t\t\t\t\ttrue);\r\n\t\t\t\tthis.getModel(\"oControlModel\").setProperty(\"/SourceDdo/valueState\", \"Error\");\r\n\t\t\t\tthis.getModel(\"oControlModel\").setProperty(\"/SourceHoa/valueState\", \"Error\");\r\n\t\t\t} else {\r\n\t\t\t\tthis.getModel(\"oControlModel\").setProperty(\"/SourceDdo/mandatory\",\r\n\t\t\t\t\tfalse);\r\n\t\t\t\tthis.getModel(\"oControlModel\").setProperty(\"/SourceHoa/mandatory\",\r\n\t\t\t\t\tfalse);\r\n\t\t\t\tthis.getModel(\"oControlModel\").setProperty(\"/SourceDdo/valueState\", \"None\");\r\n\t\t\t\tthis.getModel(\"oControlModel\").setProperty(\"/SourceHoa/valueState\", \"None\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t});\r\n});",
		"com/goap/cfms/works/as/controller/NotFound.controller.js": "sap.ui.define([\r\n        \"com/goap/cfms/works/reuselib/BaseViewController\",\r\n        \"sap/m/InstanceManager\"\r\n    ], function (BaseController, InstanceManager) {\r\n        \"use strict\";\r\n\r\n        return BaseController.extend(\"com.goap.cfms.works.as.controller.NotFound\", {\r\n\r\n            onInit: function () {\r\n                BaseController.prototype.onInit.apply(this, arguments);\r\n\r\n                // register on display events\r\n                var oTarget = this.router.getTarget(\"notFound\");\r\n                oTarget.attachDisplay(this.onDisplay.bind(this));\r\n            },\r\n\r\n            onDisplay: function (oEvent) {\r\n\r\n                // set message on UI\r\n                var oData = oEvent.getParameter(\"data\");\r\n                this.byId(\"page\").setText(oData.message);\r\n\r\n                // close potential \"not found\" dialogs for errors from server\r\n                // (after UI5 has openend them)\r\n                setTimeout(function () {\r\n                    InstanceManager.closeAllDialogs();\r\n                }, 0);\r\n            }\r\n\r\n\r\n        });\r\n\r\n    }\r\n);",
		"com/goap/cfms/works/as/Component.js": "sap.ui.define([\r\n\t\"sap/ui/core/UIComponent\",\r\n\t\"com/goap/cfms/works/reuselib/componentInit\",\r\n\t\"com/goap/cfms/works/reuselib/WorksDraft\",\r\n\t\"sap/ui/model/json/JSONModel\",\r\n\t\"com/goap/cfms/works/reuselib/HashSync\",\r\n\t\"com/goap/cfms/works/as/model/AppModel\",\r\n\t\"sap/m/MessagePopover\",\r\n\t\"sap/m/MessagePopoverItem\"\r\n], function (UIComponent,\r\n\tcomponentInit,\r\n\tWorksDraft,\r\n\tJSONModel,\r\n\tHashSync,\r\n\tAppModel,\r\n\tMessagePopover,\r\n\tMessagePopoverItem) {\r\n\t\t\"use strict\";\r\n\r\n\t\treturn UIComponent.extend(\"com.goap.cfms.works.as.Component\", {\r\n\r\n\t\t\tmetadata: {\r\n\t\t\t\tmanifest: \"json\",\r\n\t\t\t\t\"config\": {\r\n\t\t\t\t\t\"fullWidth\": true\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * The component is initialized by UI5 automatically during the startup of the app and calls the init method once.\r\n\t\t\t * In this function, the FLP and device models are set and the router is initialized.\r\n\t\t\t * @public\r\n\t\t\t * @override\r\n\t\t\t */\r\n\t\t\tinit: function () {\r\n\t\t\t\t// call the base component's init function\r\n\t\t\t\tUIComponent.prototype.init.apply(this, arguments);\r\n\t\t\t\t\r\n\t\t\t\tjQuery.sap.includeStyleSheet(jQuery.sap.getModulePath(\"com.goap.cfms.works.reuselib.css\") + \"/style.css\");\r\n\t\t\t\t//Initialize MessageManager\r\n\t\t\t\t//this.messageManager = sap.ui.getCore().getMessageManager();\r\n\r\n\t\t\t\t\t//Implement Message Manager\r\n\t\t\t\tsap.ui.getCore().getMessageManager().registerObject(this, true);\r\n\t\t\t\tvar oMessageTemplate = new MessagePopoverItem({\r\n\t\t\t\t\ttype: \"{type}\",\r\n\t\t\t\t\ttitle: \"{message}\",\r\n\t\t\t\t\tdescription: \"{additionalText} {description} {code} {target}\",\r\n\t\t\t\t\tsubtitle: \"{code}\"\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.oMessagePopover = new MessagePopover({\r\n\t\t\t\t\tshowHeader: false,\r\n\t\t\t\t\titems: {\r\n\t\t\t\t\t\tpath: \"/\",\r\n\t\t\t\t\t\ttemplate: oMessageTemplate\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tthis.contentDensity = \"sapUiSizeCompact\";\r\n\t\t\t\t\r\n\t\t\t\tthis.oMessagePopover.setModel(sap.ui.getCore().getMessageManager().getMessageModel());\r\n\t\t\t\t\r\n\t\t\t\tthis.getModel().attachBatchRequestCompleted(function() {\r\n\t\t\t\t\tsap.ui.getCore().getMessageManager().getMessageModel().fireMessageChange();\r\n\t\t\t\t});\r\n\t\t\t\t//initialize reused component\r\n\t\t\t\tcomponentInit.init(this);\r\n\r\n\t\t\t\t// set the app model\r\n\t\t\t\tif (sap.ushell) {\r\n\t\t\t\t\tvar oAppModel = new AppModel(this.getComponentData().startupParameters);\r\n\t\t\t\t\tthis.setModel(oAppModel, \"appProperties\");\r\n\t\t\t\t}\r\n\t\t\t\t//attach Draft Object\r\n\t\t\t\tthis.oDraft = new WorksDraft({\r\n\t\t\t\t\tcomponent: this\r\n\t\t\t\t});\r\n\t\t\t\t//Initialize App State\r\n\t\t\t\tthis._initializeAppState();\r\n\t\t\t\t// synch the hash BEFORE initializing the router\r\n\t\t\t\tvar oHashSync = new HashSync({\r\n\t\t\t\t\tcomponent: this,\r\n\t\t\t\t\tmessage: this.message\r\n\t\t\t\t});\r\n\t\t\t\toHashSync.synch();\r\n\r\n\t\t\t\t\r\n\t\t\t\t// create the views based on the url/hash\r\n\t\t\t\tthis.getRouter().initialize();\r\n\t\t\t\t\r\n\t\t\t/*\tif(sap.ui.getCore().getModel(\"ZWRKGlobalModel\") !== undefined){\r\n                \tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bUserCanEdit\", false);\r\n                \tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bUserCreateAS\", false);\r\n                \tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/EST/bAddNewEST\", false);\r\n\t\t\t\t}else{\r\n                \twindow.location.hash = \"#ZWorks-AdminstrativeSanction\";\r\n                \tthis.worksGlobalModel();\r\n                }*/\r\n                \r\n            \t\r\n                if (sap.ui.getCore().getModel(\"ZWRKGlobalModel\").getProperty(\"/AS/bBrowserRefresh\")) {\r\n                \tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/SessionGuid\", \"00000000-0000-0000-0000-000000000000\");\r\n                \tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bBrowserRefresh\", false);\r\n                \tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/EST/bBrowserRefresh\", false);\r\n                \tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bUserCanEdit\", false);\r\n\t            \tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bUserCreateAS\", false);\r\n\t            \tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/EST/bAddNewEST\", false);\r\n\t            \tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bNavtoAsfromDocFlow\", false);\r\n\t            \r\n\t            \tif (this.getComponentData().startupParameters) {\r\n\t            \t\tif (!this.getComponentData().startupParameters.Mode) {\r\n\t            \t\t\twindow.location.hash = \"#ZWorks-AdminstrativeSanction\";\r\n\t            \t\t}\r\n\t            \t}\r\n                }\r\n                \r\n               /* if(sap.ui.getCore().getModel(\"ZWRKGlobalModel\").getProperty(\"/AS/bBrowserRefresh\")){\r\n                \tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").getProperty(\"/AS/bBrowserRefresh\", false);\r\n                \twindow.location.hash = \"#ZWorks-AdminstrativeSanction\";\r\n                }else{\r\n                \tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bUserCanEdit\", false);\r\n\t            \tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/AS/bUserCreateAS\", false);\r\n\t            \tsap.ui.getCore().getModel(\"ZWRKGlobalModel\").setProperty(\"/EST/bAddNewEST\", false);\r\n                }*/\r\n\t\t\t},\r\n\r\n\t\t\t_initializeAppState : function(){\r\n\t\t\t\tthis.oAppStateModel = new sap.ui.model.json.JSONModel({\r\n\t\t\t\t\tappState : \"\"\r\n\t\t\t\t});\r\n\t\t\t\tthis.setModel(this.oAppStateModel, \"appState\");\r\n\t\r\n\t\t\t\tsap.ushell.Container.getService(\"CrossApplicationNavigation\").getStartupAppState(this).done(function (oStartupAppStateContainer) {\r\n\t\t\t\t\tvar data = oStartupAppStateContainer.getData();\r\n\t\t\t\t\tif (data) {\r\n\t\t\t\t\t\tthis.oAppStateModel.setProperty(\"/appState\", data || \"\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}.bind(this));\r\n\t\t\t},\r\n\r\n\t\t\tdestroy: function () {\r\n\t\t\t\tcomponentInit.destroy(this);\r\n\t\t\t\t// call the base component's destroy function\r\n\t\t\t\tUIComponent.prototype.destroy.apply(this, arguments);\r\n\t\t\t},\r\n\r\n\t\t\tgetContentDensityClass : function() {\r\n\t\t\t\tif (!this.contentDensity) {\r\n\t\t\t\t\t\tthis.contentDensity = \"sapUiSizeCompact\";\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.contentDensity = \"sapUiSizeCozy\";\r\n\t\t\t\t\t}\r\n\t\t\t\treturn this.contentDensity;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tworksGlobalModel: function(){\r\n\t\t\t\tvar oData = {\r\n\t\t\t\t\tAS: {},\r\n\t\t\t\t\tTS: {},\r\n\t\t\t\t\tAGR: {},\r\n\t\t\t\t\tEST: {},\r\n\t\t\t\t\tMB: {},\r\n\t\t\t\t\tLF: {},\r\n\t\t\t\t\tCommon: {}\r\n\t\t\t\t};\r\n\t\t\t\tvar oGlobalModel = new sap.ui.model.json.JSONModel(oData);\r\n\t\t\t\t//this.setModel(oGlobalModel, \"zWorksGlobalMModel\");\r\n\t\t\t\tsap.ui.getCore().setModel(oGlobalModel, \"ZWRKGlobalModel\");\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t});",
		"com/goap/cfms/works/as/Digital_Sign/ds2min.js": "// Added silent_mode param to SignPDFInMemory API\r\n// Also added signature_format to SignPDFData and SignPDFInMemory JSON communication. SignPDFData, API was not changed but SignPDFInMemory API was changed\r\n// Requires at least 4.7.4.8 version of the client\r\nvar _elk_DSObjCount = 0;\r\nvar _elk_desksignObj = new _elk_DS();\r\nvar _elk_new_proto = true;\r\nvar _elk_err_try = false;\r\nvar _elk_send_queue = []; // Array of string buffers to send. Send from index 0 to last index\r\nvar _elk_lastmsg = \"\";\r\n\r\n// Call following line from outside (perhaps in user's page)\r\n// window.addEventListener(\"load\", function(){_elk_desksignObj._elk_initialize(mycallback);}, false);\r\n\r\n// _elk_DS Object constructor\r\nfunction _elk_DS() {\r\n\tif (_elk_DSObjCount > 0) {\r\n\t\talert(\"Cannot create object of type _elk_DS more than once\")\r\n\t\treturn;\r\n\t}\r\n\t_elk_DSObjCount++;\r\n\r\n\tthis.bActiveX = false; // It indicates if we are using ActiveX plugin (if Websockets fails and we are IE/FF)\r\n\tthis.activeXObj = null;\r\n\r\n\t/* elock protocol */\r\n\tthis._elk_socket = null;\r\n\tthis._elk_connectionOpen = false;\r\n\tthis._elk_userCallback;\r\n\r\n\tthis._elk_setCallback = function(callback) {\r\n\t\tif (typeof this._elk_socket == \"undefined\" || this._elk_socket == null)\r\n\t\t\treturn;\r\n\t\ttry {\r\n\t\t\tthis._elk_socket.onmessage = function got_packet(msg) {\r\n\t\t\t\tvar respObj = JSON.parse(msg.data);\r\n\t\t\t\twindow.a.mycallback(respObj.resp, respObj.status, respObj.params);\r\n\t\t\t};\r\n\r\n\t\t} catch (exception) {\r\n\t\t\talert('Error:' + exception);\r\n\t\t}\r\n\t}\r\n\r\n\t/* This function opens the connection to the E-Lock App */\r\n\tthis._elk_open = function() {\r\n\t\tvar sock_url;\r\n\t\tif (typeof this._elk_socket == \"undefined\" || this._elk_socket == null) {\r\n\t\t\ttry {\r\n\t\t\t\tvar protoString;\r\n\t\t\t\tif (_elk_new_proto)\r\n\t\t\t\t\tprotoString = \"E-Lock-protocol2\";\r\n\t\t\t\telse\r\n\t\t\t\t\tprotoString = \"E-Lock-protocol\";\r\n\r\n\t\t\t\t/*\r\n\t\t\t\t * We open the websocket encrypted if this page came on an\r\n\t\t\t\t * https:// url itself, otherwise unencrypted\r\n\t\t\t\t */\r\n\t\t\t\tif (document.URL.substring(0, 5) == \"https\")\r\n\t\t\t\t\tsock_url = \"wss://127.0.0.1:7681/xxx\";\r\n\t\t\t\telse\r\n\t\t\t\t\tsock_url = \"wss://127.0.0.1:7681/xxx\";\r\n\t\t\t\tif (typeof MozWebSocket != \"undefined\") {\r\n\t\t\t\t\t//alert(\"MozWebSocket\");\r\n\t\t\t\t\tthis._elk_socket = new MozWebSocket(sock_url, protoString);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis._elk_socket = new WebSocket(sock_url, protoString);\r\n\t\t\t\t}\r\n\t\t\t\tthis._elk_socket.onopen = _elk_onopenfn;\r\n\t\t\t\tthis._elk_socket.onclose = _elk_onclosefn;\r\n\t\t\t\tthis._elk_socket.onerror = _elk_onerrorfn;\r\n\t\t\t} catch (exception) {\r\n\t\t\t\t_elk_enablePage();\r\n\t\t\t\t//alert('Warning: ' + exception);\r\n\t\t\t\tthis._elk_socket = null;\r\n\t\t\t\t_elk_switchToActiveX();\r\n\t\t\t}\r\n\t\t\tif (typeof this._elk_socket != \"undefined\" && this._elk_socket != null && this._elk_socket.readyState == 1) {\r\n\t\t\t\t_elk_enablePage();\r\n\t\t\t\tthis._elk_connectionOpen = true;\r\n\t\t\t} else\r\n\t\t\t\tthis._elk_connectionOpen = false;\r\n\t\t}\r\n\t}\r\n\r\n\t/* This function closes the connection to the E-Lock app */\r\n\tthis._elk_close = function() {\r\n\t\tif (typeof this._elk_socket != \"undefined\" && this._elk_socket != null)\r\n\t\t\tthis._elk_socket.close();\r\n\t\tthis._elk_socket = null;\r\n\t\tthis._elk_connectionOpen = false;\r\n\t}\r\n\r\n\t/* This function starts the E-Lock App. Calling it again if the App is already started has no effect */\r\n\tthis._elk_start_app = function() {\r\n\t\twindow.location = \"elk://\";\r\n\t}\r\n\r\n\t/* This function sends a request to the E-Lock App to terminate itself. Ideally this function should be called when the browser window is about to close */\r\n\tthis._elk_end_app = function() {\r\n\t\ttry {\r\n\t\t\tif (typeof this._elk_socket != \"undefined\" && this._elk_socket != null) {\r\n\t\t\t\tthis._elk_buffered_send('{ \"msg\":\"shutdown\", \"ver\":0 }');\r\n\t\t\t\tthis._elk_close();\r\n\t\t\t}\r\n\t\t} catch (exception) {}\r\n\t}\r\n\r\n\t// Call this function either explicitly before anything else or call it on onload\r\n\tthis._elk_initialize = function(callback, a) {\r\n\t\twindow.a = a;\r\n\t\t_elk_detectBrowser();\r\n\t\t_elk_createDiv();\r\n\t\t_elk_disablePage();\r\n\t\tthis._elk_userCallback = callback;\r\n\t\t//this._elk_start_app();\r\n\t\t_elk_desksignObj._elk_open();\r\n\t\t_elk_desksignObj._elk_setCallback(_elk_desksignObj._elk_userCallback);\r\n\t}\r\n\r\n\t// Call this function either explicitly before anything else or call it on exit\r\n\tthis._elk_uninitialize = function() {\r\n\t\tthis._elk_end_app();\r\n\t}\r\n\r\n\tthis._elk_check_connection = function() {\r\n\t\tif (typeof this._elk_socket == \"undefined\" || this._elk_socket == null || !this._elk_connectionOpen) {\r\n\t\t\tif (typeof this._elk_socket != \"undefined\" && this._elk_socket != null) {\r\n\t\t\t\tif (this._elk_socket.readyState == 1) {\r\n\t\t\t\t\t_elk_enablePage();\r\n\t\t\t\t\tthis._elk_connectionOpen = true;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/* NO POINT IN TRYING TO OPEN NOW, AS WE WONT GET ENOUGH TIME TO GET THE CONNECTION OPENED FOR SENDING MESSAGES\r\n\t\t\t// try opening\r\n\t\t\tthis._elk_open();\r\n\t\t\tthis._elk_setCallback(this._elk_userCallback);\r\n\t\t\t*/\r\n\t\t\tif (typeof this._elk_socket == \"undefined\" || this._elk_socket == null || !this._elk_connectionOpen) {\r\n\t\t\t\talert(\"Could not connect to E-Lock SignApp.\\n\\n\" + _elk_lastmsg);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\t/* This function sends a request to E-Lock App. */\r\n\tthis._elk_send_request = function(req) {\r\n\t\tif (!this._elk_check_connection()) return;\r\n\t\t// Hack for Chrome and Firefox as they have problem sending packets larger than 1k\r\n\t\t// Split the request into about < 1k length packets. The string version (8 decimal digit) of length of the entire request precedes the first packet\r\n\t\ttry {\r\n\t\t\tif (_elk_new_proto) {\r\n\t\t\t\tvar len = req.length;\r\n\t\t\t\tvar MAX_PACKETLEN = 1000; // Less than 1K\r\n\t\t\t\tvar start_pos = 0;\r\n\r\n\t\t\t\treq = _elk_round8(len) + req; // prepend 8 digit length\r\n\t\t\t\tlen += 8;\r\n\r\n\t\t\t\twhile (len > 0) {\r\n\t\t\t\t\tif (len > MAX_PACKETLEN) {\r\n\t\t\t\t\t\tthis._elk_buffered_send(req.substr(start_pos, MAX_PACKETLEN));\r\n\t\t\t\t\t\tstart_pos += MAX_PACKETLEN;\r\n\t\t\t\t\t\tlen -= MAX_PACKETLEN;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis._elk_buffered_send(req.substr(start_pos));\r\n\t\t\t\t\t\tbreak; // this was the last of the packet\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else\r\n\t\t\t\tthis._elk_buffered_send(req);\r\n\t\t} catch (exception) {\r\n\t\t\talert(\"Exception: \" + exception);\r\n\t\t}\r\n\t}\r\n\r\n\tthis._elk_buffered_send = function(req) {\r\n\t\tif (_elk_send_queue.length == 0 && this._elk_socket.bufferedAmount == 0) {\r\n\t\t\t// Queue is empty and buffer is clear. So actually send it\r\n\t\t\tthis._elk_socket.send(req);\r\n\t\t} else {\r\n\t\t\t_elk_send_queue.push(req); // Add it to the end of the queue\r\n\t\t\tif (_elk_send_queue.length == 1) {\r\n\t\t\t\t_elk_disablePage();\r\n\t\t\t\twindow.setTimeout(_elk_timerCallback, 5); // Start timer for 50ms only if this is the first element in the queue. Otherwise timer is already running\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// This is a one-shot 50ms timer for sending queued request out on the socket\r\n\tfunction _elk_timerCallback() {\r\n\t\twhile ((_elk_send_queue.length > 0) && (_elk_desksignObj._elk_socket.bufferedAmount == 0)) {\r\n\t\t\t// We have something to send and the buffer is clear. So send it\r\n\t\t\tvar req = _elk_send_queue[0];\r\n\t\t\t_elk_send_queue.shift();\r\n\t\t\t_elk_desksignObj._elk_socket.send(req);\r\n\t\t}\r\n\r\n\t\tif (_elk_send_queue.length > 0 && _elk_desksignObj._elk_socket.bufferedAmount > 0) {\r\n\t\t\t// We have something more to send and buffer is not clear yet, so restart the timer\r\n\t\t\twindow.setTimeout(_elk_timerCallback, 5);\r\n\t\t} else\r\n\t\t\t_elk_enablePage();\r\n\t}\r\n\r\n\tthis._elk_activeX_returnResult = function(apiName, sig) {\r\n\t\tvar params = {};\r\n\t\tif (!this.bActiveX)\r\n\t\t\treturn;\r\n\t\tvar res;\r\n\t\tif (apiName != \"SignFile\" && apiName != \"SignPDFInMemory\")\r\n\t\t\tres = this.activeXObj.GetOperationStatusString();\r\n\t\telse\r\n\t\t\tres = apiName + \" functionality is not supported in this mode of signing\";\r\n\t\tif (typeof sig != \"undefined\" && sig != null && sig != \"\") {\r\n\t\t\tif (apiName == \"GetSubjectDN\" || apiName == \"GetIssuerDN\")\r\n\t\t\t\tparams.dn = sig;\r\n\t\t\telse if (apiName == \"SignDataDetached\" || apiName == \"SignDataInMemoryEx\" || apiName == \"SignEncodedDataInBatch\")\r\n\t\t\t\tparams.sig = sig;\r\n\t\t}\r\n\t\tthis._elk_userCallback(apiName, res, params);\r\n\t}\r\n\r\n\tthis.SetTSParameters = function(server_host_name, server_port, server_url, ts_before, policy_id) {\r\n\t\tif (this.bActiveX) {\r\n\t\t\tthis.activeXObj.SetTSParameters(server_host_name, server_port, server_url, ts_before, policy_id);\r\n\t\t\tthis._elk_activeX_returnResult(\"SetTSParameters\", \"\");\r\n\t\t} else {\r\n\t\t\tvar jsontext = '{\"server-host-name\":\"' + server_host_name + '\",\"server-port\":' + server_port + ',\"server-url\":\"' + server_url +\r\n\t\t\t\t'\",\"ts-before\":' + ts_before + ',\"policy-id\":\"' + policy_id + '\"}';\r\n\t\t\tthis._elk_send_request('{ \"msg\":\"sign\",\"ver\":0,\"cmd\":\"SetTSParameters\",\"params\":' + jsontext + ' }');\r\n\t\t}\r\n\t}\r\n\r\n\tthis.SignPDFData = function(in_file, out_file, signing_time, store_type, issued_to, issued_by, pfx_file, pwd, silent_mode, app_wnd,\r\n\t\treseller_code, sig_type, sig_format, app_data) {\r\n\t\tif (this.bActiveX) {\r\n\t\t\tthis.activeXObj.SignPDFData(in_file, out_file, signing_time, store_type, issued_to, issued_by, pfx_file, pwd, silent_mode, app_wnd,\r\n\t\t\t\treseller_code, sig_type, sig_format, app_data);\r\n\t\t\tthis._elk_activeX_returnResult(\"SignPDFData\", \"\");\r\n\t\t} else {\r\n\t\t\tin_file = in_file.replace(/\\\\/g, \"\\\\\\\\\");\r\n\t\t\tout_file = out_file.replace(/\\\\/g, \"\\\\\\\\\");\r\n\t\t\tpfx_file = pfx_file.replace(/\\\\/g, \"\\\\\\\\\");\r\n\t\t\tvar jsontext = '{\"in-file\":\"' + in_file + '\",\"out-file\":\"' + out_file + '\",\"signing-time\":' + signing_time + ',\"store-type\":' +\r\n\t\t\t\tstore_type + ',\"issued-to\":\"' + issued_to + '\",\"issued-by\":\"' + issued_by + '\",\"pfx-file\":\"' + pfx_file + '\",\"pwd\":\"' + pwd +\r\n\t\t\t\t'\",\"silent-mode\":' + silent_mode + ',\"reseller-code\":' + reseller_code + ',\"signature-format\":' + sig_format + '}';\r\n\t\t\tthis._elk_send_request('{ \"msg\":\"sign\",\"ver\":0,\"cmd\":\"SignPDFData\",\"params\":' + jsontext + ' }');\r\n\t\t}\r\n\t}\r\n\r\n\tthis.SignDataInMemoryEx = function(data, sig, detached, signing_time, store_type, issued_to, issued_by, pfx_file, pwd, silent_mode,\r\n\t\tapp_wnd, reseller_code) {\r\n\t\tif (this.bActiveX) {\r\n\t\t\tsig = this.activeXObj.SignDataInMemoryEx(data, sig, detached, signing_time, store_type, issued_to, issued_by, pfx_file, pwd,\r\n\t\t\t\tsilent_mode, app_wnd, reseller_code);\r\n\t\t\tthis._elk_activeX_returnResult(\"SignDataInMemoryEx\", sig);\r\n\t\t} else {\r\n\t\t\tpfx_file = pfx_file.replace(/\\\\/g, \"\\\\\\\\\");\r\n\t\t\tvar jsontext = '{\"data\":\"' + data + '\",\"sig\":\"' + sig + '\",\"detached\":' + detached + ',\"signing-time\":' + signing_time +\r\n\t\t\t\t',\"store-type\":' + store_type + ',\"issued-to\":\"' + issued_to + '\",\"issued-by\":\"' + issued_by + '\",\"pfx-file\":\"' + pfx_file +\r\n\t\t\t\t'\",\"pwd\":\"' + pwd + '\",\"silent-mode\":' + silent_mode + ',\"reseller-code\":' + reseller_code + '}';\r\n\t\t\tthis._elk_send_request('{ \"msg\":\"sign\",\"ver\":0,\"cmd\":\"SignDataInMemoryEx\",\"params\":' + jsontext + ' }');\r\n\t\t}\r\n\t}\r\n\r\n\tthis.SignEncodedDataInBatch = function(data, detached, signing_time, store_type, issued_to, issued_by, pfx_file, pwd, silent_mode, app_wnd,\r\n\t\treseller_code) {\r\n\t\tif (this.bActiveX) {\r\n\t\t\tsig = this.activeXObj.SignEncodedDataInBatch(data, detached, signing_time, store_type, issued_to, issued_by, pfx_file, pwd, silent_mode,\r\n\t\t\t\tapp_wnd, reseller_code);\r\n\t\t\tthis._elk_activeX_returnResult(\"SignEncodedDataInBatch\", sig);\r\n\t\t} else {\r\n\t\t\tpfx_file = pfx_file.replace(/\\\\/g, \"\\\\\\\\\");\r\n\t\t\tvar jsontext = '{\"data\":\"' + data + '\",\"detached\":' + detached + ',\"signing-time\":' + signing_time + ',\"store-type\":' + store_type +\r\n\t\t\t\t',\"issued-to\":\"' + issued_to + '\",\"issued-by\":\"' + issued_by + '\",\"pfx-file\":\"' + pfx_file + '\",\"pwd\":\"' + pwd + '\",\"silent-mode\":' +\r\n\t\t\t\tsilent_mode + ',\"reseller-code\":' + reseller_code + '}';\r\n\t\t\tthis._elk_send_request('{ \"msg\":\"sign\",\"ver\":0,\"cmd\":\"SignEncodedDataInBatch\",\"params\":' + jsontext + ' }');\r\n\t\t}\r\n\t}\r\n\r\n\tthis.SignDataAttached = function(in_file, signing_time, store_type, issued_to, issued_by, pfx_file, pwd, silent_mode, app_wnd,\r\n\t\treseller_code, out_file) {\r\n\t\tif (this.bActiveX) {\r\n\t\t\tthis.activeXObj.SignDataAttached(in_file, signing_time, store_type, issued_to, issued_by, pfx_file, pwd, silent_mode, app_wnd,\r\n\t\t\t\treseller_code, out_file);\r\n\t\t\tthis._elk_activeX_returnResult(\"SignDataAttached\", \"\");\r\n\t\t} else {\r\n\t\t\tin_file = in_file.replace(/\\\\/g, \"\\\\\\\\\");\r\n\t\t\tout_file = out_file.replace(/\\\\/g, \"\\\\\\\\\");\r\n\t\t\tpfx_file = pfx_file.replace(/\\\\/g, \"\\\\\\\\\");\r\n\t\t\tvar jsontext = '{\"in-file\":\"' + in_file + '\",\"out-file\":\"' + out_file + '\",\"signing-time\":' + signing_time + ',\"store-type\":' +\r\n\t\t\t\tstore_type + ',\"issued-to\":\"' + issued_to + '\",\"issued-by\":\"' + issued_by + '\",\"pfx-file\":\"' + pfx_file + '\",\"pwd\":\"' + pwd +\r\n\t\t\t\t'\",\"silent-mode\":' + silent_mode + ',\"reseller-code\":' + reseller_code + '}';\r\n\t\t\tthis._elk_send_request('{ \"msg\":\"sign\",\"ver\":0,\"cmd\":\"SignDataAttached\",\"params\":' + jsontext + ' }');\r\n\t\t}\r\n\t}\r\n\r\n\tthis.SignDataDetached = function(in_file, in_signature, is_encoded, is_hash, signing_time, store_type, issued_to, issued_by, pfx_file, pwd,\r\n\t\tsilent_mode, app_wnd, reseller_code) {\r\n\t\tvar sig = \"\";\r\n\t\tif (this.bActiveX) {\r\n\t\t\tsig = this.activeXObj.SignDataDetached(in_file, in_signature, is_encoded, is_hash, signing_time, store_type, issued_to, issued_by,\r\n\t\t\t\tpfx_file, pwd, silent_mode, app_wnd, reseller_code);\r\n\t\t\tthis._elk_activeX_returnResult(\"SignDataDetached\", sig);\r\n\t\t} else {\r\n\t\t\tin_file = in_file.replace(/\\\\/g, \"\\\\\\\\\");\r\n\t\t\tpfx_file = pfx_file.replace(/\\\\/g, \"\\\\\\\\\");\r\n\t\t\tvar jsontext = '{\"in-file\":\"' + in_file + '\",\"in-signature\":\"' + in_signature + '\",\"is-encoded\":' + is_encoded + ',\"is-hash\":' +\r\n\t\t\t\tis_hash + ',\"signing-time\":' + signing_time + ',\"store-type\":' + store_type + ',\"issued-to\":\"' + issued_to + '\",\"issued-by\":\"' +\r\n\t\t\t\tissued_by + '\",\"pfx-file\":\"' + pfx_file + '\",\"pwd\":\"' + pwd + '\",\"silent-mode\":' + silent_mode + ',\"reseller-code\":' + reseller_code +\r\n\t\t\t\t'}';\r\n\t\t\tthis._elk_send_request('{ \"msg\":\"sign\",\"ver\":0,\"cmd\":\"SignDataDetached\",\"params\":' + jsontext + ' }');\r\n\t\t}\r\n\t}\r\n\r\n\tthis.ConfigSigBlock = function(elements, width, height, image_position, orientation, sig_text, x_margin, y_margin) {\r\n\t\tif (this.bActiveX) {\r\n\t\t\tthis.activeXObj.ConfigSigBlock(elements, width, height, image_position, orientation, sig_text, x_margin, y_margin);\r\n\t\t\tthis._elk_activeX_returnResult(\"ConfigSigBlock\", \"\");\r\n\t\t} else {\r\n\t\t\tvar jsontext = '{\"elements\":' + elements + ',\"width\":' + width + ',\"height\":' + height + ',\"image-position\":' + image_position +\r\n\t\t\t\t',\"orientation\":' + orientation + ',\"sig-text\":\"' + sig_text + '\",\"x-margin\":' + x_margin + ',\"y-margin\":' + y_margin + '}';\r\n\t\t\tthis._elk_send_request('{ \"msg\":\"sign\",\"ver\":0,\"cmd\":\"ConfigSigBlock\",\"params\":' + jsontext + ' }');\r\n\t\t}\r\n\t}\r\n\r\n\tthis.EnablePDFArchivalSignature = function(enable) {\r\n\t\tif (this.bActiveX) {\r\n\t\t\tthis.activeXObj.EnablePDFArchivalSignature(enable);\r\n\t\t\tthis._elk_activeX_returnResult(\"EnablePDFArchivalSignature\", \"\");\r\n\t\t} else {\r\n\t\t\tvar jsontext = '{\"enable\":' + enable + '}';\r\n\t\t\tthis._elk_send_request('{ \"msg\":\"sign\",\"ver\":0,\"cmd\":\"EnablePDFArchivalSignature\",\"params\":' + jsontext + ' }');\r\n\t\t}\r\n\t}\r\n\r\n\tthis.DoValidationBeforeSigningEx = function(trusted_root_dns, do_rev_checking, ignore_validation_res, reseller_code) {\r\n\t\tif (this.bActiveX) {\r\n\t\t\tthis.activeXObj.DoValidationBeforeSigningEx(trusted_root_dns, do_rev_checking, ignore_validation_res, reseller_code);\r\n\t\t\tthis._elk_activeX_returnResult(\"DoValidationBeforeSigningEx\", \"\");\r\n\t\t} else {\r\n\t\t\tvar jsonDNs;\r\n\t\t\tif (trusted_root_dns == null)\r\n\t\t\t\tjsonDNs = '[]';\r\n\t\t\telse\r\n\t\t\t\tdns = JSON.stringify(trusted_root_dns);\r\n\t\t\tvar jsontext = '{\"trusted-root-dns\":' + jsonDNs + ',\"do-rev-checking\":' + do_rev_checking + ',\"ignore-validation-res\":' +\r\n\t\t\t\tignore_validation_res + ',\"reseller-code\":' + reseller_code + '}';\r\n\t\t\tthis._elk_send_request('{ \"msg\":\"sign\",\"ver\":0,\"cmd\":\"DoValidationBeforeSigningEx\",\"params\":' + jsontext + ' }');\r\n\t\t}\r\n\t}\r\n\r\n\tthis.SetSigningParametersEx = function(reason, location, signing_provider, hash_algorithm) {\r\n\r\n\t\tif (typeof hash_algorithm == \"undefined\")\r\n\t\t\thash_algorithm = \"\";\r\n\t\tif (this.bActiveX) {\r\n\t\t\tthis.activeXObj.SetSigningParametersEx(reason, location, signing_provider, hash_algorithm);\r\n\t\t\tthis._elk_activeX_returnResult(\"SetSigningParametersEx\", \"\");\r\n\t\t} else {\r\n\t\t\tvar jsontext = '{\"\":\"' + reason + '\",\"\":\"' + location + '\",\"signing-provider\":\"' + signing_provider + '\",\"hash-algorithm\":\"' +\r\n\t\t\t\thash_algorithm + '\"}';\r\n\t\t\tthis._elk_send_request('{ \"msg\":\"sign\",\"ver\":0,\"cmd\":\"SetSigningParametersEx\",\"params\":' + jsontext + ' }');\r\n\t\t}\r\n\t}\r\n\r\n\tthis.SetSigAppearanceParam = function(visibility_position, page_position, image_path) {\r\n\t\tif (this.bActiveX) {\r\n\t\t\tthis.activeXObj.SetSigAppearanceParam(visibility_position, page_position, image_path);\r\n\t\t\tthis._elk_activeX_returnResult(\"SetSigAppearanceParam\", \"\");\r\n\t\t} else {\r\n\t\t\timage_path = image_path.replace(/\\\\/g, \"\\\\\\\\\");\r\n\t\t\tvar jsontext = '{\"visibility-position\":' + visibility_position + ',\"page-position\":' + page_position + ',\"image-path\":\"' + image_path +\r\n\t\t\t\t'\"}';\r\n\t\t\tthis._elk_send_request('{ \"msg\":\"sign\",\"ver\":0,\"cmd\":\"SetSigAppearanceParam\",\"params\":' + jsontext + ' }');\r\n\t\t}\r\n\t}\r\n\r\n\tthis.EnableExpiredCertEnumeration = function(enable) {\r\n\t\tif (this.bActiveX) {\r\n\t\t\tthis.activeXObj.EnableExpiredCertEnumeration(enable);\r\n\t\t\tthis._elk_activeX_returnResult(\"EnableExpiredCertEnumeration\", \"\");\r\n\t\t} else {\r\n\t\t\tvar jsontext = '{\"enable\":' + enable + '}';\r\n\t\t\tthis._elk_send_request('{ \"msg\":\"sign\",\"ver\":0,\"cmd\":\"EnableExpiredCertEnumeration\",\"params\":' + jsontext + ' }');\r\n\t\t}\r\n\t}\r\n\r\n\tthis.GetSubjectDN = function() {\r\n\t\tvar dn = \"\";\r\n\t\tif (this.bActiveX) {\r\n\t\t\tdn = this.activeXObj.GetSubjectDN();\r\n\t\t\tthis._elk_activeX_returnResult(\"GetSubjectDN\", dn);\r\n\t\t} else {\r\n\t\t\tvar jsontext = '{}';\r\n\t\t\tthis._elk_send_request('{ \"msg\":\"sign\",\"ver\":0,\"cmd\":\"GetSubjectDN\",\"params\":' + jsontext + ' }');\r\n\t\t}\r\n\t}\r\n\r\n\tthis.GetIssuerDN = function() {\r\n\t\tvar dn = \"\";\r\n\t\tif (this.bActiveX) {\r\n\t\t\tdn = this.activeXObj.GetIssuerDN();\r\n\t\t\tthis._elk_activeX_returnResult(\"GetIssuerDN\", dn);\r\n\t\t} else {\r\n\t\t\tvar jsontext = '{}';\r\n\t\t\tthis._elk_send_request('{ \"msg\":\"sign\",\"ver\":0,\"cmd\":\"GetIssuerDN\",\"params\":' + jsontext + ' }');\r\n\t\t}\r\n\t}\r\n\r\n\tthis.SignFile = function(in_file, signing_time, store_type, issued_to, issued_by, pfx_file, pwd, reseller_code, getSig) {\r\n\t\t// the following is done for backward compatibility where this parameter was not present for a short time.\r\n\t\t// TODO: REMOVE THIS LATER\r\n\t\tif (typeof getSig == \"undefined\" || getSig != false)\r\n\t\t\tgetSig = true;\r\n\r\n\t\tif (this.bActiveX) {\r\n\t\t\talert(\"SignFile functionality is not supported in this mode of signing\");\r\n\t\t\tthis._elk_activeX_returnResult(\"SignFile\", \"\");\r\n\t\t} else {\r\n\t\t\tin_file = in_file.replace(/\\\\/g, \"\\\\\\\\\");\r\n\t\t\tpfx_file = pfx_file.replace(/\\\\/g, \"\\\\\\\\\");\r\n\t\t\tvar jsontext = '{\"file-to-sign\":\"' + in_file + '\",\"signing-time\":' + signing_time + ',\"store-type\":' + store_type + ',\"issued-to\":\"' +\r\n\t\t\t\tissued_to + '\",\"issued-by\":\"' + issued_by + '\",\"pfx-file\":\"' + pfx_file + '\",\"pwd\":\"' + pwd + '\",\"reseller-code\":' + reseller_code +\r\n\t\t\t\t',\"get-sig\":' + getSig + '}';\r\n\t\t\tthis._elk_send_request('{ \"msg\":\"sign\",\"ver\":0,\"cmd\":\"SignFile\",\"params\":' + jsontext + ' }');\r\n\t\t}\r\n\t}\r\n\r\n\tthis.SignPDFInMemory = function(pdf_data, signing_time, store_type, issued_to, issued_by, pfx_file, pwd, silent_mode, signature_format,\r\n\t\treseller_code) {\r\n\t\tif (typeof signature_format == \"undefined\") {\r\n\t\t\t// Support backward compatibility\r\n\t\t\treseller_code = silent_mode;\r\n\t\t\tsignature_format = 1;\r\n\t\t\tsilent_mode = false;\r\n\t\t} else if (typeof reseller_code == \"undefined\") {\r\n\t\t\t// Support backward compatibility\r\n\t\t\treseller_code = signature_format;\r\n\t\t\tsignature_format = 1;\r\n\t\t}\r\n\t\tif (this.bActiveX) {\r\n\t\t\talert(\"SignPDFInMemory functionality is not supported in this mode of signing\");\r\n\t\t\tthis._elk_activeX_returnResult(\"SignPDFInMemory\", \"\");\r\n\t\t} else {\r\n\t\t\tpfx_file = pfx_file.replace(/\\\\/g, \"\\\\\\\\\");\r\n\t\t\tvar jsontext = '{\"pdf-data\":\"' + pdf_data + '\",\"signing-time\":' + signing_time + ',\"store-type\":' + store_type + ',\"issued-to\":\"' +\r\n\t\t\t\tissued_to + '\",\"issued-by\":\"' + issued_by + '\",\"pfx-file\":\"' + pfx_file + '\",\"pwd\":\"' + pwd + '\",\"silent-mode\":' + silent_mode +\r\n\t\t\t\t',\"reseller-code\":' + reseller_code + ',\"signature-format\":' + signature_format + '}';\r\n\t\t\tthis._elk_send_request('{ \"msg\":\"sign\",\"ver\":0,\"cmd\":\"SignPDFInMemory\",\"params\":' + jsontext + ' }');\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\n// Callback functions...\r\n// This name is now a misnomer. It is used if Websocket fails and we have to fall back on ActiveX Plugin for IE or Firefox\r\nfunction _elk_switchToActiveX() {\r\n\tvar msgPlugin2 =\r\n\t\t\"If you get a message similar to Allow file... to run E-Lock WebSigning DeskSign Control, please click on Allow and Allow and Remember\";\r\n\tvar msgPlugin =\r\n\t\t\"Your browser neither supports Websockets nor ActiveX plugins. Please upgrade your browser version or use a different browser\";\r\n\tif (!_elk_desksignObj.bActiveX && _elk_desksignObj._elk_connectionOpen == false) {\r\n\t\tif (!bIE && !bFirefox) {\r\n\t\t\t// Not IE or Firefox: No fallback available\r\n\t\t\t_elk_savealert(\"Error in loading E-Lock Signing component for this browser. Please use Internet Explorer or Firefox\");\r\n\t\t} else {\r\n\t\t\t// Connection did not open and we are IE or Firefox, then fall back to plugin\r\n\t\t\t// alert(msgPlugin2);\r\n\t\t\tvar a = document.createElement(\"div\");\r\n\t\t\ta.innerHTML = '<object id=\"pluginSign\" type=\"application/x-ELOCK-Plugin-For-Desk-Sign\" height=\"0\" width=\"0\"></object>';\r\n\t\t\tdocument.body.appendChild(a);\r\n\t\t\t_elk_desksignObj.activeXObj = document.getElementById(\"pluginSign\");\r\n\t\t\tif (typeof _elk_desksignObj.activeXObj == \"undefined\" || _elk_desksignObj.activeXObj == null) {\r\n\t\t\t\t_elk_savealert(\"Error: \" + msgPlugin);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\ttry {\r\n\t\t\t\t_elk_desksignObj.activeXObj.GetOperationStatusString();\r\n\t\t\t} catch (b) {\r\n\t\t\t\t_elk_savealert(\"Error: \" + msgPlugin);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t_elk_desksignObj.bActiveX = true; // indicate we are using plugin\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction _elk_savealert(str) {\r\n\t_elk_lastmsg = str;\r\n}\r\n\r\nfunction _elk_onopenfn() {\r\n\t_elk_enablePage();\r\n\t_elk_desksignObj._elk_connectionOpen = true;\r\n}\r\n\r\nfunction _elk_onclosefn() {\r\n\t_elk_desksignObj._elk_connectionOpen = false;\r\n\t_elk_desksignObj._elk_socket = null;\r\n\tif (_elk_new_proto && _elk_err_try) {\r\n\t\t_elk_new_proto = false;\r\n\t\t_elk_err_try = false;\r\n\t\t_elk_desksignObj._elk_socket = null;\r\n\t\t_elk_desksignObj._elk_open();\r\n\t\t_elk_desksignObj._elk_setCallback(_elk_desksignObj._elk_userCallback);\r\n\t} else {\r\n\t\t_elk_enablePage();\r\n\t\t_elk_switchToActiveX(); // NEW\r\n\t}\r\n}\r\n\r\nfunction _elk_onerrorfn() {\r\n\tif (_elk_new_proto) {\r\n\t\t// It failed with new protocol. So, try with old protocol\r\n\t\t_elk_err_try = true; // We will actually try it in _elk_onclosefn, so just remember that we have to try\r\n\t} else {\r\n\t\t_elk_enablePage();\r\n\t\t/*\r\n\t\t\t\talert(\"onerror\");\r\n\t\t\t\t// It failed with old protocol also. So, switch to ActiveX method\r\n\t\t\t\tthis._elk_socket = null;\r\n\t\t\t\tthis._elk_connectionOpen = false;\r\n\t\t\t\t_elk_switchToActiveX(); // NEW\r\n\t\t*/\r\n\t}\r\n}\r\n\r\nfunction _elk_round8(num) {\r\n\tvar disp = \"\";\r\n\tfor (i = 0; i < 8; i++) {\r\n\t\tdisp = (num % 10) + disp;\r\n\t\tnum = Math.floor(num / 10);\r\n\t}\r\n\treturn disp;\r\n}\r\n\r\n// This function creates a transparent DIV over the whole page so that we can disable/enable the page\r\nfunction _elk_createDiv() {\r\n\tvar d = document.createElement(\"div\");\r\n\td.id = \"_elk_disablingDiv\";\r\n\tdocument.body.insertBefore(d, document.body.childNodes[0]);\r\n\r\n\tvar x = document.createElement(\"STYLE\");\r\n\tvar t = document.createTextNode(\r\n\t\t\"%23_elk_disablingDiv {display: none; z-index:10001; position: absolute; top: 0%; left: 0%; width: 100%; height: 100%; background-color: white; opacity:.00; filter: alpha(opacity=00);}\"\r\n\t);\r\n\ttry {\r\n\t\tx.appendChild(t);\r\n\t\tdocument.head.insertBefore(x, document.head.childNodes[0]);\r\n\t} catch (Exception) {};\r\n}\r\n\r\nfunction _elk_disablePage() {\r\n\tdocument.getElementById('_elk_disablingDiv').style.display = 'block';\r\n}\r\n\r\nfunction _elk_enablePage() {\r\n\tdocument.getElementById('_elk_disablingDiv').style.display = 'none';\r\n}\r\nvar bChrome = false;\r\nvar bFirefox = false;\r\nvar bEdge = false;\r\nvar bIE = false;\r\n\r\nfunction _elk_detectBrowser() {\r\n\tif (navigator.userAgent.indexOf(\"Edge\") != -1) {\r\n\t\tbEdge = true;\r\n\t} else if (navigator.userAgent.indexOf(\"Firefox\") != -1) {\r\n\t\tbFirefox = true;\r\n\t} else if (navigator.userAgent.indexOf(\"Chrome\") != -1) {\r\n\t\tbChrome = true;\r\n\t} else {\r\n\t\tbIE = true;\r\n\t}\r\n\t// ANI: TODO: Detect Opera\r\n}",
		"com/goap/cfms/works/as/Digital_Sign/ds2min-dbg.js": "// Added silent_mode param to SignPDFInMemory API\r\n// Also added signature_format to SignPDFData and SignPDFInMemory JSON communication. SignPDFData, API was not changed but SignPDFInMemory API was changed\r\n// Requires at least 4.7.4.8 version of the client\r\nvar _elk_DSObjCount = 0;\r\nvar _elk_desksignObj = new _elk_DS();\r\nvar _elk_new_proto = true;\r\nvar _elk_err_try = false;\r\nvar _elk_send_queue = []; // Array of string buffers to send. Send from index 0 to last index\r\nvar _elk_lastmsg = \"\";\r\n\r\n// Call following line from outside (perhaps in user's page)\r\n// window.addEventListener(\"load\", function(){_elk_desksignObj._elk_initialize(mycallback);}, false);\r\n\r\n// _elk_DS Object constructor\r\nfunction _elk_DS() {\r\n\tif (_elk_DSObjCount > 0) {\r\n\t\talert(\"Cannot create object of type _elk_DS more than once\")\r\n\t\treturn;\r\n\t}\r\n\t_elk_DSObjCount++;\r\n\r\n\tthis.bActiveX = false; // It indicates if we are using ActiveX plugin (if Websockets fails and we are IE/FF)\r\n\tthis.activeXObj = null;\r\n\r\n\t/* elock protocol */\r\n\tthis._elk_socket = null;\r\n\tthis._elk_connectionOpen = false;\r\n\tthis._elk_userCallback;\r\n\r\n\tthis._elk_setCallback = function(callback) {\r\n\t\tif (typeof this._elk_socket == \"undefined\" || this._elk_socket == null)\r\n\t\t\treturn;\r\n\t\ttry {\r\n\t\t\tthis._elk_socket.onmessage = function got_packet(msg) {\r\n\t\t\t\tvar respObj = JSON.parse(msg.data);\r\n\t\t\t\twindow.a.mycallback(respObj.resp, respObj.status, respObj.params);\r\n\t\t\t};\r\n\r\n\t\t} catch (exception) {\r\n\t\t\talert('Error:' + exception);\r\n\t\t}\r\n\t}\r\n\r\n\t/* This function opens the connection to the E-Lock App */\r\n\tthis._elk_open = function() {\r\n\t\tvar sock_url;\r\n\t\tif (typeof this._elk_socket == \"undefined\" || this._elk_socket == null) {\r\n\t\t\ttry {\r\n\t\t\t\tvar protoString;\r\n\t\t\t\tif (_elk_new_proto)\r\n\t\t\t\t\tprotoString = \"E-Lock-protocol2\";\r\n\t\t\t\telse\r\n\t\t\t\t\tprotoString = \"E-Lock-protocol\";\r\n\r\n\t\t\t\t/*\r\n\t\t\t\t * We open the websocket encrypted if this page came on an\r\n\t\t\t\t * https:// url itself, otherwise unencrypted\r\n\t\t\t\t */\r\n\t\t\t\tif (document.URL.substring(0, 5) == \"https\")\r\n\t\t\t\t\tsock_url = \"wss://127.0.0.1:7681/xxx\";\r\n\t\t\t\telse\r\n\t\t\t\t\tsock_url = \"wss://127.0.0.1:7681/xxx\";\r\n\t\t\t\tif (typeof MozWebSocket != \"undefined\") {\r\n\t\t\t\t\t//alert(\"MozWebSocket\");\r\n\t\t\t\t\tthis._elk_socket = new MozWebSocket(sock_url, protoString);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis._elk_socket = new WebSocket(sock_url, protoString);\r\n\t\t\t\t}\r\n\t\t\t\tthis._elk_socket.onopen = _elk_onopenfn;\r\n\t\t\t\tthis._elk_socket.onclose = _elk_onclosefn;\r\n\t\t\t\tthis._elk_socket.onerror = _elk_onerrorfn;\r\n\t\t\t} catch (exception) {\r\n\t\t\t\t_elk_enablePage();\r\n\t\t\t\t//alert('Warning: ' + exception);\r\n\t\t\t\tthis._elk_socket = null;\r\n\t\t\t\t_elk_switchToActiveX();\r\n\t\t\t}\r\n\t\t\tif (typeof this._elk_socket != \"undefined\" && this._elk_socket != null && this._elk_socket.readyState == 1) {\r\n\t\t\t\t_elk_enablePage();\r\n\t\t\t\tthis._elk_connectionOpen = true;\r\n\t\t\t} else\r\n\t\t\t\tthis._elk_connectionOpen = false;\r\n\t\t}\r\n\t}\r\n\r\n\t/* This function closes the connection to the E-Lock app */\r\n\tthis._elk_close = function() {\r\n\t\tif (typeof this._elk_socket != \"undefined\" && this._elk_socket != null)\r\n\t\t\tthis._elk_socket.close();\r\n\t\tthis._elk_socket = null;\r\n\t\tthis._elk_connectionOpen = false;\r\n\t}\r\n\r\n\t/* This function starts the E-Lock App. Calling it again if the App is already started has no effect */\r\n\tthis._elk_start_app = function() {\r\n\t\twindow.location = \"elk://\";\r\n\t}\r\n\r\n\t/* This function sends a request to the E-Lock App to terminate itself. Ideally this function should be called when the browser window is about to close */\r\n\tthis._elk_end_app = function() {\r\n\t\ttry {\r\n\t\t\tif (typeof this._elk_socket != \"undefined\" && this._elk_socket != null) {\r\n\t\t\t\tthis._elk_buffered_send('{ \"msg\":\"shutdown\", \"ver\":0 }');\r\n\t\t\t\tthis._elk_close();\r\n\t\t\t}\r\n\t\t} catch (exception) {}\r\n\t}\r\n\r\n\t// Call this function either explicitly before anything else or call it on onload\r\n\tthis._elk_initialize = function(callback, a) {\r\n\t\twindow.a = a;\r\n\t\t_elk_detectBrowser();\r\n\t\t_elk_createDiv();\r\n\t\t_elk_disablePage();\r\n\t\tthis._elk_userCallback = callback;\r\n\t\t//this._elk_start_app();\r\n\t\t_elk_desksignObj._elk_open();\r\n\t\t_elk_desksignObj._elk_setCallback(_elk_desksignObj._elk_userCallback);\r\n\t}\r\n\r\n\t// Call this function either explicitly before anything else or call it on exit\r\n\tthis._elk_uninitialize = function() {\r\n\t\tthis._elk_end_app();\r\n\t}\r\n\r\n\tthis._elk_check_connection = function() {\r\n\t\tif (typeof this._elk_socket == \"undefined\" || this._elk_socket == null || !this._elk_connectionOpen) {\r\n\t\t\tif (typeof this._elk_socket != \"undefined\" && this._elk_socket != null) {\r\n\t\t\t\tif (this._elk_socket.readyState == 1) {\r\n\t\t\t\t\t_elk_enablePage();\r\n\t\t\t\t\tthis._elk_connectionOpen = true;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/* NO POINT IN TRYING TO OPEN NOW, AS WE WONT GET ENOUGH TIME TO GET THE CONNECTION OPENED FOR SENDING MESSAGES\r\n\t\t\t// try opening\r\n\t\t\tthis._elk_open();\r\n\t\t\tthis._elk_setCallback(this._elk_userCallback);\r\n\t\t\t*/\r\n\t\t\tif (typeof this._elk_socket == \"undefined\" || this._elk_socket == null || !this._elk_connectionOpen) {\r\n\t\t\t\talert(\"Could not connect to E-Lock SignApp.\\n\\n\" + _elk_lastmsg);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\t/* This function sends a request to E-Lock App. */\r\n\tthis._elk_send_request = function(req) {\r\n\t\tif (!this._elk_check_connection()) return;\r\n\t\t// Hack for Chrome and Firefox as they have problem sending packets larger than 1k\r\n\t\t// Split the request into about < 1k length packets. The string version (8 decimal digit) of length of the entire request precedes the first packet\r\n\t\ttry {\r\n\t\t\tif (_elk_new_proto) {\r\n\t\t\t\tvar len = req.length;\r\n\t\t\t\tvar MAX_PACKETLEN = 1000; // Less than 1K\r\n\t\t\t\tvar start_pos = 0;\r\n\r\n\t\t\t\treq = _elk_round8(len) + req; // prepend 8 digit length\r\n\t\t\t\tlen += 8;\r\n\r\n\t\t\t\twhile (len > 0) {\r\n\t\t\t\t\tif (len > MAX_PACKETLEN) {\r\n\t\t\t\t\t\tthis._elk_buffered_send(req.substr(start_pos, MAX_PACKETLEN));\r\n\t\t\t\t\t\tstart_pos += MAX_PACKETLEN;\r\n\t\t\t\t\t\tlen -= MAX_PACKETLEN;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis._elk_buffered_send(req.substr(start_pos));\r\n\t\t\t\t\t\tbreak; // this was the last of the packet\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else\r\n\t\t\t\tthis._elk_buffered_send(req);\r\n\t\t} catch (exception) {\r\n\t\t\talert(\"Exception: \" + exception);\r\n\t\t}\r\n\t}\r\n\r\n\tthis._elk_buffered_send = function(req) {\r\n\t\tif (_elk_send_queue.length == 0 && this._elk_socket.bufferedAmount == 0) {\r\n\t\t\t// Queue is empty and buffer is clear. So actually send it\r\n\t\t\tthis._elk_socket.send(req);\r\n\t\t} else {\r\n\t\t\t_elk_send_queue.push(req); // Add it to the end of the queue\r\n\t\t\tif (_elk_send_queue.length == 1) {\r\n\t\t\t\t_elk_disablePage();\r\n\t\t\t\twindow.setTimeout(_elk_timerCallback, 5); // Start timer for 50ms only if this is the first element in the queue. Otherwise timer is already running\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// This is a one-shot 50ms timer for sending queued request out on the socket\r\n\tfunction _elk_timerCallback() {\r\n\t\twhile ((_elk_send_queue.length > 0) && (_elk_desksignObj._elk_socket.bufferedAmount == 0)) {\r\n\t\t\t// We have something to send and the buffer is clear. So send it\r\n\t\t\tvar req = _elk_send_queue[0];\r\n\t\t\t_elk_send_queue.shift();\r\n\t\t\t_elk_desksignObj._elk_socket.send(req);\r\n\t\t}\r\n\r\n\t\tif (_elk_send_queue.length > 0 && _elk_desksignObj._elk_socket.bufferedAmount > 0) {\r\n\t\t\t// We have something more to send and buffer is not clear yet, so restart the timer\r\n\t\t\twindow.setTimeout(_elk_timerCallback, 5);\r\n\t\t} else\r\n\t\t\t_elk_enablePage();\r\n\t}\r\n\r\n\tthis._elk_activeX_returnResult = function(apiName, sig) {\r\n\t\tvar params = {};\r\n\t\tif (!this.bActiveX)\r\n\t\t\treturn;\r\n\t\tvar res;\r\n\t\tif (apiName != \"SignFile\" && apiName != \"SignPDFInMemory\")\r\n\t\t\tres = this.activeXObj.GetOperationStatusString();\r\n\t\telse\r\n\t\t\tres = apiName + \" functionality is not supported in this mode of signing\";\r\n\t\tif (typeof sig != \"undefined\" && sig != null && sig != \"\") {\r\n\t\t\tif (apiName == \"GetSubjectDN\" || apiName == \"GetIssuerDN\")\r\n\t\t\t\tparams.dn = sig;\r\n\t\t\telse if (apiName == \"SignDataDetached\" || apiName == \"SignDataInMemoryEx\" || apiName == \"SignEncodedDataInBatch\")\r\n\t\t\t\tparams.sig = sig;\r\n\t\t}\r\n\t\tthis._elk_userCallback(apiName, res, params);\r\n\t}\r\n\r\n\tthis.SetTSParameters = function(server_host_name, server_port, server_url, ts_before, policy_id) {\r\n\t\tif (this.bActiveX) {\r\n\t\t\tthis.activeXObj.SetTSParameters(server_host_name, server_port, server_url, ts_before, policy_id);\r\n\t\t\tthis._elk_activeX_returnResult(\"SetTSParameters\", \"\");\r\n\t\t} else {\r\n\t\t\tvar jsontext = '{\"server-host-name\":\"' + server_host_name + '\",\"server-port\":' + server_port + ',\"server-url\":\"' + server_url +\r\n\t\t\t\t'\",\"ts-before\":' + ts_before + ',\"policy-id\":\"' + policy_id + '\"}';\r\n\t\t\tthis._elk_send_request('{ \"msg\":\"sign\",\"ver\":0,\"cmd\":\"SetTSParameters\",\"params\":' + jsontext + ' }');\r\n\t\t}\r\n\t}\r\n\r\n\tthis.SignPDFData = function(in_file, out_file, signing_time, store_type, issued_to, issued_by, pfx_file, pwd, silent_mode, app_wnd,\r\n\t\treseller_code, sig_type, sig_format, app_data) {\r\n\t\tif (this.bActiveX) {\r\n\t\t\tthis.activeXObj.SignPDFData(in_file, out_file, signing_time, store_type, issued_to, issued_by, pfx_file, pwd, silent_mode, app_wnd,\r\n\t\t\t\treseller_code, sig_type, sig_format, app_data);\r\n\t\t\tthis._elk_activeX_returnResult(\"SignPDFData\", \"\");\r\n\t\t} else {\r\n\t\t\tin_file = in_file.replace(/\\\\/g, \"\\\\\\\\\");\r\n\t\t\tout_file = out_file.replace(/\\\\/g, \"\\\\\\\\\");\r\n\t\t\tpfx_file = pfx_file.replace(/\\\\/g, \"\\\\\\\\\");\r\n\t\t\tvar jsontext = '{\"in-file\":\"' + in_file + '\",\"out-file\":\"' + out_file + '\",\"signing-time\":' + signing_time + ',\"store-type\":' +\r\n\t\t\t\tstore_type + ',\"issued-to\":\"' + issued_to + '\",\"issued-by\":\"' + issued_by + '\",\"pfx-file\":\"' + pfx_file + '\",\"pwd\":\"' + pwd +\r\n\t\t\t\t'\",\"silent-mode\":' + silent_mode + ',\"reseller-code\":' + reseller_code + ',\"signature-format\":' + sig_format + '}';\r\n\t\t\tthis._elk_send_request('{ \"msg\":\"sign\",\"ver\":0,\"cmd\":\"SignPDFData\",\"params\":' + jsontext + ' }');\r\n\t\t}\r\n\t}\r\n\r\n\tthis.SignDataInMemoryEx = function(data, sig, detached, signing_time, store_type, issued_to, issued_by, pfx_file, pwd, silent_mode,\r\n\t\tapp_wnd, reseller_code) {\r\n\t\tif (this.bActiveX) {\r\n\t\t\tsig = this.activeXObj.SignDataInMemoryEx(data, sig, detached, signing_time, store_type, issued_to, issued_by, pfx_file, pwd,\r\n\t\t\t\tsilent_mode, app_wnd, reseller_code);\r\n\t\t\tthis._elk_activeX_returnResult(\"SignDataInMemoryEx\", sig);\r\n\t\t} else {\r\n\t\t\tpfx_file = pfx_file.replace(/\\\\/g, \"\\\\\\\\\");\r\n\t\t\tvar jsontext = '{\"data\":\"' + data + '\",\"sig\":\"' + sig + '\",\"detached\":' + detached + ',\"signing-time\":' + signing_time +\r\n\t\t\t\t',\"store-type\":' + store_type + ',\"issued-to\":\"' + issued_to + '\",\"issued-by\":\"' + issued_by + '\",\"pfx-file\":\"' + pfx_file +\r\n\t\t\t\t'\",\"pwd\":\"' + pwd + '\",\"silent-mode\":' + silent_mode + ',\"reseller-code\":' + reseller_code + '}';\r\n\t\t\tthis._elk_send_request('{ \"msg\":\"sign\",\"ver\":0,\"cmd\":\"SignDataInMemoryEx\",\"params\":' + jsontext + ' }');\r\n\t\t}\r\n\t}\r\n\r\n\tthis.SignEncodedDataInBatch = function(data, detached, signing_time, store_type, issued_to, issued_by, pfx_file, pwd, silent_mode, app_wnd,\r\n\t\treseller_code) {\r\n\t\tif (this.bActiveX) {\r\n\t\t\tsig = this.activeXObj.SignEncodedDataInBatch(data, detached, signing_time, store_type, issued_to, issued_by, pfx_file, pwd, silent_mode,\r\n\t\t\t\tapp_wnd, reseller_code);\r\n\t\t\tthis._elk_activeX_returnResult(\"SignEncodedDataInBatch\", sig);\r\n\t\t} else {\r\n\t\t\tpfx_file = pfx_file.replace(/\\\\/g, \"\\\\\\\\\");\r\n\t\t\tvar jsontext = '{\"data\":\"' + data + '\",\"detached\":' + detached + ',\"signing-time\":' + signing_time + ',\"store-type\":' + store_type +\r\n\t\t\t\t',\"issued-to\":\"' + issued_to + '\",\"issued-by\":\"' + issued_by + '\",\"pfx-file\":\"' + pfx_file + '\",\"pwd\":\"' + pwd + '\",\"silent-mode\":' +\r\n\t\t\t\tsilent_mode + ',\"reseller-code\":' + reseller_code + '}';\r\n\t\t\tthis._elk_send_request('{ \"msg\":\"sign\",\"ver\":0,\"cmd\":\"SignEncodedDataInBatch\",\"params\":' + jsontext + ' }');\r\n\t\t}\r\n\t}\r\n\r\n\tthis.SignDataAttached = function(in_file, signing_time, store_type, issued_to, issued_by, pfx_file, pwd, silent_mode, app_wnd,\r\n\t\treseller_code, out_file) {\r\n\t\tif (this.bActiveX) {\r\n\t\t\tthis.activeXObj.SignDataAttached(in_file, signing_time, store_type, issued_to, issued_by, pfx_file, pwd, silent_mode, app_wnd,\r\n\t\t\t\treseller_code, out_file);\r\n\t\t\tthis._elk_activeX_returnResult(\"SignDataAttached\", \"\");\r\n\t\t} else {\r\n\t\t\tin_file = in_file.replace(/\\\\/g, \"\\\\\\\\\");\r\n\t\t\tout_file = out_file.replace(/\\\\/g, \"\\\\\\\\\");\r\n\t\t\tpfx_file = pfx_file.replace(/\\\\/g, \"\\\\\\\\\");\r\n\t\t\tvar jsontext = '{\"in-file\":\"' + in_file + '\",\"out-file\":\"' + out_file + '\",\"signing-time\":' + signing_time + ',\"store-type\":' +\r\n\t\t\t\tstore_type + ',\"issued-to\":\"' + issued_to + '\",\"issued-by\":\"' + issued_by + '\",\"pfx-file\":\"' + pfx_file + '\",\"pwd\":\"' + pwd +\r\n\t\t\t\t'\",\"silent-mode\":' + silent_mode + ',\"reseller-code\":' + reseller_code + '}';\r\n\t\t\tthis._elk_send_request('{ \"msg\":\"sign\",\"ver\":0,\"cmd\":\"SignDataAttached\",\"params\":' + jsontext + ' }');\r\n\t\t}\r\n\t}\r\n\r\n\tthis.SignDataDetached = function(in_file, in_signature, is_encoded, is_hash, signing_time, store_type, issued_to, issued_by, pfx_file, pwd,\r\n\t\tsilent_mode, app_wnd, reseller_code) {\r\n\t\tvar sig = \"\";\r\n\t\tif (this.bActiveX) {\r\n\t\t\tsig = this.activeXObj.SignDataDetached(in_file, in_signature, is_encoded, is_hash, signing_time, store_type, issued_to, issued_by,\r\n\t\t\t\tpfx_file, pwd, silent_mode, app_wnd, reseller_code);\r\n\t\t\tthis._elk_activeX_returnResult(\"SignDataDetached\", sig);\r\n\t\t} else {\r\n\t\t\tin_file = in_file.replace(/\\\\/g, \"\\\\\\\\\");\r\n\t\t\tpfx_file = pfx_file.replace(/\\\\/g, \"\\\\\\\\\");\r\n\t\t\tvar jsontext = '{\"in-file\":\"' + in_file + '\",\"in-signature\":\"' + in_signature + '\",\"is-encoded\":' + is_encoded + ',\"is-hash\":' +\r\n\t\t\t\tis_hash + ',\"signing-time\":' + signing_time + ',\"store-type\":' + store_type + ',\"issued-to\":\"' + issued_to + '\",\"issued-by\":\"' +\r\n\t\t\t\tissued_by + '\",\"pfx-file\":\"' + pfx_file + '\",\"pwd\":\"' + pwd + '\",\"silent-mode\":' + silent_mode + ',\"reseller-code\":' + reseller_code +\r\n\t\t\t\t'}';\r\n\t\t\tthis._elk_send_request('{ \"msg\":\"sign\",\"ver\":0,\"cmd\":\"SignDataDetached\",\"params\":' + jsontext + ' }');\r\n\t\t}\r\n\t}\r\n\r\n\tthis.ConfigSigBlock = function(elements, width, height, image_position, orientation, sig_text, x_margin, y_margin) {\r\n\t\tif (this.bActiveX) {\r\n\t\t\tthis.activeXObj.ConfigSigBlock(elements, width, height, image_position, orientation, sig_text, x_margin, y_margin);\r\n\t\t\tthis._elk_activeX_returnResult(\"ConfigSigBlock\", \"\");\r\n\t\t} else {\r\n\t\t\tvar jsontext = '{\"elements\":' + elements + ',\"width\":' + width + ',\"height\":' + height + ',\"image-position\":' + image_position +\r\n\t\t\t\t',\"orientation\":' + orientation + ',\"sig-text\":\"' + sig_text + '\",\"x-margin\":' + x_margin + ',\"y-margin\":' + y_margin + '}';\r\n\t\t\tthis._elk_send_request('{ \"msg\":\"sign\",\"ver\":0,\"cmd\":\"ConfigSigBlock\",\"params\":' + jsontext + ' }');\r\n\t\t}\r\n\t}\r\n\r\n\tthis.EnablePDFArchivalSignature = function(enable) {\r\n\t\tif (this.bActiveX) {\r\n\t\t\tthis.activeXObj.EnablePDFArchivalSignature(enable);\r\n\t\t\tthis._elk_activeX_returnResult(\"EnablePDFArchivalSignature\", \"\");\r\n\t\t} else {\r\n\t\t\tvar jsontext = '{\"enable\":' + enable + '}';\r\n\t\t\tthis._elk_send_request('{ \"msg\":\"sign\",\"ver\":0,\"cmd\":\"EnablePDFArchivalSignature\",\"params\":' + jsontext + ' }');\r\n\t\t}\r\n\t}\r\n\r\n\tthis.DoValidationBeforeSigningEx = function(trusted_root_dns, do_rev_checking, ignore_validation_res, reseller_code) {\r\n\t\tif (this.bActiveX) {\r\n\t\t\tthis.activeXObj.DoValidationBeforeSigningEx(trusted_root_dns, do_rev_checking, ignore_validation_res, reseller_code);\r\n\t\t\tthis._elk_activeX_returnResult(\"DoValidationBeforeSigningEx\", \"\");\r\n\t\t} else {\r\n\t\t\tvar jsonDNs;\r\n\t\t\tif (trusted_root_dns == null)\r\n\t\t\t\tjsonDNs = '[]';\r\n\t\t\telse\r\n\t\t\t\tdns = JSON.stringify(trusted_root_dns);\r\n\t\t\tvar jsontext = '{\"trusted-root-dns\":' + jsonDNs + ',\"do-rev-checking\":' + do_rev_checking + ',\"ignore-validation-res\":' +\r\n\t\t\t\tignore_validation_res + ',\"reseller-code\":' + reseller_code + '}';\r\n\t\t\tthis._elk_send_request('{ \"msg\":\"sign\",\"ver\":0,\"cmd\":\"DoValidationBeforeSigningEx\",\"params\":' + jsontext + ' }');\r\n\t\t}\r\n\t}\r\n\r\n\tthis.SetSigningParametersEx = function(reason, location, signing_provider, hash_algorithm) {\r\n\r\n\t\tif (typeof hash_algorithm == \"undefined\")\r\n\t\t\thash_algorithm = \"\";\r\n\t\tif (this.bActiveX) {\r\n\t\t\tthis.activeXObj.SetSigningParametersEx(reason, location, signing_provider, hash_algorithm);\r\n\t\t\tthis._elk_activeX_returnResult(\"SetSigningParametersEx\", \"\");\r\n\t\t} else {\r\n\t\t\tvar jsontext = '{\"\":\"' + reason + '\",\"\":\"' + location + '\",\"signing-provider\":\"' + signing_provider + '\",\"hash-algorithm\":\"' +\r\n\t\t\t\thash_algorithm + '\"}';\r\n\t\t\tthis._elk_send_request('{ \"msg\":\"sign\",\"ver\":0,\"cmd\":\"SetSigningParametersEx\",\"params\":' + jsontext + ' }');\r\n\t\t}\r\n\t}\r\n\r\n\tthis.SetSigAppearanceParam = function(visibility_position, page_position, image_path) {\r\n\t\tif (this.bActiveX) {\r\n\t\t\tthis.activeXObj.SetSigAppearanceParam(visibility_position, page_position, image_path);\r\n\t\t\tthis._elk_activeX_returnResult(\"SetSigAppearanceParam\", \"\");\r\n\t\t} else {\r\n\t\t\timage_path = image_path.replace(/\\\\/g, \"\\\\\\\\\");\r\n\t\t\tvar jsontext = '{\"visibility-position\":' + visibility_position + ',\"page-position\":' + page_position + ',\"image-path\":\"' + image_path +\r\n\t\t\t\t'\"}';\r\n\t\t\tthis._elk_send_request('{ \"msg\":\"sign\",\"ver\":0,\"cmd\":\"SetSigAppearanceParam\",\"params\":' + jsontext + ' }');\r\n\t\t}\r\n\t}\r\n\r\n\tthis.EnableExpiredCertEnumeration = function(enable) {\r\n\t\tif (this.bActiveX) {\r\n\t\t\tthis.activeXObj.EnableExpiredCertEnumeration(enable);\r\n\t\t\tthis._elk_activeX_returnResult(\"EnableExpiredCertEnumeration\", \"\");\r\n\t\t} else {\r\n\t\t\tvar jsontext = '{\"enable\":' + enable + '}';\r\n\t\t\tthis._elk_send_request('{ \"msg\":\"sign\",\"ver\":0,\"cmd\":\"EnableExpiredCertEnumeration\",\"params\":' + jsontext + ' }');\r\n\t\t}\r\n\t}\r\n\r\n\tthis.GetSubjectDN = function() {\r\n\t\tvar dn = \"\";\r\n\t\tif (this.bActiveX) {\r\n\t\t\tdn = this.activeXObj.GetSubjectDN();\r\n\t\t\tthis._elk_activeX_returnResult(\"GetSubjectDN\", dn);\r\n\t\t} else {\r\n\t\t\tvar jsontext = '{}';\r\n\t\t\tthis._elk_send_request('{ \"msg\":\"sign\",\"ver\":0,\"cmd\":\"GetSubjectDN\",\"params\":' + jsontext + ' }');\r\n\t\t}\r\n\t}\r\n\r\n\tthis.GetIssuerDN = function() {\r\n\t\tvar dn = \"\";\r\n\t\tif (this.bActiveX) {\r\n\t\t\tdn = this.activeXObj.GetIssuerDN();\r\n\t\t\tthis._elk_activeX_returnResult(\"GetIssuerDN\", dn);\r\n\t\t} else {\r\n\t\t\tvar jsontext = '{}';\r\n\t\t\tthis._elk_send_request('{ \"msg\":\"sign\",\"ver\":0,\"cmd\":\"GetIssuerDN\",\"params\":' + jsontext + ' }');\r\n\t\t}\r\n\t}\r\n\r\n\tthis.SignFile = function(in_file, signing_time, store_type, issued_to, issued_by, pfx_file, pwd, reseller_code, getSig) {\r\n\t\t// the following is done for backward compatibility where this parameter was not present for a short time.\r\n\t\t// TODO: REMOVE THIS LATER\r\n\t\tif (typeof getSig == \"undefined\" || getSig != false)\r\n\t\t\tgetSig = true;\r\n\r\n\t\tif (this.bActiveX) {\r\n\t\t\talert(\"SignFile functionality is not supported in this mode of signing\");\r\n\t\t\tthis._elk_activeX_returnResult(\"SignFile\", \"\");\r\n\t\t} else {\r\n\t\t\tin_file = in_file.replace(/\\\\/g, \"\\\\\\\\\");\r\n\t\t\tpfx_file = pfx_file.replace(/\\\\/g, \"\\\\\\\\\");\r\n\t\t\tvar jsontext = '{\"file-to-sign\":\"' + in_file + '\",\"signing-time\":' + signing_time + ',\"store-type\":' + store_type + ',\"issued-to\":\"' +\r\n\t\t\t\tissued_to + '\",\"issued-by\":\"' + issued_by + '\",\"pfx-file\":\"' + pfx_file + '\",\"pwd\":\"' + pwd + '\",\"reseller-code\":' + reseller_code +\r\n\t\t\t\t',\"get-sig\":' + getSig + '}';\r\n\t\t\tthis._elk_send_request('{ \"msg\":\"sign\",\"ver\":0,\"cmd\":\"SignFile\",\"params\":' + jsontext + ' }');\r\n\t\t}\r\n\t}\r\n\r\n\tthis.SignPDFInMemory = function(pdf_data, signing_time, store_type, issued_to, issued_by, pfx_file, pwd, silent_mode, signature_format,\r\n\t\treseller_code) {\r\n\t\tif (typeof signature_format == \"undefined\") {\r\n\t\t\t// Support backward compatibility\r\n\t\t\treseller_code = silent_mode;\r\n\t\t\tsignature_format = 1;\r\n\t\t\tsilent_mode = false;\r\n\t\t} else if (typeof reseller_code == \"undefined\") {\r\n\t\t\t// Support backward compatibility\r\n\t\t\treseller_code = signature_format;\r\n\t\t\tsignature_format = 1;\r\n\t\t}\r\n\t\tif (this.bActiveX) {\r\n\t\t\talert(\"SignPDFInMemory functionality is not supported in this mode of signing\");\r\n\t\t\tthis._elk_activeX_returnResult(\"SignPDFInMemory\", \"\");\r\n\t\t} else {\r\n\t\t\tpfx_file = pfx_file.replace(/\\\\/g, \"\\\\\\\\\");\r\n\t\t\tvar jsontext = '{\"pdf-data\":\"' + pdf_data + '\",\"signing-time\":' + signing_time + ',\"store-type\":' + store_type + ',\"issued-to\":\"' +\r\n\t\t\t\tissued_to + '\",\"issued-by\":\"' + issued_by + '\",\"pfx-file\":\"' + pfx_file + '\",\"pwd\":\"' + pwd + '\",\"silent-mode\":' + silent_mode +\r\n\t\t\t\t',\"reseller-code\":' + reseller_code + ',\"signature-format\":' + signature_format + '}';\r\n\t\t\tthis._elk_send_request('{ \"msg\":\"sign\",\"ver\":0,\"cmd\":\"SignPDFInMemory\",\"params\":' + jsontext + ' }');\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\n// Callback functions...\r\n// This name is now a misnomer. It is used if Websocket fails and we have to fall back on ActiveX Plugin for IE or Firefox\r\nfunction _elk_switchToActiveX() {\r\n\tvar msgPlugin2 =\r\n\t\t\"If you get a message similar to Allow file... to run E-Lock WebSigning DeskSign Control, please click on Allow and Allow and Remember\";\r\n\tvar msgPlugin =\r\n\t\t\"Your browser neither supports Websockets nor ActiveX plugins. Please upgrade your browser version or use a different browser\";\r\n\tif (!_elk_desksignObj.bActiveX && _elk_desksignObj._elk_connectionOpen == false) {\r\n\t\tif (!bIE && !bFirefox) {\r\n\t\t\t// Not IE or Firefox: No fallback available\r\n\t\t\t_elk_savealert(\"Error in loading E-Lock Signing component for this browser. Please use Internet Explorer or Firefox\");\r\n\t\t} else {\r\n\t\t\t// Connection did not open and we are IE or Firefox, then fall back to plugin\r\n\t\t\t// alert(msgPlugin2);\r\n\t\t\tvar a = document.createElement(\"div\");\r\n\t\t\ta.innerHTML = '<object id=\"pluginSign\" type=\"application/x-ELOCK-Plugin-For-Desk-Sign\" height=\"0\" width=\"0\"></object>';\r\n\t\t\tdocument.body.appendChild(a);\r\n\t\t\t_elk_desksignObj.activeXObj = document.getElementById(\"pluginSign\");\r\n\t\t\tif (typeof _elk_desksignObj.activeXObj == \"undefined\" || _elk_desksignObj.activeXObj == null) {\r\n\t\t\t\t_elk_savealert(\"Error: \" + msgPlugin);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\ttry {\r\n\t\t\t\t_elk_desksignObj.activeXObj.GetOperationStatusString();\r\n\t\t\t} catch (b) {\r\n\t\t\t\t_elk_savealert(\"Error: \" + msgPlugin);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t_elk_desksignObj.bActiveX = true; // indicate we are using plugin\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction _elk_savealert(str) {\r\n\t_elk_lastmsg = str;\r\n}\r\n\r\nfunction _elk_onopenfn() {\r\n\t_elk_enablePage();\r\n\t_elk_desksignObj._elk_connectionOpen = true;\r\n}\r\n\r\nfunction _elk_onclosefn() {\r\n\t_elk_desksignObj._elk_connectionOpen = false;\r\n\t_elk_desksignObj._elk_socket = null;\r\n\tif (_elk_new_proto && _elk_err_try) {\r\n\t\t_elk_new_proto = false;\r\n\t\t_elk_err_try = false;\r\n\t\t_elk_desksignObj._elk_socket = null;\r\n\t\t_elk_desksignObj._elk_open();\r\n\t\t_elk_desksignObj._elk_setCallback(_elk_desksignObj._elk_userCallback);\r\n\t} else {\r\n\t\t_elk_enablePage();\r\n\t\t_elk_switchToActiveX(); // NEW\r\n\t}\r\n}\r\n\r\nfunction _elk_onerrorfn() {\r\n\tif (_elk_new_proto) {\r\n\t\t// It failed with new protocol. So, try with old protocol\r\n\t\t_elk_err_try = true; // We will actually try it in _elk_onclosefn, so just remember that we have to try\r\n\t} else {\r\n\t\t_elk_enablePage();\r\n\t\t/*\r\n\t\t\t\talert(\"onerror\");\r\n\t\t\t\t// It failed with old protocol also. So, switch to ActiveX method\r\n\t\t\t\tthis._elk_socket = null;\r\n\t\t\t\tthis._elk_connectionOpen = false;\r\n\t\t\t\t_elk_switchToActiveX(); // NEW\r\n\t\t*/\r\n\t}\r\n}\r\n\r\nfunction _elk_round8(num) {\r\n\tvar disp = \"\";\r\n\tfor (i = 0; i < 8; i++) {\r\n\t\tdisp = (num % 10) + disp;\r\n\t\tnum = Math.floor(num / 10);\r\n\t}\r\n\treturn disp;\r\n}\r\n\r\n// This function creates a transparent DIV over the whole page so that we can disable/enable the page\r\nfunction _elk_createDiv() {\r\n\tvar d = document.createElement(\"div\");\r\n\td.id = \"_elk_disablingDiv\";\r\n\tdocument.body.insertBefore(d, document.body.childNodes[0]);\r\n\r\n\tvar x = document.createElement(\"STYLE\");\r\n\tvar t = document.createTextNode(\r\n\t\t\"%23_elk_disablingDiv {display: none; z-index:10001; position: absolute; top: 0%; left: 0%; width: 100%; height: 100%; background-color: white; opacity:.00; filter: alpha(opacity=00);}\"\r\n\t);\r\n\ttry {\r\n\t\tx.appendChild(t);\r\n\t\tdocument.head.insertBefore(x, document.head.childNodes[0]);\r\n\t} catch (Exception) {};\r\n}\r\n\r\nfunction _elk_disablePage() {\r\n\tdocument.getElementById('_elk_disablingDiv').style.display = 'block';\r\n}\r\n\r\nfunction _elk_enablePage() {\r\n\tdocument.getElementById('_elk_disablingDiv').style.display = 'none';\r\n}\r\nvar bChrome = false;\r\nvar bFirefox = false;\r\nvar bEdge = false;\r\nvar bIE = false;\r\n\r\nfunction _elk_detectBrowser() {\r\n\tif (navigator.userAgent.indexOf(\"Edge\") != -1) {\r\n\t\tbEdge = true;\r\n\t} else if (navigator.userAgent.indexOf(\"Firefox\") != -1) {\r\n\t\tbFirefox = true;\r\n\t} else if (navigator.userAgent.indexOf(\"Chrome\") != -1) {\r\n\t\tbChrome = true;\r\n\t} else {\r\n\t\tbIE = true;\r\n\t}\r\n\t// ANI: TODO: Detect Opera\r\n}",
		"com/goap/cfms/works/as/view/Master.view.xml": "<mvc:View controllerName=\"com.goap.cfms.works.as.controller.Master\" xmlns:mvc=\"sap.ui.core.mvc\" xmlns=\"sap.m\"\r\n\txmlns:smartFilterBar=\"sap.ui.comp.smartfilterbar\" xmlns:smartList=\"sap.ui.comp.smartlist\" xmlns:semantic=\"sap.f.semantic\"\r\n\tclass=\"sapUiSizeCompact\">\r\n\t<semantic:SemanticPage id=\"masterPage\" preserveHeaderStateOnScroll=\"true\" toggleHeaderOnTitleClick=\"false\" showFooter=\"true\"\r\n\t\theaderPinnable=\"false\">\r\n\t\t<semantic:titleHeading>\r\n\t\t\t<Title id=\"masterPageTitle\" text=\"{i18n>master.count.title}\" class=\"sapUiSmallMarginTop\" level=\"H1\"/>\r\n\t\t</semantic:titleHeading>\r\n\t\t<semantic:titleExpandedContent>\r\n\t\t\t<Text text=\"{appView>/positionText}\" tooltip=\"{appView>/position} : {appView>/positionText}\"/>\r\n\t\t</semantic:titleExpandedContent>\r\n\t\t<semantic:headerContent>\r\n\t\t\t<HBox>\r\n\t\t\t\t<smartFilterBar:SmartFilterBar id=\"smartFilterBar\" class=\"customFilterBasicSearch\" useToolbar=\"true\" showFilterConfiguration=\"false\"\r\n\t\t\t\t\tenableBasicSearch=\"true\" entitySet=\"ZWRK_C_ASHDR_DETAILS_C\" liveMode=\"true\" filterBarExpanded=\"false\" useDateRangeType=\"true\"\r\n\t\t\t\t\tconsiderSelectionVariants=\"false\"></smartFilterBar:SmartFilterBar>\r\n\t\t\t\t<Button id=\"idMicBtn\" icon=\"sap-icon://microphone\" enabled=\"{=${appView>/bEnabledMasterViewCtr}}\"\r\n\t\t\t\t\ttooltip=\"{i18n>master.Header.link.searchbyVoice}\" type=\"Transparent\"/>\r\n\t\t\t\t<Button icon=\"sap-icon://add\" enabled=\"{=${appView>/bEnabledMasterViewCtr}}\" visible=\"{= ${appView>/role} === 'M'? true : false}\"\r\n\t\t\t\t\ttooltip=\"{i18n>master.Header.link.text}\" press=\"onCreateNewAS\"/>\r\n\t\t\t\t<Button id=\"idMultiSelectBtn\" icon=\"sap-icon://activate\" enabled=\"{masterView>/bMultiSelectEnabled}\"\r\n\t\t\t\t\ttooltip=\"{i18n>master.header.link.multiProcess}\" press=\"onMultiProcessBtnPress\"/>\r\n\t\t\t</HBox>\r\n\t\t</semantic:headerContent>\r\n\t\t<semantic:content>\r\n\t\t\t<VBox>\r\n\t\t\t\t<smartList:SmartList id=\"ItemsST\" entitySet=\"ZWRK_C_ASHDR_DETAILS_C\" smartFilter=\"smartFilterBar\" showRowCount=\"true\"\r\n\t\t\t\t\tshowFullScreenButton=\"false\" enableAutoBinding=\"true\" beforeRebindList=\"beforeRebindList\"\r\n\t\t\t\t\tselectFields=\"guid,short_desc,code,estimate_val,currency,changetat,Description,IsActive,version,udf1\" dataReceived=\"onDataReceived\">\r\n\t\t\t\t\t<smartList:listItemTemplate >\r\n\t\t\t\t\t\t<ObjectListItem title=\"{short_desc}\" press=\"onSelectionChange\"\r\n\t\t\t\t\t\t\tnumber=\"{ parts:[{path:'estimate_val'},{path:'currency'}], type: 'sap.ui.model.type.Currency', formatOptions: {showMeasure: false}, formatter: '.formatter.formatAmount' }\"\r\n\t\t\t\t\t\t\tnumberUnit=\"{currency}\">\r\n\t\t\t\t\t\t\t<firstStatus>\r\n\t\t\t\t\t\t\t\t<ObjectStatus text=\"{= ${IsActive} === 'X'? ${i18n>master.Header.status.text.Complete} : ${i18n>master.Header.status.text.Incomplete} }\"\r\n\t\t\t\t\t\t\t\t\tstate=\"{= ${IsActive} === 'X'? 'Success' : 'Error' }\" visible=\"{= ${masterView>/highStatus} === 'D'? true : false}\"/>\r\n\t\t\t\t\t\t\t</firstStatus>\r\n\t\t\t\t\t\t\t<attributes>\r\n\t\t\t\t\t\t\t\t<ObjectAttribute text=\"{path: 'code',formatter: '.formatter._removeZeroes'}\"/>\r\n\t\t\t\t\t\t\t\t<ObjectAttribute text=\"{path:'changetat',type: 'sap.ui.model.odata.type.DateTime'}\"/>\r\n\t\t\t\t\t\t\t\t<ObjectAttribute text=\"{path: 'version', formatter: '.formatter._addVersion'}\"/>\r\n\t\t\t\t\t\t\t</attributes>\r\n\t\t\t\t\t\t</ObjectListItem>\r\n\t\t\t\t\t</smartList:listItemTemplate>\r\n\t\t\t\t\t<!-- Main content of the SmartList/VBox -->\r\n\t\t\t\t\t<OverflowToolbar id=\"idStatusTab\" design=\"Transparent\">\r\n\t\t\t\t\t\t<Button id=\"idAll\" icon=\"sap-icon://multiselect-all\" text=\"({masterView>/aCount})\" tooltip=\"{i18n>master.status.all}\"\r\n\t\t\t\t\t\t\ttype=\"{= ${masterView>/highStatus} === 'X' ? 'Emphasized' : 'Transparent' }\" enabled=\"{appView>/bEnabledMasterViewCtr}\" press=\"onAllPress\"/>\r\n\t\t\t\t\t\t<Button id=\"idDraft\" icon=\"sap-icon://notes\" text=\"({masterView>/dCount})\" tooltip=\"{i18n>master.status.draft}\"\r\n\t\t\t\t\t\t\ttype=\"{= ${masterView>/highStatus} === 'D' ? 'Emphasized' : 'Transparent' }\" enabled=\"{appView>/bEnabledMasterViewCtr}\" press=\"onDraftPress\"/>\r\n\t\t\t\t\t\t<Button id=\"idInProcess\" icon=\"sap-icon://process\" text=\"({masterView>/inPCount})\" tooltip=\"{i18n>master.status.inp}\"\r\n\t\t\t\t\t\t\ttype=\"{= ${masterView>/highStatus} === 'I'? 'Emphasized' : 'Transparent'}\" enabled=\"{appView>/bEnabledMasterViewCtr}\"\r\n\t\t\t\t\t\t\tpress=\"onInprocessPress\"/>\r\n\t\t\t\t\t\t<Button id=\"idReturn\" icon=\"sap-icon://undo\" text=\"({masterView>/returnCount})\" tooltip=\"{i18n>master.status.return}\"\r\n\t\t\t\t\t\t\ttype=\"{= ${masterView>/highStatus} === 'R'? 'Emphasized' : 'Transparent'}\" enabled=\"{appView>/bEnabledMasterViewCtr}\" press=\"onReturnPress\"/>\r\n\t\t\t\t\t\t<Button id=\"idApprove\" icon=\"sap-icon://accept\" text=\"({masterView>/apprCount})\" tooltip=\"{i18n>master.status.appr}\"\r\n\t\t\t\t\t\t\ttype=\"{= ${masterView>/highStatus} === 'A'? 'Emphasized' : 'Transparent'}\" enabled=\"{appView>/bEnabledMasterViewCtr}\"\r\n\t\t\t\t\t\t\tpress=\"onApprovedPress\"/>\r\n\t\t\t\t\t\t<Button id=\"idHold\" icon=\"sap-icon://lateness\" text=\"({masterView>/holdCount})\" tooltip=\"{i18n>master.status.hold}\"\r\n\t\t\t\t\t\t\ttype=\"{= ${masterView>/highStatus} === 'H'? 'Emphasized' : 'Transparent'}\" enabled=\"{appView>/bEnabledMasterViewCtr}\" press=\"onHoldPress\"/>\r\n\t\t\t\t\t</OverflowToolbar>\r\n\t\t\t\t\t<List mode=\"{appView>/sMasterListMode}\" rememberSelections=\"true\" includeItemInSelection=\"true\" selectionChange=\"onSelectionChange\"\r\n\t\t\t\t\t\tgrowing=\"true\" growingThreshold=\"100\"></List>\r\n\t\t\t\t</smartList:SmartList>\r\n\t\t\t\t<!-- <OverflowToolbar>\r\n\t\t\t\t\t<Button icon=\"sap-icon://refresh\" enabled=\"{appView>/bEnabledMasterViewCtr}\" press=\"onMasterListRefresh\"/>\r\n\t\t\t\t\t<Button icon=\"sap-icon://sort\" enabled=\"{appView>/bEnabledMasterViewCtr}\" press=\"onSortPress\"/>\r\n\t\t\t\t</OverflowToolbar> -->\r\n\t\t\t</VBox>\r\n\t\t</semantic:content>\r\n\t\t<semantic:footerCustomActions>\r\n\t\t\t<Button text=\"{i18n>master.footer.button.changePosition}\" visible=\"{= (${masterView>/bMultiSelectVisible} ? false : true)}\"\r\n\t\t\t\tpress=\"onChangePosition\" enabled=\"{=${appView>/bEnabledMasterViewCtr}}\"/>\r\n\t\t\t<Button icon=\"sap-icon://refresh\" visible=\"{= (${masterView>/bMultiSelectVisible} ? false : true)}\"\r\n\t\t\t\tenabled=\"{appView>/bEnabledMasterViewCtr}\" press=\"onMasterListRefresh\"/>\r\n\t\t\t<Button icon=\"sap-icon://sort\" visible=\"{= (${masterView>/bMultiSelectVisible} ? false : true)}\" enabled=\"{appView>/bEnabledMasterViewCtr}\"\r\n\t\t\t\tpress=\"onSortPress\"/>\r\n\t\t\t<Button icon=\"sap-icon://process\" text=\"{i18n>master.footer.button.process}\" type=\"Emphasized\" visible=\"{masterView>/bMultiSelectVisible}\"\r\n\t\t\t\tenabled=\"{masterView>/bMultiSelectEnabled}\" press=\"onProcessPress\" tooltip=\"{i18n>master.footer.button.process}\"/>\r\n\t\t</semantic:footerCustomActions>\r\n\t</semantic:SemanticPage>\r\n</mvc:View>",
		"com/goap/cfms/works/as/view/Detail.view.xml": "<mvc:View controllerName=\"com.goap.cfms.works.as.controller.Detail\" xmlns:mvc=\"sap.ui.core.mvc\" xmlns:rte=\"sap.ui.richtexteditor\"\r\n\tdisplayBlock=\"true\" xmlns=\"sap.m\" xmlns:uxap=\"sap.uxap\" xmlns:f=\"sap.ui.layout.form\" xmlns:l=\"sap.ui.layout\" xmlns:core=\"sap.ui.core\"\r\n\txmlns:commons=\"sap.suite.ui.commons\" xmlns:table=\"sap.ui.table\" xmlns:app=\"http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1\"\r\n\tclass=\"sapUiSizeCompact\">\r\n\t<uxap:ObjectPageLayout id=\"ObjectPageLayout\" class=\"customRemovePadding\" selectedSection=\"idGI\" alwaysShowContentHeader=\"true\"\r\n\t\theaderContentPinnable=\"true\" preserveHeaderStateOnScroll=\"true\" enableLazyLoading=\"true\" showFooter=\"true\" busy=\"{detailView>/busy}\"\r\n\t\tbusyIndicatorDelay=\"{detailView>/delay}\">\r\n\t\t<uxap:headerTitle>\r\n\t\t\t<uxap:ObjectPageHeader id=\"idObjectPageHeader\"\r\n\t\t\t\tobjectTitle=\"{detailView>/ObjectTitle}: {ShortDesc} ({path: 'Code',formatter: '.formatter._removeZeroes'})\">\r\n\t\t\t\t<uxap:actions>\r\n\t\t\t\t\t<l:HorizontalLayout>\r\n\t\t\t\t\t\t<Button visible=\"{= ${detailView>/Migrated}? true : false}\" text=\"Migrated Details\" press=\"onAddMigPress\" type=\"Transparent\"/>\r\n\t\t\t\t\t\t<Button text=\"{i18n>detail.page.header.title.button.version}\" press=\"onVersionPress\" type=\"Emphasized\"/>\r\n\t\t\t\t\t\t<!--<Button text=\"{i18n>detail.page.header.title.additionalNoteButton}\" type=\"Transparent\" press=\"onAdditionalNotePress\"/>-->\r\n\t\t\t\t\t\t<Button icon=\"sap-icon://edit\" text=\"{i18n>detail.page.header.title.editButton}\" type=\"Transparent\" press=\"onEditPress\"\r\n\t\t\t\t\t\t\tvisible=\"{= ${detailView>/stateId} === 'D' &amp;&amp; ${detailView>/authorized} &amp;&amp; (${detailView>/Mode} !== 'display')}\"/>\r\n\t\t\t\t\t\t<Button icon=\"sap-icon://display\" text=\"{i18n>detail.page.header.title.displayButton}\" type=\"Transparent\" press=\"onDisplayPress\"\r\n\t\t\t\t\t\t\tvisible=\"{= ${detailView>/stateId} === 'E'? true : false}\"/>\r\n\t\t\t\t\t\t<Button text=\"{i18n>detail.page.header.title.printButton}\" type=\"Transparent\" press=\"onPrintPress\"/>\r\n\t\t\t\t\t\t<Button text=\"{i18n>detail.page.header.title.changeLog}\" type=\"Transparent\" press=\"onChangeLogPress\"/>\r\n\t\t\t\t\t\t<Button id=\"asIdBtnScreenToggle\" icon=\"sap-icon://full-screen\" type=\"Transparent\" visible=\"{=(${detailView>/Mode} !== 'display')}\"\r\n\t\t\t\t\t\t\tpress=\"onFullScreenPress\"/>\r\n\t\t\t\t\t</l:HorizontalLayout>\r\n\t\t\t\t</uxap:actions>\r\n\t\t\t</uxap:ObjectPageHeader>\r\n\t\t</uxap:headerTitle>\r\n\t\t<uxap:headerContent>\r\n\t\t\t<Panel class=\"sapUiNoContentPadding\" visible=\"true\">\r\n\t\t\t\t<FlexBox width=\"90%\" justifyContent=\"SpaceBetween\" alignItems=\"Start\">\r\n\t\t\t\t\t<items>\r\n\t\t\t\t\t\t<l:VerticalLayout>\r\n\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.label.createdBy}\" design=\"Bold\"/>\r\n\t\t\t\t\t\t\t<Label text=\"{UserIdCrName}\" class=\"sapUiTinyMarginEnd\" design=\"Bold\"/>\r\n\t\t\t\t\t\t</l:VerticalLayout>\r\n\t\t\t\t\t\t<l:VerticalLayout>\r\n\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.label.createdOn}\" design=\"Bold\"/>\r\n\t\t\t\t\t\t\t<Label text=\"{path:'DatetimeCr',type: 'sap.ui.model.odata.type.DateTime'}\" class=\"sapUiTinyMarginEnd\" design=\"Bold\"/>\r\n\t\t\t\t\t\t</l:VerticalLayout>\r\n\t\t\t\t\t\t<l:VerticalLayout>\r\n\t\t\t\t\t\t\t<Label text=\"{i18n-reuse>detail.ops.version.table.column.text.version}\" design=\"Bold\"/>\r\n\t\t\t\t\t\t\t<Label text=\"{path:'Version'}\" class=\"sapUiTinyMarginEnd\" design=\"Bold\"/>\r\n\t\t\t\t\t\t</l:VerticalLayout>\r\n\t\t\t\t\t\t<l:VerticalLayout>\r\n\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.label.EValue}\" design=\"Bold\"/>\r\n\t\t\t\t\t\t\t<Label\r\n\t\t\t\t\t\t\t\ttext=\"{ parts:[{path:'EstimateVal'},{path:'Currency'}], type: 'sap.ui.model.type.Currency', formatOptions: {showMeasure: false}, formatter: '.formatter.formatAmount' }\"\r\n\t\t\t\t\t\t\t\tclass=\"sapUiTinyMarginEnd\" design=\"Bold\"/>\r\n\t\t\t\t\t\t\t<ProgressIndicator visible=\"{= ${Status} === 'E0006' ? true : false}\"\r\n\t\t\t\t\t\t\t\tpercentValue=\"{path:'Percentage', formatter:'.formatter.getPercentage'}\" displayValue=\"{Percentage}%\" showValue=\"true\"\r\n\t\t\t\t\t\t\t\tstate=\"{path: 'Percentage', formatter:'.formatter.getProcessIndState'}\"/>\r\n\t\t\t\t\t\t</l:VerticalLayout>\r\n\t\t\t\t\t\t<l:VerticalLayout>\r\n\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.label.Status}\" visible=\"{= ${oControlModel>/Status/visible}}\" design=\"Bold\"/>\r\n\t\t\t\t\t\t\t<FormattedText htmlText=\"{path:'StatusText', formatter:'.formatter._statusformat'}\" class=\"sapUiTinyMarginEnd\"\r\n\t\t\t\t\t\t\t\tvisible=\"{= ${oControlModel>/Status/visible}}\"/>\r\n\t\t\t\t\t\t</l:VerticalLayout>\r\n\t\t\t\t\t</items>\r\n\t\t\t\t</FlexBox>\r\n\t\t\t</Panel>\r\n\t\t</uxap:headerContent>\r\n\t\t<uxap:sections>\r\n\t\t\t<uxap:ObjectPageSection id=\"idGI\" title=\"{i18n>detail.ObjPageSection.title.GI}\" showTitle=\"false\">\r\n\t\t\t\t<uxap:ObjectPageSubSection mode=\"Collapsed\">\r\n\t\t\t\t\t<uxap:blocks>\r\n\t\t\t\t\t\t<Panel expandable=\"false\" expanded=\"true\">\r\n\t\t\t\t\t\t\t<content>\r\n\t\t\t\t\t\t\t\t<HBox id=\"idProcessFlowBox\" alignContent=\"Stretch\" alignItems=\"Stretch\" justifyContent=\"Start\" fitContainer=\"true\"\r\n\t\t\t\t\t\t\t\t\tclass=\"sapUiMediumMarginBottom\"></HBox>\r\n\t\t\t\t\t\t\t\t<f:Form editable=\"true\">\r\n\t\t\t\t\t\t\t\t\t<f:layout>\r\n\t\t\t\t\t\t\t\t\t\t<f:ResponsiveGridLayout labelSpanXL=\"12\" labelSpanL=\"12\" labelSpanM=\"12\" labelSpanS=\"12\" emptySpanXL=\"0\" emptySpanL=\"0\" emptySpanM=\"0\"\r\n\t\t\t\t\t\t\t\t\t\t\temptySpanS=\"0\" columnsXL=\"3\" columnsL=\"3\" columnsM=\"3\"/>\r\n\t\t\t\t\t\t\t\t\t</f:layout>\r\n\t\t\t\t\t\t\t\t\t<f:formContainers>\r\n\t\t\t\t\t\t\t\t\t\t<f:FormContainer >\r\n\t\t\t\t\t\t\t\t\t\t\t<f:formElements>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:FormElement visible=\"{= ${oControlModel>/Code/visible}}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.label.Code}\" required=\"{= ${oControlModel>/Code/mandatory}}\" labelFor=\"idCode\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Input id=\"idCode\" tooltip=\"{path: 'Code',formatter: '.formatter._removeZeroes'}\" change=\"onFieldChange\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"{path: 'Code',formatter: '.formatter._removeZeroes'}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\teditable=\"{= ${oControlModel>/Code/display} &amp;&amp; (${detailView>/stateId} !== 'D')}\" visible=\"{oControlModel>/Code/visible}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueState=\"{= ${oControlModel>/Code/valueState}}\" valueStateText=\"{= ${oControlModel>/Code/valueStateText}}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaxLength=\"{oControlModel>/Code/maxLength}\" type=\"{oControlModel>/Code/type}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:FormElement visible=\"{= ((${detailView>/ApproveBtnVisibility} === 'X') || (${Status} === 'E0006')) ? true : false}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.label.GOrderNo}\" required=\"{oControlModel>/GoNumber/mandatory}\" labelFor=\"idSD\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Input app:apprField=\"true\" change=\"onFieldChange\" tooltip=\"{GoNumber}\" liveChange=\"onGOLiveChange\" value=\"{GoNumber}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\teditable=\"{= ((${detailView>/bIsSecratary} ? false : true) &amp;&amp; ${detailView>/stateId} !== 'D' &amp;&amp; ${detailView>/ApproveBtnVisibility} === 'X')? true : false}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueState=\"{detailView>/GoNumValueState}\" valueStateText=\"{detailView>/GoNumValueStateText}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvisible=\"{=${detailView>/ApproveBtnVisibility} === 'X' || !${DigSignature}}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Link text=\"{GoNumber}\" tooltip=\"{GoNumber}\" press=\"onPrintPress\" visible=\"{=${Status} === 'E0006' &amp;&amp; ${DigSignature}}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:FormElement visible=\"{ (${detailView>/bIsSecratary} || (${Status} === 'E0006')) ? true : false}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.label.Section}\" required=\"true\" labelFor=\"idSecCode\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Select app:bindPath=\"SecDode\" app:apprField=\"true\" app:clearKey=\"SecDode\" id=\"idSecCode\" change=\"onSelectChange\" selectedKey=\"{SecDode}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tforceSelection=\"false\" enabled=\"{= ${detailView>/bIsSecratary} &amp;&amp; (${detailView>/stateId} !== 'D')}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueState=\"{detailView>/secCodeValueState}\" valueStateText=\"{detailView>/secCodeValueStateText}\"></Select>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t\t</f:formElements>\r\n\t\t\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t\t<f:FormContainer >\r\n\t\t\t\t\t\t\t\t\t\t\t<f:formElements>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<!--<f:FormElement visible=\"{= ${oControlModel>/Code/visible}}\">-->\r\n\t\t\t\t\t\t\t\t\t\t\t\t<!--\t<f:label>-->\r\n\t\t\t\t\t\t\t\t\t\t\t\t<!--\t\t<Label text=\"{i18n>detail.ops.panel.content.label.SO}\" required=\"{= ${oControlModel>/Code/mandatory}}\"/>-->\r\n\t\t\t\t\t\t\t\t\t\t\t\t<!--\t</f:label>-->\r\n\t\t\t\t\t\t\t\t\t\t\t\t<!--\t<f:fields>-->\r\n\t\t\t\t\t\t\t\t\t\t\t\t<!--\t\t<Input id=\"idSO\" value=\"\" editable=\"false\" visible=\"{oControlModel>/Code/visible}\"/>-->\r\n\t\t\t\t\t\t\t\t\t\t\t\t<!--\t</f:fields>-->\r\n\t\t\t\t\t\t\t\t\t\t\t\t<!--</f:FormElement>-->\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:FormElement label=\"{i18n>detail.ops.panel.content.label.SD}\" visible=\"{= ${oControlModel>/ShortDesc/visible}}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.label.SD}\" required=\"{oControlModel>/ShortDesc/mandatory}\" labelFor=\"idSD\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Input id=\"idSD\" tooltip=\"{ShortDesc}\" placeholder=\"{i18n>detail.ops.panel.content.label.PSD}\" liveChange=\"onFieldLiveChange\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchange=\"onFieldChange\" value=\"{ShortDesc}\" editable=\"{= ${oControlModel>/ShortDesc/display} &amp;&amp; (${detailView>/stateId} !== 'D')}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvisible=\"{oControlModel>/ShortDesc/visible}\" valueState=\"{= ${oControlModel>/ShortDesc/valueState}}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueStateText=\"{= ${oControlModel>/ShortDesc/valueStateText}}\" maxLength=\"{oControlModel>/ShortDesc/maxLength}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"{oControlModel>/ShortDesc/type}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:FormElement visible=\"{= ((${detailView>/ApproveBtnVisibility} === 'X') || (${Status} === 'E0006')) ? true : false}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.label.GOrderDate}\" required=\"{oControlModel>/GoRefDate/mandatory}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<DatePicker app:apprField=\"true\" change=\"onFieldChange\" maxDate=\"{detailView>/oToDayDate}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"{path:'GoRefDate', type:'sap.ui.model.type.Date', formatOptions: { style: 'medium', strictParsing: true, UTC: true}}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\teditable=\"{= ((${detailView>/bIsSecratary} ? false : true) &amp;&amp; ${detailView>/stateId} !== 'D' &amp;&amp; ${detailView>/ApproveBtnVisibility} === 'X')? true : false}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueState=\"{detailView>/goDateValueState}\" valueStateText=\"{detailView>/goDateValueStateText}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t\t</f:formElements>\r\n\t\t\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t\t<f:FormContainer class=\"sapUiNoContentPadding\"></f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t</f:formContainers>\r\n\t\t\t\t\t\t\t\t</f:Form>\r\n\t\t\t\t\t\t\t\t<f:Form editable=\"true\">\r\n\t\t\t\t\t\t\t\t\t<f:layout>\r\n\t\t\t\t\t\t\t\t\t\t<f:ResponsiveGridLayout class=\"noPadding\" labelSpanXL=\"12\" labelSpanL=\"12\" labelSpanM=\"12\" labelSpanS=\"12\" emptySpanXL=\"0\" emptySpanL=\"0\"\r\n\t\t\t\t\t\t\t\t\t\t\temptySpanM=\"0\" emptySpanS=\"0\" columnsXL=\"1\" columnsL=\"1\" columnsM=\"1\"/>\r\n\t\t\t\t\t\t\t\t\t</f:layout>\r\n\t\t\t\t\t\t\t\t\t<f:formContainers>\r\n\t\t\t\t\t\t\t\t\t\t<f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t\t\t<f:FormElement label=\"\" visible=\"{= ${oControlModel>/Description/visible}}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.label.Description}\" required=\"{= ${oControlModel>/Description/mandatory}}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TextArea value=\"{DescriptionL}\" placeholder=\"{i18n>detail.ops.panel.content.label.PDescription}\" change=\"onFieldChange\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttooltip=\"{DescriptionL}\" maxLength=\"{oControlModel>/Description/maxLength}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tenabled=\"{= ${oControlModel>/Description/display} &amp;&amp; (${detailView>/stateId} !== 'D')}\" showExceededText=\"true\" height=\"6rem\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t</f:formContainers>\r\n\t\t\t\t\t\t\t\t</f:Form>\r\n\t\t\t\t\t\t\t\t<f:Form editable=\"true\" id=\"idWFCO1\" visible=\"false\">\r\n\t\t\t\t\t\t\t\t\t<f:layout>\r\n\t\t\t\t\t\t\t\t\t\t<f:ResponsiveGridLayout class=\"noPadding\" labelSpanXL=\"12\" labelSpanL=\"12\" labelSpanM=\"12\" labelSpanS=\"12\" emptySpanXL=\"0\" emptySpanL=\"0\"\r\n\t\t\t\t\t\t\t\t\t\t\temptySpanM=\"0\" emptySpanS=\"0\" columnsXL=\"1\" columnsL=\"1\" columnsM=\"1\"/>\r\n\t\t\t\t\t\t\t\t\t</f:layout>\r\n\t\t\t\t\t\t\t\t\t<f:formContainers>\r\n\t\t\t\t\t\t\t\t\t\t<f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t\t\t<f:FormElement label=\"\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"Wheather Finance concurrence occured or not?\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<FlexBox alignItems=\"Start\" justifyContent=\"Start\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CheckBox id=\"yes\" text=\"Yes\" enabled=\"{= ${oControlModel>/MainWorkNature/display} &amp;&amp; (${detailView>/stateId} !== 'D')}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tselect=\"onpresscheckbox\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CheckBox id=\"no\" text=\"No\" enabled=\"{= ${oControlModel>/MainWorkNature/display} &amp;&amp; (${detailView>/stateId} !== 'D')}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tselect=\"onpresscheckbox\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</FlexBox>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t</f:formContainers>\r\n\t\t\t\t\t\t\t\t</f:Form>\r\n\t\t\t\t\t\t\t\t<f:Form editable=\"true\" id=\"idWFCO2\" visible=\"false\">\r\n\t\t\t\t\t\t\t\t\t<f:layout>\r\n\t\t\t\t\t\t\t\t\t\t<f:ResponsiveGridLayout class=\"noPadding\" labelSpanXL=\"12\" labelSpanL=\"12\" labelSpanM=\"12\" labelSpanS=\"12\" emptySpanXL=\"0\" emptySpanL=\"0\"\r\n\t\t\t\t\t\t\t\t\t\t\temptySpanM=\"0\" emptySpanS=\"0\" columnsXL=\"1\" columnsL=\"1\" columnsM=\"1\"/>\r\n\t\t\t\t\t\t\t\t\t</f:layout>\r\n\t\t\t\t\t\t\t\t\t<f:formContainers>\r\n\t\t\t\t\t\t\t\t\t\t<f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t\t\t<f:FormElement label=\"\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"Finance concurrence (up to 500 characters)\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TextArea id=\"idTextarea\" value=\"{DescriptionL}\" placeholder=\"{i18n>detail.ops.panel.content.label.PDescription}\" change=\"onFieldChange\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttooltip=\"{DescriptionL}\" maxLength=\"{oControlModel>/Description/maxLength}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tenabled=\"{= ${oControlModel>/Description/display} &amp;&amp; (${detailView>/stateId} !== 'D')}\" showExceededText=\"true\" height=\"6rem\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t</f:formContainers>\r\n\t\t\t\t\t\t\t\t</f:Form>\r\n\t\t\t\t\t\t\t\t<f:Form editable=\"true\">\r\n\t\t\t\t\t\t\t\t\t<f:layout>\r\n\t\t\t\t\t\t\t\t\t\t<f:ResponsiveGridLayout class=\"noPadding\" labelSpanXL=\"12\" labelSpanL=\"12\" labelSpanM=\"12\" labelSpanS=\"12\" emptySpanXL=\"0\" emptySpanL=\"0\"\r\n\t\t\t\t\t\t\t\t\t\t\temptySpanM=\"0\" emptySpanS=\"0\" columnsXL=\"1\" columnsL=\"1\" columnsM=\"1\"/>\r\n\t\t\t\t\t\t\t\t\t</f:layout>\r\n\t\t\t\t\t\t\t\t\t<f:formContainers>\r\n\t\t\t\t\t\t\t\t\t\t<f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t\t\t<f:FormElement label=\"\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button width=\"50%\" icon=\"sap-icon://request\" text=\"Order\" type=\"Emphasized\" press=\"onAdditionalNotePress\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tenabled=\"{= ${oControlModel>/MainWorkNature/display} &amp;&amp; (${detailView>/stateId} !== 'D')}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button width=\"50%\" icon=\"sap-icon://request\" text=\"Refrence\" type=\"Emphasized\" press=\"onAdditionalNotePressReference\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tenabled=\"{= ${oControlModel>/MainWorkNature/display} &amp;&amp; (${detailView>/stateId} !== 'D')}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t</f:formContainers>\r\n\t\t\t\t\t\t\t\t</f:Form>\r\n\t\t\t\t\t\t\t\t<f:Form editable=\"true\">\r\n\t\t\t\t\t\t\t\t\t<f:layout>\r\n\t\t\t\t\t\t\t\t\t\t<f:ResponsiveGridLayout labelSpanXL=\"12\" labelSpanL=\"12\" labelSpanM=\"12\" labelSpanS=\"12\" emptySpanXL=\"0\" emptySpanL=\"0\" emptySpanM=\"0\"\r\n\t\t\t\t\t\t\t\t\t\t\temptySpanS=\"0\" columnsXL=\"3\" columnsL=\"3\" columnsM=\"3\"/>\r\n\t\t\t\t\t\t\t\t\t</f:layout>\r\n\t\t\t\t\t\t\t\t\t<f:formContainers>\r\n\t\t\t\t\t\t\t\t\t\t<!--<f:FormContainer >-->\r\n\t\t\t\t\t\t\t\t\t\t<!--\t<f:FormElement visible=\"{= ${oControlModel>/Category/visible}}\">-->\r\n\t\t\t\t\t\t\t\t\t\t<!--\t\t<f:label>-->\r\n\t\t\t\t\t\t\t\t\t\t<!--\t\t\t<Label text=\"{i18n>detail.ops.panel.content.label.Catogery}\" required=\"{= ${oControlModel>/Category/mandatory}}\"/>-->\r\n\t\t\t\t\t\t\t\t\t\t<!--\t\t</f:label>-->\r\n\t\t\t\t\t\t\t\t\t\t<!--\t\t<f:fields>-->\r\n\t\t\t\t\t\t\t\t\t\t<!--\t\t\t<Select app:bindPath=\"Category\" app:clearKey=\"Category\" id=\"idCategory\" change=\"onSelectChangeCategory\" selectedKey=\"{Category}\"-->\r\n\t\t\t\t\t\t\t\t\t\t<!--\t\t\t\tforceSelection=\"false\" enabled=\"{= ${oControlModel>/Category/display} &amp;&amp; (${detailView>/stateId} !== 'D')}\"-->\r\n\t\t\t\t\t\t\t\t\t\t<!--\t\t\t\tvalueState=\"{= ${oControlModel>/Category/valueState}}\" valueStateText=\"{= ${oControlModel>/Category/valueStateText}}\"></Select>-->\r\n\t\t\t\t\t\t\t\t\t\t<!--\t\t</f:fields>-->\r\n\t\t\t\t\t\t\t\t\t\t<!--\t</f:FormElement>-->\r\n\t\t\t\t\t\t\t\t\t\t<!--</f:FormContainer>-->\r\n\t\t\t\t\t\t\t\t\t\t<!--<f:FormContainer >-->\r\n\t\t\t\t\t\t\t\t\t\t<!--\t<f:FormElement label=\"\" visible=\"{= ${oControlModel>/Scheme/visible}}\">-->\r\n\t\t\t\t\t\t\t\t\t\t<!--\t\t<f:label>-->\r\n\t\t\t\t\t\t\t\t\t\t<!--\t\t\t<Label text=\"{i18n>detail.ops.panel.content.label.Scheme}\" required=\"{= ${oControlModel>/Scheme/mandatory}}\"/>-->\r\n\t\t\t\t\t\t\t\t\t\t<!--\t\t</f:label>-->\r\n\t\t\t\t\t\t\t\t\t\t<!--\t\t<f:fields>-->\r\n\t\t\t\t\t\t\t\t\t\t<!--\t\t\t<Select id = \"idSchemeCode\" app:bindPath=\"Scheme\" change=\"onSelectChange\" items=\"{path: '/ZWRK_C_SCHEMES', sorter:{path:'schemdesc'}}\" selectedKey=\"{Scheme}\"-->\r\n\t\t\t\t\t\t\t\t\t\t<!--\t\t\t\tenabled=\"{= ${oControlModel>/Scheme/display} &amp;&amp; (${detailView>/stateId} !== 'D')}\" forceSelection=\"false\"-->\r\n\t\t\t\t\t\t\t\t\t\t<!--\t\t\t\tvalueState=\"{= ${oControlModel>/Scheme/valueState}}\" valueStateText=\"{= ${oControlModel>/Scheme/valueStateText}}\">-->\r\n\t\t\t\t\t\t\t\t\t\t<!--\t\t\t\t<items>-->\r\n\t\t\t\t\t\t\t\t\t\t<!--\t\t\t\t\t<core:Item text=\"{schemdesc}\" key=\"{schemeid}\"/>-->\r\n\t\t\t\t\t\t\t\t\t\t<!--\t\t\t\t</items>-->\r\n\t\t\t\t\t\t\t\t\t\t<!--\t\t\t</Select>-->\r\n\t\t\t\t\t\t\t\t\t\t<!--\t\t\t<Button visible=\"{= ${oControlModel>/Scheme/display} &amp;&amp; (${detailView>/stateId} !== 'D')}\" -->\r\n\t\t\t\t\t\t\t\t\t\t<!--\t\t\t\t\tpress = \"_handlePressAddNewScheme\" icon = \"sap-icon://add\" tooltip = \"{i18n>detail.frag.title.screateScheme}\">-->\r\n\t\t\t\t\t\t\t\t\t\t<!--\t\t\t\t<layoutData>-->\r\n\t\t\t\t\t\t\t\t\t\t<!--\t\t\t\t\t<l:GridData span=\"XL1 L2 M2 S4\" />-->\r\n\t\t\t\t\t\t\t\t\t\t<!--\t\t\t\t</layoutData>-->\r\n\t\t\t\t\t\t\t\t\t\t<!--\t\t\t</Button>-->\r\n\t\t\t\t\t\t\t\t\t\t<!--\t\t</f:fields>-->\r\n\t\t\t\t\t\t\t\t\t\t<!--\t</f:FormElement>-->\r\n\t\t\t\t\t\t\t\t\t\t<!--\t<f:FormElement visible=\"{= ${oControlModel>/EmergencyAs/visible}}\">-->\r\n\t\t\t\t\t\t\t\t\t\t<!--\t\t<f:label>-->\r\n\t\t\t\t\t\t\t\t\t\t<!--\t\t\t<Label text=\"{i18n>detail.ops.panel.content.label.Emergency}\" required=\"{= ${oControlModel>/EmergencyAs/mandatory}}\"/>-->\r\n\t\t\t\t\t\t\t\t\t\t<!--\t\t</f:label>-->\r\n\t\t\t\t\t\t\t\t\t\t<!--\t\t<f:fields>-->\r\n\t\t\t\t\t\t\t\t\t\t<!--\t\t\t<CheckBox app:bindPath=\"EmergencyAs\" tooltip=\"{= ${EmergencyAs} === true ? ${i18n>tooltip.Emergency} : ${i18n>tooltip.NoEmergency}}\"-->\r\n\t\t\t\t\t\t\t\t\t\t<!--\t\t\t\tselected=\"{EmergencyAs}\" select=\"onFieldChange\" editable=\"{detailView>/bEditable}\"/>-->\r\n\t\t\t\t\t\t\t\t\t\t<!--\t\t</f:fields>-->\r\n\t\t\t\t\t\t\t\t\t\t<!--\t</f:FormElement>-->\r\n\t\t\t\t\t\t\t\t\t\t<!--</f:FormContainer>-->\r\n\t\t\t\t\t\t\t\t\t\t<f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t\t\t<f:FormElement visible=\"{= ${oControlModel>/MigrationInd/visible}}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.label.MigrationInd}\" required=\"{= ${oControlModel>/MigrationInd/mandatory}}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CheckBox app:bindPath=\"MigrationInd\" tooltip=\"{= ${MigrationInd} === true ? ${i18n>tooltip.Migrated} : ${i18n>tooltip.NotMigrated}}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tselected=\"{MigrationInd}\" select=\"onFieldChange\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\teditable=\"{= ${oControlModel>/MigrationInd/display} &amp;&amp; (${detailView>/stateId} !== 'D')}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!--<HBox width=\"40%\">-->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!--<HBox justifyContent=\"SpaceBetween\" width=\"22.5rem\">-->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!--<HBox alignItems=\"Center\" class=\"sapUiMediumMarginEnd\">-->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!--<RadioButton id=\"idNEWGO\" -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!--\ttext=\"G.O.\" select=\"Onselectiongoproceeding\"/>-->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!--</HBox>-->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!--</HBox>-->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!--<HBox justifyContent=\"SpaceBetween\" width=\"22.5rem\">-->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!--<HBox alignItems=\"Center\" class=\"sapUiMediumMarginEnd\">-->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!--<RadioButton id=\"idNEWPROCEEDING\" -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!--\ttext=\"Proceeding\" select=\"Onselectiongoproceeding\"/>-->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!--</HBox>-->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!--</HBox>-->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!--</HBox>-->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CheckBox id=\"idNEWGO\" text=\"G.O.\" selected=\"true\" visible=\"false\" editable=\"false\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CheckBox id=\"idNEWPROCEEDING\" text=\"Proceeding\" visible=\"false\" selected=\"true\" editable=\"false\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t</f:formContainers>\r\n\t\t\t\t\t\t\t\t\t<!--\t<f:FormContainer>-->\r\n\t\t\t\t\t\t\t\t\t<!--<f:formContainers>-->\r\n\t\t\t\t\t\t\t\t\t<!--\t\t\t\t\t<HBox width=\"40%\">-->\r\n\t\t\t\t\t\t\t\t\t<!--\t<HBox justifyContent=\"SpaceBetween\" width=\"22.5rem\">-->\r\n\t\t\t\t\t\t\t\t\t<!--\t\t<HBox alignItems=\"Center\" class=\"sapUiMediumMarginEnd\">-->\r\n\t\t\t\t\t\t\t\t\t<!--\t\t\t<RadioButton id=\"idNEWGO\" -->\r\n\t\t\t\t\t\t\t\t\t<!--\t\t\t\ttext=\"G.O.\" select=\"Onselectiongoproceeding\"/>-->\r\n\t\t\t\t\t\t\t\t\t<!--\t\t</HBox>-->\r\n\t\t\t\t\t\t\t\t\t<!--\t</HBox>-->\r\n\t\t\t\t\t\t\t\t\t<!--\t<HBox justifyContent=\"SpaceBetween\" width=\"22.5rem\">-->\r\n\t\t\t\t\t\t\t\t\t<!--\t\t<HBox alignItems=\"Center\" class=\"sapUiMediumMarginEnd\">-->\r\n\t\t\t\t\t\t\t\t\t<!--\t\t\t<RadioButton id=\"idNEWPROCEEDING\" -->\r\n\t\t\t\t\t\t\t\t\t<!--\t\t\t\ttext=\"Proceeding\" select=\"Onselectiongoproceeding\"/>-->\r\n\t\t\t\t\t\t\t\t\t<!--\t\t</HBox>-->\r\n\t\t\t\t\t\t\t\t\t<!--\t</HBox>-->\r\n\t\t\t\t\t\t\t\t\t<!--</HBox>-->\r\n\t\t\t\t\t\t\t\t\t<!--\t</f:FormContainer>-->\r\n\t\t\t\t\t\t\t\t\t<!--</f:formContainers>-->\r\n\t\t\t\t\t\t\t\t</f:Form>\r\n\t\t\t\t\t\t\t</content>\r\n\t\t\t\t\t\t</Panel>\r\n\t\t\t\t\t</uxap:blocks>\r\n\t\t\t\t</uxap:ObjectPageSubSection>\r\n\t\t\t</uxap:ObjectPageSection>\r\n\t\t\t<!--changes by Lahari-->\r\n\t\t\t<uxap:ObjectPageSection id=\"DW\" title=\"{i18n>detail.ObjPageSection.title.DW}\" showTitle=\"false\" class=\"sapUiLargePaddingBottom\">\r\n\t\t\t\t<uxap:ObjectPageSubSection>\r\n\t\t\t\t\t<uxap:blocks>\r\n\t\t\t\t\t\t<Panel expandable=\"true\" expanded=\"true\" width=\"auto\">\r\n\t\t\t\t\t\t\t<headerToolbar>\r\n\t\t\t\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t\t\t\t<Title text=\"{i18n>detail.ops.panel.content.label.DWork}\"/>\r\n\t\t\t\t\t\t\t\t</Toolbar>\r\n\t\t\t\t\t\t\t</headerToolbar>\r\n\t\t\t\t\t\t\t<content>\r\n\t\t\t\t\t\t\t\t<VBox>\r\n\t\t\t\t\t\t\t\t\t<f:Form editable=\"true\">\r\n\t\t\t\t\t\t\t\t\t\t<f:layout>\r\n\t\t\t\t\t\t\t\t\t\t\t<f:ResponsiveGridLayout labelSpanXL=\"12\" labelSpanL=\"12\" labelSpanM=\"12\" labelSpanS=\"12\" adjustLabelSpan=\"false\" emptySpanXL=\"0\"\r\n\t\t\t\t\t\t\t\t\t\t\t\temptySpanL=\"0\" emptySpanM=\"0\" emptySpanS=\"0\" columnsXL=\"3\" columnsL=\"3\" columnsM=\"3\" singleContainerFullSize=\"false\"/>\r\n\t\t\t\t\t\t\t\t\t\t</f:layout>\r\n\t\t\t\t\t\t\t\t\t\t<f:formContainers>\r\n\t\t\t\t\t\t\t\t\t\t\t<f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:formElements>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<f:FormElement visible=\"{= ${oControlModel>/MainWorkNature/visible}}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.label.MWNature}\" required=\"{= ${oControlModel>/MainWorkNature/mandatory}}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Input showValueHelp=\"true\" id=\"idMainNatureWork\" placeholder=\"{i18n>detail.ops.panel.content.label.PMWNature}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tapp:bindPath=\"MainWorkNature\" app:clearKey=\"MAIN_WORK\" change=\"onSelectChangeDetailWork\" valueHelpOnly=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuggestionItems=\"{ path: '/ZWRK_C_MAINNATUREWORK', events: {dataReceived: '.onSuggestDataReceived'} }\" selectedKey=\"{MainWorkNature}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfilterSuggests=\"true\" showSuggestion=\"true\" suggest=\"handleSuggest\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tenabled=\"{= ${oControlModel>/MainWorkNature/display} &amp;&amp; (${detailView>/stateId} !== 'D')}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueState=\"{oControlModel>/MainWorkNature/valueState}\" valueStateText=\"{oControlModel>/MainWorkNature/valueStateText}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueHelpRequest=\"handleValueHelp\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<customData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"key\" value=\"MN_WRK_CODE\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"text\" value=\"MAIN_WORK\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"SFPersistenceKey\" value=\"MainWork_SF_AS_PersistenceKey\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"reqFields\" value=\"MN_WRK_CODE\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"entityInfo\" value=\"{entitySet: 'ZWRK_C_MAINNATUREWORK', entityType: 'ZWRK_C_MAINNATUREWORKType'}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"filterArray\" value=\"{filter:[]}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"mode\" value=\"SingleSelectMaster\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</customData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<suggestionItems>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:ListItem key=\"{MN_WRK_CODE}\" text=\"{MAIN_WORK}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</suggestionItems>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Input>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<f:FormElement label=\"\" visible=\"{= ${oControlModel>/SubclassL03/visible}}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Label text='{i18n>detail.ops.panel.content.label.SubL03}' required=\"{= ${oControlModel>/SubclassL03/mandatory}}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Input showValueHelp=\"true\" maxSuggestionWidth=\"40rem\" id=\"idSubClass03\" placeholder=\"{i18n>detail.ops.panel.content.label.PSubL03}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tapp:bindPath=\"SubclassL03\" change=\"onSelectChangeDetailWork\" showSuggestion=\"true\" valueHelpOnly=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuggestionItems=\"{ path: '/zwrk_subclass03', events: {dataReceived: '.onSuggestDataReceived'} }\" selectedKey=\"{SubclassL03}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuggest=\"handleSuggest\" enabled=\"{= ${oControlModel>/SubclassL03/display} &amp;&amp; (${detailView>/stateId} !== 'D')}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueState=\"{oControlModel>/SubclassL03/valueState}\" valueStateText=\"{oControlModel>/SubclassL03/valueStateText}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueHelpRequest=\"handleValueHelp\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<customData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"key\" value=\"sb_wrk03_code\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"text\" value=\"sub_work_03\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"SFPersistenceKey\" value=\"SubWork03_SF_AS_PersistenceKey\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"reqFields\" value=\"sb_wrk03_code\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"entityInfo\" value=\"{entitySet: 'zwrk_subclass03', entityType: 'zwrk_subclass03Type'}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"filterArray\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"{filter:[ {key: 'mn_wrk_code', value: 'MainWorkNature'}, {key: 'sb_wrk01_code', value: 'SubclassL01'}, {key: 'sb_wrk02_code', value: 'SubclassL02'} ]}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"mode\" value=\"SingleSelectMaster\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</customData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<suggestionItems>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:ListItem key=\"{sb_wrk03_code}\" text=\"{sub_work_03}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</suggestionItems>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Input>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:formElements>\r\n\t\t\t\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t\t\t<f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:FormElement label=\"\" visible=\"{= ${oControlModel>/SubclassL01/visible}}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Label text='{i18n>detail.ops.panel.content.label.SubL01}' required=\"{= ${oControlModel>/SubclassL01/mandatory}}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Input showValueHelp=\"true\" placeholder=\"{i18n>detail.ops.panel.content.label.PSubL01}\" maxSuggestionWidth=\"40rem\" id=\"idSubClass01\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tapp:bindPath=\"SubclassL01\" app:clearKey=\"sub_work_01\" change=\"onSelectChangeDetailWork\" showSuggestion=\"true\" selectedKey=\"{SubclassL01}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuggestionItems=\"{ path: '/ZWRK_SUBCLASS01', events: {dataReceived: '.onSuggestDataReceived'} }\" suggest=\"handleSuggest\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueHelpOnly=\"true\" enabled=\"{= ${oControlModel>/SubclassL01/display} &amp;&amp; (${detailView>/stateId} !== 'D')}\" filterSuggests=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueState=\"{oControlModel>/SubclassL01/valueState}\" valueStateText=\"{oControlModel>/SubclassL01/valueStateText}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueHelpRequest=\"handleValueHelp\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<customData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"key\" value=\"sb_wrk01_code\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"text\" value=\"sub_work_01\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"SFPersistenceKey\" value=\"SubWork01_SF_AS_PersistenceKey\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"reqFields\" value=\"sb_wrk01_code\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"entityInfo\" value=\"{ entitySet: 'ZWRK_SUBCLASS01', entityType: 'ZWRK_SUBCLASS01Type'}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"filterArray\" value=\"{filter:[{key: 'mn_wrk_code', value: 'MainWorkNature'}]}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"mode\" value=\"SingleSelectMaster\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</customData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<suggestionItems>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:ListItem key=\"{sb_wrk01_code}\" text=\"{sub_work_01}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</suggestionItems>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Input>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t\t\t<f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:FormElement label=\"\" visible=\"{= ${oControlModel>/SubclassL02/visible}}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.label.SubL02}\" required=\"{= ${oControlModel>/SubclassL02/mandatory}}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Input showValueHelp=\"true\" maxSuggestionWidth=\"40rem\" id=\"idSubClass02\" placeholder=\"{i18n>detail.ops.panel.content.label.PSubL02}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tapp:bindPath=\"SubclassL02\" app:clearKey=\"sub_work_02\" change=\"onSelectChangeDetailWork\" selectedKey=\"{SubclassL02}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuggestionItems=\"{ path: '/ZWRK_SUBCLASS02', events: {dataReceived: '.onSuggestDataReceived'} }\" showSuggestion=\"true\" valueHelpOnly=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuggest=\"handleSuggest\" enabled=\"{= ${oControlModel>/SubclassL02/display} &amp;&amp; (${detailView>/stateId} !== 'D')}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueState=\"{oControlModel>/SubclassL02/valueState}\" valueStateText=\"{oControlModel>/SubclassL02/valueStateText}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueHelpRequest=\"handleValueHelp\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<customData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"key\" value=\"sb_wrk02_code\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"text\" value=\"sub_work_02\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"SFPersistenceKey\" value=\"SubWork02_SF_AS_PersistenceKey\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"reqFields\" value=\"sb_wrk02_code\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"entityInfo\" value=\"{entitySet: 'ZWRK_SUBCLASS02', entityType: 'ZWRK_SUBCLASS02Type'}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"filterArray\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"{filter:[ {key: 'mn_wrk_code', value: 'MainWorkNature'}, {key: 'sb_wrk01_code', value: 'SubclassL01'} ]}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"mode\" value=\"SingleSelectMaster\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</customData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<suggestionItems>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:ListItem key=\"{sb_wrk02_code}\" text=\"{sub_work_02}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</suggestionItems>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Input>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:FormElement label=\"\" visible=\"false\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.label.BCRatio}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Input change=\"onFieldChange\" liveChange=\"onFieldLiveChange\" value=\"{BcRatio}\" textAlign=\"Right\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\teditable=\"{= ${oControlModel>/BcRatio/display} &amp;&amp; (${detailView>/stateId} !== 'D')}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueState=\"{= ${oControlModel>/BcRatio/valueState}}\" valueStateText=\"{= ${oControlModel>/BcRatio/valueStateText}}\" tooltip=\"{BcRatio}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t\t</f:formContainers>\r\n\t\t\t\t\t\t\t\t\t</f:Form>\r\n\t\t\t\t\t\t\t\t</VBox>\r\n\t\t\t\t\t\t\t</content>\r\n\t\t\t\t\t\t</Panel>\r\n\t\t\t\t\t</uxap:blocks>\r\n\t\t\t\t</uxap:ObjectPageSubSection>\r\n\t\t\t</uxap:ObjectPageSection>\r\n\t\t\t<!--changes ended by lahari-->\r\n\t\t\t<uxap:ObjectPageSection id=\"UA\" title=\"{i18n>detail.ObjPageSection.title.UA}\" showTitle=\"false\" visible=\"{detailView>/bUAVisible}\">\r\n\t\t\t\t<uxap:ObjectPageSubSection>\r\n\t\t\t\t\t<uxap:blocks>\r\n\t\t\t\t\t\t<Panel expandable=\"true\" expanded=\"true\">\r\n\t\t\t\t\t\t\t<headerToolbar>\r\n\t\t\t\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t\t\t\t<Title text=\"{i18n>detail.ObjPageSection.title.UA}\"/>\r\n\t\t\t\t\t\t\t\t</Toolbar>\r\n\t\t\t\t\t\t\t</headerToolbar>\r\n\t\t\t\t\t\t\t<content>\r\n\t\t\t\t\t\t\t\t<f:Form editable=\"true\">\r\n\t\t\t\t\t\t\t\t\t<f:layout>\r\n\t\t\t\t\t\t\t\t\t\t<f:ResponsiveGridLayout labelSpanXL=\"12\" labelSpanL=\"12\" labelSpanM=\"12\" labelSpanS=\"12\" adjustLabelSpan=\"false\" emptySpanXL=\"0\"\r\n\t\t\t\t\t\t\t\t\t\t\temptySpanL=\"0\" emptySpanM=\"0\" emptySpanS=\"0\" columnsXL=\"3\" columnsL=\"3\" columnsM=\"3\" singleContainerFullSize=\"false\"/>\r\n\t\t\t\t\t\t\t\t\t</f:layout>\r\n\t\t\t\t\t\t\t\t\t<f:formContainers>\r\n\t\t\t\t\t\t\t\t\t\t<f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t\t\t<f:formElements>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:FormElement visible=\"{= ${oControlModel>/Agency/visible}}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.sf.label.Agency}\" required=\"{= ${oControlModel>/Agency/mandatory}}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Input change=\"onFieldChange\" placeholder=\"{i18n>detail.ops.panel.content.sf.label.PAgency}\" liveChange=\"onFieldLiveChange\" value=\"{Agency}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\teditable=\"{= ${oControlModel>/Agency/display} &amp;&amp; (${detailView>/stateId} !== 'D')}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueState=\"{= ${oControlModel>/Agency/valueState}}\" valueStateText=\"{= ${oControlModel>/Agency/valueStateText}}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaxLength=\"{oControlModel>/Agency/maxLength}\" type=\"{oControlModel>/Agency/type}\" tooltip=\"{Agency}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:FormElement visible=\"{= ${oControlModel>/ValueSactioned/visible}}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.sf.label.VldSanctions}\" required=\"{= ${oControlModel>/ValueSactioned/mandatory}}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Input change=\"onFieldChange\" placeholder=\"{i18n>detail.ops.panel.content.sf.label.PVldSanctions}\" liveChange=\"onFieldLiveChange\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tapp:bindPath=\"ValueSactioned\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"{path:'ValueSactioned', type: 'sap.ui.model.odata.type.Decimal', formatOptions: {groupingSize: 2, groupingBaseSize: 3, maxIntegerDigits: 12}, constraints: {precision: 12, scale: 2}}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttextAlign=\"Right\" editable=\"{= ${oControlModel>/ValueSactioned/display} &amp;&amp; (${detailView>/stateId} !== 'D')}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueState=\"{= ${oControlModel>/ValueSactioned/valueState}}\" valueStateText=\"{= ${oControlModel>/ValueSactioned/valueStateText}}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttooltip=\"{ValueSanctioned}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Input change=\"onFieldChange\" liveChange=\"onFieldLiveChange\" value=\"{CurrencySanctioned}\" showValueHelp=\"true\" showSuggestion=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueHelpRequest=\"handleCurrValueHelp\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\teditable=\"{= ${oControlModel>/CurrencySanctioned/display} &amp;&amp; (${detailView>/stateId} !== 'D')}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueState=\"{= ${oControlModel>/CurrencySanctioned/valueState}}\" valueStateText=\"{= ${oControlModel>/CurrencySanctioned/valueStateText}}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaxLength=\"{oControlModel>/CurrencySanctioned/maxLength}\" type=\"{oControlModel>/CurrencySanctioned/type}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuggestionItems=\"{/ZWRK_C_CURRNKEY}\" tooltip=\"{CurrencySanctioned}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<suggestionItems>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:Item key=\"{waers}\" text=\"{ktext}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</suggestionItems>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<layoutData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<l:GridData span=\"XL4 L4 M4 S4\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</layoutData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Input>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t\t</f:formElements>\r\n\t\t\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t\t<f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t\t\t<f:formElements>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:FormElement visible=\"{= ${oControlModel>/RefOrdnum/visible}}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.sf.label.RefOrderNo}\" required=\"{= ${oControlModel>/RefOrdnum/mandatory}}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Input change=\"onFieldChange\" placeholder=\"{i18n>detail.ops.panel.content.sf.label.PRefOrderNo}\" liveChange=\"onFieldLiveChange\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"{RefOrdnum}\" editable=\"{= ${oControlModel>/RefOrdnum/display} &amp;&amp; (${detailView>/stateId} !== 'D')}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueState=\"{= ${oControlModel>/RefOrdnum/valueState}}\" valueStateText=\"{= ${oControlModel>/RefOrdnum/valueStateText}}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaxLength=\"{oControlModel>/RefOrdnum/maxLength}\" type=\"{oControlModel>/RefOrdnum/type}\" tooltip=\"{RefOrdnum}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:FormElement visible=\"{detailView>/bUAVisible}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.label.DCWType}\" required=\"{detailView>/bUAVisible}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Select app:bindPath=\"DcwType\" id=\"idDcwType\" change=\"onSelectChange\" selectedKey=\"{DcwType}\" items=\"{/ZWRK_C_DCWSELECT}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tforceSelection=\"true\" enabled=\"{= ${detailView>/bUAVisible} &amp;&amp; (${detailView>/stateId} !== 'D')}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:Item text=\"{Selection_Type}\" key=\"{DCW_Selection_ID}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</items>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t\t</f:formElements>\r\n\t\t\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t\t<f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t\t\t<f:formElements>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:FormElement visible=\"{= ${oControlModel>/RefDate/visible}}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.sf.label.Date}\" required=\"{= ${oControlModel>/RefDate/mandatory}}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<DatePicker change=\"onFieldChange\" placeholder=\"{i18n>detail.ops.panel.content.sf.label.PDate}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"{path:'RefDate', type:'sap.ui.model.type.Date', formatOptions: { style: 'medium', strictParsing: true, UTC: true}}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\teditable=\"{= ${oControlModel>/RefDate/display} &amp;&amp; (${detailView>/stateId} !== 'D')}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t\t</f:formElements>\r\n\t\t\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t</f:formContainers>\r\n\t\t\t\t\t\t\t\t</f:Form>\r\n\t\t\t\t\t\t\t\t<Table id=\"idWorksSrcHoA\" inset=\"false\" mode=\"None\" growing=\"true\" growingThreshold=\"999\"\r\n\t\t\t\t\t\t\t\t\tnoDataText=\"{= ${detailView>/bOwnDCW} ? ${i18n>detail.ops.panel.content.table.source.noDataNeeded} : ${i18n>detail.ops.panel.content.table.source.noData}}\"\r\n\t\t\t\t\t\t\t\t\titems=\"{WrkDcwHOADDO}\">\r\n\t\t\t\t\t\t\t\t\t<headerToolbar>\r\n\t\t\t\t\t\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t\t\t\t\t\t<content>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Title text=\"{i18n>detail.ops.panel.content.table.source.title}({detailView>/SrcDDOTableRowCount})\" level=\"H2\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<ToolbarSpacer/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<!--<Button icon=\"sap-icon://add\" tooltip=\"{i18n>tooltip.addToTable}\" type=\"Transparent\" press=\"addNewRowSrcDDOs\"-->\r\n\t\t\t\t\t\t\t\t\t\t\t\t<!--\tvisible=\"{= (((${DcwType} === '02') || (${Category} === '02')) &amp;&amp; (((${detailView>/stateId} !== 'D') &amp;&amp; (${Status} === 'E0001')) || (${detailView>/stateId} === 'E')) ? true: false)}\"/>-->\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button icon=\"sap-icon://add\" tooltip=\"{i18n>tooltip.addToTable}\" type=\"Transparent\" press=\"addNewRowSrcDDOs\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvisible=\"{= ((${DcwType} === '02' ? true: false) &amp;&amp; (((${detailView>/stateId} !== 'D') &amp;&amp; (${Status} === 'E0001')) || (${detailView>/stateId} === 'C')) ? true: false)}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t</content>\r\n\t\t\t\t\t\t\t\t\t\t</Toolbar>\r\n\t\t\t\t\t\t\t\t\t</headerToolbar>\r\n\t\t\t\t\t\t\t\t\t<columns>\r\n\t\t\t\t\t\t\t\t\t\t<Column visible=\"false\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{i18n>detail.ops.panel.content.table.column.text.DDO}\"/>\r\n\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t<Column width=\"2rem\" hAlign=\"Center\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{i18n>detail.ops.panel.content.table.column.text.ItemNo}\"/>\r\n\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t<Column width=\"6rem\" hAlign=\"Center\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.table.column.text.srcDDO}\" required=\"{= ${oControlModel>/SourceDdo/mandatory}}\"/>\r\n\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t<Column width=\"9rem\" hAlign=\"Center\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.table.column.text.srcHOA}\" required=\"{= ${oControlModel>/SourceHoa/mandatory}}\"/>\r\n\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t<Column width=\"6rem\" hAlign=\"Center\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.table.column.text.FundAgency}\"/>\r\n\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t<!-- <Column width=\"3rem\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{i18n>detail.ops.panel.content.table.column.text.Share}\" />\r\n\t\t\t\t\t\t\t\t\t\t</Column> -->\r\n\t\t\t\t\t\t\t\t\t\t<!-- <Column width=\"6rem\" hAlign=\"Center\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{i18n>detail.ops.panel.content.table.column.text.      s\r\n\t\t\t\t\t\t\t\t\t\t\t' }\" />\r\n\t\t\t\t\t\t\t\t\t\t</Column> -->\r\n\t\t\t\t\t\t\t\t\t\t<Column width=\"6rem\" hAlign=\"Center\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{i18n>detail.ops.panel.content.table.column.text.validFrom}\"/>\r\n\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t<Column width=\"6rem\" hAlign=\"Center\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{i18n>detail.ops.panel.content.table.column.text.validTo}\"/>\r\n\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t<Column width=\"1rem\" visible=\"{= (${detailView>/stateId} !== 'D') &amp;&amp; (${detailView>/SubmitBtnVisibility} === 'X' ? true: false)}\"\r\n\t\t\t\t\t\t\t\t\t\t\thAlign=\"Center\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{i18n>detail.ops.panel.content.table.column.text.delete}\"/>\r\n\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t</columns>\r\n\t\t\t\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t\t\t\t<ColumnListItem id=\"idSrcHoaListItem\">\r\n\t\t\t\t\t\t\t\t\t\t\t<cells>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{HoaGuid}\" visible=\"false\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Input value=\"{ItemNo}\" tooltip=\"{ItemNo}\" editable=\"false\" textAlign=\"Right\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Input id=\"SourceDdo\" placeholder=\"{i18n>detail.ops.panel.content.table.column.text.PsrcDDO}\" change=\"onSrcDdoChange\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tapp:bindPath=\"SourceDdo\" value=\"{DdoDes}\" required=\"{= ${oControlModel>/SourceDdo/mandatory}}\" showValueHelp=\"true\" valueHelpOnly=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalueHelpRequest=\"handleDDOValueHelp\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\teditable=\"{= ${oControlModel>/SourceDdo/display} &amp;&amp; (${detailView>/stateId} !== 'D') &amp;&amp; (${detailView>/SubmitBtnVisibility} === 'X' ? true: false)}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalueState=\"{oControlModel>/SourceDdo/valueState}\" valueStateText=\"{oControlModel>/SourceDdo/valueStateText}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmaxLength=\"{oControlModel>/SourceDdo/maxLength}\" type=\"{oControlModel>/SourceDdo/type}\" tooltip=\"{SourceDdo}\"></Input>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Input id=\"SourceHoa\" change=\"onSrcDdoChange\" placeholder=\"{i18n>detail.ops.panel.content.table.column.text.PsrcHOA}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tapp:bindPath=\"SourceHoa\" value=\"{SourceHoa}\" required=\"{= ${oControlModel>/SourceHoa/mandatory}}\" showValueHelp=\"true\" valueHelpOnly=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalueHelpRequest=\"handleHoaValueHelp\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\teditable=\"{= ${oControlModel>/SourceHoa/display} &amp;&amp; (${detailView>/stateId} !== 'D') &amp;&amp; (${detailView>/SubmitBtnVisibility} === 'X' ? true: false)}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalueState=\"{= ${oControlModel>/SourceHoa/valueState}}\" valueStateText=\"{oControlModel>/SourceHoa/valueStateText}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmaxLength=\"{oControlModel>/SourceHoa/maxLength}\" type=\"{oControlModel>/Hoa/type}\" tooltip=\"{SourceHoa}\"></Input>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Input editable=\"false\" value=\"{FundAgencyDesc}\" tooltip=\"{FundAgencyDesc}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<!-- <Input change=\"onSrcDdoShareChange\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"{SourceZShare}\" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\teditable=\"{= ${oControlModel>/SourceZShare/display} &amp;&amp; (${detailView>/stateId} !== 'D') &amp;&amp; (${detailView>/SubmitBtnVisibility} === 'X' ? true: false)}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalueState=\"{= ${oControlModel>/SourceZShare/valueState}}\" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalueStateText=\"{= ${oControlModel>/SourceZShare/valueStateText}}\" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmaxLength=\"{oControlModel>/SourceZShare/maxLength}\" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"{oControlModel>/SourceZShare/type}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttextDirection=\"LTR\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttextAlign=\"Right\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttooltip=\"{SourceZShare}\"/> -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t<!-- <Input id=\"idPicCode\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tchange=\"onSrcDdoChange\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tapp:bindPath=\"PicCode\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"{PicsCode}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\trequired=\"{= ${oControlModel>/PicsCode/mandatory}}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tshowValueHelp=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalueHelpOnly=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalueHelpRequest=\"handlePicCodeValueHelp\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\teditable=\"{= ${oControlModel>/PicsCode/display} &amp;&amp; (${detailView>/stateId} !== 'D') &amp;&amp; (${detailView>/SubmitBtnVisibility} === 'X' ? true: false) &amp;&amp; (${PicsCode} !== '' ? true : false)}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalueState=\"{oControlModel>/PicsCode/valueState}\" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalueStateText=\"{oControlModel>/PicsCode/valueStateText}\" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmaxLength=\"{oControlModel>/PicsCode/maxLength}\" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"{oControlModel>/PicsCode/type}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttooltip=\"{PicsCode}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Input> -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t<DatePicker change=\"onSrcDdoChange\" id=\"SourceValidFrom\" placeholder=\"{i18n>detail.ops.panel.content.table.column.text.PvalidFrom}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tapp:bindPath=\"SourceValidFrom\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"{path:'SourceValidFrom', type:'sap.ui.model.type.Date', formatOptions: { style: 'medium', strictParsing: true, UTC: true}}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\teditable=\"{= (${detailView>/stateId} !== 'D') &amp;&amp; (${detailView>/SubmitBtnVisibility} === 'X' ? true: false)}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<DatePicker change=\"onSrcDdoChange\" id=\"SourceValidTo\" placeholder=\"{i18n>detail.ops.panel.content.table.column.text.PvalidTo}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tapp:bindPath=\"SourceValidTo\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"{path:'SourceValidTo', type:'sap.ui.model.type.Date', formatOptions: { style: 'medium', strictParsing: true, UTC: true}}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\teditable=\"{= (${detailView>/stateId} !== 'D') &amp;&amp; (${detailView>/SubmitBtnVisibility} === 'X' ? true: false)}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button icon=\"sap-icon://delete\" tooltip=\"{i18n>tooltip.delFromTable}\" type=\"Transparent\" press=\"onSourceDeleteDDO\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvisible=\"{= (${detailView>/stateId} !== 'D') &amp;&amp; (${detailView>/SubmitBtnVisibility} === 'X' ? true: false)}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t</cells>\r\n\t\t\t\t\t\t\t\t\t\t</ColumnListItem>\r\n\t\t\t\t\t\t\t\t\t</items>\r\n\t\t\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t\t\t</content>\r\n\t\t\t\t\t\t</Panel>\r\n\t\t\t\t\t</uxap:blocks>\r\n\t\t\t\t</uxap:ObjectPageSubSection>\r\n\t\t\t</uxap:ObjectPageSection>\r\n\t\t\t<!--changes by Lahari-->\r\n\t\t\t<uxap:ObjectPageSection id=\"idDepartment\" title=\"{i18n>detail.ObjPageSection.title.Department}\" showTitle=\"false\"\r\n\t\t\t\tclass=\"sapUiLargePaddingBottom\">\r\n\t\t\t\t<uxap:ObjectPageSubSection>\r\n\t\t\t\t\t<uxap:blocks>\r\n\t\t\t\t\t\t<Panel expandable=\"true\" expanded=\"true\" width=\"auto\">\r\n\t\t\t\t\t\t\t<headerToolbar>\r\n\t\t\t\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t\t\t\t<Title text=\"{i18n>detail.ops.panel.content.label.Deptment}\"/>\r\n\t\t\t\t\t\t\t\t</Toolbar>\r\n\t\t\t\t\t\t\t</headerToolbar>\r\n\t\t\t\t\t\t\t<content>\r\n\t\t\t\t\t\t\t\t<VBox>\r\n\t\t\t\t\t\t\t\t\t<f:Form editable=\"true\">\r\n\t\t\t\t\t\t\t\t\t\t<f:layout>\r\n\t\t\t\t\t\t\t\t\t\t\t<f:ResponsiveGridLayout class=\"noPadding\" labelSpanXL=\"12\" labelSpanL=\"12\" labelSpanM=\"12\" labelSpanS=\"12\" emptySpanXL=\"0\" emptySpanL=\"0\"\r\n\t\t\t\t\t\t\t\t\t\t\t\temptySpanM=\"0\" emptySpanS=\"0\" columnsXL=\"3\" columnsL=\"3\" columnsM=\"3\"/>\r\n\t\t\t\t\t\t\t\t\t\t</f:layout>\r\n\t\t\t\t\t\t\t\t\t\t<!--changes added by lahari-->\r\n\t\t\t\t\t\t\t\t\t\t<!--<f:formContainers>-->\r\n\t\t\t\t\t\t\t\t\t\t<f:FormContainer >\r\n\t\t\t\t\t\t\t\t\t\t\t<f:FormElement visible=\"{= ${oControlModel>/Category/visible}}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.label.Catogery}\" required=\"{= ${oControlModel>/Category/mandatory}}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Select app:bindPath=\"Category\" app:clearKey=\"Category\" id=\"idCategory\" change=\"onSelectChangeCategory\" selectedKey=\"{Category}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tforceSelection=\"false\" enabled=\"{= ${oControlModel>/Category/display} &amp;&amp; (${detailView>/stateId} !== 'D')}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueState=\"{= ${oControlModel>/Category/valueState}}\" valueStateText=\"{= ${oControlModel>/Category/valueStateText}}\"></Select>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t\t<f:FormContainer >\r\n\t\t\t\t\t\t\t\t\t\t\t<f:FormElement label=\"\" visible=\"{= ${oControlModel>/Scheme/visible}}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.label.Scheme}\" required=\"{= ${oControlModel>/Scheme/mandatory}}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Select id=\"idSchemeCode\" app:bindPath=\"Scheme\" change=\"onSelectChange\" items=\"{path: '/ZWRK_C_SCHEMES', sorter:{path:'schemdesc'}}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tselectedKey=\"{Scheme}\" enabled=\"{= ${oControlModel>/Scheme/display} &amp;&amp; (${detailView>/stateId} !== 'D')}\" forceSelection=\"false\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueState=\"{= ${oControlModel>/Scheme/valueState}}\" valueStateText=\"{= ${oControlModel>/Scheme/valueStateText}}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:Item text=\"{schemdesc}\" key=\"{schemeid}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</items>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button visible=\"{= ${oControlModel>/Scheme/display} &amp;&amp; (${detailView>/stateId} !== 'D')}\" press=\"_handlePressAddNewScheme\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ticon=\"sap-icon://add\" tooltip=\"{i18n>detail.frag.title.screateScheme}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<layoutData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<l:GridData span=\"XL1 L2 M2 S4\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</layoutData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t\t<!--<f:FormElement visible=\"{= ${oControlModel>/EmergencyAs/visible}}\">-->\r\n\t\t\t\t\t\t\t\t\t\t\t<!--\t<f:label>-->\r\n\t\t\t\t\t\t\t\t\t\t\t<!--\t\t<Label text=\"{i18n>detail.ops.panel.content.label.Emergency}\" required=\"{= ${oControlModel>/EmergencyAs/mandatory}}\"/>-->\r\n\t\t\t\t\t\t\t\t\t\t\t<!--\t</f:label>-->\r\n\t\t\t\t\t\t\t\t\t\t\t<!--\t<f:fields>-->\r\n\t\t\t\t\t\t\t\t\t\t\t<!--\t\t<CheckBox app:bindPath=\"EmergencyAs\" tooltip=\"{= ${EmergencyAs} === true ? ${i18n>tooltip.Emergency} : ${i18n>tooltip.NoEmergency}}\"-->\r\n\t\t\t\t\t\t\t\t\t\t\t<!--\t\t\tselected=\"{EmergencyAs}\" select=\"onFieldChange\" editable=\"{detailView>/bEditable}\"/>-->\r\n\t\t\t\t\t\t\t\t\t\t\t<!--\t</f:fields>-->\r\n\t\t\t\t\t\t\t\t\t\t\t<!--</f:FormElement>-->\r\n\t\t\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t\t<!--</f:formContainers>-->\r\n\t\t\t\t\t\t\t\t\t\t<!--changes ended by lahari-->\r\n\t\t\t\t\t\t\t\t\t\t<f:formContainers>\r\n\t\t\t\t\t\t\t\t\t\t\t<!-- <f:FormContainer >\r\n\t\t\t\t\t\t\t\t\t\t\t<f:FormElement label=\"\" visible=\"{= ${oControlModel>/Udf1/visible}}\">\r\n                                                    <f:label>\r\n                                                        <Label text='{i18n>detail.ops.panel.content.label.Position}' required=\"{= ${oControlModel>/Udf1/mandatory}}\"/>\r\n                                                    </f:label>\r\n                                                    <f:fields>\r\n                                                        <Input change=\"onFieldChange\" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tliveChange=\"onFieldLiveChange\"\r\n                                                        app:bindPath=\"Position\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"{Udf1}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowValueHelp=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueHelpOnly=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueHelpRequest=\"handlePositionValueHelp\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\teditable=\"{= (${oControlModel>/Udf1/display} &amp;&amp; ${detailView>/stateId} !== 'D' &amp;&amp; ${detailView>/WfRole} === 'M') ? true :false }\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueState=\"{= ${oControlModel>/Udf1/valueState}}\" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueStateText=\"{= ${oControlModel>/Udf1/valueStateText}}\" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttemplateShareable= \"false\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"idUserPosition\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Input>\r\n                                                    </f:fields>\r\n                                                </f:FormElement>\r\n                                            </f:FormContainer > -->\r\n\t\t\t\t\t\t\t\t\t\t\t<f:FormContainer >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<!-- <f:title>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<core:Title text=\"{i18n>detail.ops.panel.content.form.formContainer.title.department}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</f:title> -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:FormElement label=\"\" visible=\"{= ${oControlModel>/InitiatinDept/visible}}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Label text='{i18n>detail.ops.panel.content.label.InitDept}' required=\"{= ${oControlModel>/InitiatinDept/mandatory}}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Select id=\"idInitDept\" items=\"{path:'/Zwrk_AS_Sanc_Dept', sorter:{ path:'Department'}}\" change=\"onSelectChangeSanctDept\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tselectedKey=\"{InitiatinDept}\" valueState=\"{= ${oControlModel>/InitiatinDept/valueState}}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueStateText=\"{= ${oControlModel>/InitiatinDept/valueStateText}}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tenabled=\"{= ${oControlModel>/InitiatinDept/display} &amp;&amp; (${detailView>/stateId} !== 'D') &amp;&amp; !${MigrationInd}}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tforceSelection=\"false\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:Item text=\"{Department} : {Depart_name}\" key=\"{Department}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</items>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t\t\t<f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<!-- <f:title>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<core:Title />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:title> -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:FormElement visible=\"{= ${oControlModel>/ExecutingDept/visible}}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.label.ExeDept}\" required=\"{= ${oControlModel>/ExecutingDept/mandatory}}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!--<Input id=\"idExecDept\" showValueHelp=\"true\" value=\"{DDO}\" name=\"DDOCode\" valueHelpOnly=\"true\" valueHelpRequest=\"oHandelHOAF4Help\" editable=\"true\"/>-->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Select app:bindPath=\"ExecutingDept\" app:clearKey=\"ExecutingDept\" id=\"idExecDept\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titems=\"{path:'/ZWRK_C_EXECDEPTLIST', sorter:{ path:'fictr'}}\" change=\"onSelectChangeExectDept\" selectedKey=\"{ExecutingDept}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tenabled=\"{= ${detailView>/bEditExectDept} &amp;&amp; (${detailView>/stateId} !== 'D')}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueState=\"{= ${oControlModel>/ExecutingDept/valueState}}\" valueStateText=\"{= ${oControlModel>/ExecutingDept/valueStateText}}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tforceSelection=\"false\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:Item text=\"{fictr} : {beschr}\" key=\"{fictr}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</items>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t\t\t<f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:FormElement >\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<f:fields></f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t\t</f:formContainers>\r\n\t\t\t\t\t\t\t\t\t</f:Form>\r\n\t\t\t\t\t\t\t\t\t<!-- <VBox id=\"idTgtHoa\">\r\n\t\t\t\t\t\t\t\t\t</VBox> -->\r\n\t\t\t\t\t\t\t\t\t<Table id=\"idWorksHoA\" inset=\"false\" mode=\"None\" items=\"{WrkASHOA}\" growing=\"true\" growingThreshold=\"999\">\r\n\t\t\t\t\t\t\t\t\t\t<headerToolbar>\r\n\t\t\t\t\t\t\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<content>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Title text=\"{i18n>detail.ops.panel.content.table.hoaddo.title}({detailView>/DDOTableRowCount})\" level=\"H2\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ToolbarSpacer/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button icon=\"sap-icon://add\" tooltip=\"{i18n>tooltip.addToTable}\" type=\"Transparent\" press=\"addNewRowDDOs\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvisible=\"{= ((${detailView>/stateId} !== 'D') || (${detailView>/stateId} === 'C')) ? true: false}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</content>\r\n\t\t\t\t\t\t\t\t\t\t\t</Toolbar>\r\n\t\t\t\t\t\t\t\t\t\t</headerToolbar>\r\n\t\t\t\t\t\t\t\t\t\t<columns>\r\n\t\t\t\t\t\t\t\t\t\t\t<Column visible=\"false\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.table.column.text.DDO}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t\t<Column width=\"2.7rem\" hAlign=\"Center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.table.column.text.ItemNo}\" wrapping=\"true\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t\t<Column width=\"6rem\" hAlign=\"Center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.table.column.text.DDO}\" wrapping=\"true\" required=\"true\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t\t<Column width=\"9rem\" hAlign=\"Center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.table.column.text.HeadOfAccount}\" wrapping=\"true\" required=\"true\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t\t<Column width=\"3rem\" hAlign=\"Center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.table.column.text.Share}\" wrapping=\"true\" required=\"true\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t\t<Column width=\"3rem\" visible=\"false\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.table.column.text.RefNum}\" wrapping=\"true\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t\t<Column width=\"6rem\" hAlign=\"Center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.table.column.text.FundAgency}\" wrapping=\"true\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t\t<Column width=\"6rem\" hAlign=\"Center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.table.column.text.validFrom}\" wrapping=\"true\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t\t<Column width=\"6rem\" hAlign=\"Center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.table.column.text.validTo}\" wrapping=\"true\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t\t<Column width=\"1.6rem\" visible=\"{= ${detailView>/bEditable}? true: false}\" hAlign=\"Center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.table.column.text.delete}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t</columns>\r\n\t\t\t\t\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t\t\t\t\t<ColumnListItem id=\"idHoaListItem\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<cells>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{HoaGuid}\" visible=\"false\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Input value=\"{ItemNo}\" tooltip=\"{ItemNo}\" editable=\"false\" textAlign=\"Right\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Input change=\"onDdoChange\" app:bindPath=\"Ddo\" placeholder=\"{i18n>detail.ops.panel.content.table.column.text.PDDO}\" value=\"{DdoDes}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trequired=\"{= ${oControlModel>/Ddo/mandatory}}\" showValueHelp=\"true\" valueHelpOnly=\"true\" valueHelpRequest=\"handleDDOValueHelp\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\teditable=\"{= ${oControlModel>/Ddo/display} &amp;&amp; (${detailView>/stateId} !== 'D') ? true: false}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueState=\"{oControlModel>/Ddo/valueState}\" valueStateText=\"{oControlModel>/Ddo/valueStateText}\" maxLength=\"{oControlModel>/Ddo/maxLength}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"{oControlModel>/Ddo/type}\" tooltip=\"{Ddo}\" id=\"Ddo\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Input change=\"onDdoChange\" app:bindPath=\"Hoa\" placeholder=\"{i18n>detail.ops.panel.content.table.column.text.PHeadOfAccount}\" value=\"{Hoa}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trequired=\"{= ${oControlModel>/Hoa/mandatory}}\" showValueHelp=\"true\" valueHelpOnly=\"true\" valueHelpRequest=\"handleHoaValueHelp\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\teditable=\"{= ${oControlModel>/Hoa/display} &amp;&amp; (${detailView>/stateId} !== 'D') ? true: false}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueState=\"{= ${oControlModel>/Hoa/valueState}}\" valueStateText=\"{oControlModel>/Hoa/valueStateText}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaxLength=\"{oControlModel>/Hoa/maxLength}\" type=\"{oControlModel>/Hoa/type}\" tooltip=\"{Hoa}\" id=\"Hoa\"></Input>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Input change=\"onDdoShareChange\" placeholder=\"{i18n>detail.ops.panel.content.table.column.text.PShare}\" liveChange=\"onDdoShareLiveChange\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"{Zshare}\" editable=\"{= ${oControlModel>/Zshare/display} &amp;&amp; (${detailView>/stateId} !== 'D') ? true: false}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueState=\"{= ${oControlModel>/Zshare/valueState}}\" valueStateText=\"{= ${oControlModel>/Zshare/valueStateText}}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaxLength=\"{oControlModel>/Zshare/maxLength}\" type=\"{oControlModel>/Zshare/type}\" textAlign=\"Right\" tooltip=\"{Zshare}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Input change=\"onDdoChange\" value=\"{RefNumber}\" visible=\"false\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\teditable=\"{= ${oControlModel>/RefNumber/display} &amp;&amp; (${detailView>/stateId} !== 'D') ? true: false}\" liveChange=\"onFieldLiveChange\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueState=\"{= ${oControlModel>/RefNumber/valueState}}\" valueStateText=\"{= ${oControlModel>/RefNumber/valueStateText}}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaxLength=\"{oControlModel>/RefNumber/maxLength}\" type=\"{oControlModel>/RefNumber/type}\" textAlign=\"Right\" tooltip=\"{RefNumber}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Input editable=\"false\" value=\"{FundAgencyDesc}\" tooltip=\"{FundAgencyDesc}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<DatePicker id=\"ValidFrom\" app:bindPath=\"ValidFrom\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"{path:'ValidFrom', type:'sap.ui.model.type.Date', formatOptions: { style: 'medium', strictParsing: true, UTC: true}}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tchange=\"onDdoChange\" editable=\"false\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!--valid from changed to non editable- cfms_ctm_npv(08_02_23)-->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!--  old code editable=\"{= (${detailView>/stateId} !== 'D')? true: false}\"-->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<DatePicker id=\"ValidTo\" app:bindPath=\"ValidTo\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"{path:'ValidTo', type:'sap.ui.model.type.Date', formatOptions: { style: 'medium', strictParsing: true, UTC: true}}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tchange=\"onDdoChange\" editable=\"{= (${detailView>/stateId} !== 'D') ? true: false}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button icon=\"sap-icon://delete\" tooltip=\"{i18n>tooltip.delFromTable}\" type=\"Transparent\" press=\"onDeleteDDO\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvisible=\"{= (${detailView>/stateId} !== 'D') ? true: false}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</cells>\r\n\t\t\t\t\t\t\t\t\t\t\t</ColumnListItem>\r\n\t\t\t\t\t\t\t\t\t\t</items>\r\n\t\t\t\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t\t\t\t</VBox>\r\n\t\t\t\t\t\t\t</content>\r\n\t\t\t\t\t\t</Panel>\r\n\t\t\t\t\t</uxap:blocks>\r\n\t\t\t\t</uxap:ObjectPageSubSection>\r\n\t\t\t</uxap:ObjectPageSection>\r\n\t\t\t<uxap:ObjectPageSection id=\"idEst\" title=\"{i18n>detail.ObjPageSection.title.Est}\" showTitle=\"false\">\r\n\t\t\t\t<uxap:ObjectPageSubSection>\r\n\t\t\t\t\t<uxap:blocks>\r\n\t\t\t\t\t\t<Panel expandable=\"true\" expanded=\"true\" width=\"auto\">\r\n\t\t\t\t\t\t\t<headerToolbar>\r\n\t\t\t\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t\t\t\t<Title text=\"{i18n>detail.ObjPageSection.title.Est}\"/>\r\n\t\t\t\t\t\t\t\t</Toolbar>\r\n\t\t\t\t\t\t\t</headerToolbar>\r\n\t\t\t\t\t\t\t<content>\r\n\t\t\t\t\t\t\t\t<Table id=\"idWorksEstim\" inset=\"false\" mode=\"None\" items=\"{WrkASEstimates}\" growing=\"true\" growingScrollToLoad=\"true\" growingThreshold=\"999\">\r\n\t\t\t\t\t\t\t\t\t<headerToolbar>\r\n\t\t\t\t\t\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t\t\t\t\t\t<content>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Title text=\"{i18n>detail.ops.panel.content.table.Title}({detailView>/ESTTableRowCount})\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<ToolbarSpacer/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button icon=\"sap-icon://add\" tooltip=\"{i18n>tooltip.addToTable}\" type=\"Transparent\" width=\"5rem\" press=\"onAddNewEstimation\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvisible=\"{= (${detailView>/stateId} !== 'D') &amp;&amp; (${detailView>/SubmitBtnVisibility} === 'X' ? true: false)}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<!-- <Button icon=\"sap-icon://delete\" press=\"onDeleteEstimate\" visible=\"{= (${detailView>/stateId} !== 'D') &amp;&amp; (${detailView>/SubmitBtnVisibility} === 'X' ? true: false)}\"/> -->\r\n\t\t\t\t\t\t\t\t\t\t\t</content>\r\n\t\t\t\t\t\t\t\t\t\t</Toolbar>\r\n\t\t\t\t\t\t\t\t\t</headerToolbar>\r\n\t\t\t\t\t\t\t\t\t<columns>\r\n\t\t\t\t\t\t\t\t\t\t<Column hAlign=\"Center\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{i18n>detail.ops.panel.content.table.column.text.EstimateId}\"/>\r\n\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t<Column hAlign=\"Center\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{i18n>detail.ops.panel.content.table.column.text.EstimateType}\" textDirection=\"RTL\"/>\r\n\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t<Column hAlign=\"Center\" visible=\"false\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{i18n>detail.ops.panel.content.table.column.text.Desc}\" textDirection=\"RTL\"/>\r\n\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t<Column hAlign=\"Center\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{i18n>detail.ops.panel.content.table.column.text.Desc}\" textDirection=\"RTL\"/>\r\n\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t<Column hAlign=\"End\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{i18n>detail.ops.panel.content.table.column.text.Value}\" textDirection=\"RTL\"/>\r\n\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t<Column hAlign=\"Center\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{i18n>detail.ops.panel.content.table.column.text.Status}\" textDirection=\"RTL\"/>\r\n\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t<Column width=\"3rem\" visible=\"{= (${detailView>/stateId} !== 'D') &amp;&amp; (${detailView>/SubmitBtnVisibility} === 'X' ? true: false)}\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{i18n>detail.ops.panel.content.table.column.text.delete}\"/>\r\n\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t</columns>\r\n\t\t\t\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t\t\t\t<ColumnListItem id=\"idEstItem\">\r\n\t\t\t\t\t\t\t\t\t\t\t<cells>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Link text=\"{EstId}\" emphasized=\"true\" press=\"onEstItemPress\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{EstTypeDesc}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<!--<Link-->\r\n\t\t\t\t\t\t\t\t\t\t\t\t<!--\ttext=\"{EstId}\"-->\r\n\t\t\t\t\t\t\t\t\t\t\t\t<!--\temphasized=\"true\"-->\r\n\t\t\t\t\t\t\t\t\t\t\t\t<!--\thref=\"{parts:[{path : 'EstGuid'}], formatter: '.formatter.getEstimationLink'}\" />-->\r\n\t\t\t\t\t\t\t\t\t\t\t\t<!-- <Input \r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"{EstId}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\teditable=\"false\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttooltip=\"{EstId}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Input > -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Input tooltip=\"{EstDesc}\" value=\"{EstDesc}\" editable=\"false\" textAlign=\"Right\" visible=\"false\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{EstDesc}\" tooltip=\"{EstDesc}\" textAlign=\"Center\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<HBox justifyContent=\"End\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext=\"{path:'EstTotValue', type:'sap.ui.model.odata.type.Decimal', formatOptions: {groupingSize: 2, groupingBaseSize: 3}, constraints: {precision: 12, scale: 2}} {EstCurrency}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttooltip=\"{EstTotValue}\" textAlign=\"End\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- <Text text=\"{EstCurrency}\"/> -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t</HBox>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button text=\"{= ${EstStatus} === 'X' ? 'Draft' : 'Saved'}\" icon=\"{= ${EstStatus} === 'X' ? 'sap-icon://request' : 'sap-icon://complete'}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tenabled=\"false\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button icon=\"sap-icon://delete\" tooltip=\"{i18n>tooltip.delFromTable}\" type=\"Transparent\" press=\"onDeleteEstimate\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvisible=\"{= (${detailView>/stateId} !== 'D') &amp;&amp; (${detailView>/SubmitBtnVisibility} === 'X' ? true: false)}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t</cells>\r\n\t\t\t\t\t\t\t\t\t\t</ColumnListItem>\r\n\t\t\t\t\t\t\t\t\t</items>\r\n\t\t\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t\t\t</content>\r\n\t\t\t\t\t\t</Panel>\r\n\t\t\t\t\t</uxap:blocks>\r\n\t\t\t\t</uxap:ObjectPageSubSection>\r\n\t\t\t</uxap:ObjectPageSection>\r\n\t\t\t<uxap:ObjectPageSection id=\"idDDOMap_work\" title=\"{i18n>detail.ObjPageSection.title.DDOMappingwork}\" showTitle=\"false\">\r\n\t\t\t\t<uxap:ObjectPageSubSection>\r\n\t\t\t\t\t<uxap:blocks>\r\n\t\t\t\t\t\t<Panel expandable=\"true\" expanded=\"true\" width=\"auto\">\r\n\t\t\t\t\t\t\t<headerToolbar>\r\n\t\t\t\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t\t\t\t<Title text=\"{i18n>detail.ObjPageSection.title.DDOMappingwork}\"/>\r\n\t\t\t\t\t\t\t\t</Toolbar>\r\n\t\t\t\t\t\t\t</headerToolbar>\r\n\t\t\t\t\t\t\t<content>\r\n\t\t\t\t\t\t\t\t<Table id=\"idWorksDDOMapping_work\" inset=\"false\" mode=\"None\" items=\"{/DDO_MapDataSet}\" growing=\"true\" growingScrollToLoad=\"true\"\r\n\t\t\t\t\t\t\t\t\tgrowingThreshold=\"999\">\r\n\t\t\t\t\t\t\t\t\t<headerToolbar>\r\n\t\t\t\t\t\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t\t\t\t\t\t<content>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Title text=\"{i18n>detail.ops.panel.content.table.DDOMappingWork}({detailView>/DDOMapWorkTableRowCount})\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<ToolbarSpacer/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<!--<Button icon=\"sap-icon://add\" tooltip=\"{i18n>tooltip.addToTable}\" type=\"Transparent\" width=\"5rem\" press=\"onAddNewEstimation\"-->\r\n\t\t\t\t\t\t\t\t\t\t\t\t<!--\tvisible=\"{= (${detailView>/stateId} !== 'D') &amp;&amp; (${detailView>/SubmitBtnVisibility} === 'X' ? true: false)}\" enabled=\"false\"/>-->\r\n\t\t\t\t\t\t\t\t\t\t\t\t<!-- <Button icon=\"sap-icon://delete\" press=\"onDeleteEstimate\" visible=\"{= (${detailView>/stateId} !== 'D') &amp;&amp; (${detailView>/SubmitBtnVisibility} === 'X' ? true: false)}\"/> -->\r\n\t\t\t\t\t\t\t\t\t\t\t</content>\r\n\t\t\t\t\t\t\t\t\t\t</Toolbar>\r\n\t\t\t\t\t\t\t\t\t</headerToolbar>\r\n\t\t\t\t\t\t\t\t\t<columns>\r\n\t\t\t\t\t\t\t\t\t\t<Column hAlign=\"Center\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{i18n>detail.ops.panel.content.table.column.text.EstimateId}\"/>\r\n\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t<Column hAlign=\"Center\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{i18n>detail.ops.panel.content.table.column.text.DDOMapping}\" textDirection=\"RTL\"/>\r\n\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t<Column hAlign=\"Center\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{i18n>detail.ops.panel.content.table.column.text.DDOMappingDesc}\" textDirection=\"RTL\"/>\r\n\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t<!--<Column hAlign=\"Center\" visible=\"false\">-->\r\n\t\t\t\t\t\t\t\t\t\t<!--\t<Text text=\"{i18n>detail.ops.panel.content.table.column.text.Desc}\" textDirection=\"RTL\"/>-->\r\n\t\t\t\t\t\t\t\t\t\t<!--</Column>-->\r\n\t\t\t\t\t\t\t\t\t\t<Column hAlign=\"Center\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{i18n>detail.ops.panel.content.table.column.text.Desc}\" textDirection=\"RTL\"/>\r\n\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t<Column hAlign=\"End\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{i18n>detail.ops.panel.content.table.column.text.Value}\" textDirection=\"RTL\"/>\r\n\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t<!--<Column hAlign=\"Center\">-->\r\n\t\t\t\t\t\t\t\t\t\t<!--\t<Text text=\"{i18n>detail.ops.panel.content.table.column.text.Status}\" textDirection=\"RTL\"/>-->\r\n\t\t\t\t\t\t\t\t\t\t<!--</Column>-->\r\n\t\t\t\t\t\t\t\t\t\t<!--<Column width=\"3rem\" visible=\"{= (${detailView>/stateId} !== 'D') &amp;&amp; (${detailView>/SubmitBtnVisibility} === 'X' ? true: false)}\">-->\r\n\t\t\t\t\t\t\t\t\t\t<!--\t<Text text=\"{i18n>detail.ops.panel.content.table.column.text.delete}\"/>-->\r\n\t\t\t\t\t\t\t\t\t\t<!--</Column>-->\r\n\t\t\t\t\t\t\t\t\t</columns>\r\n\t\t\t\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t\t\t\t<ColumnListItem id=\"idDDOMapping_work\">\r\n\t\t\t\t\t\t\t\t\t\t\t<cells>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{EstId}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<!--<Text text=\"{DDO}\"/>-->\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Input change=\"onDdoChange\" app:bindPath=\"Ddo\" placeholder=\"{i18n>detail.ops.panel.content.table.column.text.PDDO}\" value=\"{DDO_Code}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\trequired=\"{= ${oControlModel>/Ddo/mandatory}}\" showValueHelp=\"true\" valueHelpOnly=\"true\" valueHelpRequest=\"handleDDOValueHelp\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\teditable=\"{= ${oControlModel>/Ddo/display} &amp;&amp; (${detailView>/stateId} !== 'D') ? true: false}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalueState=\"{oControlModel>/Ddo/valueState}\" valueStateText=\"{oControlModel>/Ddo/valueStateText}\" maxLength=\"{oControlModel>/Ddo/maxLength}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"{oControlModel>/Ddo/type}\" tooltip=\"{DdoDes}\" id=\"idDDO_Mapping\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<!--<Input id=\"idDDO_Mapping\" showValueHelp=\"true\" value=\"{DDO}\" name=\"DDOCode\" valueHelpOnly=\"true\" valueHelpRequest=\"oHandelHOAF4Help\" editable=\"true\"/>-->\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{DDO_Desc}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<!--<Link-->\r\n\t\t\t\t\t\t\t\t\t\t\t\t<!--\ttext=\"{EstId}\"-->\r\n\t\t\t\t\t\t\t\t\t\t\t\t<!--\temphasized=\"true\"-->\r\n\t\t\t\t\t\t\t\t\t\t\t\t<!--\thref=\"{parts:[{path : 'EstGuid'}], formatter: '.formatter.getEstimationLink'}\" />-->\r\n\t\t\t\t\t\t\t\t\t\t\t\t<!-- <Input \r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"{EstId}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\teditable=\"false\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttooltip=\"{EstId}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Input > -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Input tooltip=\"{EstDesc}\" value=\"{EstDesc}\" editable=\"false\" textAlign=\"Right\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<!--<Text text=\"{EstDesc}\" tooltip=\"{EstDesc}\" textAlign=\"Center\" id=\"estdesc_ddomap\"/>-->\r\n\t\t\t\t\t\t\t\t\t\t\t\t<HBox justifyContent=\"End\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext=\"{path:'EstTotValue', type:'sap.ui.model.odata.type.Decimal', formatOptions: {groupingSize: 2, groupingBaseSize: 3}, constraints: {precision: 12, scale: 2}} {EstCurrency}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttooltip=\"{EstTotValue}\" textAlign=\"End\" id=\"estvalue_ddomap\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- <Text text=\"{EstCurrency}\"/> -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t</HBox>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<!--<Button text=\"{= ${EstStatus} === 'X' ? 'Draft' : 'Saved'}\" icon=\"{= ${EstStatus} === 'X' ? 'sap-icon://request' : 'sap-icon://complete'}\"-->\r\n\t\t\t\t\t\t\t\t\t\t\t\t<!--\tenabled=\"false\"/>-->\r\n\t\t\t\t\t\t\t\t\t\t\t\t<!--<Button icon=\"sap-icon://delete\" tooltip=\"{i18n>tooltip.delFromTable}\" type=\"Transparent\" press=\"onDeleteEstimate\"-->\r\n\t\t\t\t\t\t\t\t\t\t\t\t<!--\tvisible=\"{= (${detailView>/stateId} !== 'D') &amp;&amp; (${detailView>/SubmitBtnVisibility} === 'X' ? true: false)}\"/>-->\r\n\t\t\t\t\t\t\t\t\t\t\t</cells>\r\n\t\t\t\t\t\t\t\t\t\t</ColumnListItem>\r\n\t\t\t\t\t\t\t\t\t</items>\r\n\t\t\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t\t\t</content>\r\n\t\t\t\t\t\t</Panel>\r\n\t\t\t\t\t</uxap:blocks>\r\n\t\t\t\t</uxap:ObjectPageSubSection>\r\n\t\t\t</uxap:ObjectPageSection>\r\n\t\t\t<uxap:ObjectPageSection id=\"idLocation\" title=\"{i18n>detail.ops.panel.title.Location}\" showTitle=\"false\">\r\n\t\t\t\t<uxap:ObjectPageSubSection mode=\"Collapsed\">\r\n\t\t\t\t\t<uxap:blocks>\r\n\t\t\t\t\t\t<Panel expandable=\"true\" expanded=\"true\">\r\n\t\t\t\t\t\t\t<headerToolbar>\r\n\t\t\t\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t\t\t\t<Title text=\"{i18n>detail.ops.panel.title.Location}\"/>\r\n\t\t\t\t\t\t\t\t</Toolbar>\r\n\t\t\t\t\t\t\t</headerToolbar>\r\n\t\t\t\t\t\t\t<content>\r\n\t\t\t\t\t\t\t\t<f:Form editable=\"true\">\r\n\t\t\t\t\t\t\t\t\t<f:layout>\r\n\t\t\t\t\t\t\t\t\t\t<f:ResponsiveGridLayout class=\"noPadding\" labelSpanXL=\"12\" labelSpanL=\"12\" labelSpanM=\"12\" labelSpanS=\"12\" emptySpanXL=\"0\" emptySpanL=\"0\"\r\n\t\t\t\t\t\t\t\t\t\t\temptySpanM=\"0\" emptySpanS=\"0\" columnsXL=\"3\" columnsL=\"3\" columnsM=\"3\"/>\r\n\t\t\t\t\t\t\t\t\t</f:layout>\r\n\t\t\t\t\t\t\t\t\t<f:formContainers>\r\n\t\t\t\t\t\t\t\t\t\t<f:FormContainer >\r\n\t\t\t\t\t\t\t\t\t\t\t<f:FormElement visible=\"{= ${oControlModel>/LocalClass/visible}}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.label.class}\" required=\"{= ${oControlModel>/LocalClass/mandatory}}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Select id=\"idLocationClass\" app:bindPath=\"LocalClass\" change=\"onSelectChange\" selectedKey=\"{LocalClass}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tenabled=\"{= ${oControlModel>/LocalClass/display} &amp;&amp; (${detailView>/stateId} !== 'D')}\" forceSelection=\"false\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvisible=\"{oControlModel>/LocalClass/visible}\" valueState=\"{= ${oControlModel>/LocalClass/valueState}}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueStateText=\"{= ${oControlModel>/LocalClass/valueStateText}}\"></Select>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t\t<f:FormContainer ></f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t</f:formContainers>\r\n\t\t\t\t\t\t\t\t</f:Form>\r\n\t\t\t\t\t\t\t\t<f:Form editable=\"true\">\r\n\t\t\t\t\t\t\t\t\t<f:layout>\r\n\t\t\t\t\t\t\t\t\t\t<f:ResponsiveGridLayout class=\"noPadding\" labelSpanXL=\"12\" labelSpanL=\"12\" labelSpanM=\"12\" labelSpanS=\"12\" emptySpanXL=\"0\" emptySpanL=\"0\"\r\n\t\t\t\t\t\t\t\t\t\t\temptySpanM=\"0\" emptySpanS=\"0\" columnsXL=\"3\" columnsL=\"3\" columnsM=\"3\"/>\r\n\t\t\t\t\t\t\t\t\t</f:layout>\r\n\t\t\t\t\t\t\t\t\t<f:formContainers>\r\n\t\t\t\t\t\t\t\t\t\t<f:FormContainer >\r\n\t\t\t\t\t\t\t\t\t\t\t<f:FormElement label=\"\" visible=\"{= ${oControlModel>/Village/visible}}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.label.village}\" required=\"{= ${oControlModel>/Village/mandatory}}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<RadioButton app:bindPath='village' groupName=\"GroupB\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tenabled=\"{= ${oControlModel>/Village/display} &amp;&amp; (${detailView>/stateId} !== 'D')}\" selected=\"{location>/vVillage}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tselect=\"onRadioSelect\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<layoutData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<l:GridData span=\"XL1 L1 M2 S4\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</layoutData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</RadioButton>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<MultiInput app:bindPath=\"Village\" placeholder=\"{i18n>detail.ops.panel.content.table.column.vh.title.village}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"{parts:[{path: 'LocationDetails'},{path: 'LocationDetailsx'}], formatter:'.formatter.formatVillage'}\" id=\"idSelectVillage\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tchange=\"onSelectChange\" valueHelpOnly=\"true\" tokenUpdate=\"onFieldChange\" suggestionItemSelected=\"handleSuggestionItemSelected\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowSuggestion=\"true\" showValueHelp=\"true\" valueHelpRequest=\"handleValueHelp\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tenabled=\"{= ${oControlModel>/Village/display} &amp;&amp; (${detailView>/stateId} !== 'D')}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\teditable=\"{= ${oControlModel>/Village/display} &amp;&amp; (${detailView>/stateId} !== 'D') &amp;&amp; ${location>/vVillage}}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvisible=\"{oControlModel>/Village/visible}\" suggestionItems=\"{/ZWRK_C_VILLAGES_LIST}\" valueState=\"{= ${oControlModel>/Village/valueState}}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueStateText=\"{= ${oControlModel>/Village/valueStateText}}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<customData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"key\" value=\"village\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"text\" value=\"villagex\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"SFPersistenceKey\" value=\"Village_SF_AS_PersistenceKey\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"reqFields\" value=\"district,mandal,village\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"entityInfo\" value=\"{entitySet: 'ZWRK_C_VILLAGES_LIST', entityType: 'ZWRK_C_VILLAGES_LISTType'}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"filterArray\" value=\"{filter:[]}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"mode\" value=\"MultiSelect\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</customData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<suggestionItems>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:Item text=\"{villagename}\" key=\"{village}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</suggestionItems>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</MultiInput>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t\t<f:FormContainer >\r\n\t\t\t\t\t\t\t\t\t\t\t<f:FormElement visible=\"{= ${oControlModel>/Mandal/visible}}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.label.mandal}\" required=\"{= ${oControlModel>/Mandal/mandatory}}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<RadioButton app:bindPath=\"mandal\" groupName=\"GroupB\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tenabled=\"{= ${oControlModel>/Mandal/display} &amp;&amp; (${detailView>/stateId} !== 'D')}\" selected=\"{location>/vMandal}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tselect=\"onRadioSelect\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<layoutData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<l:GridData span=\"XL1 L1 M2 S4\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</layoutData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</RadioButton>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<MultiInput app:bindPath=\"Mandal\" id=\"idSelectMandal\" placeholder=\"{i18n>detail.ops.panel.content.table.column.vh.title.mandal}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tchange=\"onSelectChange\" value=\"{parts:[{path: 'LocationDetails'},{path: 'LocationDetailsx'}], formatter:'.formatter.formatMandal'}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttokenUpdate=\"onFieldChange\" valueHelpOnly=\"true\" showSuggestion=\"true\" suggestionItemSelected=\"handleSuggestionItemSelected\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowValueHelp=\"true\" valueHelpRequest=\"handleValueHelp\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tenabled=\"{= ${oControlModel>/Mandal/display} &amp;&amp; (${detailView>/stateId} !== 'D')}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\teditable=\"{= ${oControlModel>/Mandal/display} &amp;&amp; (${detailView>/stateId} !== 'D') &amp;&amp; ${location>/vMandal}}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvisible=\"{oControlModel>/Mandal/visible}\" suggestionItems=\"{/ZWRK_C_MANDALS}\" valueState=\"{= ${oControlModel>/Mandal/valueState}}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueStateText=\"{= ${oControlModel>/Mandal/valueStateText}}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<customData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"key\" value=\"mandal\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"text\" value=\"mandalx\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"SFPersistenceKey\" value=\"Mandal_SF_AS_PersistenceKey\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"reqFields\" value=\"district,mandal\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"entityInfo\" value=\"{entitySet: 'ZWRK_C_MANDAL_LIST', entityType: 'ZWRK_C_MANDAL_LISTType'}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"filterArray\" value=\"{filter:[]}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"mode\" value=\"MultiSelect\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</customData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<suggestionItems>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:Item text=\"{mandalx}\" key=\"{mandal}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</suggestionItems>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</MultiInput>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t\t<f:FormContainer >\r\n\t\t\t\t\t\t\t\t\t\t\t<f:FormElement label=\"\" visible=\"{= ${oControlModel>/District/visible}}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.label.district}\" required=\"{= ${oControlModel>/District/mandatory}}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<RadioButton app:bindPath=\"district\" groupName=\"GroupB\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tenabled=\"{= ${oControlModel>/District/display} &amp;&amp; (${detailView>/stateId} !== 'D')}\" selected=\"{location>/vDistrict}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tselect=\"onRadioSelect\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<layoutData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<l:GridData span=\"XL1 L1 M2 S4\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</layoutData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</RadioButton>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<MultiInput showValueHelp=\"true\" maxSuggestionWidth=\"40rem\" id=\"idSelectDistrict\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"{i18n>detail.ops.panel.content.table.column.vh.title.district}\" change=\"onSelectChange\" app:bindPath=\"District\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueHelpOnly=\"true\" tokenUpdate=\"onFieldChange\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"{parts:[{path: 'LocationDetails'},{path: 'LocationDetailsx'}], formatter:'.formatter.formatDistrict'}\" showSuggestion=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuggestionItems=\"{path: '/ZWRK_C_DISTRICTS'}\" suggestionItemSelected=\"handleSuggestionItemSelected\" selectedKey=\"{district}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tenabled=\"{= ${oControlModel>/District/display} &amp;&amp; (${detailView>/stateId} !== 'D')}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\teditable=\"{= ${oControlModel>/District/display} &amp;&amp; (${detailView>/stateId} !== 'D') &amp;&amp; ${location>/vDistrict}}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvisible=\"{oControlModel>/District/visible}\" valueState=\"{= ${oControlModel>/District/valueState}}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueStateText=\"{= ${oControlModel>/District/valueStateText}}\" valueHelpRequest=\"handleValueHelp\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<customData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"key\" value=\"district\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"text\" value=\"name\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"SFPersistenceKey\" value=\"District_SF_AS_PersistenceKey\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"reqFields\" value=\"district\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"entityInfo\" value=\"{entitySet: 'ZWRK_C_DISTRICTS', entityType: 'ZWRK_C_DISTRICTSType'}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"filterArray\" value=\"{filter:[]}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"mode\" value=\"MultiSelect\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</customData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<suggestionItems>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:ListItem key=\"{district}\" text=\"{name}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</suggestionItems>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</MultiInput>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button icon=\"sap-icon://display\" press=\"handleLocationListDisplay\" type=\"Transparent\" tooltip=\"{i18n>tooltip.locationDetails}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<layoutData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<l:GridData span=\"XL1 L1 M2 S4\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</layoutData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t</f:formContainers>\r\n\t\t\t\t\t\t\t\t</f:Form>\r\n\t\t\t\t\t\t\t\t<f:Form editable=\"true\">\r\n\t\t\t\t\t\t\t\t\t<f:layout>\r\n\t\t\t\t\t\t\t\t\t\t<f:ResponsiveGridLayout class=\"noPadding\" labelSpanXL=\"12\" labelSpanL=\"12\" labelSpanM=\"12\" labelSpanS=\"12\" emptySpanXL=\"0\" emptySpanL=\"0\"\r\n\t\t\t\t\t\t\t\t\t\t\temptySpanM=\"0\" emptySpanS=\"0\" columnsXL=\"3\" columnsL=\"3\" columnsM=\"3\"/>\r\n\t\t\t\t\t\t\t\t\t</f:layout>\r\n\t\t\t\t\t\t\t\t\t<f:formContainers>\r\n\t\t\t\t\t\t\t\t\t\t<f:FormContainer >\r\n\t\t\t\t\t\t\t\t\t\t\t<f:title>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<core:Title text=\"{i18n>detail.ops.panel.content.label.constituency}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t</f:title>\r\n\t\t\t\t\t\t\t\t\t\t\t<f:FormElement label=\"\" visible=\"{= ${oControlModel>/Loksabha/visible}}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.label.loksabha}\" required=\"{= ${oControlModel>/Loksabha/mandatory}}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- <RadioButton app:bindPath='loksabha' groupName=\"GroupC\" select=\"onRadioSelect\" enabled=\"{= ${oControlModel>/Loksabha/display} &amp;&amp; (${detailView>/stateId} !== 'D')}\" selected=\"{location>/vLoksabha}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<layoutData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<l:GridData span=\"XL1 L1 M2 S4\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</layoutData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</RadioButton> -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<MultiInput app:bindPath=\"LokSabha\" placeholder=\"{i18n>detail.ops.panel.content.table.column.vh.title.loksabha}\" id=\"idMultiInputLoksabha\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tchange=\"onSelectChange\" valueHelpOnly=\"true\" value=\"{parts:[{path: 'ConstituencyDetails'}], formatter:'.formatter.formatLoksabha'}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttokenUpdate=\"onFieldChange\" showSuggestion=\"true\" suggestionItemSelected=\"handleSuggestionItemSelected\" showValueHelp=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueHelpRequest=\"handleValueHelp\" enabled=\"{= ${oControlModel>/Loksabha/display} &amp;&amp; (${detailView>/stateId} !== 'D')}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\teditable=\"{= ${oControlModel>/Loksabha/display} &amp;&amp; (${detailView>/stateId} !== 'D')}\" visible=\"{oControlModel>/Loksabha/visible}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuggestionItems=\"{/ZWRK_C_LOKSABHA}\" valueState=\"{= ${oControlModel>/Loksabha/valueState}}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueStateText=\"{= ${oControlModel>/Loksabha/valueStateText}}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<customData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"key\" value=\"loksabha\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"text\" value=\"loksabha_name\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"reqFields\" value=\"loksabha\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"SFPersistenceKey\" value=\"Loksabha_SF_AS_PersistenceKey\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"entityInfo\" value=\"{entitySet: 'ZWRK_C_LOKSABHA', entityType: 'ZWRK_C_LOKSABHAType'}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"filterArray\" value=\"{filter:[]}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"mode\" value=\"MultiSelect\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</customData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<suggestionItems>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:Item text=\"{loksabha_name}\" key=\"{loksabha}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</suggestionItems>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</MultiInput>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button icon=\"sap-icon://display\" press=\"handleConstListDisplay\" type=\"Transparent\" tooltip=\"{i18n>tooltip.locationDetails}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tapp:bindPath='Loksabha'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<layoutData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<l:GridData span=\"XL1 L1 M2 S4\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</layoutData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t\t<f:FormContainer >\r\n\t\t\t\t\t\t\t\t\t\t\t<f:title>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<core:Title/>\r\n\t\t\t\t\t\t\t\t\t\t\t</f:title>\r\n\t\t\t\t\t\t\t\t\t\t\t<f:FormElement visible=\"{= ${oControlModel>/ConstituencyDetails/visible}}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.label.assembly}\" required=\"{= ${oControlModel>/ConstituencyDetails/mandatory}}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- <RadioButton app:bindPath=\"assembly\" groupName=\"GroupC\" select=\"onRadioSelect\" enabled=\"{= ${oControlModel>/ConstituencyDetails/display} &amp;&amp; (${detailView>/stateId} !== 'D')}\" selected=\"{location>/vAssembly}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<layoutData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<l:GridData span=\"XL1 L1 M2 S4\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</layoutData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</RadioButton> -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<MultiInput app:bindPath=\"Constituency\" id=\"idMultiInputAssembly\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"{i18n>detail.ops.panel.content.table.column.vh.title.assembly}\" change=\"onSelectChange\" valueHelpOnly=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"{parts:[{path: 'AssemblyDetails'}], formatter:'.formatter.formatAssembly'}\" tokenUpdate=\"onFieldChange\" showSuggestion=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuggestionItemSelected=\"handleSuggestionItemSelected\" showValueHelp=\"true\" valueHelpRequest=\"handleValueHelp\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tenabled=\"{= ${oControlModel>/ConstituencyDetails/display} &amp;&amp; (${detailView>/stateId} !== 'D')}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\teditable=\"{= ${oControlModel>/ConstituencyDetails/display} &amp;&amp; (${detailView>/stateId} !== 'D')}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvisible=\"{oControlModel>/ConstituencyDetails/visible}\" suggestionItems=\"{/ZWRK_C_CONSTITUENCIES}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueState=\"{= ${oControlModel>/ConstituencyDetails/valueState}}\" valueStateText=\"{= ${oControlModel>/ConstituencyDetails/valueStateText}}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<customData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"key\" value=\"constutuency\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"text\" value=\"assembly\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"SFPersistenceKey\" value=\"Assembly_SF_AS_PersistenceKey\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"reqFields\" value=\"constutuency,district,Lokcons\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"entityInfo\" value=\"{entitySet: 'ZWRK_C_CONSTITUENCIES', entityType: 'ZWRK_C_CONSTITUENCIESType'}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"filterArray\" value=\"{filter:[]}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"mode\" value=\"MultiSelect\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</customData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<suggestionItems>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:Item text=\"{assembly}\" key=\"{constutuency}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</suggestionItems>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</MultiInput>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button icon=\"sap-icon://display\" press=\"handleConstListDisplay\" type=\"Transparent\" tooltip=\"{i18n>tooltip.locationDetails}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tapp:bindPath=\"Assembly\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<layoutData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<l:GridData span=\"XL1 L1 M2 S4\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</layoutData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t\t<f:FormContainer >\r\n\t\t\t\t\t\t\t\t\t\t\t<f:FormElement >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:fields></f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t</f:formContainers>\r\n\t\t\t\t\t\t\t\t</f:Form>\r\n\t\t\t\t\t\t\t</content>\r\n\t\t\t\t\t\t</Panel>\r\n\t\t\t\t\t</uxap:blocks>\r\n\t\t\t\t</uxap:ObjectPageSubSection>\r\n\t\t\t</uxap:ObjectPageSection>\r\n\t\t\t<!--changes ended by lahari-->\r\n\t\t\t<!-- <uxap:ObjectPageSection id=\"Fund\" title=\"{i18n>detail.ops.panel.title.Fund}\" showTitle=\"false\" visible=\"{= ${detailView>/bUAVisible} ? false : true}\">\r\n\t\t\t\t<uxap:ObjectPageSubSection mode=\"Collapsed\">\r\n\t\t\t\t\t<uxap:blocks>\r\n\t\t\t\t\t\t<Panel expandable=\"true\" expanded=\"true\">\r\n\t\t\t\t\t\t\t<headerToolbar>\r\n\t\t\t\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t\t\t\t<Title text=\"{i18n>detail.ops.panel.content.label.Fund}\"/>\r\n\t\t\t\t\t\t\t\t</Toolbar>\r\n\t\t\t\t\t\t\t</headerToolbar>\r\n\t\t\t\t\t\t\t<content>\r\n\t\t\t\t\t\t\t\t<f:Form editable=\"true\">\r\n\t\t\t\t\t\t\t\t\t<f:layout>\r\n\t\t\t\t\t\t\t\t\t\t<f:ResponsiveGridLayout\r\n\t\t\t\t\t\t\t\t\t\t\tlabelSpanXL=\"12\"\r\n\t\t\t\t\t\t\t\t\t\t\tlabelSpanL=\"12\"\r\n\t\t\t\t\t\t\t\t\t\t\tlabelSpanM=\"12\"\r\n\t\t\t\t\t\t\t\t\t\t\tlabelSpanS=\"12\"\r\n\t\t\t\t\t\t\t\t\t\t\tadjustLabelSpan=\"false\"\r\n\t\t\t\t\t\t\t\t\t\t\temptySpanXL=\"0\"\r\n\t\t\t\t\t\t\t\t\t\t\temptySpanL=\"0\"\r\n\t\t\t\t\t\t\t\t\t\t\temptySpanM=\"0\"\r\n\t\t\t\t\t\t\t\t\t\t\temptySpanS=\"0\"\r\n\t\t\t\t\t\t\t\t\t\t\tcolumnsXL=\"3\"\r\n\t\t\t\t\t\t\t\t\t\t\tcolumnsL=\"3\"\r\n\t\t\t\t\t\t\t\t\t\t\tcolumnsM=\"3\"\r\n\t\t\t\t\t\t\t\t\t\t\tsingleContainerFullSize=\"false\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</f:layout>\r\n\t\t\t\t\t\t\t\t\t<f:formContainers>\r\n\t\t\t\t\t\t\t\t\t\t<f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t\t\t<f:formElements>\r\n\t\t\t\t\t\t\t\t\t\t\t\t <f:FormElement visible=\"{= ${oControlModel>/FundingAgencyId/visible}}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.label.FundingAgencyId}\" required=\"{= ${oControlModel>/FundingAgencyId/mandatory}}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Input showValueHelp=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"idFundingAgency\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tapp:bindPath=\"FundingAgencyId\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchange=\"onSelectChange\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuggestionItems=\"{path: '/ZWRK_C_FUNDING_AGENCY', events: {dataReceived: '.onSuggestDataReceived'}}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttemplateShareable= \"false\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tselectedKey=\"{FundingAgencyId}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfilterSuggests=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowSuggestion=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuggest=\"handleSuggest\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tenabled=\"{= ${oControlModel>/FundingAgencyId/display} &amp;&amp; (${detailView>/stateId} !== 'D')}\" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueState=\"{oControlModel>/FundingAgencyId/valueState}\" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueStateText=\"{oControlModel>/FundingAgencyId/valueStateText}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueHelpRequest=\"handleValueHelp\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<customData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"key\" value=\"fundid\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"text\" value=\"fundagency\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"reqFields\" value=\"fundid\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"entityInfo\" value=\"{entitySet: 'ZWRK_C_FUNDING_AGENCY', entityType: 'ZWRK_C_FUNDING_AGENCYType'}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"filterArray\" value=\"{filter:[]}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"mode\" value=\"SingleSelectMaster\"/>\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</customData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<suggestionItems>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:ListItem key=\"{fundid}\" text=\"{fundagency}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</suggestionItems>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Input>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t\t</f:formElements>\r\n\t\t\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t\t<f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t\t\t<f:formElements>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:FormElement visible=\"{= ${oControlModel>/RefNumber/visible}}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.label.RefNumber}\" required=\"{= ${oControlModel>/RefNumber/mandatory}}\"/>\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Input change=\"onFieldChange\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tliveChange=\"onFieldLiveChange\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"{RefNumber}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\teditable=\"{= ${oControlModel>/RefNumber/display} &amp;&amp; (${detailView>/stateId} !== 'D')}\" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueState=\"{= ${oControlModel>/RefNumber/valueState}}\" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueStateText=\"{= ${oControlModel>/RefNumber/valueStateText}}\" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaxLength=\"{oControlModel>/RefNumber/maxLength}\" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"{oControlModel>/RefNumber/type}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttooltip=\"{RefNumber}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t\t</f:formElements>\r\n\t\t\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t\t<f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t\t\t<f:formElements>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:FormElement visible=\"{= ${oControlModel>/FundRefDate/visible}}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.sf.label.FundRefDate}\" required=\"{= ${oControlModel>/FundRefDate/mandatory}}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<DatePicker change=\"onFieldChange\" value = \"{path:'FundRefDate', type:'sap.ui.model.type.Date', formatOptions: { style: 'medium', strictParsing: true, UTC: true}}\"  editable=\"{= ${oControlModel>/FundRefDate/display} &amp;&amp; (${detailView>/stateId} !== 'D')}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t\t</f:formElements>\r\n\t\t\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t</f:formContainers>\r\n\t\t\t\t\t\t\t\t</f:Form>\r\n\t\t\t\t\t\t\t</content>\r\n\t\t\t\t\t\t</Panel>\r\n\t\t\t\t\t</uxap:blocks>\r\n\t\t\t\t</uxap:ObjectPageSubSection>\r\n\t\t\t</uxap:ObjectPageSection> -->\r\n\t\t\t<uxap:ObjectPageSection id=\"ChecklistandAttach\" title=\"{i18n>detail.ObjPageSection.title.ChecklistandAttach}\" importance=\"High\"\r\n\t\t\t\tshowTitle=\"false\">\r\n\t\t\t\t<uxap:ObjectPageSubSection>\r\n\t\t\t\t\t<uxap:blocks>\r\n\t\t\t\t\t\t<Panel expandable=\"true\" expanded=\"true\" width=\"auto\">\r\n\t\t\t\t\t\t\t<headerToolbar>\r\n\t\t\t\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t\t\t\t<Title text=\"{i18n>detail.ops.panel.header.title.ChecklistandAttach}\"/>\r\n\t\t\t\t\t\t\t\t</Toolbar>\r\n\t\t\t\t\t\t\t</headerToolbar>\r\n\t\t\t\t\t\t\t<content>\r\n\t\t\t\t\t\t\t\t<Table id=\"idChecklistTable\" inset=\"false\" items=\"{path: '/WrkChecklistSet'}\" growing=\"true\" growingThreshold=\"999\">\r\n\t\t\t\t\t\t\t\t\t<columns>\r\n\t\t\t\t\t\t\t\t\t\t<Column width=\"3rem\" visible=\"false\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{i18n>detail.ops.panel.content.table.column.slNo}\"/>\r\n\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t<Column width=\"5rem\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{i18n>detail.ops.panel.content.table.column.ruleNo}\"/>\r\n\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t<Column width=\"20rem\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{i18n>detail.ops.panel.content.table.column.ruleDesc}\"/>\r\n\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t<Column width=\"4rem\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{i18n>detail.ops.panel.content.table.column.action}\"/>\r\n\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t<Column width=\"2rem\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{i18n>detail.ops.panel.content.table.column.NA}\"/>\r\n\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t<Column width=\"2rem\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{i18n>detail.ops.panel.content.table.column.files}\"/>\r\n\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t</columns>\r\n\t\t\t\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t\t\t\t<ColumnListItem>\r\n\t\t\t\t\t\t\t\t\t\t\t<cells>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{path:'ChkId', formatter:'.formatter.getSerialNo'}\" visible=\"false\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{ChkId}\" tooltip=\"{ChkId}\" required=\"{= ${Udf3} === '3' ? true : false}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{ChkDescription}\" tooltip=\"{ChkDescription}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Switch app:bindPath=\"SwitchApplicable\" tooltip=\"{i18n>tooltip.checkSwitch}\" type=\"AcceptReject\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstate=\"{= ${Applicable} === '02' ? true : false}\" change=\"onApplicableChange\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tenabled=\"{= (${detailView>/stateId} !== 'D') &amp;&amp; (${detailView>/SubmitBtnVisibility} === 'X' ? true: false)}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<CheckBox app:bindPath=\"CheckApplicable\" tooltip=\"{i18n>tooltip.NA}\" selected=\"{= ${Applicable} === '03' ? true : false}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tselect=\"onApplicableChange\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\teditable=\"{= (${detailView>/stateId} !== 'D') &amp;&amp; (${detailView>/SubmitBtnVisibility} === 'X' ? true: false) &amp;&amp; (${Udf3} === '1' ? true : false)}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button tooltip=\"{i18n>tooltip.uploadButton}\" icon=\"sap-icon://attachment\" press=\"onChecklistButtonPress\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttext=\"{= ${Udf1} > 0 ? ${Udf1} : '' }\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t</cells>\r\n\t\t\t\t\t\t\t\t\t\t</ColumnListItem>\r\n\t\t\t\t\t\t\t\t\t</items>\r\n\t\t\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t\t\t</content>\r\n\t\t\t\t\t\t</Panel>\r\n\t\t\t\t\t</uxap:blocks>\r\n\t\t\t\t</uxap:ObjectPageSubSection>\r\n\t\t\t</uxap:ObjectPageSection>\r\n\t\t\t<uxap:ObjectPageSection id=\"idOtherAttach\" title=\"{i18n>detail.ObjPageSection.title.otherAttach}\" importance=\"High\" showTitle=\"false\">\r\n\t\t\t\t<uxap:ObjectPageSubSection>\r\n\t\t\t\t\t<uxap:blocks>\r\n\t\t\t\t\t\t<Panel expandable=\"true\" expanded=\"true\" width=\"auto\">\r\n\t\t\t\t\t\t\t<headerToolbar>\r\n\t\t\t\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t\t\t\t<Title text=\"{i18n>detail.ops.panel.header.title.otherAttachment}\"/>\r\n\t\t\t\t\t\t\t\t</Toolbar>\r\n\t\t\t\t\t\t\t</headerToolbar>\r\n\t\t\t\t\t\t\t<content>\r\n\t\t\t\t\t\t\t\t<VBox class=\"sapUiTinyMargin\" renderType=\"Bare\">\r\n\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.textArea.Reason}\"/>\r\n\t\t\t\t\t\t\t\t\t<TextArea id=\"idTextAreaReason\" placeholder=\"{i18n>detail.ops.panel.content.textArea.PReason}\" cols=\"60\" height=\"2.4rem\" maxLength=\"60\"/>\r\n\t\t\t\t\t\t\t\t</VBox>\r\n\t\t\t\t\t\t\t\t<UploadCollection id=\"idUploadCollection\" multiple=\"true\" change=\"onChange\" sameFilenameAllowed=\"true\" fileDeleted=\"onFileDeleted\"\r\n\t\t\t\t\t\t\t\t\tuploadButtonInvisible=\"{=(${detailView>/stateId} !== 'D')? false : true}\" filenameLengthExceed=\"onFilenameLengthExceed\"\r\n\t\t\t\t\t\t\t\t\tfileRenamed=\"onFileRenamed\" fileSizeExceed=\"onFileSizeExceed\" selectionChange=\"onSelectionChange\" typeMissmatch=\"onTypeMissmatch\"\r\n\t\t\t\t\t\t\t\t\tinstantUpload=\"true\" uploadComplete=\"onUploadComplete\" beforeUploadStarts=\"onBeforeUploadStarts\" uploadTerminated=\"onUploadTerminated\"\r\n\t\t\t\t\t\t\t\t\tfileType=\"jpg,jpeg,png,bmp,pdf\" items=\"{ path: 'WrkAttachments', templateShareable: false }\"\r\n\t\t\t\t\t\t\t\t\tuploadUrl=\"/sap/opu/odata/sap/ZGW_WRK_ADM_SANC_SRV/WrkAttachmentsSet\">\r\n\t\t\t\t\t\t\t\t\t<toolbar>\r\n\t\t\t\t\t\t\t\t\t\t<OverflowToolbar id=\"myId\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Title id=\"attachmentTitle\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t<ToolbarSpacer/>\r\n\t\t\t\t\t\t\t\t\t\t\t<!-- <SearchField width=\"10rem\" search=\"onSearch\" /> -->\r\n\t\t\t\t\t\t\t\t\t\t\t<Button id=\"deleteSelectedButton\" text=\"Delete\" press=\"onDeleteSelectedItems\" enabled=\"false\" visible=\"false\" type=\"Transparent\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t<ToggleButton id=\"selectAllButton\" text=\"Select all\" press=\"onSelectAllPress\" enabled=\"false\" visible=\"false\" type=\"Transparent\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t<UploadCollectionToolbarPlaceholder/>\r\n\t\t\t\t\t\t\t\t\t\t</OverflowToolbar>\r\n\t\t\t\t\t\t\t\t\t</toolbar>\r\n\t\t\t\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t\t\t\t<UploadCollectionItem documentId=\"{DmsGuid}\" visibleDelete=\"false\" visibleEdit=\"false\" fileName=\"{Filename}\" press=\"onAttachPdfVewer\">\r\n\t\t\t\t\t\t\t\t\t\t\t<customData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"URL\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"/sap/opu/odata/sap/ZGW_WRK_ADM_SANC_SRV/WrkAttachmentsSet(DmsGuid=guid'{DmsGuid}',DocGuid=guid'{DocGuid}',DocType='ZWAS')/$value\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t</customData>\r\n\t\t\t\t\t\t\t\t\t\t\t<attributes>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<ObjectAttribute title=\"{i18n>detail.attachment.UploadedBy}\" text=\"{UploadedBy}\" active=\"false\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<ObjectAttribute title=\"{i18n>detail.attachment.UpoadedOn}\" text=\"{path: 'UploadedDatetime', type: 'sap.ui.model.type.DateTime'}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tactive=\"false\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<ObjectAttribute title=\"{i18n>detail.attachment.DocumentType}\" text=\"{MimeType}\" active=\"false\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t</attributes>\r\n\t\t\t\t\t\t\t\t\t\t\t<statuses>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<ObjectStatus title=\"{i18n>detail.ops.panel.content.textArea.Reason}\" text=\"{Reason}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t</statuses>\r\n\t\t\t\t\t\t\t\t\t\t</UploadCollectionItem>\r\n\t\t\t\t\t\t\t\t\t</items>\r\n\t\t\t\t\t\t\t\t</UploadCollection>\r\n\t\t\t\t\t\t\t</content>\r\n\t\t\t\t\t\t</Panel>\r\n\t\t\t\t\t</uxap:blocks>\r\n\t\t\t\t</uxap:ObjectPageSubSection>\r\n\t\t\t</uxap:ObjectPageSection>\r\n\t\t\t<uxap:ObjectPageSection id=\"idDocFlowLogs\" title=\"{i18n>detail.ObjPageSection.title.DocFlowLogs}\" importance=\"High\" showTitle=\"false\">\r\n\t\t\t\t<uxap:subSections>\r\n\t\t\t\t\t<uxap:ObjectPageSubSection>\r\n\t\t\t\t\t\t<uxap:blocks>\r\n\t\t\t\t\t\t\t<Panel expandable=\"true\" expanded=\"true\">\r\n\t\t\t\t\t\t\t\t<headerToolbar>\r\n\t\t\t\t\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t\t\t\t\t<Title text=\"{i18n>detail.ObjPageSection.title.DocFlowLogs}\"/>\r\n\t\t\t\t\t\t\t\t\t</Toolbar>\r\n\t\t\t\t\t\t\t\t</headerToolbar>\r\n\t\t\t\t\t\t\t\t<content>\r\n\t\t\t\t\t\t\t\t\t<table:TreeTable id=\"docTreeTable\" width=\"100%\"\r\n\t\t\t\t\t\t\t\t\t\trows=\"{path:'WrkDocumentFlow', parameters : { countMode: 'Inline', operationMode: 'Server', numberOfExpandedLevels: 4 }, filters: [{ path: 'AppName', operator: 'EQ', value1: 'AS' }]}\"\r\n\t\t\t\t\t\t\t\t\t\tselectionMode=\"Single\" enableSelectAll=\"true\" enableColumnReordering=\"true\" toggleOpenState=\"onSetrowCount\" visibleRowCount=\"15\"\r\n\t\t\t\t\t\t\t\t\t\texpandFirstLevel=\"true\" rowSelectionChange=\"onSelectionrow\">\r\n\t\t\t\t\t\t\t\t\t\t<table:columns>\r\n\t\t\t\t\t\t\t\t\t\t\t<table:Column width=\"20rem\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.table.column.label.DocType}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<table:template>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{AppName}\" design=\"{= ${CurrentNode} === 'X' ? 'Bold' : 'Standard'}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</table:template>\r\n\t\t\t\t\t\t\t\t\t\t\t</table:Column>\r\n\t\t\t\t\t\t\t\t\t\t\t<table:Column width=\"20rem\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.table.column.label.document}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<table:template>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Link text=\"{Description}\" app:display=\"X\" emphasized=\"{= ${CurrentNode} === 'X' ? true : false}\" press=\"onWrkDocFlowAs\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</table:template>\r\n\t\t\t\t\t\t\t\t\t\t\t</table:Column>\r\n\t\t\t\t\t\t\t\t\t\t\t<table:Column width=\"20rem\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.table.column.label.value}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<table:template>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{path:'Value', formatter:'.formatter.formatAmount'}\" design=\"{= ${CurrentNode} === 'X' ? 'Bold' : 'Standard'}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</table:template>\r\n\t\t\t\t\t\t\t\t\t\t\t</table:Column>\r\n\t\t\t\t\t\t\t\t\t\t\t<table:Column width=\"5rem\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.table.column.label.version}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<table:template>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{Version}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</table:template>\r\n\t\t\t\t\t\t\t\t\t\t\t</table:Column>\r\n\t\t\t\t\t\t\t\t\t\t</table:columns>\r\n\t\t\t\t\t\t\t\t\t</table:TreeTable>\r\n\t\t\t\t\t\t\t\t</content>\r\n\t\t\t\t\t\t\t</Panel>\r\n\t\t\t\t\t\t</uxap:blocks>\r\n\t\t\t\t\t</uxap:ObjectPageSubSection>\r\n\t\t\t\t</uxap:subSections>\r\n\t\t\t</uxap:ObjectPageSection>\r\n\t\t\t<uxap:ObjectPageSection id=\"idWorkFlowLogs\" title=\"{i18n>detail.ObjPageSection.title.WorkFlowLogs}\" importance=\"High\" showTitle=\"false\">\r\n\t\t\t\t<uxap:subSections>\r\n\t\t\t\t\t<uxap:ObjectPageSubSection>\r\n\t\t\t\t\t\t<uxap:blocks>\r\n\t\t\t\t\t\t\t<Panel expandable=\"true\" expanded=\"true\">\r\n\t\t\t\t\t\t\t\t<headerToolbar>\r\n\t\t\t\t\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t\t\t\t\t<Title text=\"Workflow Log\"/>\r\n\t\t\t\t\t\t\t\t\t</Toolbar>\r\n\t\t\t\t\t\t\t\t</headerToolbar>\r\n\t\t\t\t\t\t\t\t<content>\r\n\t\t\t\t\t\t\t\t\t<Table id=\"idWorkflowLogTable\" items=\"{detailView>/Worklog}\" growing=\"true\" growingThreshold=\"999\">\r\n\t\t\t\t\t\t\t\t\t\t<columns>\r\n\t\t\t\t\t\t\t\t\t\t\t<Column width=\"1.3rem\" hAlign=\"Center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{i18n>detail.ops.panel.table.workflow.level}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t\t<Column width=\"7rem\" hAlign=\"Center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{i18n>detail.ops.panel.table.workflow.office}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t\t<Column width=\"3.3rem\" hAlign=\"Center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{i18n>detail.ops.panel.table.workflow.designation}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t\t<Column width=\"3.5rem\" hAlign=\"Center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{i18n>detail.ops.panel.table.workflow.userId}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t\t<Column width=\"3.5rem\" hAlign=\"Center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{i18n>detail.ops.panel.table.workflow.posId}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t\t<Column width=\"4rem\" hAlign=\"Center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{i18n>detail.ops.panel.table.workflow.name}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t\t<Column width=\"2rem\" hAlign=\"Center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{i18n>detail.ops.panel.table.workflow.role}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t\t<Column width=\"4rem\" hAlign=\"Center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{i18n>detail.ops.panel.table.workflow.action}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t\t<Column width=\"5rem\" hAlign=\"Center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{i18n>detail.ops.panel.table.workflow.start}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t\t<Column width=\"5rem\" hAlign=\"Center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{i18n>detail.ops.panel.table.workflow.end}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t\t<Column width=\"4rem\" hAlign=\"Center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{i18n>detail.ops.panel.table.workflow.status}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t</columns>\r\n\t\t\t\t\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t\t\t\t\t<ColumnListItem>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<cells>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{detailView>WfLevel}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{detailView>Office}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{detailView>Designation}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{detailView>Pernr}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{detailView>Agentid}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{detailView>PernrName}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{detailView>Wfrole}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{detailView>Status}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{path:'detailView>CreatedDate', type: 'sap.ui.model.odata.type.DateTime'}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{path:'detailView>CompletedDate', type: 'sap.ui.model.odata.type.DateTime'}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{detailView>WfStatus}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</cells>\r\n\t\t\t\t\t\t\t\t\t\t\t</ColumnListItem>\r\n\t\t\t\t\t\t\t\t\t\t</items>\r\n\t\t\t\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t\t\t\t</content>\r\n\t\t\t\t\t\t\t</Panel>\r\n\t\t\t\t\t\t</uxap:blocks>\r\n\t\t\t\t\t</uxap:ObjectPageSubSection>\r\n\t\t\t\t</uxap:subSections>\r\n\t\t\t</uxap:ObjectPageSection>\r\n\t\t\t<uxap:ObjectPageSection id=\"idNotes\" title=\"{i18n>detail.ObjPageSection.title.Notes}\" importance=\"High\" showTitle=\"false\">\r\n\t\t\t\t<uxap:ObjectPageSubSection>\r\n\t\t\t\t\t<uxap:blocks>\r\n\t\t\t\t\t\t<Panel expandable=\"true\" expanded=\"true\" width=\"auto\">\r\n\t\t\t\t\t\t\t<headerToolbar>\r\n\t\t\t\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t\t\t\t<Title text=\"{i18n>detail.ObjPageSection.title.Notes}\"/>\r\n\t\t\t\t\t\t\t\t</Toolbar>\r\n\t\t\t\t\t\t\t</headerToolbar>\r\n\t\t\t\t\t\t\t<content>\r\n\t\t\t\t\t\t\t\t<l:VerticalLayout id=\"idVerticalLayout\" class=\"sapUiContentPadding\" width=\"100%\">\r\n\t\t\t\t\t\t\t\t\t<rte:RichTextEditor id=\"idRichTextEditor\" value=\"{detailView>/Notingstring}\" width=\"100%\" editable=\"{= (${detailView>/stateId} !== 'D')}\"\r\n\t\t\t\t\t\t\t\t\t\theight=\"15rem\" customToolbar=\"false\" showGroupFont=\"true\" showGroupLink=\"true\" showGroupInsert=\"true\"></rte:RichTextEditor>\r\n\t\t\t\t\t\t\t\t\t<f:SimpleForm minWidth=\"1024\" visible=\"{=${detailView>/stateId} !== 'D'}\" maxContainerCols=\"2\" editable=\"true\" layout=\"ResponsiveGridLayout\"\r\n\t\t\t\t\t\t\t\t\t\tlabelSpanL=\"4\" labelSpanM=\"4\" emptySpanL=\"0\" emptySpanM=\"0\" columnsL=\"2\" columnsM=\"2\">\r\n\t\t\t\t\t\t\t\t\t\t<f:content>\r\n\t\t\t\t\t\t\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<ToolbarSpacer/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button icon=\"sap-icon://post\" text=\"{i18n&gt;POST}\" tooltip=\"{i18n&gt;POST}\" press=\"_handleSaveNotes\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<layoutData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ToolbarLayoutData shrinkable=\"true\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</layoutData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button icon=\"sap-icon://sys-cancel\" press=\"_handleClearNote\" text=\"{i18n&gt;CLEAR}\" tooltip=\"{i18n&gt;CLEAR}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<layoutData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ToolbarLayoutData shrinkable=\"true\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</layoutData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t\t</Toolbar>\r\n\t\t\t\t\t\t\t\t\t\t</f:content>\r\n\t\t\t\t\t\t\t\t\t</f:SimpleForm>\r\n\t\t\t\t\t\t\t\t\t<!-- <Button icon=\"sap-icon://post\" text=\"{i18n>detail.footer.button.post}\" press=\"onPostPress\" enabled=\"{detailView>/bEditable}\"/> -->\r\n\t\t\t\t\t\t\t\t\t<List items=\"{detailView>/UserNotes}\">\r\n\t\t\t\t\t\t\t\t\t\t<FeedListItem sender=\"{detailView>Name}\" senderPress=\"onPress\" iconPress=\"onPress\"\r\n\t\t\t\t\t\t\t\t\t\t\ticon=\"{path: 'detailView>ImageUiFlg',formatter: '.formatter.digitialFilePath'}\" iconDensityAware=\"false\" info=\"{i18n>detail.note.info.date}\"\r\n\t\t\t\t\t\t\t\t\t\t\ttimestamp=\"{detailView>Createdate}\" text=\"{detailView>Notingstring}\" actions=\"{path: 'detailView>Actions/', templateShareable: false}\">\r\n\t\t\t\t\t\t\t\t\t\t\t<FeedListItemAction text=\"{detailView>Text}\" icon=\"{detailView>Icon}\" key=\"{detailView>Key}\" press=\"onNoteActionPress\"/>\r\n\t\t\t\t\t\t\t\t\t\t</FeedListItem>\r\n\t\t\t\t\t\t\t\t\t</List>\r\n\t\t\t\t\t\t\t\t</l:VerticalLayout>\r\n\t\t\t\t\t\t\t</content>\r\n\t\t\t\t\t\t</Panel>\r\n\t\t\t\t\t</uxap:blocks>\r\n\t\t\t\t</uxap:ObjectPageSubSection>\r\n\t\t\t</uxap:ObjectPageSection>\r\n\t\t\t<uxap:ObjectPageSection id=\"idTechnicalData\" title=\"{i18n>detail.ObjPageSection.title.TechnicalData}\" importance=\"High\" showTitle=\"false\">\r\n\t\t\t\t<uxap:ObjectPageSubSection>\r\n\t\t\t\t\t<uxap:blocks>\r\n\t\t\t\t\t\t<Panel expandable=\"true\" expanded=\"true\" width=\"auto\">\r\n\t\t\t\t\t\t\t<headerToolbar>\r\n\t\t\t\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t\t\t\t<Title text=\"{i18n>detail.ops.panel.title.TechnicalData}\"/>\r\n\t\t\t\t\t\t\t\t</Toolbar>\r\n\t\t\t\t\t\t\t</headerToolbar>\r\n\t\t\t\t\t\t\t<content>\r\n\t\t\t\t\t\t\t\t<f:Form editable=\"true\">\r\n\t\t\t\t\t\t\t\t\t<f:layout>\r\n\t\t\t\t\t\t\t\t\t\t<f:ResponsiveGridLayout labelSpanXL=\"12\" labelSpanL=\"12\" labelSpanM=\"12\" labelSpanS=\"12\" emptySpanXL=\"0\" emptySpanL=\"0\" emptySpanM=\"0\"\r\n\t\t\t\t\t\t\t\t\t\t\temptySpanS=\"0\" columnsXL=\"3\" columnsL=\"3\" columnsM=\"3\"/>\r\n\t\t\t\t\t\t\t\t\t</f:layout>\r\n\t\t\t\t\t\t\t\t\t<f:formContainers>\r\n\t\t\t\t\t\t\t\t\t\t<f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t\t\t<f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.label.createdBy}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Input value=\"{UserIdCrName}\" editable=\"false\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t\t<f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.label.changedOn}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Input value=\"{path:'DatetimeCh',type: 'sap.ui.model.odata.type.DateTime'}\" editable=\"false\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t\t<f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t\t\t<f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.label.createdOn}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Input value=\"{path:'DatetimeCr',type: 'sap.ui.model.odata.type.DateTime'}\" editable=\"false\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t\t<f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.label.Position}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Select app:bindPath=\"Position\" id=\"idPosition\" selectedKey=\"{Udf1}\" enabled=\"false\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- <items>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:Item text=\"{STEXT}\" key=\"{position}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</items> -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t\t<f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t\t\t<f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.label.changedBy}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Input value=\"{UserIdCh}\" editable=\"false\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t</f:formContainers>\r\n\t\t\t\t\t\t\t\t</f:Form>\r\n\t\t\t\t\t\t\t</content>\r\n\t\t\t\t\t\t</Panel>\r\n\t\t\t\t\t</uxap:blocks>\r\n\t\t\t\t</uxap:ObjectPageSubSection>\r\n\t\t\t</uxap:ObjectPageSection>\r\n\t\t</uxap:sections>\r\n\t\t<uxap:footer>\r\n\t\t\t<Toolbar>\r\n\t\t\t\t<Button id=\"idMessagePopover\" icon=\"sap-icon://message-popup\" text=\"\" type=\"Emphasized\" press=\"handleMessagePopoverPress\"/>\r\n\t\t\t\t<Input id=\"idBudgetCtrl\" value=\"{BudgetCtrl}\" visible=\"false\" editable=\"false\" change=\"onFieldChange\"/>\r\n\t\t\t\t<ToolbarSpacer/>\r\n\t\t\t\t<Button type=\"Emphasized\" text=\"{i18n>detail.footer.buttons.save}\" press=\"onSavePress\"\r\n\t\t\t\t\tvisible=\"{= (${detailView>/stateId} !== 'D' &amp;&amp; ${detailView>/SubmitBtnVisibility} === 'X')? true : false}\"/>\r\n\t\t\t\t<Button type=\"Emphasized\" text=\"{i18n>detail.footer.buttons.submit}\" press=\"onSubmitPress\"\r\n\t\t\t\t\tvisible=\"{= (${detailView>/stateId} !== 'D' &amp;&amp; ${detailView>/SubmitBtnVisibility} === 'X')? true : false}\"/>\r\n\t\t\t\t<Button type=\"Emphasized\" text=\"{i18n>detail.footer.buttons.nextLevel}\" press=\"onNextLevelPress\"\r\n\t\t\t\t\tvisible=\"{= (${detailView>/stateId} !== 'D' &amp;&amp; ${detailView>/NextBtnVisibility} === 'X')? true : false}\"/>\r\n\t\t\t\t<Button type=\"Emphasized\" text=\"{i18n>detail.footer.buttons.approve}\" press=\"onApprovePress\"\r\n\t\t\t\t\tvisible=\"{= (${detailView>/stateId} !== 'D' &amp;&amp; ${detailView>/ApproveBtnVisibility} === 'X')? true : false}\"/>\r\n\t\t\t\t<Button type=\"Default\" text=\"{i18n>detail.footer.buttons.return}\" press=\"onReturnPress\"\r\n\t\t\t\t\tvisible=\"{= (${detailView>/stateId} !== 'D' &amp;&amp; ${detailView>/ReturnBtnVisibility} === 'X')? true : false}\"/>\r\n\t\t\t\t<Button type=\"Default\" text=\"{i18n>detail.footer.buttons.onHold}\" press=\"onWithheldPress\"\r\n\t\t\t\t\tvisible=\"{= (${detailView>/stateId} !== 'D' &amp;&amp; ${detailView>/OnholdBtnVisibility} === 'X')? true : false}\"/>\r\n\t\t\t\t<Button type=\"Default\" text=\"{i18n>detail.footer.buttons.cancel}\" press=\"onCancelPress\"\r\n\t\t\t\t\tvisible=\"{= (${detailView>/stateId} !== 'D' &amp;&amp; ${detailView>/SubmitBtnVisibility} === 'X')? true : false}\"/>\r\n\t\t\t</Toolbar>\r\n\t\t</uxap:footer>\r\n\t</uxap:ObjectPageLayout>\r\n</mvc:View>",
		"com/goap/cfms/works/as/view/App.view.xml": "<mvc:View xmlns:mvc=\"sap.ui.core.mvc\" controllerName=\"com.goap.cfms.works.as.controller.App\" displayBlock=\"true\" xmlns:m=\"sap.m\" xmlns:l=\"sap.ui.layout\"\r\nxmlns=\"sap.ui.commons\"\r\n\theight=\"100%\" class=\"sapUiSizeCompact\">\r\n\t<m:App id=\"app\" busy=\"{appView>/busy}\" busyIndicatorDelay=\"{appView>/delay}\">\r\n\t<l:Splitter>\r\n\t\t<m:App id=\"MasterPage\">\r\n\t\t\t<m:layoutData>\r\n\t\t\t\t<l:SplitterLayoutData size=\"30%\" />\r\n\t\t\t</m:layoutData>\r\n\t\t</m:App>\r\n\t\t<m:App id=\"DetailPage\">\r\n\t\t\t<m:layoutData>\r\n\t\t\t\t<l:SplitterLayoutData size=\"70%\" />\r\n\t\t\t</m:layoutData>\r\n\t\t</m:App>\r\n\t</l:Splitter>\r\n\t</m:App>\r\n</mvc:View>",
		"com/goap/cfms/works/as/view/NotFound.view.xml": "<mvc:View\r\n\tcontrollerName=\"com.goap.cfms.works.as.controller.NotFound\"\r\n\txmlns:mvc=\"sap.ui.core.mvc\"\r\n\txmlns=\"sap.m\">\r\n\r\n\t\r\n</mvc:View>",
		"com/goap/cfms/works/as/fragment/additionalNote.fragment.xml": "<core:FragmentDefinition height=\"100%\" xmlns:rte=\"sap.ui.richtexteditor\" xmlns:core=\"sap.ui.core\" xmlns=\"sap.m\">\r\n\t<Dialog title=\"Order - Additional Note\" contentHeight=\"50%\" contentWidth=\"50%\">\r\n\t\t<content>\r\n\t\t\t<rte:RichTextEditor editable=\"{= (${detailView>/stateId} !== 'D') &amp;&amp; (${detailView>/SubmitBtnVisibility} === 'X' ? true : true )}\"\r\n\t\t\t\t\t\t\t\t\t\tvalue=\"{detailView>/addNotingstring}\"\r\n\t\t\t\t\t\t\t\t\t\twidth= \"100%\" \r\n\t\t\t\t\t\t\t\t\t\theight=\"25rem\" \r\n\t\t\t\t\t\t\t\t\t\tcustomToolbar=\"true\"\r\n\t\t\t\t\t\t\t\t\t\tshowGroupFont= \"true\"\r\n\t\t\t\t\t\t\t\t\t\tshowGroupLink= \"true\"\r\n\t\t\t\t\t\t\t\t\t\tshowGroupInsert=\"true\">\r\n\t\t\t\t\t\t\t\t\t</rte:RichTextEditor>\t\r\n\t\t</content>\r\n\t\t<buttons>\r\n\t\t\t<Button text=\"{i18n>detail.frag.action.save}\"  press=\"onSaveAdditionalNote\" type=\"Accept\" visible=\"{= (${detailView>/stateId} !== 'D') }\"></Button>\r\n\t\t\t<Button text=\"{i18n>detail.frag.action.cancel}\" press=\"onCancelAdditionalNote\"></Button>\r\n\t\t</buttons>\r\n\t</Dialog>\r\n</core:FragmentDefinition>",
		"com/goap/cfms/works/as/fragment/ddoVH.fragment.xml": "<core:FragmentDefinition\r\n\txmlns=\"sap.m\"\r\n\txmlns:core=\"sap.ui.core\">\r\n\t<SelectDialog\r\n\t\ttitle=\"{i18n>detail.ops.panel.content.table.column.vh.title.ddo}\"\r\n\t\tmultiSelect = \"false\"\r\n\t\trememberSelections = \"true\"\r\n\t\tliveChange=\"handleHOADDOSearch\"\r\n        search=\"handleHOADDOSearch\"\r\n\t\tconfirm=\"onHOADDOSelect\"\r\n\t\tcancel=\"handleHOADDOClose\">\r\n        \r\n\t</SelectDialog>\r\n</core:FragmentDefinition>",
		"com/goap/cfms/works/as/fragment/sort.fragment.xml": "<core:FragmentDefinition\r\n\txmlns=\"sap.m\"\r\n\txmlns:core=\"sap.ui.core\">\r\n\t<ViewSettingsDialog\r\n\t\tconfirm=\"handleConfirm\">\r\n\t\t<sortItems>\r\n\t\t\t<ViewSettingsItem text=\"Short Description\" key=\"short_desc\" selected=\"true\" />\r\n\t\t\t<ViewSettingsItem text=\"Estimate value\" key=\"estimate_val\" />\r\n\t\t\t<ViewSettingsItem text=\"Code\" key=\"code\" />\r\n\t\t\t<ViewSettingsItem text=\"Change At\" key=\"changetat\" />\r\n\t\t</sortItems>\r\n\t\t\r\n\t</ViewSettingsDialog>\r\n</core:FragmentDefinition>",
		"com/goap/cfms/works/as/fragment/createAS.fragment.xml": "<!-- \r\n\r\n Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n\r\n -->\r\n<core:FragmentDefinition height=\"100%\" xmlns:layout=\"sap.ui.layout\" xmlns:form=\"sap.ui.layout.form\" xmlns:core=\"sap.ui.core\" xmlns=\"sap.m\">\r\n\t<Dialog title=\"{i18n>master.frag.title.createas}\" contentHeight=\"40%\" contentWidth=\"40%\">\r\n\t\t<content>\r\n\t\t\t<VBox class=\"sapUiSmallMarginTop\">\r\n\t\t\t\t\r\n\t\t\t\t<!-- Prashil: Set Visible false to avoid testing Amend Function until confirmed -->\r\n\t\t\t\t<HBox justifyContent=\"SpaceBetween\" width=\"25rem\">\r\n\t\t\t\t\t<HBox alignItems=\"Center\" class=\"sapUiMediumMarginEnd\">\r\n\t\t\t\t\t\t<RadioButton id=\"idAmendRadioBtn\" groupName=\"GroupA\" text=\"{i18n>master.frag.label.amendment}\" select=\"onSelectRadioAS\" selected=\"true\"/>\r\n\t\t\t\t\t</HBox>\r\n\t\t\t\t\t<Input id=\"idAmendASCode\" placeholder=\"{i18n>master.frag.popup.placeholder.new}\" width=\"12rem\" editable=\"{createNewASModel>/amendEditable}\"\r\n\t\t\t\t\t\tsuggestionItemSelected=\"handleSuggestionItemSelected\" showSuggestion=\"true\" showValueHelp=\"true\" valueHelpOnly=\"true\"\r\n\t\t\t\t\t\tliveChange=\"handleLiveChange\" suggestionItems=\"{/ZWRK_C_CODE}\" valueHelpRequest=\"handleValueHelp\">\r\n\t\t\t\t\t\t<customData>\r\n\t\t\t\t\t\t\t<core:CustomData key=\"key\" value=\"code\"/>\r\n\t\t\t\t\t\t\t<core:CustomData key=\"text\" value=\"code\"/>\r\n\t\t\t\t\t\t\t<core:CustomData key=\"reqFields\" value=\"guid\"/>\r\n\t\t\t\t\t\t\t<core:CustomData key=\"entityInfo\" value=\"{entitySet: 'ZWRK_C_CODE', entityType: 'ZWRK_C_CODEType'}\"/>\r\n\t\t\t\t\t\t\t<core:CustomData key=\"filterArray\" value=\"{filter:[{key: 'status', filterOperator: 'EQ', filterValue: 'E0006'},{key: 'PositionId', filterOperator: 'EQ', dynamic: 'X', model : 'appView', property: '/position'},{key: 'ApplicationId', filterOperator: 'EQ', filterValue: 'AS'}]}\"/>\r\n\t\t\t\t\t\t\t<core:CustomData key=\"mode\" value=\"SingleSelectMaster\"/>\r\n\t\t\t\t\t\t</customData>\r\n\t\t\t\t\t\t<suggestionItems>\r\n\t\t\t\t\t\t\t<core:Item text=\"{code}\" key=\"{code}\"/>\r\n\t\t\t\t\t\t</suggestionItems>\r\n\t\t\t\t\t</Input>\r\n\t\t\t\t</HBox>\r\n\t\t\t\t<HBox justifyContent=\"SpaceBetween\" width=\"25rem\">\r\n\t\t\t\t\t<HBox alignItems=\"Center\" class=\"sapUiMediumMarginEnd\">\r\n\t\t\t\t\t\t<RadioButton id=\"idCopyFromRadioBtn\" groupName=\"GroupA\" text=\"{i18n>master.frag.label.CopyFrom}\" select=\"onSelectRadioAS\"/>\r\n\t\t\t\t\t</HBox>\r\n\t\t\t\t\t<Input id=\"idCopyFromASCode\" width=\"12rem\" placeholder=\"{i18n>master.frag.popup.placeholder.new}\"\r\n\t\t\t\t\t\teditable=\"{createNewASModel>/copyEditable}\" suggestionItemSelected=\"handleSuggestionItemSelected\" showSuggestion=\"true\" showValueHelp=\"true\"\r\n\t\t\t\t\t\tvalueHelpOnly=\"true\" liveChange=\"handleLiveChange\" suggestionItems=\"{/ZWRK_C_CODE}\" valueHelpRequest=\"handleValueHelp\">\r\n\t\t\t\t\t\t<customData>\r\n\t\t\t\t\t\t\t<core:CustomData key=\"key\" value=\"code\"/>\r\n\t\t\t\t\t\t\t<core:CustomData key=\"text\" value=\"code\"/>\r\n\t\t\t\t\t\t\t<core:CustomData key=\"reqFields\" value=\"guid\"/>\r\n\t\t\t\t\t\t\t<core:CustomData key=\"entityInfo\" value=\"{entitySet: 'ZWRK_C_CODE', entityType: 'ZWRK_C_CODEType'}\"/>\r\n\t\t\t\t\t\t\t<core:CustomData key=\"filterArray\" value=\"{filter:[{key: 'status', filterOperator: 'EQ', filterValue: 'E0006'}]}\"/>\r\n\t\t\t\t\t\t\t<core:CustomData key=\"mode\" value=\"SingleSelectMaster\"/>\r\n\t\t\t\t\t\t</customData>\r\n\t\t\t\t\t\t<suggestionItems>\r\n\t\t\t\t\t\t\t<core:Item text=\"{code}\" key=\"{code}\"/>\r\n\t\t\t\t\t\t</suggestionItems>\r\n\t\t\t\t\t</Input>\r\n\t\t\t\t</HBox>\r\n\t\t\t\t<!-- Prashil: Set Visible false to avoid testing Amend Function until confirmed -->\r\n\t\t\t\t<HBox alignItems=\"Center\" visible=\"false\">\r\n\t\t\t\t\t<RadioButton id=\"idBundleRadioBtn\" groupName=\"GroupA\" text=\"{i18n>master.frag.label.Bundle}\" select=\"onSelectRadioAS\"/>\r\n\t\t\t\t</HBox>\r\n\t\t\t\t<HBox justifyContent=\"SpaceBetween\" width=\"25rem\">\r\n\t\t\t\t\t<HBox alignItems=\"Center\" class=\"sapUiMediumMarginEnd\">\r\n\t\t\t\t\t\t<RadioButton id=\"idMigratedRadioBtn\" groupName=\"GroupA\" text=\"{i18n>master.frag.label.migrated}\" select=\"onSelectRadioAS\"/>\r\n\t\t\t\t\t</HBox>\r\n\t\t\t\t</HBox>\r\n\t\t\t\t<HBox visible=\"{createNewASModel>/migratedASRadioButtons}\">\r\n\t\t\t\t\t<HBox width=\"5%\"></HBox>\r\n\t\t\t\t\t<VBox width=\"40%\">\r\n\t\t\t\t\t\t<HBox justifyContent=\"SpaceBetween\" width=\"22.5rem\">\r\n\t\t\t\t\t\t\t<HBox alignItems=\"Center\" class=\"sapUiMediumMarginEnd\">\r\n\t\t\t\t\t\t\t\t<RadioButton id=\"idMigratedRadioBtnPhaseOne\" selected=\"{createNewASModel>/migratedRadioBtnPhaseOneSelected}\" groupName=\"GroupC\"\r\n\t\t\t\t\t\t\t\t\ttext=\"{i18n>master.frag.label.phaseOne}\" select=\"onSelectRadioButton\"/>\r\n\t\t\t\t\t\t\t</HBox>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t</HBox>\r\n\t\t\t\t\t\t<HBox justifyContent=\"SpaceBetween\" width=\"22.5rem\">\r\n\t\t\t\t\t\t\t<HBox alignItems=\"Center\" class=\"sapUiMediumMarginEnd\">\r\n\t\t\t\t\t\t\t\t<RadioButton id=\"idMigratedRadioBtnNonCfms\" selected=\"{createNewASModel>/migratedRadioBtnNonCfmsSelected}\" groupName=\"Groupc\"\r\n\t\t\t\t\t\t\t\t\ttext=\"{i18n>master.frag.label.nonCfms}\" select=\"onSelectRadioButton\"/>\r\n\t\t\t\t\t\t\t</HBox>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t</HBox>\r\n\t\t\t\t\t</VBox>\r\n\t\t\t\t</HBox>\r\n\t\t\t\t<HBox alignItems=\"Center\">\r\n\t\t\t\t\t<RadioButton id=\"idNewRadioBtn\" groupName=\"GroupA\" text=\"{i18n>master.frag.label.new}\"  select=\"onSelectRadioAS\"  selected=\"false\" />\r\n\t\t\t\t</HBox>\r\n\t\t\t\t<HBox visible=\"{createNewASModel>/NewASRadioButtons}\">\r\n\t\t\t\t\t<HBox width=\"5%\"></HBox>\r\n\t\t\t\t\t<HBox width=\"40%\">\r\n\t\t\t\t\t\t<HBox justifyContent=\"SpaceBetween\" width=\"22.5rem\">\r\n\t\t\t\t\t\t\t<HBox alignItems=\"Center\" class=\"sapUiMediumMarginEnd\">\r\n\t\t\t\t\t\t\t\t<RadioButton id=\"idNewRadioBtnGO\" selected=\"{createNewASModel>/NewRadioBtnPhaseOneSelected}\" groupName=\"GroupC\"\r\n\t\t\t\t\t\t\t\t\ttext=\"{i18n>master.frag.label.GO}\" select=\"onSelectNewRadioButton\"/>\r\n\t\t\t\t\t\t\t</HBox>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t</HBox>\r\n\t\t\t\t\t\t<HBox justifyContent=\"SpaceBetween\" width=\"22.5rem\">\r\n\t\t\t\t\t\t\t<HBox alignItems=\"Center\" class=\"sapUiMediumMarginEnd\">\r\n\t\t\t\t\t\t\t\t<RadioButton id=\"idNewRadioBtnProceeding\" selected=\"{createNewASModel>/NewRadioBtnNonCfmsSelected}\" groupName=\"Groupc\"\r\n\t\t\t\t\t\t\t\t\ttext=\"{i18n>master.frag.label.proceeding}\" select=\"onSelectNewRadioButton\"/>\r\n\t\t\t\t\t\t\t</HBox>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</HBox>\r\n\t\t\t\t\t</HBox>\r\n\t\t\t\t</HBox>\r\n\t\t\t</VBox>\r\n\t\t\t<Table id=\"idMasterBundleCodeTable\" inset=\"false\" mode=\"SingleSelectLeft\" visible=\"false\" items=\"{oBundleCodeModel>/}\">\r\n\t\t\t\t<headerToolbar>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<content>\r\n\t\t\t\t\t\t\t<ToolbarSpacer/>\r\n\t\t\t\t\t\t\t<Button icon=\"sap-icon://add\" type=\"Transparent\" width=\"5rem\" press=\"onAddNewRow\"/>\r\n\t\t\t\t\t\t\t<Button icon=\"sap-icon://delete\" type=\"Transparent\" press=\"onDeleteRow\"/>\r\n\t\t\t\t\t\t</content>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</headerToolbar>\r\n\t\t\t\t<columns>\r\n\t\t\t\t\t<Column>\r\n\t\t\t\t\t\t<Text text=\"{i18n>master.frag.table.column.code}\"/>\r\n\t\t\t\t\t</Column>\r\n\t\t\t\t\t<Column>\r\n\t\t\t\t\t\t<Text text=\"{i18n>master.frag.table.column.description}\"/>\r\n\t\t\t\t\t</Column>\r\n\t\t\t\t\t<Column>\r\n\t\t\t\t\t\t<Text text=\"{i18n>master.frag.table.column.amount}\"/>\r\n\t\t\t\t\t</Column>\r\n\t\t\t\t</columns>\r\n\t\t\t\t<items>\r\n\t\t\t\t\t<ColumnListItem>\r\n\t\t\t\t\t\t<cells>\r\n\t\t\t\t\t\t\t<Input value=\"{oBundleCodeModel>code}\" showSuggestion=\"true\" showValueHelp=\"true\"/>\r\n\t\t\t\t\t\t\t<Text text=\"{oBundleCodeModel>description}\"/>\r\n\t\t\t\t\t\t\t<Text text=\"{oBundleCodeModel>amount}\"/>\r\n\t\t\t\t\t\t</cells>\r\n\t\t\t\t\t</ColumnListItem>\r\n\t\t\t\t</items>\r\n\t\t\t</Table>\r\n\t\t</content>\r\n\t\t<buttons>\r\n\t\t\t<Button text=\"{i18n>master.frag.action.create}\" press=\"onCreateAS\" type=\"Accept\" enabled=\"{masterView>/bCreateBtnEnable}\"></Button>\r\n\t\t\t<Button text=\"{i18n>master.frag.action.cancel}\" press=\"onCancelAS\"></Button>\r\n\t\t</buttons>\r\n\t</Dialog>\r\n</core:FragmentDefinition>",
		"com/goap/cfms/works/as/fragment/createScheme.fragment.xml": "<core:FragmentDefinition xmlns:core=\"sap.ui.core\"  xmlns=\"sap.m\" xmlns:f=\"sap.ui.layout.form\">\r\n\t<Dialog title=\"{i18n>detail.frag.title.screateScheme}\" contentHeight=\"50%\" contentWidth=\"50%\">\r\n\t\t<buttons>\r\n\t\t\t<Button text=\"{i18n>detail.frag.action.save}\"  press=\"_handleSaveSchemeCreate\" type=\"Accept\" visible=\"{= (${detailView>/stateId} !== 'D') }\"></Button>\r\n\t\t\t<Button text=\"{i18n>detail.frag.action.cancel}\" press=\"_handleCancelSchemeCreate\"></Button>\r\n\t\t</buttons>\r\n\t\t<content>\r\n\t\t\t<f:Form editable=\"true\">\r\n\t\t\t\t<f:layout>\r\n\t\t\t\t\t<f:ResponsiveGridLayout class=\"noPadding\" labelSpanXL=\"12\" labelSpanL=\"12\" labelSpanM=\"12\" labelSpanS=\"12\" emptySpanXL=\"0\" emptySpanL=\"0\"\r\n\t\t\t\t\t\temptySpanM=\"0\" emptySpanS=\"0\" columnsXL=\"1\" columnsL=\"1\" columnsM=\"1\"/>\r\n\t\t\t\t</f:layout>\r\n\t\t\t\t<f:formContainers>\r\n\t\t\t\t\t<f:FormContainer>\r\n\t\t\t\t\t<!--<f:FormElement>\r\n\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.label.SchmeAbr}\" required=\"true\"/>\r\n\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t<Input editable=\"{= ${detailView>/stateId} !== 'D'}\"\r\n\t\t\t\t\t\t\t\t\t\tmaxLength=\"{path:'/#WrkSchemes/SchemeAbbr/@maxLength',formatter:'Number'}\"\r\n\t\t\t\t\t\t\t\t\t\tvalue=\"{detailView>/schemeAbr}\" placeholder =\"Enter {i18n>detail.ops.panel.content.label.SchmeAbr}\">\r\n\t\t\t\t\t\t\t\t</Input>\t\r\n\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t</f:FormElement>-->\r\n\t\t\t\t\t\t<f:FormElement label=\"\"> \r\n\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t<Label text=\"{i18n>detail.ops.panel.content.label.SchmeDesc}\" required=\"true\" labelFor=\"idCode\"/>\r\n\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t<TextArea editable=\"{= ${detailView>/stateId} !== 'D'}\"\r\n\t\t\t\t\t\t\t\t\tmaxLength=\"{path:'/#WrkSchemes/SchemeDesc/@maxLength',formatter:'Number'}\"\r\n\t\t\t\t\t\t\t\t\tvalue=\"{detailView>/schemeDesc}\" placeholder =\"Enter {i18n>detail.ops.panel.content.label.SchmeDesc}\">\r\n\t\t\t\t\t\t\t\t</TextArea>\t\r\n\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t</f:formContainers>\r\n\t\t\t</f:Form>\r\n\t\t</content>\r\n\t</Dialog>\r\n</core:FragmentDefinition>",
		"com/goap/cfms/works/as/fragment/POUpload.fragment.xml": "<!-- \r\n\r\n Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n\r\n -->\r\n<core:FragmentDefinition height=\"50%\" xmlns:core=\"sap.ui.core\" xmlns=\"sap.m\" xmlns:u=\"sap.ui.unified\">\r\n\t<Dialog title=\"{i18n>frag.poupload.title}\" contentHeight=\"100%\" contentWidth=\"100%\" afterClose=\"onAfterClosePODialog\">\r\n\t\t<content>\r\n\t\t\t<Panel>\r\n\t\t\t\t<HBox width=\"100%\">\r\n\t\t\t\t\t<HBox width=\"80%\">\r\n\t\t\t\t\t\t<u:FileUploader id=\"fileUpload\" fileType=\"csv\" typeMissmatch=\"onTypeMissmatch\" fileSizeExceed=\"onFileSizeExceed\" change=\"onFileUploaderChange\"\r\n\t\t\t\t\t\tuploadComplete=\"onUploadComplete\" uploadUrl=\"/sap/opu/odata/sap/ZGW_WRK_ADM_SANC_SRV/WrkAppTypeSet\" placeholder=\"No file chosen\"/>\r\n\t\t\t\t\t\t<Button icon=\"sap-icon://upload\" press=\"onPOUpload\"/>\r\n\t\t\t\t\t</HBox>\r\n\t\t\t\t\t<HBox width=\"20%\">\r\n\t\t\t\t\t\t<Link text=\"{i18n>frag.poupload.link.title}\" href=\"/sap/opu/odata/sap/ZGW_WRK_ADM_SANC_SRV/WrkAgrAttachmentSet('test')/$value\"/>\r\n\t\t\t\t\t</HBox>\r\n\t\t\t\t</HBox>\r\n\t\t\t</Panel>\r\n\t\t\t<Table items=\"{uploadedItem>/}\"  growing=\"true\" growingScrollToLoad=\"true\">\r\n\t\t\t\t<headerToolbar>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Title text=\"PO Details\" level=\"H2\"/>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</headerToolbar>\r\n\t\t\t\t<columns>\r\n\t\t\t\t\t<Column hAlign=\"Center\" width=\"5rem\">\r\n\t\t\t\t\t\t<Text text=\"Record\"/>\r\n\t\t\t\t\t</Column>\r\n\t\t\t\t\t<Column hAlign=\"Center\" width=\"7rem\">\r\n\t\t\t\t\t\t<Text text=\"Message Type\"/>\r\n\t\t\t\t\t</Column>\r\n\t\t\t\t\t<Column hAlign=\"Center\">\r\n\t\t\t\t\t\t<Text text=\"Message\"/>\r\n\t\t\t\t\t</Column>\r\n\t\t\t\t</columns>\r\n\t\t\t\t<items>\r\n\t\t\t\t\t<ColumnListItem>\r\n\t\t\t\t\t\t<cells>\r\n\t\t\t\t\t\t\t<Text text=\"{uploadedItem>RecordNo}\"/>\r\n\t\t\t\t\t\t</cells>\r\n\t\t\t\t\t\t<cells>\r\n\t\t\t\t\t\t\t<Text text=\"{uploadedItem>Type}\"/>\r\n\t\t\t\t\t\t</cells>\r\n\t\t\t\t\t\t<cells>\r\n\t\t\t\t\t\t\t<Text text=\"{uploadedItem>Message}\"/>\r\n\t\t\t\t\t\t</cells>\r\n\t\t\t\t\t</ColumnListItem>\r\n\t\t\t\t</items>\r\n\t\t\t</Table>\r\n\t\t</content>\r\n\t\t<buttons>\r\n\t\t\t<Button text=\"{i18n>frag.poupload.ok}\" press=\"onOKPOUploadDialog\"></Button>\r\n\t\t\t<!--<Button text=\"{i18n>frag.poupload.cancel}\" press=\"onClosePOUploadDialog\"></Button>-->\r\n\t\t</buttons>\r\n\t</Dialog>\r\n</core:FragmentDefinition>",
		"com/goap/cfms/works/as/fragment/ValueHelpDialog.fragment.xml": "<core:FragmentDefinition\r\n\txmlns=\"sap.m\"\r\n\txmlns:core=\"sap.ui.core\">\r\n\t<SelectDialog  id=\"idValueHelpSelectDialog\"\r\n\t\ttitle=\"DDO\"\r\n\t\tclass=\"sapUiPopupWithPadding\"\r\n\t\titems=\"{valueHelpModel>/}\"\r\n\t\tsearch=\"_handleValueHelpSearch\"\r\n\t\tconfirm=\"_handleValueHelpClose\"\r\n\t\tcancel=\"_handleValueHelpClose\">\r\n\t\t<StandardListItem\r\n\t\t\ticonDensityAware=\"false\"\r\n\t\t\ticonInset=\"false\"\r\n\t\t\ttitle=\"{valueHelpModel>Key}\"\r\n\t\t\tdescription=\"{valueHelpModel>Desc}\" />\r\n\t</SelectDialog>\r\n</core:FragmentDefinition>",
		"com/goap/cfms/works/as/fragment/nonDcwHoaTable.fragment.xml": "<core:FragmentDefinition height=\"100%\"\r\n    xmlns:layout=\"sap.ui.layout\"\r\n    xmlns:form=\"sap.ui.layout.form\"\r\n    xmlns:core=\"sap.ui.core\"\r\n    xmlns=\"sap.m\">\r\n\t<Table id=\"idWorksHoA\" inset=\"false\" mode=\"None\" items=\"{WrkASHOA}\">\r\n        <headerToolbar>\r\n            <Toolbar>\r\n                <content>\r\n                    <Title text=\"{i18n>detail.ops.panel.content.table.hoaddo.title}({detailView>/DDOTableRowCount})\" level=\"H2\"/>\r\n                    <ToolbarSpacer/>\r\n                    <Button icon=\"sap-icon://add\" tooltip=\"{i18n>tooltip.addToTable}\" type=\"Transparent\" press=\"addNewRowDDOs\" visible=\"{= ${detailView>/bEditable} &amp;&amp; (${detailView>/SubmitBtnVisibility} === 'X' ? true: false)}\"/>\r\n                </content>\r\n            </Toolbar>\r\n        </headerToolbar>\r\n        <columns>\r\n            <Column visible=\"false\">\r\n                <Text text=\"{i18n>detail.ops.panel.content.table.column.text.DDO}\" />\r\n            </Column>\r\n            <Column width=\"2.7rem\">\r\n                <Text text=\"{i18n>detail.ops.panel.content.table.column.text.ItemNo}\" />\r\n            </Column>\r\n            <Column width=\"9rem\">\r\n                <Text text=\"{i18n>detail.ops.panel.content.table.column.text.HeadOfAccount}\" />\r\n            </Column>\r\n            <Column width=\"6rem\">\r\n                <Text text=\"{i18n>detail.ops.panel.content.table.column.text.DDO}\" />\r\n            </Column>\r\n            <Column width=\"3rem\">\r\n                <Text text=\"{i18n>detail.ops.panel.content.table.column.text.Share}\" />\r\n            </Column>\r\n            <Column width=\"3rem\" visible=\"false\">\r\n                <Text text=\"{i18n>detail.ops.panel.content.table.column.text.RefNum}\" />\r\n            </Column>\r\n            <Column width=\"6rem\">\r\n                <Text text=\"{i18n>detail.ops.panel.content.table.column.text.validFrom}\" />\r\n            </Column>\r\n            <Column width=\"6rem\">\r\n                <Text text=\"{i18n>detail.ops.panel.content.table.column.text.validTo}\" />\r\n            </Column>\t\r\n            <Column width=\"1.6rem\" visible=\"{= ${detailView>/bEditable} &amp;&amp; (${detailView>/SubmitBtnVisibility} === 'X' ? true: false)}\">\r\n                <Text text=\"{i18n>detail.ops.panel.content.table.column.text.delete}\"/>\r\n            </Column>\t\t\t\t\t\t\t\t\t\t\t\r\n        </columns>\r\n        <items>\r\n            <ColumnListItem id=\"idHoaListItem\">\r\n                <cells>\r\n                    <Text text=\"{HoaGuid}\" visible=\"false\"/>\r\n                    <Input value=\"{ItemNo}\" tooltip=\"{ItemNo}\" editable=\"false\" textAlign=\"Right\"/>\r\n                    <Input change=\"onDdoChange\" \r\n                        app:bindPath=\"Hoa\"\r\n                        selectedKey=\"{Hoa}\"\r\n                        required=\"{= ${oControlModel>/Hoa/mandatory}}\"\r\n                        showSuggestion=\"true\"\r\n                        showValueHelp=\"true\"\r\n                        suggest=\"handleSuggest\"\r\n                        valueHelpRequest=\"handleValueHelp\"\r\n                        editable=\"{= ${oControlModel>/Hoa/display} &amp;&amp; ${detailView>/bEditable} &amp;&amp; (${detailView>/SubmitBtnVisibility} === 'X' ? true: false)}\"\r\n                        valueState=\"{oControlModel>/Hoa/valueState}\" \r\n                        valueStateText=\"{oControlModel>/Hoa/valueStateText}\" \r\n                        maxLength=\"{oControlModel>/Hoa/maxLength}\" \r\n                        type=\"{oControlModel>/Hoa/type}\"\r\n                        suggestionItems=\"{path: '/ZWRK_C_HOA', events: {dataReceived: '.onSuggestDataReceived'}}\"\r\n                        tooltip=\"{Hoa}\"\r\n                        id=\"Hoa\">\r\n                        <customData>\r\n                            <core:CustomData key=\"key\" value=\"Hoa\"/>\r\n                            <core:CustomData key=\"text\" value=\"Hoa\"/>\r\n                            <core:CustomData key=\"reqFields\" value=\"Hoa\"/>\r\n                            <core:CustomData key=\"entityInfo\" value=\"{entitySet: 'ZWRK_C_HOA', entityType: 'ZWRK_C_HOAType'}\"/>\r\n                            <core:CustomData key=\"filterArray\"\r\n                                value=\"{filter:[\r\n                                    {id: 'idCategory', key: 'category', value: 'Category'},\r\n                                    {id: 'idInitDept', key: 'dept', value: 'InitiatinDept'}\r\n                                ]}\"/>\r\n                            <core:CustomData key=\"mode\" value=\"SingleSelectMaster\"/>\t\t\t\t\r\n                        </customData>\r\n                        <suggestionItems>\r\n                            <core:Item key=\"{Hoa}\" text=\"{Hoa}\"/>\r\n                        </suggestionItems>\r\n                    </Input>\r\n                    <Input change=\"onDdoChange\"\r\n                        app:bindPath=\"Ddo\"\r\n                        selectedKey=\"{Ddo}\"\r\n                        required=\"{= ${oControlModel>/Ddo/mandatory}}\"\r\n                        showSuggestion=\"true\"\r\n                        showValueHelp=\"true\"\r\n                        suggest=\"handleSuggest\"\r\n                        valueHelpRequest=\"handleValueHelp\"\r\n                        editable=\"{= ${oControlModel>/Ddo/display} &amp;&amp; ${detailView>/bEditable} &amp;&amp; (${detailView>/SubmitBtnVisibility} === 'X' ? true: false)}\"\r\n                        valueState=\"{oControlModel>/Ddo/valueState}\" \r\n                        valueStateText=\"{oControlModel>/Ddo/valueStateText}\" \r\n                        maxLength=\"{oControlModel>/Ddo/maxLength}\" \r\n                        type=\"{oControlModel>/Ddo/type}\"\r\n                        suggestionItems=\"{/ZWRK_C_DDO}\"\r\n                        tooltip=\"{Ddo}\"\r\n                        id=\"Ddo\">\r\n                        <customData>\r\n                            <core:CustomData key=\"key\" value=\"fistl\"/>\r\n                            <core:CustomData key=\"text\" value=\"fistl\"/>\r\n                            <core:CustomData key=\"reqfields\" value=\"fistl\"/>\r\n                            <core:CustomData key=\"entityInfo\" value=\"{entitySet: 'ZWRK_C_DDO', entityType: 'ZWRK_C_DDOType'}\"/>\r\n                            <core:CustomData key=\"filterArray\"\r\n                                value=\"{filter:[\r\n                                    {id: 'idExecDept', key: 'fictr', value: 'ExecutingDept'}\r\n                                ]}\"/>\r\n                            <core:CustomData key=\"mode\" value=\"SingleSelectMaster\"/>\t\t\t\t\r\n                        </customData>\r\n                        <suggestionItems>\r\n                            <core:Item text=\"{fistl}\" key=\"{fistl}\" />\r\n                        </suggestionItems>\r\n                    </Input>\r\n                    <Input change=\"onDdoShareChange\"\r\n                        value=\"{Zshare}\" \r\n                        editable=\"{= ${oControlModel>/Zshare/display} &amp;&amp; ${detailView>/bEditable} &amp;&amp; (${detailView>/SubmitBtnVisibility} === 'X' ? true: false)}\"\r\n                        valueState=\"{= ${oControlModel>/Zshare/valueState}}\" \r\n                        valueStateText=\"{= ${oControlModel>/Zshare/valueStateText}}\" \r\n                        maxLength=\"{oControlModel>/Zshare/maxLength}\" \r\n                        type=\"{oControlModel>/Zshare/type}\"\r\n                        textAlign=\"Right\"\r\n                        tooltip=\"{Zshare}\"/>\r\n                    <Input change=\"onDdoChange\"\r\n                        value=\"{RefNumber}\" \r\n                        visible=\"false\"\r\n                        editable=\"{= ${oControlModel>/RefNumber/display} &amp;&amp; ${detailView>/bEditable} &amp;&amp; (${detailView>/SubmitBtnVisibility} === 'X' ? true: false)}\"\r\n                        liveChange=\"onFieldLiveChange\"\r\n                        valueState=\"{= ${oControlModel>/RefNumber/valueState}}\" \r\n                        valueStateText=\"{= ${oControlModel>/RefNumber/valueStateText}}\" \r\n                        maxLength=\"{oControlModel>/RefNumber/maxLength}\" \r\n                        type=\"{oControlModel>/RefNumber/type}\"\r\n                        textAlign=\"Right\"\r\n                        tooltip=\"{RefNumber}\"/>\r\n                    <DatePicker \r\n                        id=\"ValidFrom\" \r\n                        app:bindPath=\"ValidFrom\" \r\n                        value = \"{path:'ValidFrom', type:'sap.ui.model.type.Date', formatOptions: { style: 'medium', strictParsing: true, UTC: true}}\" \r\n                        change=\"onDdoChange\" \r\n                        editable=\"{= ${detailView>/bEditable} &amp;&amp; (${detailView>/SubmitBtnVisibility} === 'X' ? true: false)}\"/>\r\n                    <DatePicker \r\n                        id=\"ValidTo\" \r\n                        app:bindPath=\"ValidTo\" \r\n                        value = \"{path:'ValidTo', type:'sap.ui.model.type.Date', formatOptions: { style: 'medium', strictParsing: true, UTC: true}}\" \r\n                        change=\"onDdoChange\" \r\n                        editable=\"{= ${detailView>/bEditable} &amp;&amp; (${detailView>/SubmitBtnVisibility} === 'X' ? true: false)}\"/>\r\n                    <Button icon=\"sap-icon://delete\" tooltip=\"{i18n>tooltip.delFromTable}\" type=\"Transparent\" press=\"onDeleteDDO\" visible=\"{= ${detailView>/bEditable} &amp;&amp; (${detailView>/SubmitBtnVisibility} === 'X' ? true: false)}\"/>\r\n                </cells> \r\n            </ColumnListItem>\r\n        </items>\r\n    </Table>\r\n</core:FragmentDefinition>",
		"com/goap/cfms/works/as/fragment/checkListAttachment.fragment.xml": "<core:FragmentDefinition height=\"100%\" xmlns:layout=\"sap.ui.layout\" xmlns:form=\"sap.ui.layout.form\" xmlns:core=\"sap.ui.core\" xmlns=\"sap.m\">\r\n\t<Dialog title=\"{i18n>master.frag.title.createas}\" contentHeight=\"40%\" contentWidth=\"40%\">\r\n\t\t<content>\r\n\t\t<Input id=\"idDocCategory\" visible=\"false\"/>\r\n\t\t\t<UploadCollection\r\n\t\t\t\tid=\"idChecklistUploadCollection\"\r\n\t\t\t\tmultiple=\"true\"\r\n\t\t\t\tchange=\"onChange\"\r\n\t\t\t\tfileType=\"jpg,jpeg,png,bmp,pdf\"\r\n\t\t\t\tsameFilenameAllowed=\"true\"\r\n\t\t\t\tfileDeleted=\"onFileDeleted\"\r\n\t\t\t\tfilenameLengthExceed=\"onFilenameLengthExceed\"\r\n\t\t\t\tfileRenamed=\"onFileRenamed\"\r\n\t\t\t\tfileSizeExceed=\"onFileSizeExceed\"\r\n\t\t\t\tselectionChange=\"onSelectionChange\"\r\n\t\t\t\ttypeMissmatch=\"onTypeMissmatch\"\r\n\t\t\t\tuploadButtonInvisible=\"{= (${detailView>/bEditable} &amp;&amp; (${detailView>/SubmitBtnVisibility} === 'X' ? true: false)) ? false : true}\"\r\n\t\t\t\tinstantUpload=\"true\"\r\n\t\t\t\tuploadComplete=\"onUploadCompleteCheckList\"\r\n\t\t\t\tbeforeUploadStarts=\"onBeforeChecklistUploadStarts\"\r\n\t\t\t\tuploadTerminated=\"onUploadTerminated\"\r\n\t\t\t\titems=\"{\r\n\t\t\t\t\tpath: '/WrkAttachmentsSet',\r\n\t\t\t\t\ttemplateShareable: false\r\n\t\t\t\t}\"\r\n\t\t\t\tuploadUrl=\"/sap/opu/odata/sap/ZGW_WRK_ADM_SANC_SRV/WrkAttachmentsSet\"\r\n\t\t\t\tnumberOfAttachmentsText=\"Uploaded (8)\"\r\n\t\t\t\t>\r\n\t\t\t\t<toolbar>\r\n\t\t\t\t\t<OverflowToolbar>\r\n\t\t\t\t\t\t<Title />\r\n\t\t\t\t\t\t<ToolbarSpacer />\r\n\t\t\t\t\t\t<!-- <SearchField width=\"10rem\" search=\"onSearch\" /> -->\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tid=\"idDeleteSelectedButton\"\r\n\t\t\t\t\t\t\ttext=\"Delete\"\r\n\t\t\t\t\t\t\tpress=\"onDeleteSelectedItems\"\r\n\t\t\t\t\t\t\tenabled=\"false\"\r\n\t\t\t\t\t\t\tvisible=\"false\"\r\n\t\t\t\t\t\t\ttype=\"Transparent\" />\r\n\t\t\t\t\t\t<ToggleButton\r\n\t\t\t\t\t\t\tid=\"selectAllButton\"\r\n\t\t\t\t\t\t\ttext=\"Select all\"\r\n\t\t\t\t\t\t\tpress=\"onSelectAllPress\"\r\n\t\t\t\t\t\t\tenabled=\"false\"\r\n\t\t\t\t\t\t\tvisible=\"false\"\r\n\t\t\t\t\t\t\ttype=\"Transparent\" />\r\n\t\t\t\t\t\t<UploadCollectionToolbarPlaceholder />\r\n\t\t\t\t\t</OverflowToolbar>\r\n\t\t\t\t</toolbar>\r\n\t\t\t\t<items>\r\n\t\t\t\t\t<UploadCollectionItem\r\n\t\t\t\t\t\tdocumentId=\"{DmsGuid}\"\r\n\t\t\t\t\t\tvisibleDelete=\"false\"\r\n\t\t\t\t\t\tvisibleEdit=\"false\"\r\n\t\t\t\t\t\tfileName=\"{Filename}\"\r\n\t\t\t\t\t\turl=\"/sap/opu/odata/sap/ZGW_WRK_ADM_SANC_SRV/WrkAttachmentsSet(DmsGuid=guid'{DmsGuid}',DocGuid=guid'{DocGuid}',DocType='ZWAS')/$value\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t<attributes>\r\n\t\t\t\t\t\t    <ObjectAttribute title=\"{i18n>detail.attachment.UploadedBy}\" text=\"{UploadedBy}\" active=\"false\" />\r\n\t\t\t\t\t\t    <ObjectAttribute title=\"{i18n>detail.attachment.UpoadedOn}\" text=\"{path: 'UploadedDatetime', type: 'sap.ui.model.type.DateTime'}\" active=\"false\" />\r\n\t\t\t\t\t\t    <ObjectAttribute title=\"{i18n>detail.attachment.DocumentType}\" text=\"{MimeType}\" active=\"false\" />\r\n\t\t\t\t\t\t</attributes>\r\n\t\t\t\t\t\t<statuses>\r\n\t\t\t\t\t\t\t<ObjectStatus title=\"{i18n>detail.ops.panel.content.textArea.Reason}\"\r\n\t\t\t\t\t\t\t\ttext=\"{Reason}\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</statuses>\r\n\t\t\t\t\t</UploadCollectionItem>\r\n\t\t\t\t</items>\r\n\t\t\t</UploadCollection>\t\r\n\t\t</content>\r\n\t\t<buttons>\r\n\t\t\t<Button text=\"{i18n>master.frag.action.OK}\" press=\"onCancelChecklistFrag\"></Button>\r\n\t\t\t<!-- <Button text=\"{i18n>master.frag.action.cancel}\" press=\"onCancelChecklistFrag\"></Button> -->\r\n\t\t</buttons>\r\n\t</Dialog>\r\n</core:FragmentDefinition>",
		"com/goap/cfms/works/as/fragment/hoaVH.fragment.xml": "<core:FragmentDefinition\r\n\txmlns=\"sap.m\"\r\n\txmlns:core=\"sap.ui.core\">\r\n\t<SelectDialog\r\n\t\ttitle=\"{i18n>detail.ops.panel.content.table.column.vh.title.hoa}\"\r\n\t\tmultiSelect = \"false\"\r\n\t\trememberSelections = \"true\"\r\n\t\tliveChange=\"handleHOADDOSearch\"\r\n        search=\"handleHOADDOSearch\"\r\n\t\tconfirm=\"onHOADDOSelect\"\r\n\t\tcancel=\"handleHOADDOClose\">\r\n        \r\n\t</SelectDialog>\r\n</core:FragmentDefinition>",
		"com/goap/cfms/works/as/fragment/additionalNoteReference.fragment.xml": "<core:FragmentDefinition height=\"100%\" xmlns:rte=\"sap.ui.richtexteditor\" xmlns:core=\"sap.ui.core\" xmlns=\"sap.m\">\n\t<Dialog title=\"Reference - Addtional Note\" contentHeight=\"50%\" contentWidth=\"50%\">\n\t\t<content>\n\t\t\t<rte:RichTextEditor editable=\"{= (${detailView>/stateId} !== 'D') &amp;&amp; (${detailView>/SubmitBtnVisibility} === 'X' ? true : true )}\"\n\t\t\t\tvalue=\"{detailView>/ReferenceaddNotingstring}\" width=\"100%\" height=\"25rem\" customToolbar=\"true\" showGroupFont=\"true\" showGroupLink=\"true\"\n\t\t\t\tshowGroupInsert=\"true\"></rte:RichTextEditor>\n\t\t</content>\n\t\t<buttons>\n\t\t\t<Button text=\"{i18n>detail.frag.action.save}\" press=\"onSaveAdditionalNoteReference\" type=\"Accept\"\n\t\t\t\tvisible=\"{= (${detailView>/stateId} !== 'D') }\"></Button>\n\t\t\t<Button text=\"{i18n>detail.frag.action.cancel}\" press=\"onCancelAdditionalNoteReference\"></Button>\n\t\t</buttons>\n\t</Dialog>\n</core:FragmentDefinition>",
		"com/goap/cfms/works/as/fragment/EditMigratedASDialog.fragment.xml": "<!-- \r\n\r\n Copyright (coffee) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n\r\n -->\r\n<core:FragmentDefinition height=\"100%\" xmlns:l=\"sap.ui.layout\" xmlns:f=\"sap.ui.layout.form\" xmlns:u=\"sap.ui.unified\"\r\n\txmlns:core=\"sap.ui.core\" xmlns=\"sap.m\" xmlns:app=\"http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1\">\r\n\t<Dialog title=\"{i18n>master.frag.createMigratedAS.dialog.title}\" contentWidth=\"100%\" busy=\"{masterView>/busy}\"\r\n\t\tafterClose=\"afterCloseAgmtCreateDialog\">\r\n\t\t<content>\r\n\t\t\t<Wizard id=\"wizardsteps\" finishButtonText=\"{i18n>master.frag.createMigratedAS.dialog.button.next}\" showNextButton=\"false\"\r\n\t\t\t\tstepActivate=\"onStepPress\">\r\n\t\t\t\t<WizardStep title=\"{i18n>master.frag.createMigratedAS.step1.title}\">\r\n\t\t\t\t\t<Label text=\"{i18n>master.frag.createMigratedAS.fileCategory}\" class=\"sapUiResponsiveMargin\" required=\"false\"/>\r\n\t\t\t\t\t<HBox justifyContent=\"Start\" class=\"sapUiMediumMarginBegin\">\r\n\t\t\t\t\t\t<RadioButtonGroup id=\"categoryfile\" selectedIndex=\"0\" columns=\"3\" app:Key=\"AgrCategory\" select=\"onRadioButtonGroupChange\">\r\n\t\t\t\t\t\t\t<buttons>\r\n\t\t\t\t\t\t\t\t<RadioButton editable=\"true\" id=\"goCategory\" text=\"{i18n>master.frag.createMigratedAS.goSanction}\" select=\"onRadioButtonSelect\"/>\r\n\t\t\t\t\t\t\t\t<RadioButton editable=\"true\" id=\"deptCategory\" text=\"{i18n>master.frag.createMigratedAS.deptSanction}\" select=\"onRadioButtonSelect\"/>\r\n\t\t\t\t\t\t\t</buttons>\r\n\t\t\t\t\t\t</RadioButtonGroup>\r\n\t\t\t\t\t</HBox>\r\n\t\t\t\t\t<l:Grid defaultSpan=\"XL6 L6 M6 S12\">\r\n\t\t\t\t\t\t<f:Form editable=\"true\" id=\"goSanctionForm\">\r\n\t\t\t\t\t\t\t<f:layout>\r\n\t\t\t\t\t\t\t\t<f:ResponsiveGridLayout class=\"noPadding\" labelSpanXL=\"12\" labelSpanL=\"12\" labelSpanM=\"12\" labelSpanS=\"12\" emptySpanXL=\"3\" emptySpanL=\"3\"\r\n\t\t\t\t\t\t\t\t\temptySpanM=\"3\" emptySpanS=\"3\" columnsXL=\"3\" columnsL=\"1\" columnsM=\"1\"/>\r\n\t\t\t\t\t\t\t</f:layout>\r\n\t\t\t\t\t\t\t<f:formContainers>\r\n\t\t\t\t\t\t\t\t<f:FormContainer id=\"SanctionNumber1\" visible=\"true\">\r\n\t\t\t\t\t\t\t\t\t<f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t<Label text='{i18n>master.frag.createMigratedAS.number}' required=\"false\"/>\r\n\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t<Input id=\"sancNo\" editable=\"true\"></Input>\r\n\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t<f:FormContainer id=\"SanctionNumber2\" visible=\"true\">\r\n\t\t\t\t\t\t\t\t\t<f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t<Label text='{i18n>master.frag.createMigratedAS.number}' required=\"false\"/>\r\n\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t<Input id=\"sancNo1\" editable=\"true\"></Input>\r\n\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t<f:FormContainer id=\"SanctionType\" visible=\"true\">\r\n\t\t\t\t\t\t\t\t\t<f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t<Label text='{i18n>master.frag.createMigratedAS.type}' required=\"false\"/>\r\n\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t<!--<Input id=\"ASTypeId\" editable=\"true\"></Input>-->\r\n\t\t\t\t\t\t\t\t\t\t\t<Select name=\"SanType\" id=\"ASTypeId\" editable=\"{migratedModel>/EditableField}\" items=\"{/ZWRK_C_MIG_GO}\" change=\"onSelectChange\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tselectedKey=\"{migratedModel>/type}\" forceSelection=\"false\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<core:Item text=\"{go_type}\" key=\"{go_type}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<customData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"{migratedModel>/type}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</customData>\r\n\t\t\t\t\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t<f:FormContainer visible=\"true\">\r\n\t\t\t\t\t\t\t\t\t<f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t<Label text='{i18n>master.frag.createMigratedAS.sanction.date}' required=\"false\"/>\r\n\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t<!--<Input id=\"SanctionDate\" name=\"SanDate\" editable=\"true\"></Input>-->\r\n\t\t\t\t\t\t\t\t\t\t\t\t<DatePicker id=\"SanctionDate\" name=\"SanDate\" editable=\"{migratedModel>/EditableField}\" change=\"onMigratedDialogDateChange\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"DD.MM.YYYY\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"{migratedModel>/date}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisplayFormat=\"dd.MM.yyyy\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<customData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"{migratedModel>/date}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</customData>\r\n\t\t\t\t\t\t\t\t\t\t\t</DatePicker>\r\n\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t<f:FormContainer visible=\"true\">\r\n\t\t\t\t\t\t\t\t\t<f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t<Label text='{i18n>master.frag.createMigratedAS.dept}' required=\"false\"/>\r\n\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t<!--<Input id=\"SanctionDept\" editable=\"true\"></Input>-->\r\n\t\t\t\t\t\t\t\t\t\t\t<Input name=\"SanDepartment\" id=\"SanctionDept\" selectedKey=\"{migratedModel>/beschr}\" value=\"{migratedModel>/dept}\" showValueHelp=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalueHelpOnly=\"true\" editable=\"true\" liveChange=\"handleLiveChange\" suggestionItems=\"{/ZWRK_MIG_AS_SAN_DEPT_C}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalueHelpRequest=\"handleValueHelp\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<customData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"key\" value=\"dept\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"text\" value=\"beschr\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"entityInfo\" value=\"{entitySet: 'ZWRK_MIG_AS_SAN_DEPT_C', entityType: 'ZWRK_MIG_AS_SAN_DEPT_CType'}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"filterArray\" value=\"{filter:[]}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"mode\" value=\"SingleSelectMaster\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</customData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<suggestionItems>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<core:Item text=\"{dept} - {beschr}\" key=\"{dept} - {beschr}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</suggestionItems>\r\n\t\t\t\t\t\t\t\t\t\t\t</Input>\r\n\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t</f:formContainers>\r\n\t\t\t\t\t\t</f:Form>\r\n\t\t\t\t\t\t<f:Form editable=\"true\" id=\"goSanctionFormRight\">\r\n\t\t\t\t\t\t\t<f:layout>\r\n\t\t\t\t\t\t\t\t<f:ResponsiveGridLayout class=\"noPadding\" labelSpanXL=\"12\" labelSpanL=\"12\" labelSpanM=\"12\" labelSpanS=\"12\" emptySpanXL=\"3\" emptySpanL=\"3\"\r\n\t\t\t\t\t\t\t\t\temptySpanM=\"3\" emptySpanS=\"3\" columnsXL=\"3\" columnsL=\"1\" columnsM=\"1\"/>\r\n\t\t\t\t\t\t\t</f:layout>\r\n\t\t\t\t\t\t\t<f:formContainers>\r\n\t\t\t\t\t\t\t\t<f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t<f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t<Label text='{i18n>master.frag.createMigratedAS.Authority}' required=\"false\"/>\r\n\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t<!--<Input id=\"sanAuthority\" editable=\"true\"></Input>-->\r\n\t\t\t\t\t\t\t\t\t\t\t<Input id=\"sanAuthority\" editable=\"true\" name=\"SanAuthority\" value=\"{migratedModel>/authority}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalueHelpRequest=\"onhandleSanctionAuthority\" showValueHelp=\"true\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<customData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"{migratedModel>/authority}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</customData>\r\n\t\t\t\t\t\t\t\t\t\t\t</Input>\r\n\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t<f:FormContainer id=\"SanctionAmountId\" visible=\"false\">\r\n\t\t\t\t\t\t\t\t\t<f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t<Label text='{i18n>master.frag.createMigratedAS.sanctionAmount}' required=\"false\"/>\r\n\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t<Input id=\"sancAmount\" editable=\"true\" maxLength=\"11\" name=\"SanAmount\"></Input>\r\n\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t<f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t<f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t<Label text='{i18n>master.frag.createMigratedAS.amount}' required=\"false\"/>\r\n\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t<Input editable=\"true\" id=\"goAmount\"></Input>\r\n\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t<f:FormContainer visible=\"false\">\r\n\t\t\t\t\t\t\t\t\t<f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t<Label text='{i18n>master.frag.createMigratedAS.fileUpload}'/>\r\n\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t<CheckBox id=\"fileUpload\" select=\"onCheckBoxSelect\"/>\r\n\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t</f:formContainers>\r\n\t\t\t\t\t\t</f:Form>\r\n\t\t\t\t\t</l:Grid>\r\n\t\t\t\t</WizardStep>\r\n\t\t\t</Wizard>\r\n\t\t\t<Table id=\"TableBelowForm\" items=\"{TableModel>/results}\" visible=\"true\">\r\n\t\t\t\t<headerToolbar>\r\n\t\t\t\t\t<OverflowToolbar>\r\n\t\t\t\t\t\t<ToolbarSpacer/>\r\n\t\t\t\t\t\t<!--visible=\"{TableModel>AddButtnVisible}\"-->\r\n\t\t\t\t\t\t<Button id=\"OnpressAddNew\" icon=\"sap-icon://add\" press=\"OnpressAddnewRow\"/>\r\n\t\t\t\t\t</OverflowToolbar>\r\n\t\t\t\t</headerToolbar>\r\n\t\t\t\t<columns textAlign=\"Center\">\r\n\t\t\t\t\t<Column>\r\n\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t<Label text=\"Migrated AS Number\" textAlign=\"Center\"/>\r\n\t\t\t\t\t\t</header>\r\n\t\t\t\t\t</Column>\r\n\t\t\t\t\t<Column>\r\n\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t<Label text=\"Sanction Amount\" textAlign=\"Center\"/>\r\n\t\t\t\t\t\t</header>\r\n\t\t\t\t\t</Column>\r\n\t\t\t\t\t<Column>\r\n\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t<Label text=\"AS Description\" textAlign=\"Center\"/>\r\n\t\t\t\t\t\t</header>\r\n\t\t\t\t\t</Column>\r\n\t\t\t\t\t<Column>\r\n\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t<Label text=\"Sanction Reference Number\" textAlign=\"Center\"/>\r\n\t\t\t\t\t\t</header>\r\n\t\t\t\t\t</Column>\r\n\t\t\t\t\t<Column>\r\n\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t<Label textAlign=\"Center\"/>\r\n\t\t\t\t\t\t</header>\r\n\t\t\t\t\t</Column>\r\n\t\t\t\t</columns>\r\n\t\t\t\t<ColumnListItem vAlign=\"Middle\">\r\n\t\t\t\t\t<cells>\r\n\t\t\t\t\t\t<Input value=\"{TableModel>MigASEditNumber}\" placeholder=\"{i18n>master.frag.popup.placeholder.migraedASPlaceholder}\" showValueHelp=\"true\"\r\n\t\t\t\t\t\t\tvalueHelpOnly=\"true\" editable=\"{TableModel>MigCDSEditable}\" liveChange=\"handleLiveChange\" suggestionItems=\"{/ZWRK_C_OLD_AS}\"\r\n\t\t\t\t\t\t\tvalueHelpRequest=\"handleValueHelp\">\r\n\t\t\t\t\t\t\t<customData>\r\n\t\t\t\t\t\t\t\t<core:CustomData key=\"text\" value=\"project_id\"/>\r\n\t\t\t\t\t\t\t\t<core:CustomData key=\"key\" value=\"prj_desc\"/>\r\n\t\t\t\t\t\t\t\t<core:CustomData key=\"reqFields\" value=\"bezeich\"/>\r\n\t\t\t\t\t\t\t\t<core:CustomData key=\"text\" value=\"san_amt\"/>\r\n\t\t\t\t\t\t\t\t<core:CustomData key=\"entityInfo\" value=\"{entitySet: 'ZWRK_C_OLD_AS', entityType: 'ZWRK_C_OLD_ASType'}\"/>\r\n\t\t\t\t\t\t\t\t<core:CustomData key=\"filterArray\" value=\"{filter:[]}\"/>\r\n\t\t\t\t\t\t\t\t<core:CustomData key=\"mode\" value=\"MultiSelect\"/>\r\n\t\t\t\t\t\t\t</customData>\r\n\t\t\t\t\t\t\t<suggestionItems>\r\n\t\t\t\t\t\t\t\t<core:item text=\"{project_id}\" key=\"{project_id}\"/>\r\n\t\t\t\t\t\t\t</suggestionItems>\r\n\t\t\t\t\t\t</Input>\r\n\t\t\t\t\t\t<Input value=\"{TableModel>SancEditAmunt}\" editable=\"{TableModel>SanEditAmntEditable}\" placeholder=\"Please Enter Sanction Amount\"></Input>\r\n\t\t\t\t\t\t<Input id=\"ASDescr\" value=\"{TableModel>ASEditDescription}\" editable=\"true\"></Input>\r\n\t\t\t\t\t\t<Input id=\"SanctionDescr\" value=\"{TableModel>SanctionEditRefe}\" editable=\"true\"></Input>\r\n\t\t\t\t\t\t<Button id=\"DeleteRow\" icon=\"sap-icon://delete\" visible=\"{TableModel>DelteEditable}\" press=\"OnpressDelete\"/>\r\n\t\t\t\t\t\t<!--visible=\"{TableModel>SanEditAmntEditable}\"-->\r\n\t\t\t\t\t</cells>\r\n\t\t\t\t</ColumnListItem>\r\n\t\t\t</Table>\r\n\t\t</content>\r\n\t\t<buttons>\r\n\t\t\t<Button id=\"UpdateBtnId\" text=\"Update\" press=\"onUpdateMigratedAS\" visible=\"true\" type=\"Emphasized\"></Button>\r\n\t\t\t<Button id=\"CancelBtnId\" text=\"Cancel\" press=\"OnPressCloseFrag\" visible=\"true\"></Button>\r\n\t\t\t<Button id=\"OkBtnId\" text=\"Ok\" press=\"OnPressOkCloseFrag\" visible=\"false\"></Button>\r\n\t\t</buttons>\r\n\t</Dialog>\r\n</core:FragmentDefinition>",
		"com/goap/cfms/works/as/fragment/picCodeVH.fragment.xml": "<core:FragmentDefinition\r\n\txmlns=\"sap.m\"\r\n\txmlns:core=\"sap.ui.core\">\r\n\t<SelectDialog\r\n\t\ttitle=\"{i18n>detail.ops.panel.content.table.column.vh.title.picCode}\"\r\n\t\tmultiSelect = \"false\"\r\n\t\trememberSelections = \"true\"\r\n\t\tliveChange=\"handleHOADDOSearch\"\r\n        search=\"handleHOADDOSearch\"\r\n\t\tconfirm=\"onHOADDOSelect\"\r\n\t\tcancel=\"handleHOADDOClose\">\r\n        \r\n\t</SelectDialog>\r\n</core:FragmentDefinition>",
		"com/goap/cfms/works/as/fragment/sacauthority.fragment.xml": "<core:FragmentDefinition xmlns=\"sap.m\" xmlns:core=\"sap.ui.core\">\r\n\t<SelectDialog id=\"sacauthority\" confirm=\"sacauthorityConfirm\" class=\"SanctionAuthorityDialog\" liveChange=\"sacauthoritySearch\" items=\"{sacauthmodel>/results}\">\r\n\t\t<StandardListItem title=\"{sacauthmodel>Auth_Pos}\" description=\"{sacauthmodel>Name_Pos}\" info=\"{sacauthmodel>Org_Text}\"/>\r\n\t</SelectDialog>\r\n</core:FragmentDefinition>",
		"com/goap/cfms/works/as/fragment/changeLog.fragment.xml": "<core:FragmentDefinition\r\n\theight=\"50%\"\r\n\txmlns:layout=\"sap.ui.layout\"\r\n\txmlns:core=\"sap.ui.core\"\r\n\txmlns=\"sap.m\"\r\n    xmlns:f=\"sap.ui.layout.form\"\r\n\txmlns:l=\"sap.ui.layout\">\r\n    <Dialog title=\"{i18n>frag.changeLog.title}\"\r\n\t\tcontentHeight=\"80%\"\r\n        contentWidth=\"80%\">\r\n        <content>\r\n            <Panel>\r\n\t\t\t\t<Table id=\"idProductsTable\" fixedLayout=\"true\">\r\n        \t\t\t<columns>\r\n\t\t\t\t\t\t<Column width=\"5rem\">\r\n\t\t\t\t\t\t\t<Text text=\"User\" />\r\n\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t<Column width=\"5rem\">\r\n\t\t\t\t\t\t\t<Text text=\"Change Date\" />\r\n\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t<Column width=\"5rem\">\r\n\t\t\t\t\t\t\t<Text text=\"Type\" />\r\n\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t<Column width=\"7rem\">\r\n\t\t\t\t\t\t\t<Text text=\"Short Description\" />\r\n\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t<Column width=\"5rem\">\r\n\t\t\t\t\t\t\t<Text text=\"EstimateVal\" />\r\n\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t<Column width=\"5rem\">\r\n\t\t\t\t\t\t\t<Text text=\"Govt Order No.\" />\r\n\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t<Column width=\"5rem\">\r\n\t\t\t\t\t\t\t<Text text=\"Govt Order Ref Date\" />\r\n\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t<Column width=\"5rem\">\r\n\t\t\t\t\t\t\t<Text text=\"Category\" />\r\n\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t<Column width=\"5rem\">\r\n\t\t\t\t\t\t\t<Text text=\"Local Class\" />\r\n\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t<Column width=\"5rem\">\r\n\t\t\t\t\t\t\t<Text text=\"Status Text\" />\r\n\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t<Column width=\"5rem\">\r\n\t\t\t\t\t\t\t<Text text=\"Main Work Nature\" />\r\n\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t<Column width=\"5rem\">\r\n\t\t\t\t\t\t\t<Text text=\"Sub Class 01\" />\r\n\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t<Column width=\"5rem\">\r\n\t\t\t\t\t\t\t<Text text=\"Sub Class 02\" />\r\n\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t<Column width=\"5rem\">\r\n\t\t\t\t\t\t\t<Text text=\"Sub Class 03\" />\r\n\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t<Column width=\"9rem\">\r\n\t\t\t\t\t\t\t<Text text=\"Initiating Dept\" />\r\n\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t<Column width=\"7rem\">\r\n\t\t\t\t\t\t\t<Text text=\"Scheme\" />\r\n\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t<Column width=\"5rem\">\r\n\t\t\t\t\t\t\t<Text text=\"Stage\" />\r\n\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t<Column width=\"5rem\">\r\n\t\t\t\t\t\t\t<Text text=\"Executing Dept\" />\r\n\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t<Column width=\"5rem\">\r\n\t\t\t\t\t\t\t<Text text=\"BcRatio\" />\r\n\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t<Column width=\"5rem\">\r\n\t\t\t\t\t\t\t<Text text=\"Agency\" />\r\n\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t<Column width=\"5rem\">\r\n\t\t\t\t\t\t\t<Text text=\"Ref Order No\" />\r\n\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t<Column width=\"5rem\">\r\n\t\t\t\t\t\t\t<Text text=\"Ref Date\" />\r\n\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t<Column width=\"5rem\">\r\n\t\t\t\t\t\t\t<Text text=\"Value Sactioned\" />\r\n\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t<Column width=\"5rem\">\r\n\t\t\t\t\t\t\t<Text text=\"Currency Sanctioned\" />\r\n\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t<Column width=\"5rem\">\r\n\t\t\t\t\t\t\t<Text text=\"Approve Order\" />\r\n\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t<Column width=\"5rem\">\r\n\t\t\t\t\t\t\t<Text text=\"Approve Date\" />\r\n\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t<Column width=\"5rem\">\r\n\t\t\t\t\t\t\t<Text text=\"Approve Status\" />\r\n\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t<Column width=\"5rem\">\r\n\t\t\t\t\t\t\t<Text text=\"District\" />\r\n\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t<Column width=\"5rem\">\r\n\t\t\t\t\t\t\t<Text text=\"Mandal\" />\r\n\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t<Column width=\"5rem\">\r\n\t\t\t\t\t\t\t<Text text=\"Village\" />\r\n\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t<Column width=\"5rem\">\r\n\t\t\t\t\t\t\t<Text text=\"Loksabha\" />\r\n\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t<Column width=\"5rem\">\r\n\t\t\t\t\t\t\t<Text text=\"Ref As Type\" />\r\n\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t<Column width=\"5rem\">\r\n\t\t\t\t\t\t\t<Text text=\"Funding Agency\" />\r\n\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t<Column width=\"5rem\">\r\n\t\t\t\t\t\t\t<Text text=\"Refern Agency\" />\r\n\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t<Column width=\"5rem\">\r\n\t\t\t\t\t\t\t<Text text=\"Ref Number\" />\r\n\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t<Column width=\"5rem\">\r\n\t\t\t\t\t\t\t<Text text=\"DcwType\" />\r\n\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t</columns>\r\n\t\t\t\t\t<items>\r\n\t\t\t\t\t\t<!-- <ColumnListItem id=\"idChangeLogColumnList\">\r\n\t\t\t\t\t\t\t<cells>\r\n\t\t\t\t\t\t\t\t<ObjectIdentifier\r\n\t\t\t\t\t\t\t\t\ttitle=\"{Date}\"/>\r\n\t\t\t\t\t\t\t\t<Text\r\n\t\t\t\t\t\t\t\t\ttext=\"{User}\" />\r\n\t\t\t\t\t\t\t\t<Text\r\n\t\t\t\t\t\t\t\t\ttext=\"{EstimateVal}\" />\r\n\t\t\t\t\t\t\t</cells>\r\n\t\t\t\t\t\t</ColumnListItem> -->\r\n\t\t\t\t\t</items>\r\n\t\t\t\t</Table>\r\n            </Panel>\r\n        </content>\r\n        <buttons>\r\n            <Button text=\"{i18n>frag.changeLog.ok}\" press=\"onCloseChangeLogDialog\"></Button>\r\n        </buttons>\r\n    </Dialog>\r\n</core:FragmentDefinition>",
		"com/goap/cfms/works/as/fragment/createMigratedASDialog.fragment.xml": "<!-- \r\n\r\n Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n\r\n -->\r\n<core:FragmentDefinition height=\"100%\" xmlns:l=\"sap.ui.layout\" xmlns:f=\"sap.ui.layout.form\" xmlns:u=\"sap.ui.unified\"\r\n\txmlns:core=\"sap.ui.core\" xmlns=\"sap.m\" xmlns:app=\"http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1\">\r\n\t<Dialog title=\"{i18n>master.frag.createMigratedAS.dialog.title}\" contentWidth=\"100%\" busy=\"{masterView>/busy}\"\r\n\t\tafterClose=\"afterCloseAgmtCreateDialog\">\r\n\t\t<content>\r\n\t\t\t<Wizard id=\"wizardsteps\" finishButtonText=\"{i18n>master.frag.createMigratedAS.dialog.button.next}\" showNextButton=\"false\"\r\n\t\t\t\tstepActivate=\"onStepPress\">\r\n\t\t\t\t<WizardStep title=\"{i18n>master.frag.createMigratedAS.step1.title}\">\r\n\t\t\t\t\t<Label text=\"{i18n>master.frag.createMigratedAS.fileCategory}\" class=\"sapUiResponsiveMargin\"\r\n\t\t\t\t\t\trequired=\"{oControlModel>/AgrCategory/mandatory}\"/>\r\n\t\t\t\t\t<HBox justifyContent=\"Start\" class=\"sapUiMediumMarginBegin\">\r\n\t\t\t\t\t\t<RadioButtonGroup id=\"categoryfile\" selectedIndex=\"0\" columns=\"3\" app:Key=\"AgrCategory\" select=\"onRadioButtonGroupChange\">\r\n\t\t\t\t\t\t\t<buttons>\r\n\t\t\t\t\t\t\t\t<RadioButton editable=\"{migratedModel>/EditableField}\" id=\"goCategory\" text=\"{i18n>master.frag.createMigratedAS.goSanction}\"\r\n\t\t\t\t\t\t\t\t\tselect=\"onRadioButtonSelect\"/>\r\n\t\t\t\t\t\t\t\t<RadioButton editable=\"{migratedModel>/EditableField}\" id=\"deptCategory\" text=\"{i18n>master.frag.createMigratedAS.deptSanction}\"\r\n\t\t\t\t\t\t\t\t\tselect=\"onRadioButtonSelect\"/>\r\n\t\t\t\t\t\t\t</buttons>\r\n\t\t\t\t\t\t\t<customData>\r\n\t\t\t\t\t\t\t\t<core:CustomData key=\"{oControlModel>/AgrCategory/mandatory}\"/>\r\n\t\t\t\t\t\t\t</customData>\r\n\t\t\t\t\t\t</RadioButtonGroup>\r\n\t\t\t\t\t</HBox>\r\n\t\t\t\t\t<l:Grid defaultSpan=\"XL6 L6 M6 S12\">\r\n\t\t\t\t\t\t<f:Form editable=\"true\" id=\"goSanctionForm\">\r\n\t\t\t\t\t\t\t<f:layout>\r\n\t\t\t\t\t\t\t\t<f:ResponsiveGridLayout class=\"noPadding\" labelSpanXL=\"12\" labelSpanL=\"12\" labelSpanM=\"12\" labelSpanS=\"12\" emptySpanXL=\"3\" emptySpanL=\"3\"\r\n\t\t\t\t\t\t\t\t\temptySpanM=\"3\" emptySpanS=\"3\" columnsXL=\"3\" columnsL=\"1\" columnsM=\"1\"/>\r\n\t\t\t\t\t\t\t</f:layout>\r\n\t\t\t\t\t\t\t<f:formContainers>\r\n\t\t\t\t\t\t\t\t<f:FormContainer visible=\"{createNewASModel>/sancno1}\">\r\n\t\t\t\t\t\t\t\t\t<f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t<Label visible=\"{createNewASModel>/sancno1}\" text='{i18n>master.frag.createMigratedAS.number}' required=\"true\"/>\r\n\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t<Input visible=\"{createNewASModel>/sancno1}\" id=\"sancNo\" name=\"SanNumber\" change=\"onMigratedDialogInputChange\" maxLength=\"4\"\r\n\t\t\t\t\t\t\t\t\t\t\t\teditable=\"{migratedModel>/EditableField}\" value=\"{path: 'migratedModel>/number', formatter: '.formatter.sancNoInput'}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<customData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"{migratedModel>/number}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</customData>\r\n\t\t\t\t\t\t\t\t\t\t\t</Input>\r\n\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t<f:FormContainer visible=\"{createNewASModel>/sancno2}\">\r\n\t\t\t\t\t\t\t\t\t<f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t<Label visible=\"{createNewASModel>/sancno2}\" text='{i18n>master.frag.createMigratedAS.number}' required=\"true\"/>\r\n\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t<Input maxLength=\"15\" visible=\"{createNewASModel>/sancno2}\" id=\"sancNo1\" name=\"SanNumber\" change=\"onMigratedDialogInputChange\"\r\n\t\t\t\t\t\t\t\t\t\t\t\teditable=\"{migratedModel>/EditableField}\" value=\"{path: 'migratedModel>/number', formatter: '.formatter.sancNoInput'}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<customData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"{migratedModel>/number}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</customData>\r\n\t\t\t\t\t\t\t\t\t\t\t</Input>\r\n\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t<f:FormContainer visible=\"{createNewASModel>/typeVisible}\">\r\n\t\t\t\t\t\t\t\t\t<f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t<Label text='{i18n>master.frag.createMigratedAS.type}' required=\"true\"/>\r\n\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t<Select name=\"SanType\" id=\"idMigratedASType\" editable=\"{migratedModel>/EditableField}\" items=\"{/ZWRK_C_MIG_GO}\" change=\"onSelectChange\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tselectedKey=\"{migratedModel>/type}\" forceSelection=\"false\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<core:Item text=\"{go_type}\" key=\"{go_type}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<customData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"{migratedModel>/type}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</customData>\r\n\t\t\t\t\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t<f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t<f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t<Label text='{i18n>master.frag.createMigratedAS.sanction.date}' required=\"true\"/>\r\n\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t<DatePicker id=\"sancDate\" name=\"SanDate\" editable=\"{migratedModel>/EditableField}\" change=\"onMigratedDialogDateChange\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"DD.MM.YYYY\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"{path :'migratedModel>/date', type:'sap.ui.model.type.Date', formatOptions: { style: 'medium', strictParsing: true, UTC: true}}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisplayFormat=\"dd.MM.yyyy\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<customData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"{migratedModel>/date}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</customData>\r\n\t\t\t\t\t\t\t\t\t\t\t</DatePicker>\r\n\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t<f:FormContainer >\r\n\t\t\t\t\t\t\t\t\t<f:FormElement visible=\"{masterView>/bAmendTS}\">\r\n\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t<Label text='{i18n>master.frag.createMigratedAS.dept}' required=\"true\"/>\r\n\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t<!--\t<Select name=\"SanDepartment\" id=\"sancDept\" editable=\"{migratedModel>/EditableField}\" items=\"{/ZWRK_MIG_AS_SAN_DEPT_C}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tchange=\"onSelectChange\" selectedKey=\"{migratedModel>/dept}\" forceSelection=\"false\" value=\"{migratedModel>/dept}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<core:Item text=\"{dept} - {beschr}\" key=\"{dept}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<customData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"{migratedModel>/dept}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</customData>\r\n\t\t\t\t\t\t\t\t\t\t\t</Select>-->\r\n\t\t\t\t\t\t\t\t\t\t\t<Input name=\"SanDepartment\" id=\"sancDept\" selectedKey=\"{migratedModel>/beschr}\" value=\"{migratedModel>/dept}\" showValueHelp=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalueHelpOnly=\"true\" editable=\"{migratedModel>/EditableField}\" liveChange=\"handleLiveChange\" suggestionItems=\"{/ZWRK_MIG_AS_SAN_DEPT_C}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalueHelpRequest=\"handleValueHelp\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<customData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"key\" value=\"dept\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"text\" value=\"beschr\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"entityInfo\" value=\"{entitySet: 'ZWRK_MIG_AS_SAN_DEPT_C', entityType: 'ZWRK_MIG_AS_SAN_DEPT_CType'}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"filterArray\" value=\"{filter:[]}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"mode\" value=\"SingleSelectMaster\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</customData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<suggestionItems>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<core:Item text=\"{dept} - {beschr}\" key=\"{dept} - {beschr}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</suggestionItems>\r\n\t\t\t\t\t\t\t\t\t\t\t</Input>\r\n\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t</f:formContainers>\r\n\t\t\t\t\t\t</f:Form>\r\n\t\t\t\t\t\t<f:Form editable=\"true\" id=\"goSanctionFormRight\">\r\n\t\t\t\t\t\t\t<f:layout>\r\n\t\t\t\t\t\t\t\t<f:ResponsiveGridLayout class=\"noPadding\" labelSpanXL=\"12\" labelSpanL=\"12\" labelSpanM=\"12\" labelSpanS=\"12\" emptySpanXL=\"3\" emptySpanL=\"3\"\r\n\t\t\t\t\t\t\t\t\temptySpanM=\"3\" emptySpanS=\"3\" columnsXL=\"3\" columnsL=\"1\" columnsM=\"1\"/>\r\n\t\t\t\t\t\t\t</f:layout>\r\n\t\t\t\t\t\t\t<f:formContainers>\r\n\t\t\t\t\t\t\t\t<f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t<f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t<Label text='{i18n>master.frag.createMigratedAS.Authority}' required=\"true\"/>\r\n\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t<Input id=\"sanAuthority\" editable=\"{migratedModel>/EditableField}\" name=\"SanAuthority\" value=\"{migratedModel>/authority}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalueHelpRequest=\"onhandleSanctionAuthority\" showValueHelp=\"true\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<customData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"{migratedModel>/authority}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</customData>\r\n\t\t\t\t\t\t\t\t\t\t\t</Input>\r\n\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t<f:FormContainer visible=\"{createNewASModel>/migratedSanctionVisible}\">\r\n\t\t\t\t\t\t\t\t\t<f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t<Label id=\"SanctionAmountId\" visible=\"{createNewASModel>/migratedSanctionVisible}\" text='{i18n>master.frag.createMigratedAS.sanctionAmount}'\r\n\t\t\t\t\t\t\t\t\t\t\t\trequired=\"true\"/>\r\n\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t<Input id=\"sancAmount\" editable=\"{migratedModel>/EditableField}\" visible=\"{createNewASModel>/migratedSanctionVisible}\" maxLength=\"11\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tname=\"SanAmount\" change=\"onMigratedDialogInputChange\" value=\"{migratedModel>/sancAmount}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<customData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"{migratedModel>/sancAmount}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</customData>\r\n\t\t\t\t\t\t\t\t\t\t\t</Input>\r\n\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t<f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t<f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t<Label text='{i18n>master.frag.createMigratedAS.amount}' required=\"true\"/>\r\n\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t<Input editable=\"{migratedModel>/EditableField}\" id=\"goAmount\" maxLength=\"11\" name=\"GoAmount\" change=\"onMigratedDialogInputChange\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"{path: 'migratedModel>/goAmount', formatter: '.formatter.goAmountInput'}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<customData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"{migratedModel>/goAmount}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</customData>\r\n\t\t\t\t\t\t\t\t\t\t\t</Input>\r\n\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t\t<f:FormContainer>\r\n\t\t\t\t\t\t\t\t\t<f:FormElement>\r\n\t\t\t\t\t\t\t\t\t\t<f:label>\r\n\t\t\t\t\t\t\t\t\t\t\t<Label text='{i18n>master.frag.createMigratedAS.fileUpload}'/>\r\n\t\t\t\t\t\t\t\t\t\t</f:label>\r\n\t\t\t\t\t\t\t\t\t\t<f:fields>\r\n\t\t\t\t\t\t\t\t\t\t\t<CheckBox id=\"fileUpload\" select=\"onCheckBoxSelect\"/>\r\n\t\t\t\t\t\t\t\t\t\t</f:fields>\r\n\t\t\t\t\t\t\t\t\t</f:FormElement>\r\n\t\t\t\t\t\t\t\t</f:FormContainer>\r\n\t\t\t\t\t\t\t</f:formContainers>\r\n\t\t\t\t\t\t</f:Form>\r\n\t\t\t\t\t</l:Grid>\r\n\t\t\t\t</WizardStep>\r\n\t\t\t</Wizard>\r\n\t\t\t<Table items=\"{modelName>/results}\" visible=\"{createNewASModel>/migratedPhaseOneTabelVisible}\">\r\n\t\t\t\t<headerToolbar>\r\n\t\t\t\t\t<OverflowToolbar>\r\n\t\t\t\t\t\t<ToolbarSpacer/>\r\n\t\t\t\t\t\t<Button icon=\"sap-icon://add\" visible=\"{createNewASModel>/migratedPhaseOneTabelVisible}\" press=\"OnPressAddNewMigNumber\"></Button>\r\n\t\t\t\t\t</OverflowToolbar>\r\n\t\t\t\t</headerToolbar>\r\n\t\t\t\t<columns textAlign=\"Center\">\r\n\t\t\t\t\t<Column>\r\n\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t<Label text=\"Migrated AS Number\" textAlign=\"Center\"/>\r\n\t\t\t\t\t\t</header>\r\n\t\t\t\t\t</Column>\r\n\t\t\t\t\t<Column>\r\n\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t<Label text=\"Sanction Amount\" textAlign=\"Center\"/>\r\n\t\t\t\t\t\t</header>\r\n\t\t\t\t\t</Column>\r\n\t\t\t\t\t<Column>\r\n\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t<Label text=\"AS Description\" textAlign=\"Center\"/>\r\n\t\t\t\t\t\t</header>\r\n\t\t\t\t\t</Column>\r\n\t\t\t\t\t<Column>\r\n\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t<Label text=\"Sanction Reference Number\" textAlign=\"Center\"/>\r\n\t\t\t\t\t\t</header>\r\n\t\t\t\t\t</Column>\r\n\t\t\t\t\t<Column>\r\n\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t<Label textAlign=\"Center\"/>\r\n\t\t\t\t\t\t</header>\r\n\t\t\t\t\t</Column>\r\n\t\t\t\t</columns>\r\n\t\t\t\t<ColumnListItem vAlign=\"Middle\">\r\n\t\t\t\t\t<cells>\r\n\t\t\t\t\t\t<Input id=\"idMigratedASCode\" value=\"{modelName>MigASNumber}\" placeholder=\"{i18n>master.frag.popup.placeholder.migraedASPlaceholder}\"\r\n\t\t\t\t\t\t\tshowValueHelp=\"true\" valueHelpOnly=\"true\" editable=\"{modelName>MigASNumberEditable}\" liveChange=\"handleLiveChange\"\r\n\t\t\t\t\t\t\tsuggestionItems=\"{/ZWRK_C_OLD_AS}\" valueHelpRequest=\"handleValueHelp\">\r\n\t\t\t\t\t\t\t<customData>\r\n\t\t\t\t\t\t\t\t<core:CustomData key=\"text\" value=\"project_id\"/>\r\n\t\t\t\t\t\t\t\t<core:CustomData key=\"key\" value=\"prj_desc\"/>\r\n\t\t\t\t\t\t\t\t<core:CustomData key=\"reqFields\" value=\"bezeich\"/>\r\n\t\t\t\t\t\t\t\t<core:CustomData key=\"text\" value=\"san_amt\"/>\r\n\t\t\t\t\t\t\t\t<core:CustomData key=\"entityInfo\" value=\"{entitySet: 'ZWRK_C_OLD_AS', entityType: 'ZWRK_C_OLD_ASType'}\"/>\r\n\t\t\t\t\t\t\t\t<core:CustomData key=\"filterArray\" value=\"{filter:[]}\"/>\r\n\t\t\t\t\t\t\t\t<core:CustomData key=\"mode\" value=\"MultiSelect\"/>\r\n\t\t\t\t\t\t\t</customData>\r\n\t\t\t\t\t\t\t<suggestionItems>\r\n\t\t\t\t\t\t\t\t<core:Item text=\"{project_id}\" key=\"{project_id}\"/>\r\n\t\t\t\t\t\t\t</suggestionItems>\r\n\t\t\t\t\t\t</Input>\r\n\t\t\t\t\t\t<Input id=\"SanctionTableId\" value=\"{modelName>SancAmunt}\" placeholder=\"Please Enter Sanction Amount\"></Input>\r\n\t\t\t\t\t\t<Input id=\"ASDescription\" value=\"{modelName>ASDescription}\" editable=\"false\"></Input>\r\n\t\t\t\t\t\t<Input id=\"SanctionDescr\" value=\"{modelName>SanctionRefe}\" editable=\"false\"></Input>\r\n\t\t\t\t\t\t<Button id=\"DeleteRowInTable\" icon=\"sap-icon://delete\" press=\"onPressDeleteRowForSanction\"/>\r\n\t\t\t\t\t</cells>\r\n\t\t\t\t</ColumnListItem>\r\n\t\t\t</Table>\r\n\t\t</content>\r\n\t\t<buttons>\r\n\t\t\t<Button text=\"{i18n>master.frag.action.create}\" press=\"onCreateMigratedAS\" visible=\"{createNewASModel>/creatBtnVisible}\" type=\"Emphasized\"></Button>\r\n\t\t\t<Button text=\"{i18n>master.frag.action.cancel}\" press=\"onCancelMigratedAS\" visible=\"{createNewASModel>/cancelBtnVisible}\"></Button>\r\n\t\t</buttons>\r\n\t</Dialog>\r\n</core:FragmentDefinition>",
		"com/goap/cfms/works/as/fragment/massProcessNote.fragment.xml": "<core:FragmentDefinition height=\"100%\" xmlns:rte=\"sap.ui.richtexteditor\" xmlns:core=\"sap.ui.core\" xmlns=\"sap.m\">\r\n\t<Dialog id=\"idMassProcessNoteDialog\" title=\"{i18n>master.frag.title.massProcess}\" contentHeight=\"40%\" contentWidth=\"40%\">\r\n\t\t<content>\r\n\t\t\t<rte:RichTextEditor id=\"idRichTextNoteEditor\"\r\n\t\t\t\t\t\t\t\t\t\tvalue=\"{masterView>/Notingstring}\"\r\n\t\t\t\t\t\t\t\t\t\twidth= \"100%\" \r\n\t\t\t\t\t\t\t\t\t\theight=\"15rem\" \r\n\t\t\t\t\t\t\t\t\t\tcustomToolbar=\"true\"\r\n\t\t\t\t\t\t\t\t\t\tshowGroupFont= \"true\"\r\n\t\t\t\t\t\t\t\t\t\tshowGroupLink= \"true\"\r\n\t\t\t\t\t\t\t\t\t\tshowGroupInsert=\"true\">\r\n\t\t\t\t\t\t\t\t\t</rte:RichTextEditor>\t\r\n\t\t</content>\r\n\t\t<buttons>\r\n\t\t\t<Button text=\"{i18n>master.frag.action.process}\"  press=\"onMultiProcess\" type=\"Accept\"></Button>\r\n\t\t\t<Button text=\"{i18n>master.frag.action.cancel}\" press=\"onCancelMultiProcess\"></Button>\r\n\t\t</buttons>\r\n\t</Dialog>\r\n</core:FragmentDefinition>",
		"com/goap/cfms/works/as/fragment/Message.fragment.xml": "<core:FragmentDefinition\r\n    xmlns=\"sap.m\"\r\n    xmlns:core=\"sap.ui.core\">\r\n    <MessagePopover\r\n        items=\"{message>/}\"\r\n        initiallyExpanded=\"true\">\r\n        <MessageItem\r\n            type=\"{message>type}\"\r\n            title=\"{message>message}\"\r\n            subtitle=\"{message>additionalText}\"\r\n            description=\"{message>description}\"/>\r\n    </MessagePopover>\r\n</core:FragmentDefinition>",
		"com/goap/cfms/works/as/fragment/positionVH.fragment.xml": "<core:FragmentDefinition\r\n\txmlns=\"sap.m\"\r\n\txmlns:core=\"sap.ui.core\">\r\n\t<SelectDialog\r\n\t\ttitle=\"{i18n>i18n>detail.ops.panel.content.label.Position}\"\r\n\t\tmultiSelect = \"false\"\r\n\t\trememberSelections = \"true\"\r\n\t\tliveChange=\"handlePositionSearch\"\r\n        search=\"handlePositionSearch\"\r\n\t\tconfirm=\"OnPositionSelect\"\r\n\t\tcancel=\"handlePositionClose\">\r\n        \r\n\t</SelectDialog>\r\n</core:FragmentDefinition>",
		"com/goap/cfms/works/as/util/Constants.js": "/* \r\n * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\n/**\r\n * Contains all constants.\r\n */\r\nsap.ui.define([],\r\n\tfunction () {\r\n\t\t\"use strict\";\r\n\t\treturn {\r\n\t\t\tuserInputControls: {\r\n\t\t\t\tinputsForMigratedAgrFrag: [\"sancNo\", \"idMigratedASType\", \"sancDate\", \"sanAuthority\", \"sancAmount\", \"sancDept\", \"goAmount\"],\r\n\t\t\t\tinputs: [\"sancNo1\", \"sancDate\", \"sanAuthority\", \"sancAmount\", \"sancDept\", \"goAmount\"]\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n);",
		"com/goap/cfms/works/as/util/Constants-dbg.js": "/* \r\n * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\n/**\r\n * Contains all constants.\r\n */\r\nsap.ui.define([],\r\n\tfunction () {\r\n\t\t\"use strict\";\r\n\t\treturn {\r\n\t\t\tuserInputControls: {\r\n\t\t\t\tinputsForMigratedAgrFrag: [\"sancNo\", \"idMigratedASType\", \"sancDate\", \"sanAuthority\", \"sancAmount\", \"sancDept\", \"goAmount\"],\r\n\t\t\t\tinputs: [\"sancNo1\", \"sancDate\", \"sanAuthority\", \"sancAmount\", \"sancDept\", \"goAmount\"]\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n);"
	}
});